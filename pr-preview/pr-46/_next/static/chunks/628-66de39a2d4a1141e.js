(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[628],{12e3:function(e,t,r){"use strict";r.r(t),r.d(t,{ACTION_PREFIX:function(){return c},ADDRESS_PREFIX:function(){return tT},ActionTypes:function(){return d},FORWARD:function(){return tE},MapStateActions:function(){return a},MapStyleActions:function(){return i},ProviderActionTypes:function(){return tr},ProviderActions:function(){return l},UIStateActions:function(){return o},VisStateActions:function(){return n},_actionFor:function(){return tC},_updateProperty:function(){return tx},addCustomMapStyle:function(){return e0},addDataToMap:function(){return td},addEffect:function(){return I},addFilter:function(){return L},addLayer:function(){return C},addNotification:function(){return eZ},applyCPUFilter:function(){return ev},applyLayerConfig:function(){return f},cleanupExportImage:function(){return eY},copyTableColumn:function(){return V},deleteEntry:function(){return tR},deleteFeature:function(){return ey},duplicateLayer:function(){return R},editCustomMapStyle:function(){return e1},exportFileError:function(){return to},exportFileSuccess:function(){return ta},exportFileToCloud:function(){return tn},fitBounds:function(){return eL},forwardTo:function(){return t_},getActionForwardAddress:function(){return tS},hideExportDropdown:function(){return ek},inputMapStyle:function(){return e3},interactionConfigChange:function(){return T},isForwardAction:function(){return tP},keplerGlInit:function(){return tg},layerColorUIChange:function(){return b},layerConfigChange:function(){return p},layerSetIsValid:function(){return y},layerTextLabelChange:function(){return g},layerTypeChange:function(){return h},layerVisConfigChange:function(){return m},layerVisualChannelConfigChange:function(){return v},loadCloudMap:function(){return tu},loadCloudMapError:function(){return ts},loadCloudMapSuccess:function(){return tc},loadCustomMapStyle:function(){return e9},loadFileStepSuccess:function(){return es},loadFiles:function(){return el},loadFilesErr:function(){return ed},loadFilesSuccess:function(){return ec},loadMapStyleErr:function(){return e6},loadMapStyles:function(){return e7},loadNextFile:function(){return eu},mapConfigChange:function(){return e4},mapStyleChange:function(){return e8},nextFileBatch:function(){return eb},onLayerClick:function(){return et},onLayerHover:function(){return ee},onMapClick:function(){return er},onMouseMove:function(){return en},openDeleteModal:function(){return ej},pinTableColumn:function(){return U},postSaveLoadSuccess:function(){return ti},processFileContent:function(){return eO},receiveMapConfig:function(){return tp},registerEntry:function(){return tD},removeCustomMapStyle:function(){return e2},removeDataset:function(){return F},removeEffect:function(){return w},removeFilter:function(){return x},removeLayer:function(){return D},removeNotification:function(){return eN},renameDataset:function(){return Y},renameEntry:function(){return tI},reorderEffect:function(){return k},reorderLayer:function(){return _},replaceDataInMap:function(){return ty},requestMapStyles:function(){return e5},resetMapConfig:function(){return tf},resetProviderStatus:function(){return tl},set3dBuildingColor:function(){return te},setBackgroundColor:function(){return tt},setColumnDisplayFormat:function(){return G},setEditorMode:function(){return eh},setExportData:function(){return eq},setExportDataType:function(){return eH},setExportFiltered:function(){return eW},setExportHTMLMapMode:function(){return eJ},setExportImageDataUri:function(){return eG},setExportImageError:function(){return eB},setExportImageSetting:function(){return eU},setExportMapFormat:function(){return eX},setExportSelectedDataset:function(){return ez},setFeatures:function(){return ef},setFilter:function(){return S},setFilterAnimationTime:function(){return A},setFilterAnimationTimeConfig:function(){return eT},setFilterAnimationWindow:function(){return P},setFilterPlot:function(){return eo},setFilterView:function(){return Q},setLayerAnimationTime:function(){return q},setLayerAnimationTimeConfig:function(){return eE},setLocale:function(){return eQ},setMapControlVisibility:function(){return eF},setMapInfo:function(){return ei},setPolygonFilterLayer:function(){return ep},setSelectedFeature:function(){return eg},setUserMapboxAccessToken:function(){return eK},showDatasetTable:function(){return j},showExportDropdown:function(){return eI},sortTableColumn:function(){return N},startExportingImage:function(){return eV},toggleEditorVisibility:function(){return em},toggleFilterAnimation:function(){return H},toggleFilterFeature:function(){return $},toggleLayerAnimation:function(){return X},toggleLayerAnimationControl:function(){return J},toggleLayerForMap:function(){return ea},toggleMapControl:function(){return eM},toggleModal:function(){return eR},togglePanelListView:function(){return e$},togglePerspective:function(){return eP},toggleSidePanel:function(){return eD},toggleSidePanelCloseButton:function(){return ew},toggleSplitMap:function(){return e_},toggleSplitMapViewport:function(){return ex},unwrap:function(){return tL},updateDatasetProps:function(){return z},updateEffect:function(){return M},updateFilterAnimationSpeed:function(){return W},updateLayerAnimationSpeed:function(){return K},updateLayerBlending:function(){return O},updateMap:function(){return eC},updateOverlayBlending:function(){return E},updateTableColor:function(){return Z},updateVisData:function(){return B},wrapTo:function(){return tA}});var n={};r.r(n),r.d(n,{addEffect:function(){return I},addFilter:function(){return L},addLayer:function(){return C},applyCPUFilter:function(){return ev},applyLayerConfig:function(){return f},copyTableColumn:function(){return V},deleteFeature:function(){return ey},duplicateLayer:function(){return R},interactionConfigChange:function(){return T},layerColorUIChange:function(){return b},layerConfigChange:function(){return p},layerSetIsValid:function(){return y},layerTextLabelChange:function(){return g},layerTypeChange:function(){return h},layerVisConfigChange:function(){return m},layerVisualChannelConfigChange:function(){return v},loadFileStepSuccess:function(){return es},loadFiles:function(){return el},loadFilesErr:function(){return ed},loadFilesSuccess:function(){return ec},loadNextFile:function(){return eu},nextFileBatch:function(){return eb},onLayerClick:function(){return et},onLayerHover:function(){return ee},onMapClick:function(){return er},onMouseMove:function(){return en},pinTableColumn:function(){return U},processFileContent:function(){return eO},removeDataset:function(){return F},removeEffect:function(){return w},removeFilter:function(){return x},removeLayer:function(){return D},renameDataset:function(){return Y},reorderEffect:function(){return k},reorderLayer:function(){return _},setColumnDisplayFormat:function(){return G},setEditorMode:function(){return eh},setFeatures:function(){return ef},setFilter:function(){return S},setFilterAnimationTime:function(){return A},setFilterAnimationTimeConfig:function(){return eT},setFilterAnimationWindow:function(){return P},setFilterPlot:function(){return eo},setFilterView:function(){return Q},setLayerAnimationTime:function(){return q},setLayerAnimationTimeConfig:function(){return eE},setMapInfo:function(){return ei},setPolygonFilterLayer:function(){return ep},setSelectedFeature:function(){return eg},showDatasetTable:function(){return j},sortTableColumn:function(){return N},toggleEditorVisibility:function(){return em},toggleFilterAnimation:function(){return H},toggleFilterFeature:function(){return $},toggleLayerAnimation:function(){return X},toggleLayerAnimationControl:function(){return J},toggleLayerForMap:function(){return ea},updateDatasetProps:function(){return z},updateEffect:function(){return M},updateFilterAnimationSpeed:function(){return W},updateLayerAnimationSpeed:function(){return K},updateLayerBlending:function(){return O},updateOverlayBlending:function(){return E},updateTableColor:function(){return Z},updateVisData:function(){return B}});var a={};r.r(a),r.d(a,{fitBounds:function(){return eL},togglePerspective:function(){return eP},toggleSplitMap:function(){return e_},toggleSplitMapViewport:function(){return ex},updateMap:function(){return eC}});var o={};r.r(o),r.d(o,{addNotification:function(){return eZ},cleanupExportImage:function(){return eY},hideExportDropdown:function(){return ek},openDeleteModal:function(){return ej},removeNotification:function(){return eN},setExportData:function(){return eq},setExportDataType:function(){return eH},setExportFiltered:function(){return eW},setExportHTMLMapMode:function(){return eJ},setExportImageDataUri:function(){return eG},setExportImageError:function(){return eB},setExportImageSetting:function(){return eU},setExportMapFormat:function(){return eX},setExportSelectedDataset:function(){return ez},setLocale:function(){return eQ},setMapControlVisibility:function(){return eF},setUserMapboxAccessToken:function(){return eK},showExportDropdown:function(){return eI},startExportingImage:function(){return eV},toggleMapControl:function(){return eM},toggleModal:function(){return eR},togglePanelListView:function(){return e$},toggleSidePanel:function(){return eD},toggleSidePanelCloseButton:function(){return ew}});var i={};r.r(i),r.d(i,{addCustomMapStyle:function(){return e0},editCustomMapStyle:function(){return e1},inputMapStyle:function(){return e3},loadCustomMapStyle:function(){return e9},loadMapStyleErr:function(){return e6},loadMapStyles:function(){return e7},mapConfigChange:function(){return e4},mapStyleChange:function(){return e8},removeCustomMapStyle:function(){return e2},requestMapStyles:function(){return e5},set3dBuildingColor:function(){return te},setBackgroundColor:function(){return tt}});var l={};r.r(l),r.d(l,{ActionTypes:function(){return tr},exportFileError:function(){return to},exportFileSuccess:function(){return ta},exportFileToCloud:function(){return tn},loadCloudMap:function(){return tu},loadCloudMapError:function(){return ts},loadCloudMapSuccess:function(){return tc},postSaveLoadSuccess:function(){return ti},resetProviderStatus:function(){return tl}});var u,c="@@kepler.gl/",s={REGISTER_ENTRY:"".concat(c,"REGISTER_ENTRY"),DELETE_ENTRY:"".concat(c,"DELETE_ENTRY"),RENAME_ENTRY:"".concat(c,"RENAME_ENTRY"),ADD_DATA:"".concat(c,"ADD_DATA"),ADD_FILTER:"".concat(c,"ADD_FILTER"),ADD_LAYER:"".concat(c,"ADD_LAYER"),APPLY_LAYER_CONFIG:"".concat(c,"APPLY_LAYER_CONFIG"),DUPLICATE_LAYER:"".concat(c,"DUPLICATE_LAYER"),INTERACTION_CONFIG_CHANGE:"".concat(c,"INTERACTION_CONFIG_CHANGE"),LAYER_CONFIG_CHANGE:"".concat(c,"LAYER_CONFIG_CHANGE"),LAYER_SET_IS_VALID:"".concat(c,"LAYER_SET_IS_VALID"),LAYER_VISUAL_CHANNEL_CHANGE:"".concat(c,"LAYER_VISUAL_CHANNEL_CHANGE"),LAYER_TYPE_CHANGE:"".concat(c,"LAYER_TYPE_CHANGE"),LAYER_VIS_CONFIG_CHANGE:"".concat(c,"LAYER_VIS_CONFIG_CHANGE"),LAYER_TEXT_LABEL_CHANGE:"".concat(c,"LAYER_TEXT_LABEL_CHANGE"),LAYER_HOVER:"".concat(c,"LAYER_HOVER"),LAYER_CLICK:"".concat(c,"LAYER_CLICK"),MAP_CLICK:"".concat(c,"MAP_CLICK"),MOUSE_MOVE:"".concat(c,"MOUSE_MOVE"),REMOVE_FILTER:"".concat(c,"REMOVE_FILTER"),REMOVE_LAYER:"".concat(c,"REMOVE_LAYER"),REMOVE_DATASET:"".concat(c,"REMOVE_DATASET"),REORDER_LAYER:"".concat(c,"REORDER_LAYER"),SET_FILTER:"".concat(c,"SET_FILTER"),SET_FILTER_ANIMATION_TIME:"".concat(c,"SET_FILTER_ANIMATION_TIME"),SET_FILTER_ANIMATION_TIME_CONFIG:"".concat(c,"SET_FILTER_ANIMATION_TIME_CONFIG"),SET_FILTER_ANIMATION_WINDOW:"".concat(c,"SET_FILTER_ANIMATION_WINDOW"),SHOW_DATASET_TABLE:"".concat(c,"SHOW_DATASET_TABLE"),UPDATE_LAYER_BLENDING:"".concat(c,"UPDATE_LAYER_BLENDING"),UPDATE_OVERLAY_BLENDING:"".concat(c,"UPDATE_OVERLAY_BLENDING"),UPDATE_VIS_DATA:"".concat(c,"UPDATE_VIS_DATA"),RENAME_DATASET:"".concat(c,"RENAME_DATASET"),UPDATE_DATASET_PROPS:"".concat(c,"UPDATE_DATASET_PROPS"),TOGGLE_FILTER_ANIMATION:"".concat(c,"TOGGLE_FILTER_ANIMATION"),UPDATE_FILTER_ANIMATION_SPEED:"".concat(c,"UPDATE_FILTER_ANIMATION_SPEED"),PLAY_ANIMATION:"".concat(c,"PLAY_ANIMATION"),SET_LAYER_ANIMATION_TIME:"".concat(c,"SET_LAYER_ANIMATION_TIME"),SET_LAYER_ANIMATION_TIME_CONFIG:"".concat(c,"SET_LAYER_ANIMATION_TIME_CONFIG"),UPDATE_ANIMATION_SPEED:"".concat(c,"UPDATE_ANIMATION_SPEED"),UPDATE_LAYER_ANIMATION_SPEED:"".concat(c,"UPDATE_LAYER_ANIMATION_SPEED"),TOGGLE_LAYER_ANIMATION:"".concat(c,"TOGGLE_LAYER_ANIMATION"),TOGGLE_LAYER_ANIMATION_CONTROL:"".concat(c,"TOGGLE_LAYER_ANIMATION_CONTROL"),TOGGLE_LAYER_CONFIG_ACTIVE:"".concat(c,"TOGGLE_LAYER_CONFIG_ACTIVE"),SET_FILTER_VIEW:"".concat(c,"SET_FILTER_VIEW"),TOGGLE_FILTER_FEATURE:"".concat(c,"TOGGLE_FILTER_FEATURE"),TOGGLE_LAYER_FOR_MAP:"".concat(c,"TOGGLE_LAYER_FOR_MAP"),SET_FILTER_PLOT:"".concat(c,"SET_FILTER_PLOT"),LOAD_FILES:"".concat(c,"LOAD_FILES"),LOAD_NEXT_FILE:"".concat(c,"LOAD_NEXT_FILE"),LOAD_BATCH_DATA_SUCCESS:"".concat(c,"LOAD_BATCH_DATA_SUCCESS"),LOAD_FILE_STEP_SUCCESS:"".concat(c,"LOAD_FILE_STEP_SUCCESS"),LOAD_FILES_ERR:"".concat(c,"LOAD_FILES_ERR"),LOAD_FILES_SUCCESS:"".concat(c,"LOAD_FILES_SUCCESS"),LAYER_COLOR_UI_CHANGE:"".concat(c,"LAYER_COLOR_UI_CHANGE"),TOGGLE_FEATURE_LAYER:"".concat(c,"TOGGLE_FEATURE_LAYER"),APPLY_CPU_FILTER:"".concat(c,"APPLY_CPU_FILTER"),SET_MAP_INFO:"".concat(c,"SET_MAP_INFO"),SORT_TABLE_COLUMN:"".concat(c,"SORT_TABLE_COLUMN"),PIN_TABLE_COLUMN:"".concat(c,"PIN_TABLE_COLUMN"),COPY_TABLE_COLUMN:"".concat(c,"COPY_TABLE_COLUMN"),SET_COLUMN_DISPLAY_FORMAT:"".concat(c,"SET_COLUMN_DISPLAY_FORMAT"),NEXT_FILE_BATCH:"".concat(c,"NEXT_FILE_BATCH"),PROCESS_FILE_CONTENT:"".concat(c,"PROCESS_FILE_CONTENT"),UPDATE_TABLE_COLOR:"".concat(c,"UPDATE_TABLE_COLOR"),ADD_EFFECT:"".concat(c,"ADD_EFFECT"),REORDER_EFFECT:"".concat(c,"REORDER_EFFECT"),REMOVE_EFFECT:"".concat(c,"REMOVE_EFFECT"),UPDATE_EFFECT:"".concat(c,"UPDATE_EFFECT"),UPDATE_MAP:"".concat(c,"UPDATE_MAP"),FIT_BOUNDS:"".concat(c,"FIT_BOUNDS"),TOGGLE_PERSPECTIVE:"".concat(c,"TOGGLE_PERSPECTIVE"),TOGGLE_FULLSCREEN:"".concat(c,"TOGGLE_FULLSCREEN"),TOGGLE_SPLIT_MAP:"".concat(c,"TOGGLE_SPLIT_MAP"),TOGGLE_SPLIT_MAP_VIEWPORT:"".concat(c,"TOGGLE_SPLIT_MAP_VIEWPORT"),MAP_CONFIG_CHANGE:"".concat(c,"MAP_CONFIG_CHANGE"),SET_DEFAULT_MAP_STYLE:"".concat(c,"SET_DEFAULT_MAP_STYLE"),MAP_STYLE_CHANGE:"".concat(c,"MAP_STYLE_CHANGE"),LOAD_MAP_STYLES:"".concat(c,"LOAD_MAP_STYLES"),LOAD_MAP_STYLE_ERR:"".concat(c,"LOAD_MAP_STYLE_ERR"),INPUT_MAP_STYLE:"".concat(c,"INPUT_MAP_STYLE"),LOAD_CUSTOM_MAP_STYLE:"".concat(c,"LOAD_CUSTOM_MAP_STYLE"),ADD_CUSTOM_MAP_STYLE:"".concat(c,"ADD_CUSTOM_MAP_STYLE"),EDIT_CUSTOM_MAP_STYLE:"".concat(c,"EDIT_CUSTOM_MAP_STYLE"),REMOVE_CUSTOM_MAP_STYLE:"".concat(c,"REMOVE_CUSTOM_MAP_STYLE"),REQUEST_MAP_STYLES:"".concat(c,"REQUEST_MAP_STYLES"),SET_3D_BUILDING_COLOR:"".concat(c,"SET_3D_BUILDING_COLOR"),SET_BACKGROUND_COLOR:"".concat(c,"SET_BACKGROUND_COLOR"),TOGGLE_SIDE_PANEL:"".concat(c,"TOGGLE_SIDE_PANEL"),TOGGLE_MODAL:"".concat(c,"TOGGLE_MODAL"),SHOW_EXPORT_DROPDOWN:"".concat(c,"SHOW_EXPORT_DROPDOWN"),HIDE_EXPORT_DROPDOWN:"".concat(c,"HIDE_EXPORT_DROPDOWN"),TOGGLE_SIDE_PANEL_CLOSE_BUTTON:"".concat(c,"TOGGLE_SIDE_PANEL_CLOSE_BUTTON"),OPEN_DELETE_MODAL:"".concat(c,"OPEN_DELETE_MODAL"),TOGGLE_MAP_CONTROL:"".concat(c,"TOGGLE_MAP_CONTROL"),SET_MAP_CONTROL_VISIBILITY:"".concat(c,"SET_MAP_CONTROL_VISIBILITY"),ADD_NOTIFICATION:"".concat(c,"ADD_NOTIFICATION"),REMOVE_NOTIFICATION:"".concat(c,"REMOVE_NOTIFICATION"),SET_LOCALE:"".concat(c,"SET_LOCALE"),TOGGLE_PANEL_LIST_VIEW:"".concat(c,"TOGGLE_PANEL_LIST_VIEW"),SET_EXPORT_IMAGE_SETTING:"".concat(c,"SET_EXPORT_IMAGE_SETTING"),START_EXPORTING_IMAGE:"".concat(c,"START_EXPORTING_IMAGE"),SET_EXPORT_IMAGE_DATA_URI:"".concat(c,"SET_EXPORT_IMAGE_DATA_URI"),SET_EXPORT_IMAGE_ERROR:"".concat(c,"SET_EXPORT_IMAGE_ERROR"),CLEANUP_EXPORT_IMAGE:"".concat(c,"CLEANUP_EXPORT_IMAGE"),SET_EXPORT_VIDEO_SETTING:"".concat(c,"SET_EXPORT_VIDEO_SETTING"),SET_EXPORT_SELECTED_DATASET:"".concat(c,"SET_EXPORT_SELECTED_DATASET"),SET_EXPORT_DATA_TYPE:"".concat(c,"SET_EXPORT_DATA_TYPE"),SET_EXPORT_FILTERED:"".concat(c,"SET_EXPORT_FILTERED"),SET_EXPORT_DATA:"".concat(c,"SET_EXPORT_DATA"),SET_EXPORT_MAP_FORMAT:"".concat(c,"SET_EXPORT_MAP_FORMAT"),SET_USER_MAPBOX_ACCESS_TOKEN:"".concat(c,"SET_USER_MAPBOX_ACCESS_TOKEN"),SET_EXPORT_MAP_HTML_MODE:"".concat(c,"SET_EXPORT_MAP_HTML_MODE"),SET_EDITOR_MODE:"".concat(c,"SET_EDITOR_MODE"),SET_SELECTED_FEATURE:"".concat(c,"SET_SELECTED_FEATURE"),INIT:"".concat(c,"INIT"),ADD_DATA_TO_MAP:"".concat(c,"ADD_DATA_TO_MAP"),RECEIVE_MAP_CONFIG:"".concat(c,"RECEIVE_MAP_CONFIG"),RESET_MAP_CONFIG:"".concat(c,"RESET_MAP_CONFIG"),REPLACE_DATA_IN_MAP:"".concat(c,"REPLACE_DATA_IN_MAP"),SET_FEATURES:"".concat(c,"SET_FEATURES"),SET_POLYGON_FILTER_LAYER:"".concat(c,"SET_POLYGON_FILTER_LAYER"),DELETE_FEATURE:"".concat(c,"DELETE_FEATURE"),TOGGLE_EDITOR_VISIBILITY:"".concat(c,"TOGGLE_EDITOR_VISIBILITY"),START_SAVE_STORAGE:"".concat(c,"START_SAVE_STORAGE")},d=s;function f(e,t,r){return{type:d.APPLY_LAYER_CONFIG,oldLayerId:e,newLayerConfig:t,layerIndex:r}}function p(e,t){return{type:d.LAYER_CONFIG_CHANGE,oldLayer:e,newConfig:t}}function g(e,t,r,n){return{type:d.LAYER_TEXT_LABEL_CHANGE,oldLayer:e,idx:t,prop:r,value:n}}function y(e,t){return{type:d.LAYER_SET_IS_VALID,oldLayer:e,isValid:t}}function h(e,t){return{type:d.LAYER_TYPE_CHANGE,oldLayer:e,newType:t}}function v(e,t,r){return{type:d.LAYER_VISUAL_CHANNEL_CHANGE,oldLayer:e,newConfig:t,channel:r}}function m(e,t){return{type:d.LAYER_VIS_CONFIG_CHANGE,oldLayer:e,newVisConfig:t}}function b(e,t,r){return{type:d.LAYER_COLOR_UI_CHANGE,oldLayer:e,prop:t,newConfig:r}}function O(e){return{type:d.UPDATE_LAYER_BLENDING,mode:e}}function E(e){return{type:d.UPDATE_OVERLAY_BLENDING,mode:e}}function T(e){return{type:d.INTERACTION_CONFIG_CHANGE,config:e}}function S(e,t,r,n){return{type:d.SET_FILTER,idx:e,prop:t,value:r,valueIndex:n}}function A(e,t,r,n){return{type:d.SET_FILTER_ANIMATION_TIME,idx:e,prop:t,value:r,valueIndex:n}}function P(e){var t=e.id,r=e.animationWindow;return{type:d.SET_FILTER_ANIMATION_WINDOW,id:t,animationWindow:r}}function L(e,t){return{type:d.ADD_FILTER,dataId:e,id:t}}function C(e,t){return{type:d.ADD_LAYER,config:e,datasetId:t}}function _(e){return{type:d.REORDER_LAYER,order:e}}function x(e){return{type:d.REMOVE_FILTER,idx:e}}function D(e){return{type:d.REMOVE_LAYER,id:e}}function R(e){return{type:d.DUPLICATE_LAYER,id:e}}function I(e){return{type:d.ADD_EFFECT,config:e}}function k(e){return{type:d.REORDER_EFFECT,order:e}}function w(e){return{type:d.REMOVE_EFFECT,id:e}}function M(e,t){return{type:d.UPDATE_EFFECT,id:e,props:t}}function F(e){return{type:d.REMOVE_DATASET,dataId:e}}function j(e){return{type:d.SHOW_DATASET_TABLE,dataId:e}}function Z(e,t){return{type:d.UPDATE_TABLE_COLOR,dataId:e,newColor:t}}function N(e,t,r){return{type:d.SORT_TABLE_COLUMN,dataId:e,column:t,mode:r}}function U(e,t){return{type:d.PIN_TABLE_COLUMN,dataId:e,column:t}}function V(e,t){return{type:d.COPY_TABLE_COLUMN,dataId:e,column:t}}function G(e,t){return{type:d.SET_COLUMN_DISPLAY_FORMAT,dataId:e,formats:t}}function B(e,t,r){return{type:d.UPDATE_VIS_DATA,datasets:e,options:t,config:r}}function Y(e,t){return{type:d.RENAME_DATASET,dataId:e,label:t}}function z(e,t){return{type:d.UPDATE_DATASET_PROPS,dataId:e,props:t}}function H(e){return{type:d.TOGGLE_FILTER_ANIMATION,idx:e}}function W(e,t){return{type:d.UPDATE_FILTER_ANIMATION_SPEED,idx:e,speed:t}}function q(e){return{type:d.SET_LAYER_ANIMATION_TIME,value:e}}function K(e){return{type:d.UPDATE_LAYER_ANIMATION_SPEED,speed:e}}function X(){return{type:d.TOGGLE_LAYER_ANIMATION}}function J(){return{type:d.TOGGLE_LAYER_ANIMATION_CONTROL}}function Q(e,t){return{type:d.SET_FILTER_VIEW,idx:e,view:t}}function $(e){return{type:d.TOGGLE_FILTER_FEATURE,idx:e}}function ee(e){return{type:d.LAYER_HOVER,info:e}}function et(e){return{type:d.LAYER_CLICK,info:e}}function er(){return{type:d.MAP_CLICK}}function en(e){return{type:d.MOUSE_MOVE,evt:e}}function ea(e,t){return{type:d.TOGGLE_LAYER_FOR_MAP,mapIndex:e,layerId:t}}function eo(e,t,r){return{type:d.SET_FILTER_PLOT,idx:e,newProp:t,valueIndex:r}}function ei(e){return{type:d.SET_MAP_INFO,info:e}}function el(e,t){return{type:d.LOAD_FILES,files:e,onFinish:t}}function eu(){return{type:d.LOAD_NEXT_FILE}}function ec(e){return{type:d.LOAD_FILES_SUCCESS,result:e}}function es(e){var t=e.fileName,r=e.fileCache;return{type:d.LOAD_FILE_STEP_SUCCESS,fileName:t,fileCache:r}}function ed(e,t){return{type:d.LOAD_FILES_ERR,fileName:e,error:t}}function ef(e){return{type:d.SET_FEATURES,features:e}}function ep(e,t){return{type:d.SET_POLYGON_FILTER_LAYER,layer:e,feature:t}}function eg(e,t){return{type:d.SET_SELECTED_FEATURE,feature:e,selectionContext:t}}function ey(e){return{type:d.DELETE_FEATURE,feature:e}}function eh(e){return{type:d.SET_EDITOR_MODE,mode:e}}function ev(e){return{type:d.APPLY_CPU_FILTER,dataId:e}}function em(){return{type:d.TOGGLE_EDITOR_VISIBILITY}}function eb(e){return{type:d.NEXT_FILE_BATCH,payload:e}}function eO(e){return{type:d.PROCESS_FILE_CONTENT,payload:e}}function eE(e){return{type:d.SET_LAYER_ANIMATION_TIME_CONFIG,config:e}}function eT(e,t){return{type:d.SET_FILTER_ANIMATION_TIME_CONFIG,idx:e,config:t}}var eS,eA=r(70133),eP=(0,eA.PH)(d.TOGGLE_PERSPECTIVE),eL=(0,eA.PH)(d.FIT_BOUNDS,function(e){return{payload:e}}),eC=(0,eA.PH)(d.UPDATE_MAP,function(e,t){return{payload:{viewport:e,mapIndex:t}}}),e_=(0,eA.PH)(d.TOGGLE_SPLIT_MAP,function(e){return{payload:e}}),ex=(0,eA.PH)(d.TOGGLE_SPLIT_MAP_VIEWPORT,function(e){return{payload:e}}),eD=(0,eA.PH)(d.TOGGLE_SIDE_PANEL,function(e){return{payload:e}}),eR=(0,eA.PH)(d.TOGGLE_MODAL,function(e){return{payload:e}}),eI=(0,eA.PH)(d.SHOW_EXPORT_DROPDOWN,function(e){return{payload:e}}),ek=(0,eA.PH)(d.HIDE_EXPORT_DROPDOWN),ew=(0,eA.PH)(d.TOGGLE_SIDE_PANEL_CLOSE_BUTTON,function(e){return{payload:{show:e}}}),eM=(0,eA.PH)(d.TOGGLE_MAP_CONTROL,function(e,t){return{payload:{panelId:e,index:t}}}),eF=(0,eA.PH)(d.SET_MAP_CONTROL_VISIBILITY,function(e,t){return{payload:{panelId:e,show:t}}}),ej=(0,eA.PH)(d.OPEN_DELETE_MODAL,function(e){return{payload:e}}),eZ=(0,eA.PH)(d.ADD_NOTIFICATION,function(e){return{payload:e}}),eN=(0,eA.PH)(d.REMOVE_NOTIFICATION,function(e){return{payload:e}}),eU=(0,eA.PH)(d.SET_EXPORT_IMAGE_SETTING,function(e){return{payload:e}}),eV=(0,eA.PH)(d.START_EXPORTING_IMAGE,function(e){return{payload:e}}),eG=(0,eA.PH)(d.SET_EXPORT_IMAGE_DATA_URI,function(e){return{payload:e}}),eB=(0,eA.PH)(d.SET_EXPORT_IMAGE_ERROR,function(e){return{payload:e}}),eY=(0,eA.PH)(d.CLEANUP_EXPORT_IMAGE),ez=(0,eA.PH)(d.SET_EXPORT_SELECTED_DATASET,function(e){return{payload:e}}),eH=(0,eA.PH)(d.SET_EXPORT_DATA_TYPE,function(e){return{payload:e}}),eW=(0,eA.PH)(d.SET_EXPORT_FILTERED,function(e){return{payload:e}}),eq=(0,eA.PH)(d.SET_EXPORT_DATA),eK=(0,eA.PH)(d.SET_USER_MAPBOX_ACCESS_TOKEN,function(e){return{payload:e}}),eX=(0,eA.PH)(d.SET_EXPORT_MAP_FORMAT,function(e){return{payload:e}}),eJ=(0,eA.PH)(d.SET_EXPORT_MAP_HTML_MODE,function(e){return{payload:e}}),eQ=(0,eA.PH)(d.SET_LOCALE,function(e){return{payload:{locale:e}}}),e$=(0,eA.PH)(d.TOGGLE_PANEL_LIST_VIEW,function(e){return{payload:e}}),e0=(0,eA.PH)(d.ADD_CUSTOM_MAP_STYLE),e1=(0,eA.PH)(d.EDIT_CUSTOM_MAP_STYLE),e2=(0,eA.PH)(d.REMOVE_CUSTOM_MAP_STYLE,function(e){return{payload:{id:e.id}}}),e3=(0,eA.PH)(d.INPUT_MAP_STYLE,function(e,t){return{payload:{inputStyle:e,mapState:t}}}),e4=(0,eA.PH)(d.MAP_CONFIG_CHANGE,function(e){return{payload:e}}),e5=(0,eA.PH)(d.REQUEST_MAP_STYLES,function(e,t){return{payload:{mapStyles:e,onSuccess:t}}}),e7=(0,eA.PH)(d.LOAD_MAP_STYLES,function(e,t){return{payload:{newStyles:e,onSuccess:t}}}),e6=(0,eA.PH)(d.LOAD_MAP_STYLE_ERR,function(e,t){return{payload:{ids:e,error:t}}}),e8=(0,eA.PH)(d.MAP_STYLE_CHANGE,function(e,t){return{payload:{styleType:e,onSuccess:t}}}),e9=(0,eA.PH)(d.LOAD_CUSTOM_MAP_STYLE,function(e){return{payload:e}}),te=(0,eA.PH)(d.SET_3D_BUILDING_COLOR,function(e){return{payload:e}}),tt=(0,eA.PH)(d.SET_BACKGROUND_COLOR,function(e){return{payload:e}}),tr=eS={EXPORT_FILE_TO_CLOUD:"".concat(c,"EXPORT_FILE_TO_CLOUD"),EXPORT_FILE_SUCCESS:"".concat(c,"EXPORT_FILE_SUCCESS"),EXPORT_FILE_ERROR:"".concat(c,"EXPORT_FILE_ERROR"),RESET_PROVIDER_STATUS:"".concat(c,"RESET_PROVIDER_STATUS"),POST_SAVE_LOAD_SUCCESS:"".concat(c,"POST_SAVE_LOAD_SUCCESS"),LOAD_CLOUD_MAP:"".concat(c,"LOAD_CLOUD_MAP"),LOAD_CLOUD_MAP_SUCCESS:"".concat(c,"LOAD_CLOUD_MAP_SUCCESS"),LOAD_CLOUD_MAP_ERROR:"".concat(c,"LOAD_CLOUD_MAP_ERROR")},tn=(0,eA.PH)(tr.EXPORT_FILE_TO_CLOUD,function(e){return{payload:e}}),ta=(0,eA.PH)(tr.EXPORT_FILE_SUCCESS,function(e){return{payload:e}}),to=(0,eA.PH)(tr.EXPORT_FILE_ERROR,function(e){return{payload:e}}),ti=(0,eA.PH)(tr.POST_SAVE_LOAD_SUCCESS,function(e){return{payload:e}}),tl=(0,eA.PH)(tr.RESET_PROVIDER_STATUS),tu=(0,eA.PH)(tr.LOAD_CLOUD_MAP,function(e){return{payload:e}}),tc=(0,eA.PH)(tr.LOAD_CLOUD_MAP_SUCCESS,function(e){return{payload:e}}),ts=(0,eA.PH)(tr.LOAD_CLOUD_MAP_ERROR,function(e){return{payload:e}}),td=(0,eA.PH)(d.ADD_DATA_TO_MAP,function(e){return{payload:e}}),tf=(0,eA.PH)(d.RESET_MAP_CONFIG),tp=(0,eA.PH)(d.RECEIVE_MAP_CONFIG,function(e,t){return{payload:{config:e,options:t}}}),tg=(0,eA.PH)(d.INIT,function(e){return{payload:e}}),ty=(0,eA.PH)(d.REPLACE_DATA_IN_MAP,function(e){return{payload:e}}),th=r(59499),tv=r(23650),tm=r.n(tv);function tb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tb(Object(r),!0).forEach(function(t){(0,th.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tb(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tE="@redux-forward/FORWARD",tT="@@KG_",tS=function(e){return"".concat(tT).concat(e.toUpperCase())},tA=tm()(function(e,t){return{type:t.type,payload:tO(tO({},t),{},{meta:tO(tO({},t.meta),{},{_id_:e})}),meta:tO(tO({},t.meta||{}),{},{_forward_:tE,_addr_:tS(e)})}}),tP=function(e){return Boolean(e&&e.meta&&e.meta._forward_===tE)},tL=function e(t){return tP(t)?e(t.payload):t},tC=function(e,t){return tP(t)?t.meta._addr_===tS(e)?t.payload:{}:t},t_=function(e,t){return function(r){return t(tA(e,r))}},tx=function(e,t,r){return e[t]===r?e:tO(tO({},e),{},(0,th.Z)({},t,r))},tD=(0,eA.PH)(d.REGISTER_ENTRY,function(e){return{payload:e}}),tR=(0,eA.PH)(d.DELETE_ENTRY,function(e){return{payload:e}}),tI=(0,eA.PH)(d.RENAME_ENTRY,function(e,t){return{payload:{oldId:e,newId:t}}})},57750:function(e,t,r){"use strict";r.r(t),r.d(t,{FILE_CONFLICT_MSG:function(){return S},KEPLER_FORMAT:function(){return T},Provider:function(){return A},Upload:function(){return O}});var n=r(50029),a=r(92777),o=r(82262),i=r(59499),l=r(87794),u=r.n(l),c=r(45959),s=r(63553),d=r(37247),f=r(67294),p=r(36864),g=r(4730),y=["height","width","viewBox","style","children","predefinedClassName","className","colors","totalColor"],h=f.createElement,v=function(){},m=function(e){(0,c.Z)(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(i);if(r){var n=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function i(){return(0,a.Z)(this,i),n.apply(this,arguments)}return(0,o.Z)(i,[{key:"render",value:function(){var e,t,r=this.props,n=r.height,a=r.width,o=r.viewBox,i=r.style,l=r.children,u=r.predefinedClassName,c=r.className,s=r.colors,d=r.totalColor,f=(0,g.Z)(r,y),m=Array.isArray(s)&&d&&Array(d).fill(1).reduce(function(e,t,r){return"".concat(e,".cr").concat(r+1," {fill:").concat(s[r%s.length],";}")},"");return h("svg",(0,p.Z)({viewBox:o,width:a||n,height:n,style:i,className:"".concat(u," ").concat(c),onClick:v},f),m?h("style",{type:"text/css"},m):null,l)}}]),i}(f.Component);(0,i.Z)(m,"displayName","Base Icon"),(0,i.Z)(m,"defaultProps",{height:null,width:null,viewBox:"0 0 64 64",predefinedClassName:"",className:"",style:{fill:"currentColor"}});var b=f.createElement,O=function(e){(0,c.Z)(i,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.Z)(i);if(r){var n=(0,d.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,s.Z)(this,e)});function i(){return(0,a.Z)(this,i),n.apply(this,arguments)}return(0,o.Z)(i,[{key:"render",value:function(){return b(m,this.props,b("path",{d:"M52 9v6a1 1 0 0 1-1 1H13a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h38a1 1 0 0 1 1 1zm-4 31L34.426 21.336a3 3 0 0 0-4.852 0L16 40h8v16h16V40h8z"}))}}]),i}(f.Component);(0,i.Z)(O,"defaultProps",{height:"16px",predefinedClassName:"data-ex-icons-upload"});var E={width:300,height:200},T="keplergl",S="file_conflict",A=function(){var e,t,r,l,c,s,d;function f(e){(0,a.Z)(this,f),(0,i.Z)(this,"name",void 0),(0,i.Z)(this,"displayName",void 0),(0,i.Z)(this,"icon",void 0),(0,i.Z)(this,"thumbnail",void 0),(0,i.Z)(this,"isNew",!1),this.name=e.name||"cloud-provider",this.displayName=e.displayName||"Cloud Provider",this.icon=e.icon||O,this.thumbnail=e.thumbnail||E}return(0,o.Z)(f,[{key:"hasPrivateStorage",value:function(){return!0}},{key:"hasSharingUrl",value:function(){return!1}},{key:"getShareUrl",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],""}},{key:"getMapUrl",value:function(e){return""}},{key:"getAccessToken",value:(e=(0,n.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject("You must implement getAccessToken"));case 1:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})},{key:"getUserName",value:function(){return""}},{key:"getUser",value:(t=(0,n.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject("You must implement getUser"));case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},{key:"getFileConflictError",value:function(){return Error(S)}},{key:"login",value:(r=(0,n.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject(Error("you must implement the `login` method")));case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"logout",value:(l=(0,n.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject(Error("you must implement the `logout` method")));case 1:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)})},{key:"uploadMap",value:(c=(0,n.Z)(u().mark(function e(t){var r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.mapData,t.options,e.abrupt("return",Promise.reject("You must implement uploadMap"));case 2:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)})},{key:"listMaps",value:(s=(0,n.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}},e)})),function(){return s.apply(this,arguments)})},{key:"downloadMap",value:(d=(0,n.Z)(u().mark(function e(t){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject("You must implement downloadMap"));case 1:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)})},{key:"getManagementUrl",value:function(){throw Error("You must implement getManagementUrl")}}]),f}()},53235:function(e,t,r){"use strict";r.d(t,{qt:function(){return el},iC:function(){return eg},BA:function(){return ev},$Q:function(){return eO},o2:function(){return eP},ws:function(){return eN},x8:function(){return eM},Di:function(){return S},We:function(){return eU}});var n,a=r(59499),o=r(92777),i=r(82262),l=r(45959),u=r(63553),c=r(37247),s=r(49657),d=r(5181),f=r(25585),p=r(26465),g=r(58342),y=r.n(g),h=r(76465),v=r(87187);function m(e,t,r,n,a){for(var o=a/512,i=0;i<n.length;i++){var l=n[i];n[i]=(0,v.es)([e+l[0]/o,t+l[1]/o],r)}}function b(e,t){var r,n,a=function(e){var t,r=e._pbf;r.pos=e._geometry;for(var n=r.readVarint()+r.pos,a=1,o=0,i=0,l=0,u=[];r.pos<n;){if(o<=0){var c=r.readVarint();a=7&c,o=c>>3}if(o--,1===a||2===a)i+=r.readSVarint(),l+=r.readSVarint(),1===a&&(t&&u.push(t),t=[]),t&&t.push([i,l]);else if(7===a)t&&t.push(t[0].slice());else throw Error("unknown command ".concat(a))}return t&&u.push(t),u}(e),o=e.extent;for(r=0,a=function(e){var t,r,n=e.length;if(n<=1)return[e];for(var a=[],o=0;o<n;o++){var i=O(e[o]);0!==i&&(void 0===r&&(r=i<0),r===i<0?(t&&a.push(t),t=[e[o]]):t&&t.push(e[o]))}return t&&a.push(t),a}(a);r<a.length;r++)for(n=0;n<a[r].length;n++)t(a[r][n],o);return a.map(function(t){return{coordinates:t,properties:e.properties}})}function O(e){for(var t,r,n=0,a=0,o=e.length,i=o-1;a<o;i=a++)t=e[a],n+=((r=e[i])[0]-t[0])*(t[1]+r[1]);return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"renderSubLayers",value:function(e){return new p.Z(T(T({},e),{},{parameters:{blendFunc:[s.default.SRC_ALPHA,s.default.ONE_MINUS_SRC_ALPHA,s.default.ONE,s.default.ONE_MINUS_SRC_ALPHA],blendEquation:[s.default.FUNC_ADD,s.default.FUNC_ADD]},extruded:!0,opacity:1,filled:!0,getElevation:function(e){return e.properties.height||0},getPolygon:function(e){return e.coordinates},getFillColor:this.props.threeDBuildingColor}))}},{key:"renderLayers",value:function(){var e=this;return[new f.Z({id:"".concat(this.id,"-deck-3d-building"),getTileData:function(t){var r,n,a,o,i,l,u;return r=e.props.mapboxApiUrl,n=e.props.mapboxApiAccessToken,i=(o=t.index).x,l=o.y,u=o.z,fetch("".concat(r||"https://a.tiles.mapbox.com").concat("/v4/mapbox.mapbox-streets-v7","/").concat(u,"/").concat(i,"/").concat(l,".vector.pbf?access_token=").concat(n)).then(function(e){return e.arrayBuffer()}).then(function(e){return function(e,t,r,n){var a,o=new h.VectorTile(new(y())(n)),i=[],l=m.bind(null,512*e,512*t,Math.pow(2,r)),u="building",c=o.layers[u];if(!c)return[];for(var s=0;s<c.length;s++){b(c.feature(s),l).forEach(function(e){e.properties.layer=u,e.properties.height&&i.push(e)})}return i}(i,l,u,e)})},minZoom:13,renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:this.props.updateTriggers})]}}]),a}(d.Z),A=r(71160),P=r(96219),L=r(22659),C=r(68178),_=r(37346),x=r(63157),D=r(24836),R=r(75485);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var k=(n={},(0,a.Z)(n,C.KM.SUM,R.AGGREGATION_TYPES.sum),(0,a.Z)(n,C.KM.MEAN,R.AGGREGATION_TYPES.average),(0,a.Z)(n,C.KM.MIN,R.AGGREGATION_TYPES.minimum),(0,a.Z)(n,C.KM.MAX,R.AGGREGATION_TYPES.maximum),n);function w(){}function M(e,t,r){var n,a,o,i=r.key,l=e.triggers,u=l.value,c=l.weight,s=l.aggregation,d=t[u.prop];null===d&&(n=t[s.prop],a=t[c.prop],n&&C.KM[n.toUpperCase()]||x.console.warn("Aggregation ".concat(n," is not supported")),o=k[C.KM[n.toUpperCase()]||C.KM.SUM],d=function(e){return(0,D.aggregate)(e.map(a),o)}),d&&this._setDimensionState(i,{getValue:d})}function F(e,t,r){var n=r.key,a=this.state.dimensions[n].getValue,o=new _.Z(this.state.layerData.data||[],{getValue:a,filterData:t._filterData});this._setDimensionState(n,{sortedBins:o})}function j(e,t,r){var n=r.key,a=e.triggers,o=a.lowerPercentile,i=a.upperPercentile,l=a.scaleType;if(this.state.dimensions[n].sortedBins){var u=this.state.dimensions[n].sortedBins.getValueDomainByScale(t[l.prop],[t[o.prop],t[i.prop]]);this._setDimensionState(n,{valueDomain:u})}}function Z(e,t,r){var n=r.key,a=e.triggers,o=a.domain,i=a.range,l=a.scaleType,u=e.onSet;if(this.state.dimensions[n].valueDomain){var c,s=t[i.prop],d=t[o.prop]||this.state.dimensions[n].valueDomain,f=((c=l&&t[l.prop])&&R.SCALE_FUNC[c]||x.console.warn("Scale ".concat(c," is not supported")),R.SCALE_FUNC[c]||R.SCALE_FUNC.quantize)().domain(d).range(s);"object"==typeof u&&"function"==typeof t[u.props]&&t[u.props](f.domain()),this._setDimensionState(n,{scaleFunc:f})}}function N(e,t,r,n){var a=(0,t[e.triggers.aggregator.prop])(t,n);this.setState({layerData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hexagons?Object.assign({data:e.hexagons},e):e.layerData?Object.assign({data:e.layerData},e):e}(a)})}var U={key:"position",updateSteps:[{key:"aggregate",triggers:{cellSize:{prop:"cellSize"},position:{prop:"getPosition",updateTrigger:"getPosition"},aggregator:{prop:"gridAggregator"}},updater:N}]};function V(e,t,r){return function(r){var n=e.sortedBins,a=e.scaleFunc,o=n.binMap[r.index];if(o&&0===o.counts)return t.nullValue;var i=o&&o.value,l=a.domain();return i>=l[0]&&i<=l[l.length-1]?a(i):t.nullValue}}var G={key:"fillColor",accessor:"getFillColor",getPickingInfo:function(e,t){if(!t)return{};var r=e.sortedBins;return{colorValue:r.binMap[t.index]&&r.binMap[t.index].value}},nullValue:[0,0,0,0],updateSteps:[{key:"getValue",triggers:{value:{prop:"getColorValue",updateTrigger:"getColorValue"},weight:{prop:"getColorWeight",updateTrigger:"getColorWeight"},aggregation:{prop:"colorAggregation"}},updater:M},{key:"getBins",triggers:{_filterData:{prop:"_filterData",updateTrigger:"_filterData"}},updater:F},{key:"getDomain",triggers:{lowerPercentile:{prop:"lowerPercentile"},upperPercentile:{prop:"upperPercentile"},scaleType:{prop:"colorScaleType"}},updater:j},{key:"getScaleFunc",triggers:{domain:{prop:"colorDomain"},range:{prop:"colorRange"},scaleType:{prop:"colorScaleType"}},onSet:{props:"onSetColorDomain"},updater:Z}],getSubLayerAccessor:V},B=[G,{key:"elevation",accessor:"getElevation",getPickingInfo:function(e,t){if(!t)return{};var r=e.sortedBins;return{elevationValue:r.binMap[t.index]&&r.binMap[t.index].value}},nullValue:-1,updateSteps:[{key:"getValue",triggers:{value:{prop:"getElevationValue",updateTrigger:"getElevationValue"},weight:{prop:"getElevationWeight",updateTrigger:"getElevationWeight"},aggregation:{prop:"elevationAggregation"}},updater:M},{key:"getBins",triggers:{_filterData:{prop:"_filterData",updateTrigger:"_filterData"}},updater:F},{key:"getDomain",triggers:{lowerPercentile:{prop:"elevationLowerPercentile"},upperPercentile:{prop:"elevationUpperPercentile"},scaleType:{prop:"elevationScaleType"}},updater:j},{key:"getScaleFunc",triggers:{domain:{prop:"elevationDomain"},range:{prop:"elevationRange"},scaleType:{prop:"elevationScaleType"}},onSet:{props:"onSetElevationDomain"},updater:Z}],getSubLayerAccessor:V}],Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,e),(0,a.Z)(this,"state",void 0),(0,a.Z)(this,"dimensionUpdaters",void 0),(0,a.Z)(this,"aggregationUpdater",void 0),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({layerData:{},dimensions:{}},t.initialState),this.dimensionUpdaters={},this.aggregationUpdater=t.aggregation||U,this._addDimension(t.dimensions||B)}return(0,i.Z)(e,[{key:"updateAllDimensions",value:function(e){var t=[];for(var r in this.dimensionUpdaters){var n=this._accumulateUpdaters(0,e,this.dimensionUpdaters[r]);t=t.concat(n)}t.forEach(function(e){return"function"==typeof e&&e()})}},{key:"updateAggregation",value:function(e,t){this._accumulateUpdaters(0,e,this.aggregationUpdater).forEach(function(e){return"function"==typeof e&&e(t)})}},{key:"updateState",value:function(e,t){var r=e.oldProps,n=e.props,a=e.changeFlags,o=[];if(a.dataChanged)return this.updateAggregation(n,t),this.updateAllDimensions(n),this.state;var i=this._getAggregationChanges(r,n,a);return i&&i.length?(i.forEach(function(e){return"function"==typeof e&&e(t)}),this.updateAllDimensions(n)):(this._getDimensionChanges(r,n,a)||[]).forEach(function(e){return"function"==typeof e&&e()}),this.state}},{key:"setState",value:function(e){this.state=Object.assign({},this.state,e)}},{key:"_setDimensionState",value:function(e,t){this.setState({dimensions:Object.assign({},this.state.dimensions,(0,a.Z)({},e,Object.assign({},this.state.dimensions[e],t)))})}},{key:"_addAggregation",value:function(e){this.aggregationUpdater=e}},{key:"_addDimension",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(function(t){var r=t.key;e.dimensionUpdaters[r]=t})}},{key:"_needUpdateStep",value:function(e,t,r,n){return Object.values(e.triggers).some(function(e){return e.updateTrigger?n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged[e.updateTrigger]):t[e.prop]!==r[e.prop]})}},{key:"_accumulateUpdaters",value:function(e,t,r){for(var n=[],a=e;a<r.updateSteps.length;a++){var o=r.updateSteps[a].updater;"function"==typeof o&&n.push(o.bind(this,r.updateSteps[a],t,r))}return n}},{key:"_getAllUpdaters",value:function(e,t,r,n){var a=this,o=[],i=e.updateSteps.findIndex(function(e){return a._needUpdateStep(e,t,r,n)});return i>-1&&(o=o.concat(this._accumulateUpdaters(i,r,e))),o}},{key:"_getAggregationChanges",value:function(e,t,r){var n=this._getAllUpdaters(this.aggregationUpdater,e,t,r);return n.length?n:null}},{key:"_getDimensionChanges",value:function(e,t,r){var n=[];for(var a in this.dimensionUpdaters){var o=this.dimensionUpdaters[a],i=this._getAllUpdaters(o,e,t,r);n=n.concat(i)}return n.length?n:null}},{key:"getUpdateTriggers",value:function(e){var t=this,r=e.updateTriggers||{},n={};for(var a in this.dimensionUpdaters)!function(a){var o=t.dimensionUpdaters[a],i=o.accessor,l=o.updateSteps;n[i]={},l.forEach(function(t){Object.values(t.triggers||[]).forEach(function(t){var a=t.prop,o=t.updateTrigger;if(o){var l=r[o];"object"!=typeof l||Array.isArray(l)?void 0!==l&&(n[i][a]=l):Object.assign(n[i],l)}else n[i][a]=e[a]})})}(a);return n}},{key:"getPickingInfo",value:function(e,t){var r=e.info,n=r.picked&&r.index>-1,a=null,o=n?this.state.layerData.data[r.index]:null;if(o){var i={};for(var l in this.dimensionUpdaters){var u=this.dimensionUpdaters[l].getPickingInfo;"function"==typeof u&&(i=Object.assign({},i,u(this.state.dimensions[l],o,t)))}a=Object.assign(i,o,{points:o.filteredPoints||o.points})}return Object.assign(r,{picked:Boolean(a),object:a})}},{key:"getAccessor",value:function(e,t){return this.dimensionUpdaters.hasOwnProperty(e)?this.dimensionUpdaters[e].getSubLayerAccessor(this.state.dimensions[e],this.dimensionUpdaters[e],t):w}}],[{key:"defaultDimensions",value:function(){return B}}]),e}();(0,a.Z)(Y,"getDimensionScale",void 0),Y.getDimensionScale=Z;var z=r(41403),H=r(90116),W=r(82052),q=r(48752),K=r.n(q),X=function(e){var t=e.clusterRadius;return"".concat(t)},J=function(e){var t=e.clusterRadius,r=e.geoJSON;return new W.Z({maxZoom:20,radius:t,reduce:function(e,t){e.points=[].concat((0,H.Z)(e.points),(0,H.Z)(t.points))},map:function(e){return{points:[e.data]}}}).load(r)},Q=function(){function e(){(0,o.Z)(this,e),(0,a.Z)(this,"clusterer",void 0),this.clusterer=K()(J,X)}return(0,i.Z)(e,[{key:"clustersAtZoom",value:function(e){var t=e.bbox,r=e.clusterRadius,n=e.geoJSON,a=e.zoom;return this.clusterer({clusterRadius:r,geoJSON:n}).getClusters(t,a).map(function(e,t){return{points:e.properties.points,position:e.geometry.coordinates,index:t}})}},{key:"clearClustererCache",value:function(){var e,t;null===(e=(t=this.clusterer.cache).clear)||void 0===e||e.call(t)}}]),e}();function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ee=R.LAYER_VIS_CONFIGS.clusterRadius.defaultValue,et=R.LAYER_VIS_CONFIGS.clusterRadiusRange.defaultValue,er=function(e){return e.length},en=function(e){return e.filteredPoints?e.filteredPoints.length:e.points.length},ea={key:"position",updateSteps:[{key:"geojson",triggers:{position:{prop:"getPosition",updateTrigger:"getPosition"},filterData:{prop:"filterData",updateTrigger:"filterData"}},updater:function(e,t,r,n){n.viewport;var a,o,i,l=t.data,u=t.getPosition,c=t.filterData,s=("function"==typeof c?l.filter(c):l).map(function(e){return{type:"Point",properties:{data:e,points:[e],point_count:1,point_count_abbreviated:"1"},geometry:{coordinates:u(e)}}}).filter(function(e){return e.geometry.coordinates.every(Number.isFinite)}),d=new Q;this.setState({geoJSON:s,clusterBuilder:d})}},{key:"clustering",triggers:{clusterRadius:{prop:"clusterRadius"},zoom:{prop:"zoom"},width:{prop:"width"},height:{prop:"height"}},updater:function(e,t,r,n){var a=n.viewport,o=this.state,i=o.geoJSON,l=o.clusterBuilder,u=t.clusterRadius,c=t.zoom,s=t.width,d=t.height,f=a.longitude,p=a.latitude,g=L.bounds([f,p],c,[s,d]),y=l.clustersAtZoom({bbox:g,clusterRadius:u,geoJSON:i,zoom:c});this.setState({layerData:{data:y}})}}]},eo=[G,{key:"radius",accessor:"getRadius",nullValue:0,updateSteps:[{key:"getDomain",triggers:{value:{prop:"getRadiusValue",updateTrigger:"getRadiusValue"}},updater:function(e,t,r){var n=r.key,a=t.getRadiusValue,o=this.state.layerData,i=[0,(0,z.Z)(o.data,a)];this._setDimensionState(n,{valueDomain:i})}},{key:"getScaleFunc",triggers:{domain:{prop:"radiusDomain"},range:{prop:"radiusRange"},scaleType:{prop:"radiusScaleType"}},updater:Z}],getSubLayerAccessor:function(e,t,r){return function(t){var n=r.getRadiusValue;return(0,e.scaleFunc)(n(t))}},getPickingInfo:function(e,t,r){return{radiusValue:r.getRadiusValue(t)}}}],ei={clusterRadius:ee,colorDomain:null,colorRange:R.DEFAULT_COLOR_RANGE,colorScaleType:R.SCALE_TYPES.quantize,radiusScaleType:R.SCALE_TYPES.sqrt,radiusRange:et,getPosition:{type:"accessor",value:function(e){return e.position}},getColorValue:{type:"accessor",value:er},getRadiusValue:{type:"accessor",value:en}},el=function(e){(0,l.Z)(s,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(s);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function s(){return(0,o.Z)(this,s),n.apply(this,arguments)}return(0,i.Z)(s,[{key:"initializeState",value:function(){var e=new Y({aggregation:ea,dimensions:eo});this.state={cpuAggregator:e,aggregatorState:e.state},this.getAttributeManager().add({positions:{size:3,accessor:"getPosition"}})}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,n=e.changeFlags;this.setState({aggregatorState:this.state.cpuAggregator.updateState({oldProps:t,props:r,changeFlags:n},{viewport:this.context.viewport,attributes:this.getAttributes(),numInstances:this.getNumInstances(r)})})}},{key:"getPickingInfo",value:function(e){var t=e.info;return this.state.cpuAggregator.getPickingInfo({info:t},this.props)}},{key:"_getSublayerUpdateTriggers",value:function(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}},{key:"_getSubLayerAccessors",value:function(){return{getRadius:this.state.cpuAggregator.getAccessor("radius",this.props),getFillColor:this.state.cpuAggregator.getAccessor("fillColor",this.props)}}},{key:"renderLayers",value:function(){var e=this.props,t=e.id,r=e.radiusScale,n=this.state.cpuAggregator,o=this.props,i=o.visible,l=o.opacity,u=o.pickable,c=o.autoHighlight,s=o.highlightColor,d=this._getSublayerUpdateTriggers(),f=this._getSubLayerAccessors(),p=(0,v.ro)(this.context.viewport).metersPerPixel[0];return new A.Z(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({id:"".concat(t,"-cluster"),data:n.state.layerData.data,radiusScale:p*r,visible:i,opacity:l,pickable:u,autoHighlight:c,highlightColor:s,updateTriggers:d,parameters:{depthMask:!1}},f))}}]),s}(P.Z);el.layerName="ClusterLayer",el.defaultProps=ei;var eu=r(74450),ec=r(2272),es=r(36860);function ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ed(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ep=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"getShaders",value:function(){var e,t,r=(0,eu.Z)((0,c.Z)(a.prototype),"getShaders",this).call(this);return ef(ef({},r),{},{vs:(t=eU(e=r.vs,"hexagon cell vs add instance 1","in vec3 instancePickingColors;","in vec3 instancePickingColors;\n     in float instanceCoverage;"),eU(t,"hexagon cell vs add instance 2","float dotRadius = radius * coverage * shouldRender;","float dotRadius = radius * coverage * instanceCoverage * shouldRender;"))})}},{key:"initializeState",value:function(){var e;(0,eu.Z)((0,c.Z)(a.prototype),"initializeState",this).call(this),null===(e=this.getAttributeManager())||void 0===e||e.addInstanced({instanceCoverage:{size:1,accessor:"getCoverage"}})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,n=r.lineWidthUnits,a=r.lineWidthScale,o=r.lineWidthMinPixels,i=r.lineWidthMaxPixels,l=r.radiusUnits,u=r.elevationScale,c=r.extruded,d=r.filled,f=r.stroked,p=r.strokeOpacity,g=r.wireframe,y=r.offset,h=r.coverage,v=r.radius,m=r.angle,b=this.state,O=b.model,E=b.fillVertexCount,T=b.wireframeVertexCount,S=b.edgeDistance;O.setUniforms(t).setUniforms({radius:v,angle:m/180*Math.PI,offset:y,extruded:c,stroked:f,coverage:h,elevationScale:u,edgeDistance:S,radiusUnits:ec.iI[l],widthUnits:ec.iI[n],widthScale:a,widthMinPixels:o,widthMaxPixels:i}),c&&g&&(O.setProps({isIndexed:!0}),O.setVertexCount(T).setDrawMode(s.default.LINES).setUniforms({isStroke:!0}).draw()),d&&(O.setProps({isIndexed:!1}),O.setVertexCount(E).setDrawMode(s.default.TRIANGLE_STRIP).setUniforms({isStroke:!1}).draw()),!c&&f&&(O.setProps({isIndexed:!1}),O.setVertexCount(2*E/3).setDrawMode(s.default.TRIANGLE_STRIP).setUniforms({isStroke:!0,opacity:p}).draw())}}]),a}(es.Z);ep.layerName="EnhancedColumnLayer";var eg=ep,ey=r(42490),eh={key:"position",updateSteps:[{key:"aggregate",triggers:{cellSize:{prop:"cellSize"},position:{prop:"getPosition",updateTrigger:"getPosition"},aggregator:{prop:"gridAggregator"}},updater:N}]},ev=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"initializeState",value:function(){var e=new Y({aggregation:eh});this.state={cpuAggregator:e,aggregatorState:e.state},this.getAttributeManager().add({positions:{size:3,accessor:"getPosition"}})}}]),a}(ey.Z);ev.layerName="ScaleEnhancedGridLayer";var em=r(72306),eb={key:"position",updateSteps:[{key:"aggregate",triggers:{cellSize:{prop:"radius"},position:{prop:"getPosition",updateTrigger:"getPosition"},aggregator:{prop:"hexagonAggregator"}},updater:N}]},eO=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"initializeState",value:function(){var e=new Y({aggregation:eb});this.state={cpuAggregator:e,aggregatorState:e.state},this.getAttributeManager().add({positions:{size:3,accessor:"getPosition"}})}}]),a}(em.Z);eO.layerName="ScaleEnhancedHexagonLayer";var eE=r(17330);function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eA=eS(eS({},eE.Z.defaultProps),{},{getTargetColor:function(e){return e.color||[0,0,0,255]}}),eP=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"getShaders",value:function(){var e,t,r,n,o=(0,eu.Z)((0,c.Z)(a.prototype),"getShaders",this).call(this),i=(t=eU(e=o.vs,"line target color vs","attribute vec4 instanceColors;","attribute vec4 instanceColors; attribute vec4 instanceTargetColors;"),eU(t,"line color vs","vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);","vec4 color = mix(instanceColors, instanceTargetColors, positions.x);vColor = vec4(color.rgb, color.a * opacity);"));return r=i,n=eU(r,"line elevation scale 1 vs - inject elevation scale","uniform float widthMaxPixels;","uniform float widthMaxPixels;\n     uniform float elevationScale;"),n=eU(n,"line elevation scale 2 vs - multiply by elevation scale","geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;","vec3 source_world = instanceSourcePositions;\n     vec3 target_world = instanceTargetPositions;\n     source_world.z *= elevationScale;\n     target_world.z *= elevationScale;\n     \n     geometry.worldPosition = source_world;\n     geometry.worldPositionAlt = target_world;"),i=n=eU(n,"line elevation scale 3 vs","vec3 source_world = instanceSourcePositions;\n  vec3 target_world = instanceTargetPositions;",""),eS(eS({},o),{},{vs:i})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props.elevationScale;(0,eu.Z)((0,c.Z)(a.prototype),"draw",this).call(this,{uniforms:eS(eS({},t),{},{elevationScale:r})})}},{key:"initializeState",value:function(){var e;(0,eu.Z)((0,c.Z)(a.prototype),"initializeState",this).call(this,void 0),this.state.attributeManager.addInstanced({instanceTargetColors:{size:null===(e=this.props.colorFormat)||void 0===e?void 0:e.length,type:s.default.UNSIGNED_BYTE,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:[0,0,0,255]}})}}]),a}(eE.Z);eP.layerName="EnhancedLineLayer",eP.defaultProps=eA;var eL=r(14773),eC=r(93175);function e_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ex(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e_(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eD=[-1,-1,0,-1,1,0,1,1,0,1,-1,0],eR=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"_getModel",value:function(e){var t=this.getShaders(void 0),r=this.props.iconGeometry,n=new eL.Z(r?{drawMode:s.default.TRIANGLES,attributes:{positions:new Float32Array(r)}}:{drawMode:s.default.TRIANGLE_FAN,attributes:{positions:new Float32Array(eD)}});return new eC.Z(e,ex(ex({},t),{},{id:this.props.id,geometry:n,isInstanced:!0,shaderCache:this.context.shaderCache}))}}]),a}(A.Z);function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}eR.layerName="ScatterplotIconLayer";var ew=[1,1,0,1,-1,0,-1,-1,0,-1,-1,0,-1,1,0,1,1,0],eM=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"initializeState",value:function(){this.state={data:{}}}},{key:"updateState",value:function(e){e.changeFlags.dataChanged&&this._extractSublayers()}},{key:"_extractSublayers",value:function(){for(var e=this.props,t=e.data,r=e.getIconGeometry,n=e.getIcon,a={},o=0;o<t.length;o++){var i=n(t[o]);a[i]=a[i]||{id:i,geometry:r(i)||ew,data:[]},a[i].data.push(t[o])}this.setState({data:Object.values(a)})}},{key:"_updateAutoHighlight",value:function(e){var t;null==e||null===(t=e.sourceLayer)||void 0===t||t.updateAutoHighlight(e)}},{key:"renderLayers",value:function(){var e=this,t=this.props.id,r=this.state.data&&this.state.data.length&&this.state.data.map(function(r){var n=r.id,a=r.data,o=r.geometry;return new eR(ek(ek({},e.props),{},{id:"".concat(t,"-").concat(n),data:a,iconGeometry:o}))});return r&&r.length>0?r:null}}]),a}(d.Z);eM.layerName="SvgIconLayer",eM.defaultProps={getIconGeometry:function(e){return ew},getIcon:function(e){return e.icon}};var eF,ej=r(61556),eZ={name:"filter-arrow",dependencies:[r(65182).Z],vs:"\n  #ifdef NON_INSTANCED_MODEL\n    #define FILTER_ARROW_ATTRIB filtered\n  #else\n    #define FILTER_ARROW_ATTRIB instanceFiltered\n  #endif\n  attribute float FILTER_ARROW_ATTRIB;\n",fs:"",inject:{"vs:#decl":"\n    varying float is_filtered;\n  ","vs:#main-end":"\n    is_filtered = FILTER_ARROW_ATTRIB;\n  ","fs:#decl":"\n    varying float is_filtered;\n  ","fs:DECKGL_FILTER_COLOR":"\n    // abandon the fragments if  it is not filtered\n    if (is_filtered == 0.) {\n      discard;\n    }\n  "},getUniforms:function(){}},eN=function(e){(0,l.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(a);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"getShaders",value:function(e){return{modules:[eZ],defines:{}}}},{key:"initializeState",value:function(e,t){var r=this.getAttributeManager();r&&r.add({filtered:{size:1,type:s.default.FLOAT,accessor:"getFiltered",shaderAttributes:{filtered:{divisor:0},instanceFiltered:{divisor:1}}}})}}]),a}(ej.Z);function eU(e,t,r,n){return e.includes(r)?e.replace(r,n):(x.console.error("Cannot edit ".concat(t," layer shader")),e)}(0,a.Z)(eN,"defaultProps",{getFiltered:{type:"accessor",value:1}}),(0,a.Z)(eN,"extensionName","FilterArrowExtension")},55165:function(e,t,r){"use strict";r.r(t),r.d(t,{AggregationLayer:function(){return e5},EditorLayerUtils:function(){return aa},H3HexagonLayerIcon:function(){return rW},HexagonIdVisConfigs:function(){return r0},KeplerGlLayers:function(){return ar},LAYER_ID_LENGTH:function(){return q},Layer:function(){return en},LayerClasses:function(){return an},MAX_ZOOM_LEVEL:function(){return rZ},OVERLAY_TYPE_CONST:function(){return $},ScenegraphLayer:function(){return nd},ScenegraphLayerIcon:function(){return r6},Table:function(){return t8},colorMaker:function(){return er},containValidTime:function(){return nh},coordHasLength4:function(){return ny},defaultCoverage:function(){return r$},defaultElevation:function(){return tB},defaultLineWidth:function(){return tY},defaultRadius:function(){return tz},diffUpdateTriggers:function(){return V},generateMapboxLayers:function(){return rS},geoJsonFromData:function(){return rP},getAnimationDomainFromTimestamps:function(){return nb},getEditorLayer:function(){return at},getFilterDataFunc:function(){return e2},getS2Center:function(){return nj},gpuFilterToMapboxFilter:function(){return rC},h3DefaultElevation:function(){return rQ},hexIdAccessor:function(){return rJ},hexIdRequiredColumns:function(){return rX},isTripGeoJsonField:function(){return nv},layerColors:function(){return ee},parseGeoJsonRawFeature:function(){return tC},parseTripGeoJsonTimestamp:function(){return nm},pointToPolygonGeo:function(){return e6},prefixGpuField:function(){return rL},s2DefaultElevation:function(){return nz},scenegraphVisConfigs:function(){return nl},tripDefaultLineWidth:function(){return nP},updateMapboxLayers:function(){return rA}});var n,a,o,i,l,u,c,s,d,f,p,g,y=r(59499),h=r(90116),v=r(17674),m=r(92777),b=r(82262),O=r(87794),E=r.n(O),T=r(63157),S=r.n(T),A=r(51144),P=r.n(A),L=r(71802),C=r(2272),_=r(97497),x=r(45959),D=r(63553),R=r(37247),I=r(67294),k=r(36864),w=r(4730),M=["height","width","viewBox","style","children","predefinedClassName","className","colors","totalColor"],F=I.createElement,j=function(){},Z=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){var e,t,r=this.props,n=r.height,a=r.width,o=r.viewBox,i=r.style,l=r.children,u=r.predefinedClassName,c=r.className,s=r.colors,d=r.totalColor,f=(0,w.Z)(r,M),p=Array.isArray(s)&&d&&Array(d).fill(1).reduce(function(e,t,r){return"".concat(e,".cr").concat(r+1," {fill:").concat(s[r%s.length],";}")},"");return F("svg",(0,k.Z)({viewBox:o,width:a||n,height:n,style:i,className:"".concat(u," ").concat(c),onClick:j},f),p?F("style",{type:"text/css"},p):null,l)}}]),a}(I.Component);(0,y.Z)(Z,"displayName","Base Icon"),(0,y.Z)(Z,"defaultProps",{height:null,width:null,viewBox:"0 0 64 64",predefinedClassName:"",className:"",style:{fill:"currentColor"}});var N=I.createElement,U=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return N(Z,this.props,N("circle",{cx:"29.4",cy:"31.6",r:"8.4"}),N("circle",{cx:"48.5",cy:"15.7",r:"6.5"}),N("circle",{cx:"11",cy:"44.2",r:"3"}),N("circle",{cx:"50",cy:"44.2",r:"5"}),N("circle",{cx:"34",cy:"54.2",r:"3"}),N("circle",{cx:"14",cy:"16.2",r:"4"}))}}]),a}(I.Component);function V(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},a=!1;for(var o in e){G(e[o]||{},r[o]||{},o)&&(n[o]=!0,a=n)}return a}function G(e,t,r){if("object"!=typeof t)return t===e?null:"".concat(r," changed shallowly");for(var n in t){if(!(n in e))return"".concat(r,".").concat(n," deleted");if(t[n]!==e[n])return"".concat(r,".").concat(n," changed shallowly")}for(var a in e)if(!(a in t))return"".concat(r,".").concat(a," added");return null}(0,y.Z)(U,"defaultProps",{height:"16px",predefinedClassName:"default-layer-icon"});var B=r(75485),Y=r(24836);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var W=E().mark(et),q=6,K=[0,1],X=new L.Z({filterSize:B.MAX_GPU_FILTERS}),J=function(e){return function(e){return e}},Q=function(e,t){return e.valueAccessor(t)},$=P()({deckgl:null,mapboxgl:null}),ee=Object.values(B.DataVizColors).map(Y.hexToRgb);function et(){var e;return E().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<ee.length+1)){t.next=7;break}return e===ee.length&&(e=0),t.next=5,ee[e++];case 5:t.next=1;break;case 7:case"end":return t.stop()}},W)}var er=et(),en=function(){function e(t){(0,m.Z)(this,e),(0,y.Z)(this,"id",void 0),(0,y.Z)(this,"meta",void 0),(0,y.Z)(this,"visConfigSettings",void 0),(0,y.Z)(this,"config",void 0),(0,y.Z)(this,"_oldDataUpdateTriggers",void 0),(0,y.Z)(this,"isValid",void 0),(0,y.Z)(this,"errorMessage",void 0),this.id=t.id||(0,Y.generateHashId)(q),this.meta={},this.visConfigSettings={},this.config=this.getDefaultLayerConfig(H({columns:this.getLayerColumns()},t)),this.isValid=!0,this.errorMessage=null}return(0,b.Z)(e,[{key:"layerIcon",get:function(){return U}},{key:"overlayType",get:function(){return $.deckgl}},{key:"type",get:function(){return null}},{key:"name",get:function(){return this.type}},{key:"isAggregated",get:function(){return!1}},{key:"requiredLayerColumns",get:function(){return[]}},{key:"optionalColumns",get:function(){return[]}},{key:"noneLayerDataAffectingProps",get:function(){return["label","opacity","thickness","isVisible","hidden"]}},{key:"visualChannels",get:function(){return{color:{property:"color",field:"colorField",scale:"colorScale",domain:"colorDomain",range:"colorRange",key:"color",channelScaleType:B.CHANNEL_SCALES.color,nullValue:B.NO_VALUE_COLOR,defaultValue:function(e){return e.color}},size:{property:"size",field:"sizeField",scale:"sizeScale",domain:"sizeDomain",range:"sizeRange",key:"size",channelScaleType:B.CHANNEL_SCALES.size,nullValue:0,defaultValue:1}}}},{key:"columnValidators",get:function(){return{}}},{key:"columnPairs",get:function(){return null}},{key:"defaultPointColumnPairs",get:function(){return{lat:{pair:"lng",fieldPairKey:"lat"},lng:{pair:"lat",fieldPairKey:"lng"}}}},{key:"defaultLinkColumnPairs",get:function(){return{lat0:{pair:"lng0",fieldPairKey:"lat"},lng0:{pair:"lat0",fieldPairKey:"lng"},lat1:{pair:"lng1",fieldPairKey:"lat"},lng1:{pair:"lat1",fieldPairKey:"lng"}}}},{key:"layerInfoModal",get:function(){return null}},{key:"supportedDatasetTypes",get:function(){return null}},{key:"getDefaultLayerConfig",value:function(e){return{dataId:e.dataId,label:e.label||B.DEFAULT_LAYER_LABEL,color:e.color||er.next().value,columns:e.columns||{},isVisible:e.isVisible||!1,isConfigActive:e.isConfigActive||!1,highlightColor:e.highlightColor||B.DEFAULT_HIGHLIGHT_COLOR,hidden:e.hidden||!1,colorField:null,colorDomain:[0,1],colorScale:B.SCALE_TYPES.quantile,sizeDomain:[0,1],sizeScale:B.SCALE_TYPES.linear,sizeField:null,visConfig:{},textLabel:[B.DEFAULT_TEXT_LABEL],colorUI:{color:B.DEFAULT_COLOR_UI,colorRange:B.DEFAULT_COLOR_UI},animation:{enabled:!1}}}},{key:"getVisualChannelDescription",value:function(e){var t=this.visualChannels[e];if(!t)return{label:"",measure:void 0};var r=this.visConfigSettings[t.range],n=this.config[t.field],a=null==r?void 0:r.label;return{label:"function"==typeof a?a(this.config):a||"",measure:n?n.displayName||n.name:t.defaultMeasure}}},{key:"assignColumn",value:function(e,t){var r=t?{value:t.name,fieldIdx:t.fieldIdx}:{value:null,fieldIdx:-1};return H(H({},this.config.columns),{},(0,y.Z)({},e,H(H({},this.config.columns[e]),r)))}},{key:"assignColumnPairs",value:function(e,t){if(!this.columnPairs||!(null!==(r=this.columnPairs)&&void 0!==r&&r[e]))return this.config.columns;var r,n,a,o,i=null===(n=this.columnPairs)||void 0===n?void 0:n[e],l=i.pair,u=i.fieldPairKey;if(!t[u])return this.config.columns;var c=(null===(a=this.columnPairs)||void 0===a?void 0:a[l]).fieldPairKey;return H(H({},this.config.columns),{},(o={},(0,y.Z)(o,e,t[u]),(0,y.Z)(o,l,t[c]),o))}},{key:"getZoomFactor",value:function(e){var t=e.zoom,r=e.zoomOffset;return Math.pow(2,Math.max(14-t+(void 0===r?0:r),0))}},{key:"getElevationZoomFactor",value:function(e){var t=e.zoom,r=e.zoomOffset;return this.config.visConfig.enableElevationZoomFactor?Math.pow(2,Math.max(8-t+(void 0===r?0:r),0)):1}},{key:"formatLayerData",value:function(e,t){return{}}},{key:"renderLayer",value:function(){return[]}},{key:"getHoverData",value:function(e,t,r){return e?t.row(e.index):null}},{key:"assignConfigToLayer",value:function(e,t){var r=this,n=["colorRange","strokeColorRange"].concat(Object.values(this.visualChannels).map(function(e){return e.field})),a=["animation"].concat(Object.values(this.visualChannels).map(function(e){return e.domain}));Object.values(this.visualChannels).forEach(function(n){e.visConfig[n.range]&&r.visConfigSettings[n.range]&&t[n.range].group!==r.visConfigSettings[n.range].group&&a.push(n.range)});var o=this.config,i=this.copyLayerConfig(o,e,{shallowCopy:n,notToCopy:a});this.updateLayerConfig(i),Object.keys(this.visualChannels).forEach(function(e){r.validateVisualChannel(e)})}},{key:"copyLayerConfig",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.shallowCopy,o=void 0===a?[]:a,i=n.notToCopy,l=void 0===i?[]:i,u={};return Object.keys(e).forEach(function(n){(0,Y.isPlainObject)(e[n])&&(0,Y.isPlainObject)(t[n])&&!o.includes(n)&&!l.includes(n)?u[n]=r.copyLayerConfig(e[n],t[n],{shallowCopy:o,notToCopy:l}):(0,Y.notNullorUndefined)(t[n])&&!l.includes(n)?u[n]=t[n]:u[n]=e[n]}),u}},{key:"registerVisConfig",value:function(e){var t=this;Object.keys(e).forEach(function(r){var n=e[r];"string"==typeof n&&B.LAYER_VIS_CONFIGS[n]?(t.config.visConfig[r]=B.LAYER_VIS_CONFIGS[n].defaultValue,t.visConfigSettings[r]=B.LAYER_VIS_CONFIGS[n]):"object"==typeof n&&["type","defaultValue"].every(function(e){return n.hasOwnProperty(e)})&&(t.config.visConfig[r]=n.defaultValue,t.visConfigSettings[r]=n)})}},{key:"getLayerColumns",value:function(){var e=this.columnValidators,t=this.requiredLayerColumns.reduce(function(t,r){return H(H({},t),{},(0,y.Z)({},r,e[r]?{value:null,fieldIdx:-1,validator:e[r]}:{value:null,fieldIdx:-1}))},{}),r=this.optionalColumns.reduce(function(e,t){return H(H({},e),{},(0,y.Z)({},t,{value:null,fieldIdx:-1,optional:!0}))},{});return H(H({},t),r)}},{key:"updateLayerConfig",value:function(e){return this.config=H(H({},this.config),e),this}},{key:"updateLayerVisConfig",value:function(e){return this.config.visConfig=H(H({},this.config.visConfig),e),this}},{key:"updateLayerColorUI",value:function(e,t){var r=this.config,n=r.colorUI,a=r.visConfig;if(!(0,Y.isPlainObject)(t)||"string"!=typeof e)return this;var o=Object.entries(t).reduce(function(e,t){var r=(0,v.Z)(t,2),n=r[0],a=r[1];return H(H({},e),{},(0,y.Z)({},n,(0,Y.isPlainObject)(e[n])&&(0,Y.isPlainObject)(a)?H(H({},e[n]),a):a))},n[e]||B.DEFAULT_COLOR_UI),i=H(H({},n),{},(0,y.Z)({},e,o));return this.updateLayerConfig({colorUI:i}),a[e]&&a[e].colors&&(this.updateColorUIByColorRange(t,e),this.updateColorRangeByColorUI(t,n,e),this.updateCustomPalette(t,n,e)),this}},{key:"updateCustomPalette",value:function(e,t,r){if(e.colorRangeConfig&&e.colorRangeConfig.custom){var n=this.config,a=n.colorUI,o=n.visConfig;if(o[r]){var i=o[r].colors,l=H(H({},a[r].customPalette),{},{name:"Custom Palette",colors:(0,h.Z)(i)});this.updateLayerConfig({colorUI:H(H({},a),{},(0,y.Z)({},r,H(H({},a[r]),{},{customPalette:l})))})}}}},{key:"updateColorUIByColorRange",value:function(e,t){if("number"==typeof e.showDropdown){var r=this.config,n=r.colorUI,a=r.visConfig;this.updateLayerConfig({colorUI:H(H({},n),{},(0,y.Z)({},t,H(H({},n[t]),{},{colorRangeConfig:H(H({},n[t].colorRangeConfig),{},{steps:a[t].colors.length,reversed:Boolean(a[t].reversed)})})))})}}},{key:"updateColorRangeByColorUI",value:function(e,t,r){var n;if(e.colorRangeConfig&&["reversed","steps"].some(function(n){return e.colorRangeConfig.hasOwnProperty(n)&&e.colorRangeConfig[n]!==(t[r]||B.DEFAULT_COLOR_UI).colorRangeConfig[n]})){var a=this.config,o=a.colorUI,i=a.visConfig,l=o[r].colorRangeConfig,u=l.steps,c=l.reversed,s=i[r];if(e.colorRangeConfig.hasOwnProperty("steps")){var d=(0,Y.getColorGroupByName)(s);d&&(n=B.COLOR_RANGES.filter(function(e){return(0,Y.getColorGroupByName)(e)===d}).find(function(e){return e.colors.length===u}))&&s.reversed&&(n=(0,Y.reverseColorRange)(!0,n))}e.colorRangeConfig.hasOwnProperty("reversed")&&(n=(0,Y.reverseColorRange)(c,n||s)),n&&this.updateLayerVisConfig((0,y.Z)({},r,n))}}},{key:"hasAllColumns",value:function(){var e=this.config.columns;return e&&Object.values(e).every(function(e){return Boolean(e&&(e.optional||e.value&&e.fieldIdx>-1))})}},{key:"hasLayerData",value:function(e){return!!e&&Boolean(e.data&&e.data.length)}},{key:"isValidToSave",value:function(){return Boolean(this.type&&this.hasAllColumns())}},{key:"shouldRenderLayer",value:function(e){return Boolean(this.type)&&this.hasAllColumns()&&this.hasLayerData(e)&&"function"==typeof this.renderLayer}},{key:"getColorScale",value:function(e,t,r){if(Array.isArray(r.colorMap)){var n=new Map;return r.colorMap.forEach(function(e){var t=(0,v.Z)(e,2),r=t[0],a=t[1];n.set(r,"string"==typeof a?(0,Y.hexToRgb)(a):a)}),B.SCALE_FUNC[B.SCALE_TYPES.ordinal]().domain(n.keys()).range(n.values()).unknown(n.get(B.UNKNOWN_COLOR_KEY)||B.NO_VALUE_COLOR)}return this.getVisChannelScale(e,t,r.colors.map(Y.hexToRgb))}},{key:"getAttributeAccessors",value:function(e){var t=this,r=e.dataAccessor,n=void 0===r?J:r,a=e.dataContainer,o={};return Object.keys(this.visualChannels).forEach(function(e){var r=t.visualChannels[e],i=r.field,l=r.fixed,u=r.scale,c=r.domain,s=r.range,d=r.accessor,f=r.defaultValue,p=r.getAttributeValue,g=r.nullValue,y=r.channelScaleType;if(d){if(t.config[i]){var h=l&&t.config.visConfig[l],v=y===B.CHANNEL_SCALES.color?t.getColorScale(t.config[u],t.config[c],t.config.visConfig[s]):t.getVisChannelScale(t.config[u],t.config[c],t.config.visConfig[s],h);o[d]=function(e){return t.getEncodedChannelValue(v,n(a)(e),t.config[i],g)}}else"function"==typeof p?o[d]=p(t.config):o[d]="function"==typeof f?f(t.config):f;o[d]||T.console.warn("Failed to provide accessor function for ".concat(d||e))}}),o}},{key:"getVisChannelScale",value:function(e,t,r,n){return B.SCALE_FUNC[n?"linear":e]().domain(t).range(n?t:r)}},{key:"getPointsBounds",value:function(e,t){var r=e.numRows()>5e3?(0,Y.getSampleContainerData)(e,5e3):e,n=t?r.mapIndex(t):[],a=(0,Y.getLatLngBounds)(n,1,[-90,90]),o=(0,Y.getLatLngBounds)(n,0,[-180,180]);return a&&o?[o[0],a[0],o[1],a[1]]:null}},{key:"getChangedTriggers",value:function(e){var t=V(e,this._oldDataUpdateTriggers);return this._oldDataUpdateTriggers=e,t}},{key:"getEncodedChannelValue",value:function(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B.NO_VALUE_COLOR,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Q,i=r.type,l=o(r,t);return(0,Y.notNullorUndefined)(l)?(n=e(i===B.ALL_FIELD_TYPES.timestamp?new Date(l):l),(0,Y.notNullorUndefined)(n)||(n=a),n):a}},{key:"updateMeta",value:function(e){this.meta=H(H({},this.meta),e)}},{key:"getDataUpdateTriggers",value:function(e){var t=e.filteredIndex,r=e.id,n=e.dataContainer,a=this.config.columns;return H({getData:{datasetId:r,dataContainer:n,columns:a,filteredIndex:t},getMeta:{datasetId:r,dataContainer:n,columns:a}},(this.config.textLabel||[]).reduce(function(e,t,r){return H(H({},e),{},(0,y.Z)({},"getLabelCharacterSet-".concat(r),t.field?t.field.name:null))},{}))}},{key:"updateData",value:function(e,t){if(!this.config.dataId)return{};var r=e[this.config.dataId],n=r.dataContainer,a=this.getPositionAccessor(n),o=this.getDataUpdateTriggers(r),i=this.getChangedTriggers(o);i&&(i.getMeta||i.getData)&&this.updateLayerMeta(n,a);var l=[];return{data:!(i&&i.getData)&&t&&t.data?t.data:this.calculateDataAttribute(r,a),triggerChanged:i}}},{key:"updateLayerDomain",value:function(e,t){var r=this,n=this.getDataset(e);return n&&Object.values(this.visualChannels).forEach(function(e){var a=e.scale,o=r.config[a];if(!t||o!==B.SCALE_TYPES.ordinal){var i=e.domain,l=r.calculateLayerDomain(n,e);r.updateLayerConfig((0,y.Z)({},i,l))}}),this}},{key:"getDataset",value:function(e){return this.config.dataId?e[this.config.dataId]:null}},{key:"validateVisualChannel",value:function(e){this.validateFieldType(e),this.validateScale(e)}},{key:"validateFieldType",value:function(e){var t=this.visualChannels[e],r=t.field,n=t.channelScaleType,a=t.supportedFieldTypes;this.config[r]&&((a||B.CHANNEL_SCALE_SUPPORTED_FIELDS[n]).includes(this.config[r].type)||this.updateLayerConfig((0,y.Z)({},r,null)))}},{key:"validateScale",value:function(e){var t=this.visualChannels[e].scale;if(t){var r=this.getScaleOptions(e);r.includes(this.config[t])||this.updateLayerConfig((0,y.Z)({},t,r[0]))}}},{key:"getScaleOptions",value:function(e){var t=this.visualChannels[e],r=t.field,n=t.scale,a=t.channelScaleType;return this.config[r]?B.FIELD_OPTS[this.config[r].type].scale[a]:[this.getDefaultLayerConfig({dataId:""})[n]]}},{key:"updateLayerVisualChannel",value:function(e,t){var r=this.visualChannels[t];this.validateVisualChannel(t);var n=this.calculateLayerDomain(e,r);this.updateLayerConfig((0,y.Z)({},r.domain,n))}},{key:"getVisualChannelUpdateTriggers",value:function(){var e=this,t={};return Object.values(this.visualChannels).forEach(function(r){var n,a=r.accessor,o=r.field,i=r.scale,l=r.domain,u=r.range,c=r.defaultValue,s=r.fixed;a&&(t[a]=H((n={},(0,y.Z)(n,o,e.config[o]),(0,y.Z)(n,i,e.config[i]),(0,y.Z)(n,l,e.config[l]),(0,y.Z)(n,u,e.config.visConfig[u]),(0,y.Z)(n,"defaultValue","function"==typeof c?c(e.config):c),n),s?(0,y.Z)({},s,e.config.visConfig[s]):{}))}),t}},{key:"calculateLayerDomain",value:function(e,t){var r=t.scale,n=this.config[r],a=this.config[t.field];return a&&e.getColumnLayerDomain(a,n)||K}},{key:"hasHoveredObject",value:function(e){return this.isLayerHovered(e)&&e.object?e.object:null}},{key:"isLayerHovered",value:function(e){var t,r;return(null==e?void 0:e.picked)&&(null==e?void 0:null===(t=e.layer)||void 0===t?void 0:null===(r=t.props)||void 0===r?void 0:r.id)===this.id}},{key:"getRadiusScaleByZoom",value:function(e,t){var r=Object.values(this.visualChannels).find(function(e){return"radius"===e.property});if(!r)return 1;var n=r.field,a=void 0===t?this.config.visConfig.fixedRadius:t,o=this.config.visConfig.radius;return a?1:(this.config[n]?1:o)*this.getZoomFactor(e)}},{key:"shouldCalculateLayerData",value:function(e){var t=this;return e.some(function(e){return!t.noneLayerDataAffectingProps.includes(e)})}},{key:"getBrushingExtensionProps",value:function(e,t){var r=e.brush;return{autoHighlight:!r.enabled,brushingRadius:1e3*r.config.size,brushingTarget:t||"source",brushingEnabled:r.enabled}}},{key:"getDefaultDeckLayerProps",value:function(e){var t=e.idx,r=e.gpuFilter,n=e.mapState,a=e.visible;return{id:this.id,idx:t,coordinateSystem:C.Df.LNGLAT,pickable:!0,wrapLongitude:!0,parameters:{depthTest:Boolean(n.dragRotate||this.config.visConfig.enable3d)},hidden:this.config.hidden,opacity:this.config.visConfig.opacity,highlightColor:this.config.highlightColor,extensions:[X],filterRange:r?r.filterRange:void 0,visible:this.config.isVisible&&a}}},{key:"getDefaultHoverLayerProps",value:function(){return{id:"".concat(this.id,"-hovered"),pickable:!1,wrapLongitude:!0,coordinateSystem:C.Df.LNGLAT}}},{key:"renderTextLabelLayer",value:function(e,t){var r=this,n=e.getPosition,a=e.getPixelOffset,o=e.backgroundProps,i=e.updateTriggers,l=e.sharedProps,u=t.data,c=t.mapState,s=this.config.textLabel;return u.textLabels.reduce(function(e,t,d){if(t.getText){var f,p,g=s[d].background||(null==o?void 0:o.background);e.push(new _.Z(H(H({},l),{},{id:"".concat(r.id,"-label-").concat(null===(f=s[d].field)||void 0===f?void 0:f.name),data:u.data,visible:r.config.isVisible,getText:t.getText,getPosition:n,characterSet:t.characterSet,getPixelOffset:a(s[d]),getSize:B.PROJECTED_PIXEL_SIZE_MULTIPLIER,sizeScale:s[d].size,getTextAnchor:s[d].anchor,getAlignmentBaseline:s[d].alignment,getColor:s[d].color,outlineWidth:s[d].outlineWidth*B.TEXT_OUTLINE_MULTIPLIER,outlineColor:s[d].outlineColor,background:g,getBackgroundColor:s[d].backgroundColor,fontSettings:{sdf:s[d].outlineWidth>0},parameters:{depthTest:!1},getFilterValue:u.getFilterValue,updateTriggers:H(H({},i),{},{getText:null===(p=s[d].field)||void 0===p?void 0:p.name,getPixelOffset:H(H({},i.getRadius),{},{mapState:c,anchor:s[d].anchor,alignment:s[d].alignment}),getTextAnchor:s[d].anchor,getAlignmentBaseline:s[d].alignment,getColor:s[d].color}),_subLayerProps:H({},g?{background:{parameters:{cull:!1}}}:null)})))}return e},[])}},{key:"calculateDataAttribute",value:function(e,t){return[]}},{key:"updateLayerMeta",value:function(e,t){}},{key:"getPositionAccessor",value:function(e){return function(){return null}}}],[{key:"findDefaultLayerProps",value:function(e,t){return{props:[],foundLayers:t}}},{key:"findDefaultColumnField",value:function(e,t){var r=Object.keys(e).reduce(function(r,n){var a=t.filter(function(t){return t.name===e[n]||e[n].includes(t.name)});return r[n]=a.length?a.map(function(e){return{value:e.name,fieldIdx:e.fieldIdx}}):null,r},{});return Object.values(r).every(Boolean)?this.getAllPossibleColumnParis(r):null}},{key:"getAllPossibleColumnParis",value:function(e){for(var t=Object.keys(e),r=t.map(function(e,r){return r===t.length-1?-1:0}),n=t.map(function(t){return e[t].length}),a=[];i(r,n,r.length-1);){var o=r.reduce(function(r,n,a){return r[t[a]]=e[t[a]][n],r},{});a.push(o)}function i(e,t,r){return(0!==r||e[0]!==t[0]-1)&&(e[r]+1<t[r]?(e[r]=e[r]+1,!0):(e[r]=0,i(e,t,r-1)))}return a}},{key:"hexToRgb",value:function(e){return(0,Y.hexToRgb)(e)}}]),e}(),ea=r(74450),eo=r(57806),ei=r(71160),el=I.createElement,eu=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return el(Z,this.props,el("circle",{cx:"29.4",cy:"31.6",r:"8.4",className:"cr1"}),el("circle",{cx:"48.5",cy:"15.7",r:"6.5",className:"cr2"}),el("circle",{cx:"11",cy:"44.2",r:"3",className:"cr3"}),el("circle",{cx:"50",cy:"44.2",r:"5",className:"cr4"}),el("circle",{cx:"34",cy:"54.2",r:"3",className:"cr5"}),el("circle",{cx:"14",cy:"16.2",r:"4",className:"cr6"}))}}]),a}(I.Component);(0,y.Z)(eu,"defaultProps",{height:"16px",predefinedClassName:"point-layer-icon",totalColor:6});var ec=r(87187),es=r(3706),ed=r.n(es);function ef(e,t,r){return function(n){var a=(0,ec.ro)(r),o="middle"===n.anchor?0:"start"===n.anchor?1:-1,i="center"===n.alignment?0:"bottom"===n.alignment?1:-1,l="center"===n.alignment?0:(n.alignment,n.size),u=e*a.pixelsPerMeter[0];return"function"==typeof t?function(e){return[o*(t(e)*u+20),i*(t(e)*u+20+l)]}:[o*(t*u+20),i*(t*u+20+l)]}}var ep=function(e){var t=e.textLabel,r=e.triggerChanged,n=e.oldLayerData,a=e.data,o=e.dataContainer;return t.map(function(e,t){if(!e.field)return{getText:null,characterSet:[]};var i,l,u,c=(i=o,function(t){var r=e.field.valueAccessor(t);return(0,Y.notNullorUndefined)(r)?String(r):""});if(!r["getLabelCharacterSet-".concat(t)]&&n&&n.textLabels&&n.textLabels[t])u=n.textLabels[t].characterSet;else{var s=e.field?a.map(c):[];u=ed()(s.join(""))}return{characterSet:u,getText:c}})},eg=r(3219),ey=r(74210);function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function em(e,t){var r=e.pair,n=r.lat,a=r.lng,o=r.alt;if(!t)return{lat:n,lng:a};var i={value:null,fieldIdx:-1,optional:!0};return{lat:n,lng:a,altitude:o?ev(ev({},i),o):i}}function eb(e,t){if(null!=e&&e.picked){var r,n;return(null==e?void 0:null===(r=e.layer)||void 0===r?void 0:null===(n=r.props)||void 0===n?void 0:n.id).startsWith(t)}return!1}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eT=function(e){var t=e.lat,r=e.lng,n=e.altitude;return function(e){return function(a){return[e.valueAt(a.index,r.fieldIdx),e.valueAt(a.index,t.fieldIdx),n&&n.fieldIdx>-1?e.valueAt(a.index,n.fieldIdx):0]}}},eS=["lat","lng"],eA=["altitude"],eP=new eo.Z,eL={radius:"radius",fixedRadius:"fixedRadius",opacity:"opacity",outline:"outline",thickness:"thickness",strokeColor:"strokeColor",colorRange:"colorRange",strokeColorRange:"strokeColorRange",radiusRange:"radiusRange",filled:eE(eE({},B.LAYER_VIS_CONFIGS.filled),{},{type:"boolean",label:"layer.fillColor",defaultValue:!0,property:"filled"})},eC=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),(t=n.call(this,e)).registerVisConfig(eL),t.getPositionAccessor=function(e){return eT(t.config.columns)(e)},t}return(0,b.Z)(a,[{key:"type",get:function(){return"point"}},{key:"isAggregated",get:function(){return!1}},{key:"layerIcon",get:function(){return eu}},{key:"requiredLayerColumns",get:function(){return eS}},{key:"optionalColumns",get:function(){return eA}},{key:"columnPairs",get:function(){return this.defaultPointColumnPairs}},{key:"noneLayerDataAffectingProps",get:function(){return[].concat((0,h.Z)((0,ea.Z)((0,R.Z)(a.prototype),"noneLayerDataAffectingProps",this)),["radius"])}},{key:"visualChannels",get:function(){return{color:eE(eE({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).color),{},{accessor:"getFillColor",condition:function(e){return e.visConfig.filled},defaultValue:function(e){return e.color}}),strokeColor:{property:"strokeColor",key:"strokeColor",field:"strokeColorField",scale:"strokeColorScale",domain:"strokeColorDomain",range:"strokeColorRange",channelScaleType:B.CHANNEL_SCALES.color,accessor:"getLineColor",condition:function(e){return e.visConfig.outline},defaultValue:function(e){return e.visConfig.strokeColor||e.color}},size:eE(eE({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).size),{},{property:"radius",range:"radiusRange",fixed:"fixedRadius",channelScaleType:"radius",accessor:"getRadius",defaultValue:1})}}},{key:"setInitialLayerConfig",value:function(e){if(!e.dataContainer.numRows())return this;var t=(0,Y.findDefaultColorField)(e);return t&&(this.updateLayerConfig({colorField:t}),this.updateLayerVisualChannel(e,"color")),this}},{key:"getDefaultLayerConfig",value:function(e){return eE(eE({},(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultLayerConfig",this).call(this,e)),{},{strokeColorField:null,strokeColorDomain:[0,1],strokeColorScale:"quantile"})}},{key:"calculateDataAttribute",value:function(e,t){for(var r=e.filteredIndex,n=[],a=0;a<r.length;a++){var o=r[a],i=t({index:o});i.every(Number.isFinite)&&n.push({position:i,index:o})}return n}},{key:"formatLayerData",value:function(e,t){if(null===this.config.dataId)return{};var r=this.config.textLabel,n=e[this.config.dataId],a=n.gpuFilter,o=n.dataContainer,i=this.updateData(e,t),l=i.data,u=i.triggerChanged,c=this.getPositionAccessor(o),s=ep({textLabel:r,triggerChanged:u,oldLayerData:t,data:l,dataContainer:o}),d=this.getAttributeAccessors({dataContainer:o});return eE({data:l,getPosition:c,getFilterValue:a.filterValueAccessor(o)(),textLabels:s},d)}},{key:"updateLayerMeta",value:function(e){var t=this.getPositionAccessor(e),r=this.getPointsBounds(e,t);this.updateMeta({bounds:r})}},{key:"renderLayer",value:function(e){var t,r=e.data,n=e.gpuFilter,a=e.objectHovered,o=e.mapState,i=e.interactionConfig,l=this.config.visConfig.fixedRadius&&Boolean(this.config.sizeField),u=this.getRadiusScaleByZoom(o,l),c=eE({stroked:this.config.visConfig.outline,filled:this.config.visConfig.filled,lineWidthScale:this.config.visConfig.thickness,radiusScale:u},this.config.visConfig.fixedRadius?{}:{radiusMaxPixels:500}),s=eE({getPosition:this.config.columns,getFilterValue:n.filterValueUpdateTriggers},this.getVisualChannelUpdateTriggers()),d=this.getDefaultDeckLayerProps(e),f=this.getBrushingExtensionProps(i),p=ef(u,r.getRadius,o),g=[].concat((0,h.Z)(d.extensions),[eP]),y=eE({getFilterValue:r.getFilterValue,extensions:g,filterRange:d.filterRange,visible:d.visible},f),v=this.hasHoveredObject(a);return[new ei.Z(eE(eE(eE(eE(eE({},d),f),c),r),{},{parameters:{depthTest:(null===(t=this.config.columns.altitude)||void 0===t?void 0:t.fieldIdx)>-1},lineWidthUnits:"pixels",updateTriggers:s,extensions:g}))].concat((0,h.Z)(v?[new ei.Z(eE(eE(eE({},this.getDefaultHoverLayerProps()),c),{},{visible:d.visible,data:[v],getLineColor:this.config.highlightColor,getFillColor:this.config.highlightColor,getRadius:r.getRadius,getPosition:r.getPosition}))]:[]),(0,h.Z)(this.renderTextLabelLayer({getPosition:r.getPosition,sharedProps:y,getPixelOffset:p,updateTriggers:s},e)))}}],[{key:"findDefaultLayerProps",value:function(e){var t=e.fieldPairs,r=[];return(void 0===t?[]:t).forEach(function(e){var t=e.pair.lat,n={label:e.defaultName||"Point"};t.value in B.DEFAULT_LAYER_COLOR&&(n.color=(0,Y.hexToRgb)(B.DEFAULT_LAYER_COLOR[t.value])),0===r.length&&(n.isVisible=!0),n.columns=em(e,!0),r.push(n)}),{props:r}}}]),a}(en),e_=r(66668),ex=I.createElement,eD=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return ex(Z,this.props,ex("path",{d:"M34.5,34.4c-0.6,0-1.2-0.4-1.4-1c-2.7-9.9-8.8-21.7-16.8-22.3c-3.1-0.2-5.6,1.5-7,4.8c-0.3,0.7-1.1,1.1-1.9,0.7 c-0.7-0.3-1.1-1.1-0.7-1.9c1.9-4.3,5.6-6.8,9.8-6.5c9.5,0.7,16.3,13,19.4,24.4c0.2,0.8-0.2,1.5-1,1.7C34.8,34.3,34.6,34.4,34.5,34.4 z",className:"cr1"}),ex("path",{d:"M6.7,57c0,0-0.1,0-0.1,0c-0.5-0.1-0.9-0.6-0.8-1.1c2.4-17.3,9.6-30.3,17.5-31.8c3.1-0.6,7.8,0.4,12.1,8.3 c0.3,0.5,0.1,1-0.4,1.3c-0.5,0.3-1,0.1-1.3-0.4c-2.1-3.8-5.6-8.2-10.1-7.4C16.6,27.3,9.9,40,7.6,56.2C7.6,56.7,7.2,57,6.7,57z",className:"cr2"}),ex("path",{d:"M56.8,56.4c-0.8,0-1.4-0.6-1.4-1.4c0-13.5-6.8-24.4-12.9-25.8c-3.5-0.8-5.6,2-6.7,4.4c-0.3,0.7-1.2,1-1.9,0.7 c-0.7-0.3-1-1.2-0.7-1.9c2.2-4.7,5.8-6.9,9.9-6c9,2,15.1,16.4,15.1,28.6C58.3,55.7,57.6,56.4,56.8,56.4z",className:"cr3"}),ex("path",{d:"M34.5,32.7c-0.2,0-0.3,0-0.5,0c-1.3-0.3-2.1-1.5-1.8-2.8c3.5-17.4,10.3-20.7,14-21.2c4.4-0.5,8.6,2.3,11,7.4 c0.6,1.2,0,2.6-1.1,3.1c-1.2,0.6-2.6,0-3.1-1.1c-1.5-3.2-3.8-5-6.1-4.7c-1.5,0.2-6.8,2-9.9,17.4C36.6,32,35.6,32.7,34.5,32.7z",className:"cr4"}))}}]),a}(I.Component);function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,y.Z)(eD,"defaultProps",{height:"16px",predefinedClassName:"point-layer-icon",totalColor:4});var ek=function(e){var t=e.lat0,r=e.lng0,n=e.lat1,a=e.lng1;return function(e){return function(o){return[e.valueAt(o.index,r.fieldIdx),e.valueAt(o.index,t.fieldIdx),0,e.valueAt(o.index,a.fieldIdx),e.valueAt(o.index,n.fieldIdx),0]}}},ew=["lat0","lng0","lat1","lng1"],eM={lat0:"arc.lat0",lng0:"arc.lng0",lat1:"arc.lat1",lng1:"arc.lng1"},eF={opacity:"opacity",thickness:"thickness",colorRange:"colorRange",sizeRange:"strokeWidthRange",targetColor:"targetColor"},ej=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),(t=n.call(this,e)).registerVisConfig(eF),t.getPositionAccessor=function(e){return ek(t.config.columns)(e)},t}return(0,b.Z)(a,[{key:"type",get:function(){return"arc"}},{key:"isAggregated",get:function(){return!1}},{key:"layerIcon",get:function(){return eD}},{key:"requiredLayerColumns",get:function(){return ew}},{key:"columnLabels",get:function(){return eM}},{key:"columnPairs",get:function(){return this.defaultLinkColumnPairs}},{key:"visualChannels",get:function(){return{sourceColor:eI(eI({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).color),{},{property:"color",key:"sourceColor",accessor:"getSourceColor",defaultValue:function(e){return e.color}}),targetColor:eI(eI({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).color),{},{property:"targetColor",key:"targetColor",accessor:"getTargetColor",defaultValue:function(e){return e.visConfig.targetColor||e.color}}),size:eI(eI({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).size),{},{accessor:"getWidth",property:"stroke"})}}},{key:"calculateDataAttribute",value:function(e,t){e.dataContainer;for(var r=e.filteredIndex,n=[],a=0;a<r.length;a++){var o=r[a],i=t({index:o});i.every(Number.isFinite)&&n.push({index:o,sourcePosition:[i[0],i[1],i[2]],targetPosition:[i[3],i[4],i[5]]})}return n}},{key:"formatLayerData",value:function(e,t){if(null===this.config.dataId)return{};var r=e[this.config.dataId],n=r.gpuFilter,a=r.dataContainer,o=this.updateData(e,t).data,i=this.getAttributeAccessors({dataContainer:a});return eI({data:o,getFilterValue:n.filterValueAccessor(a)()},i)}},{key:"updateLayerMeta",value:function(e){var t=this.getPositionAccessor(e),r=this.getPointsBounds(e,function(e){var r=t(e);return[r[0],r[1]]}),n=this.getPointsBounds(e,function(e){var r=t(e);return[r[3],r[4]]}),a=n&&r?[Math.min(r[0],n[0]),Math.min(r[1],n[1]),Math.max(r[2],n[2]),Math.max(r[3],n[3])]:r||n;this.updateMeta({bounds:a})}},{key:"renderLayer",value:function(e){var t=e.data,r=e.gpuFilter,n=e.objectHovered,a=e.interactionConfig,o=eI({getPosition:this.config.columns,getFilterValue:r.filterValueUpdateTriggers},this.getVisualChannelUpdateTriggers()),i=this.config.visConfig.thickness*B.PROJECTED_PIXEL_SIZE_MULTIPLIER,l=this.getDefaultDeckLayerProps(e),u=this.hasHoveredObject(n);return[new e_.Z(eI(eI(eI(eI({},l),this.getBrushingExtensionProps(a,"source_target")),t),{},{widthScale:i,updateTriggers:o,extensions:[].concat((0,h.Z)(l.extensions),[new eo.Z])}))].concat((0,h.Z)(u?[new e_.Z(eI(eI({},this.getDefaultHoverLayerProps()),{},{visible:l.visible,data:[u],widthScale:i,getSourceColor:this.config.highlightColor,getTargetColor:this.config.highlightColor,getWidth:t.getWidth}))]:[]))}}],[{key:"findDefaultLayerProps",value:function(e){var t=e.fieldPairs,r=void 0===t?[]:t;return r.length<2?{props:[]}:{props:[{color:(0,Y.hexToRgb)(B.DEFAULT_LAYER_COLOR.tripArc),columns:{lat0:r[0].pair.lat,lng0:r[0].pair.lng,lat1:r[1].pair.lat,lng1:r[1].pair.lng},label:"".concat(r[0].defaultName," -> ").concat(r[1].defaultName," arc")}]}}}]),a}(en),eZ=r(53235),eN=I.createElement,eU=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return eN(Z,this.props,eN("path",{d:"M57.8,58.3c-0.4,0-0.8-0.2-1.1-0.5L33.1,32.1c-0.6-0.6-0.5-1.6,0.1-2.1c0.6-0.6,1.6-0.5,2.1,0.1l23.7,25.8 c0.6,0.6,0.5,1.6-0.1,2.1C58.5,58.2,58.2,58.3,57.8,58.3z",className:"cr1"}),eN("path",{d:"M34.2,33.6c-0.6,0-1.2-0.2-1.7-0.6c-1-0.9-1.1-2.5-0.2-3.5l18.5-21c0.9-1,2.5-1.1,3.5-0.2c1,0.9,1.1,2.5,0.2,3.5L36,32.7 C35.5,33.3,34.9,33.6,34.2,33.6z",className:"cr2"}),eN("path",{d:"M34.2,32.6c-0.5,0-1-0.3-1.3-0.8L20.7,10.2c-0.4-0.7-0.1-1.6,0.6-2c0.7-0.4,1.6-0.1,2,0.6l12.1,21.6c0.4,0.7,0.1,1.6-0.6,2 C34.7,32.5,34.4,32.6,34.2,32.6z",className:"cr3"}),eN("path",{d:"M15.8,58.4c-0.3,0-0.6-0.1-0.9-0.3c-0.7-0.5-0.8-1.4-0.4-2.1l18.3-25.8c0.5-0.7,1.4-0.8,2.1-0.4s0.8,1.4,0.4,2.1L17.1,57.7 C16.8,58.2,16.3,58.4,15.8,58.4z",className:"cr4"}),eN("path",{d:"M34.2,32.1c-0.1,0-0.3,0-0.4-0.1l-28.5-14c-0.5-0.2-0.7-0.8-0.5-1.3c0.2-0.5,0.8-0.7,1.3-0.5l28.5,14 c0.5,0.2,0.7,0.8,0.5,1.3C34.9,31.9,34.5,32.1,34.2,32.1z",className:"cr5"}))}}]),a}(I.Component);function eV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,y.Z)(eU,"defaultProps",{height:"16px",predefinedClassName:"line-layer-icon",totalColor:5});var eB=function(e){var t=e.lat0,r=e.lng0,n=e.lat1,a=e.lng1,o=e.alt0,i=e.alt1;return function(e){return function(l){return[e.valueAt(l.index,r.fieldIdx),e.valueAt(l.index,t.fieldIdx),o&&o.fieldIdx>-1?e.valueAt(l.index,o.fieldIdx):0,e.valueAt(l.index,a.fieldIdx),e.valueAt(l.index,n.fieldIdx),i&&(null==i?void 0:i.fieldIdx)>-1?e.valueAt(l.index,i.fieldIdx):0]}}},eY=["lat0","lng0","lat1","lng1"],ez=["alt0","alt1"],eH={lat0:"arc.lat0",lng0:"arc.lng0",lat1:"arc.lat1",lng1:"arc.lng1",alt0:"line.alt0",alt1:"line.alt1"},eW={opacity:"opacity",thickness:"thickness",colorRange:"colorRange",sizeRange:"strokeWidthRange",targetColor:"targetColor",elevationScale:eG(eG({},B.LAYER_VIS_CONFIGS.elevationScale),{},{defaultValue:1})},eq=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),(t=n.call(this,e)).registerVisConfig(eW),t.getPositionAccessor=function(e){return eB(t.config.columns)(e)},t}return(0,b.Z)(a,[{key:"type",get:function(){return"line"}},{key:"layerIcon",get:function(){return eU}},{key:"requiredLayerColumns",get:function(){return eY}},{key:"optionalColumns",get:function(){return ez}},{key:"columnLabels",get:function(){return eH}},{key:"visualChannels",get:function(){var e=(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this);return eG(eG({},e),{},{sourceColor:eG(eG({},e.sourceColor),{},{accessor:"getColor"})})}},{key:"renderLayer",value:function(e){var t=e.data,r=e.gpuFilter,n=e.objectHovered,a=e.interactionConfig,o={widthScale:this.config.visConfig.thickness*B.PROJECTED_PIXEL_SIZE_MULTIPLIER,elevationScale:this.config.visConfig.elevationScale},i=eG({getPosition:this.config.columns,getFilterValue:r.filterValueUpdateTriggers},this.getVisualChannelUpdateTriggers()),l=this.getDefaultDeckLayerProps(e),u=this.hasHoveredObject(n);return[new eZ.o2(eG(eG(eG(eG(eG({},l),this.getBrushingExtensionProps(a,"source_target")),t),o),{},{updateTriggers:i,extensions:[].concat((0,h.Z)(l.extensions),[new eo.Z])}))].concat((0,h.Z)(u?[new eZ.o2(eG(eG(eG({},this.getDefaultHoverLayerProps()),o),{},{data:[u],getColor:this.config.highlightColor,getTargetColor:this.config.highlightColor,getWidth:t.getWidth}))]:[]))}}],[{key:"findDefaultLayerProps",value:function(e){var t=e.fieldPairs,r=void 0===t?[]:t;return r.length<2?{props:[]}:{props:[{columns:{lat0:r[0].pair.lat,lng0:r[0].pair.lng,alt0:{value:null,fieldIdx:-1,optional:!0},lat1:r[1].pair.lat,lng1:r[1].pair.lng,alt1:{value:null,fieldIdx:-1,optional:!0}},label:"".concat(r[0].defaultName," -> ").concat(r[1].defaultName," line")}]}}}]),a}(ej),eK=r(27922),eX=r(10748),eJ=r(48752),eQ=r.n(eJ);function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var e1=function(e){var t=e.lat,r=e.lng;return function(e){return function(n){return[e.valueAt(n.index,r.fieldIdx),e.valueAt(n.index,t.fieldIdx)]}}},e2=function(e,t){return function(r){return t(r).every(function(t,r){return t>=e[r][0]&&t<=e[r][1]})}},e3=function(e){return e.colors.map(Y.hexToRgb)},e4=["lat","lng"],e5=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"getColorRange",void 0),t.getPositionAccessor=function(e){return e1(t.config.columns)(e)},t.getColorRange=eQ()(e3),t.getPointData=function(e){return e.source},t.gpuFilterGetIndex=function(e){return t.getPointData(e).index},t.gpuFilterGetData=function(e,t,r){return e.valueAt(t.index,r)},t}return(0,b.Z)(a,[{key:"isAggregated",get:function(){return!0}},{key:"requiredLayerColumns",get:function(){return e4}},{key:"columnPairs",get:function(){return this.defaultPointColumnPairs}},{key:"noneLayerDataAffectingProps",get:function(){return[].concat((0,h.Z)((0,ea.Z)((0,R.Z)(a.prototype),"noneLayerDataAffectingProps",this)),["enable3d","colorRange","colorDomain","sizeRange","sizeScale","sizeDomain","percentile","coverage","elevationPercentile","elevationScale","enableElevationZoomFactor"])}},{key:"visualChannels",get:function(){return{color:{aggregation:"colorAggregation",channelScaleType:B.CHANNEL_SCALES.colorAggr,defaultMeasure:"property.pointCount",domain:"colorDomain",field:"colorField",key:"color",property:"color",range:"colorRange",scale:"colorScale"},size:{aggregation:"sizeAggregation",channelScaleType:B.CHANNEL_SCALES.sizeAggr,condition:function(e){return e.visConfig.enable3d},defaultMeasure:"property.pointCount",domain:"sizeDomain",field:"sizeField",key:"size",property:"height",range:"sizeRange",scale:"sizeScale"}}}},{key:"getVisualChannelDescription",value:function(e){var t,r=this.visualChannels[e];if(!r)return{label:"",measure:void 0};var n=r.range,a=r.field,o=r.defaultMeasure,i=r.aggregation,l=this.config[a],u=null===(t=this.visConfigSettings[n])||void 0===t?void 0:t.label;return{label:"function"==typeof u?u(this.config):u||"",measure:l&&i?"".concat(this.config.visConfig[i]," of ").concat(l.displayName||l.name):o}}},{key:"getHoverData",value:function(e){return e}},{key:"updateLayerVisualChannel",value:function(e,t){e.dataContainer,this.validateVisualChannel(t)}},{key:"validateVisualChannel",value:function(e){this.validateFieldType(e),this.validateAggregationType(e),this.validateScale(e)}},{key:"validateAggregationType",value:function(e){var t=this.visualChannels[e],r=t.field,n=t.aggregation,a=this.getAggregationOptions(e);n&&(a.length?a.includes(this.config.visConfig[n])||this.updateLayerVisConfig((0,y.Z)({},n,a[0])):this.updateLayerConfig((0,y.Z)({},r,null)))}},{key:"getAggregationOptions",value:function(e){var t=this.visualChannels[e],r=t.field,n=t.channelScaleType;return Object.keys(this.config[r]?B.FIELD_OPTS[this.config[r].type].scale[n]:B.DEFAULT_AGGREGATION[n])}},{key:"getScaleOptions",value:function(e){var t=this.visualChannels[e],r=t.field,n=t.aggregation,a=t.channelScaleType,o=n?this.config.visConfig[n]:null;return o?this.config[r]?B.FIELD_OPTS[this.config[r].type].scale[a][o]:B.DEFAULT_AGGREGATION[a][o]:[]}},{key:"updateLayerDomain",value:function(e,t){return this}},{key:"updateLayerMeta",value:function(e,t){var r=this.getPointsBounds(e,t);this.updateMeta({bounds:r})}},{key:"calculateDataAttribute",value:function(e,t){e.dataContainer;for(var r=e.filteredIndex,n=[],a=0;a<r.length;a++){var o=r[a];t({index:o}).every(Number.isFinite)&&n.push({index:o})}return n}},{key:"formatLayerData",value:function(e,t){if(null===this.config.dataId)return{};var r,n=e[this.config.dataId],a=n.gpuFilter,o=n.dataContainer,i=this.getPositionAccessor(o),l=(r=this.getPointData,function(e,t){return function(n){return e?(0,Y.aggregate)(n.map(function(t){return e.valueAccessor(r(t))}),t):n.length}}),u=l(this.config.colorField,this.config.visConfig.colorAggregation),c=l(this.config.sizeField,this.config.visConfig.sizeAggregation),s=Object.values(a.filterRange).some(function(e){return e.some(function(e){return 0!==e})}),d=a.filterValueAccessor(o)(this.gpuFilterGetIndex,this.gpuFilterGetData),f=s?e2(a.filterRange,d):void 0;return e0(e0({data:this.updateData(e,t).data,getPosition:i,_filterData:f},u?{getColorValue:u}:{}),c?{getElevationValue:c}:{})}},{key:"getDefaultDeckLayerProps",value:function(e){return e0(e0({},(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultDeckLayerProps",this).call(this,e)),{},{highlightColor:B.HIGHLIGH_COLOR_3D,extensions:[],autoHighlight:this.config.visConfig.enable3d})}},{key:"getDefaultAggregationLayerProp",value:function(e){var t=e.gpuFilter,r=e.mapState,n=e.layerCallbacks,a=this.config.visConfig,o=this.getElevationZoomFactor(r),i={getColorValue:{colorField:this.config.colorField,colorAggregation:this.config.visConfig.colorAggregation},getElevationValue:{sizeField:this.config.sizeField,sizeAggregation:this.config.visConfig.sizeAggregation},_filterData:e0({filterRange:t.filterRange},t.filterValueUpdateTriggers)};return e0(e0({},this.getDefaultDeckLayerProps(e)),{},{coverage:a.coverage,colorRange:this.getColorRange(a.colorRange),colorScaleType:this.config.colorScale,upperPercentile:a.percentile[1],lowerPercentile:a.percentile[0],colorAggregation:a.colorAggregation,extruded:a.enable3d,elevationScale:a.elevationScale*o,elevationScaleType:this.config.sizeScale,elevationRange:a.sizeRange,elevationLowerPercentile:a.elevationPercentile[0],elevationUpperPercentile:a.elevationPercentile[1],updateTriggers:i,onSetColorDomain:(void 0===n?{}:n).onSetLayerDomain})}}]),a}(en),e7=r(21440);function e6(e){var t=e.object,r=e.cellSize,n=e.coverage,a=e.properties,o=e.mapState,i=t.position,l=new e7.Z(o);return i?{geometry:{coordinates:[l.addMetersToLngLat(i,[r*(.5-n/2),r*(.5-n/2)]),l.addMetersToLngLat(i,[r*(.5+n/2),r*(.5-n/2)]),l.addMetersToLngLat(i,[r*(.5+n/2),r*(.5+n/2)]),l.addMetersToLngLat(i,[r*(.5-n/2),r*(.5+n/2)]),l.addMetersToLngLat(i,[r*(.5-n/2),r*(.5-n/2)])],type:"LineString"},properties:a}:null}var e8=I.createElement,e9=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return e8(Z,this.props,e8("rect",{x:"11.2",y:"11.2",className:"cr1",width:"13.1",height:"13.1",style:{opacity:.8}}),e8("rect",{x:"25.4",y:"11.2",className:"cr2",width:"13.1",height:"13.1",style:{opacity:.8}}),e8("rect",{x:"39.6",y:"11.2",width:"13.1",height:"13.1",className:"cr3"}),e8("rect",{x:"11.2",y:"25.4",className:"cr4",width:"13.1",height:"13.1",style:{opacity:.4}}),e8("rect",{x:"25.4",y:"25.4",className:"cr5",width:"13.1",height:"13.1"}),e8("rect",{x:"39.6",y:"25.4",className:"cr6",width:"13.1",height:"13.1",style:{opacity:.8}}),e8("rect",{x:"11.2",y:"39.6",width:"13.1",className:"cr1",height:"13.1"}),e8("rect",{x:"25.4",y:"39.6",className:"cr2",width:"13.1",height:"13.1",style:{opacity:.4}}),e8("rect",{x:"39.6",y:"39.6",className:"cr3",width:"13.1",height:"13.1",style:{opacity:.4}}))}}]),a}(I.Component);function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,y.Z)(e9,"defaultProps",{height:"16px",predefinedClassName:"grid-layer-icon",totalColor:6});var tr={opacity:"opacity",worldUnitSize:"worldUnitSize",colorRange:"colorRange",coverage:"coverage",sizeRange:"elevationRange",percentile:"percentile",elevationPercentile:"elevationPercentile",elevationScale:"elevationScale",enableElevationZoomFactor:"enableElevationZoomFactor",colorAggregation:"colorAggregation",sizeAggregation:"sizeAggregation",enable3d:"enable3d"},tn=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),(t=n.call(this,e)).registerVisConfig(tr),t.visConfigSettings.worldUnitSize.label="columns.grid.worldUnitSize",t}return(0,b.Z)(a,[{key:"type",get:function(){return"grid"}},{key:"layerIcon",get:function(){return e9}},{key:"renderLayer",value:function(e){var t=e.data,r=e.objectHovered,n=e.mapState,a=this.getDefaultAggregationLayerProp(e),o=this.getZoomFactor(n),i=this.config.visConfig,l=1e3*i.worldUnitSize,u=this.hasHoveredObject(r);return[new eZ.BA(tt(tt(tt({},a),t),{},{wrapLongitude:!1,cellSize:l}))].concat((0,h.Z)(u&&!i.enable3d?[new eK.Z(tt(tt({},this.getDefaultHoverLayerProps()),{},{visible:a.visible,wrapLongitude:!1,data:[e6({object:u,cellSize:l,coverage:i.coverage,mapState:n})],getLineColor:this.config.highlightColor,lineWidthScale:8*o}))]:[]))}}]),a}(e5),ta=r(83594),to=r.n(ta);function ti(e,t,r){var n=Math.PI/180*(60*r+30);return[e[0]+t*Math.cos(n),e[1]+t*Math.sin(n)]}var tl=I.createElement,tu=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return tl(Z,this.props,tl("polygon",{className:"cr1",points:"23.9,10 30.9,14 30.9,22.1 23.9,26.2 16.8,22.1 16.8,14 ",style:{opacity:.6}}),tl("polygon",{className:"cr2",points:"23.9,37.8 30.9,41.9 30.9,50 23.9,54 16.8,50 16.8,41.9 ",style:{opacity:.4}}),tl("polygon",{className:"cr6",points:"40.1,10 47.2,14 47.2,22.1 40.1,26.2 33.1,22.1 33.1,14 "}),tl("polygon",{className:"cr3",points:"40.1,37.8 47.2,41.9 47.2,50 40.1,54 33.1,50 33.1,41.9 ",style:{opacity:.8}}),tl("polygon",{className:"cr1",points:"15.8,23.9 22.8,27.9 22.8,36.1 15.8,40.1 8.7,36.1 8.7,27.9 "}),tl("polygon",{className:"cr4",points:"32,23.9 39,27.9 39,36.1 32,40.1 25,36.1 25,27.9 ",style:{opacity:.8}}),tl("polygon",{className:"cr5",points:"48.2,23.9 55.3,27.9 55.3,36.1 48.2,40.1 41.2,36.1 41.2,27.9 ",style:{opacity:.4}}))}}]),a}(I.Component);function tc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tc(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,y.Z)(tu,"defaultProps",{height:"16px",predefinedClassName:"hexagon-layer-icon",totalColor:6});var td={opacity:"opacity",worldUnitSize:"worldUnitSize",resolution:"resolution",colorRange:"colorRange",coverage:"coverage",sizeRange:"elevationRange",percentile:"percentile",elevationPercentile:"elevationPercentile",elevationScale:"elevationScale",enableElevationZoomFactor:"enableElevationZoomFactor",colorAggregation:"colorAggregation",sizeAggregation:"sizeAggregation",enable3d:"enable3d"},tf=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),(t=n.call(this,e)).registerVisConfig(td),t.visConfigSettings.worldUnitSize.label="columns.hexagon.worldUnitSize",t}return(0,b.Z)(a,[{key:"type",get:function(){return"hexagon"}},{key:"name",get:function(){return"Hexbin"}},{key:"layerIcon",get:function(){return tu}},{key:"renderLayer",value:function(e){var t=e.data,r=e.objectHovered,n=e.mapState,a=this.getDefaultAggregationLayerProp(e),o=this.getZoomFactor(n),i=this.config.visConfig,l=1e3*i.worldUnitSize,u=this.hasHoveredObject(r);return[new eZ.$Q(ts(ts(ts({},a),t),{},{wrapLongitude:!1,radius:l}))].concat((0,h.Z)(u&&!i.enable3d?[new eK.Z(ts(ts({},this.getDefaultHoverLayerProps()),{},{visible:a.visible,wrapLongitude:!1,data:[function(e,t,r,n){var a=new e7.Z(n);if(!Array.isArray(e.position))return null;var o=a.projectFlat(e.position),i=a.getDistanceScales(e.position).unitsPerMeter;if(!Array.isArray(i))return to().warn("unitsPerMeter is undefined"),null;for(var l=r*i[0],u=[],c=0;c<6;c++){var s=ti(o,l,c);u.push(a.unprojectFlat(s))}return u.push(u[0]),{geometry:{coordinates:u,type:"LineString"},properties:t}}(u,{},l*i.coverage,n)].filter(function(e){return e}),getLineColor:this.config.highlightColor,lineWidthScale:(0,Y.clamp)([1,100],.1*l*o)}))]:[]))}}]),a}(e5),tp=r(7537),tg=r(12345),ty=r(30676),th=r(92735),tv=r.n(th),tm=r(22218),tb=r(76755),tO=r(44954),tE=r(34694),tT=r(67895),tS=r(79225),tA=r(62547).lW;function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tC(e){if("object"==typeof e){var t=tv()(e);return t&&Array.isArray(t.features)?t.features[0]:null}return"string"==typeof e?function(e){try{n=JSON.parse(e)}catch(t){}if(!n)try{n=(0,tO.q)(e,tE.D)}catch(r){return null}if(!n)try{var n,a=tA.from(e,"hex"),o=(0,tO.q)(a,tT.G);n=(0,tS.f)(o)}catch(i){return null}if(!n)return null;var l=tv()(n);return l&&Array.isArray(l.features)?l.features[0]:null}(e):Array.isArray(e)?{type:"Feature",geometry:{coordinates:e.map(function(e){return[e[1],e[0]]}),type:"LineString"},properties:{}}:null}function t_(e,t){for(var r=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"],n=[],a=0;a<e.numRows();a++){var o=tC(t({index:a}));if(o&&o.geometry&&r.includes(o.geometry.type)){var i=tL(tL({},o),{},{properties:tL(tL({},o.properties),{},{index:a})});n[a]=i}else n[a]=null}return n}function tx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(e.length>1e4?(0,Y.getSampleData)(e,1e4):e).filter(function(e){return e&&e.geometry&&e.geometry.coordinates&&e.geometry.coordinates.length});try{return(0,tm.Z)({type:"FeatureCollection",features:t})}catch(r){return null}}(n={}).Point="Point",n.MultiPoint="MultiPoint",n.LineString="LineString",n.MultiLineString="MultiLineString",n.Polygon="Polygon",n.MultiPolygon="MultiPolygon";var tD={Point:"point",MultiPoint:"point",LineString:"line",MultiLineString:"line",Polygon:"polygon",MultiPolygon:"polygon"};function tR(e){for(var t={},r=0;r<e.length;r++){var n=e[r];if(n&&"geometry"in n){var a=tD[n.geometry&&n.geometry.type];a&&(t[a]=!0)}}return t}var tI=I.createElement,tk=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return tI(Z,this.props,tI("polygon",{className:"cr1",points:"25.04 23.08 9.72 31.79 8.19 43.2 19.57 53.83 28.79 53.83 35.6 46.57 39.45 30.08 25.04 23.08"}),tI("polygon",{className:"cr2",points:"52.8 26.3 41.74 30.32 37.9 46.75 45.26 53.83 51.45 53.83 55.07 43.51 52.8 26.3",style:{opacity:.8}}),tI("polygon",{className:"cr3",points:"36.69 48.75 31.93 53.83 41.96 53.83 36.69 48.75",style:{opacity:.4}}),tI("polygon",{className:"cr3",points:"25.95 20.98 40.84 28.22 52.57 24.06 50.89 11.5 23.24 11.5 25.95 20.98",style:{opacity:.4}}),tI("polygon",{className:"cr4",points:"20.79 11.9 11.73 15.72 10.08 28.96 23.64 21.25 20.79 11.9",style:{opacity:.8}}))}}]),a}(I.Component);(0,y.Z)(tk,"defaultProps",{height:null,size:"tiny",predefinedClassName:"geojson-layer-icon"});var tw=["data"];function tM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tM(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tj=(a={},(0,y.Z)(a,ty.DATA_TYPES.GEOMETRY,!0),(0,y.Z)(a,ty.DATA_TYPES.GEOMETRY_FROM_STRING,!0),(0,y.Z)(a,ty.DATA_TYPES.PAIR_GEOMETRY_FROM_STRING,!0),a),tZ={opacity:"opacity",strokeOpacity:tF(tF({},B.LAYER_VIS_CONFIGS.opacity),{},{property:"strokeOpacity"}),thickness:tF(tF({},B.LAYER_VIS_CONFIGS.thickness),{},{defaultValue:.5}),strokeColor:"strokeColor",colorRange:"colorRange",strokeColorRange:"strokeColorRange",radius:"radius",sizeRange:"strokeWidthRange",radiusRange:"radiusRange",heightRange:"elevationRange",elevationScale:"elevationScale",enableElevationZoomFactor:"enableElevationZoomFactor",stroked:"stroked",filled:"filled",enable3d:"enable3d",wireframe:"wireframe"},tN=["geojson"],tU=function(e){var t=e.geojson;return function(e){return function(r){return e.valueAt(r.index,t.fieldIdx)}}},tV=function(e){var t=e.geojson;return function(e){var r;return null===(r=e.getColumn)||void 0===r?void 0:r.call(e,t.fieldIdx)}},tG=function(e){var t=e.geojson;return function(e){return e.getField?e.getField(t.fieldIdx):null}},tB=500,tY=1,tz=1,tH=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"dataToFeature",[]),(0,y.Z)((0,eX.Z)(t),"dataContainer",null),(0,y.Z)((0,eX.Z)(t),"filteredIndex",null),(0,y.Z)((0,eX.Z)(t),"filteredIndexTrigger",null),(0,y.Z)((0,eX.Z)(t),"centroids",[]),t.registerVisConfig(tZ),t.getPositionAccessor=function(e){return tU(t.config.columns)(e)},t}return(0,b.Z)(a,[{key:"type",get:function(){return a.type}},{key:"name",get:function(){return"Polygon"}},{key:"layerIcon",get:function(){return tk}},{key:"requiredLayerColumns",get:function(){return tN}},{key:"visualChannels",get:function(){var e=(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this);return{color:tF(tF({},e.color),{},{accessor:"getFillColor",condition:function(e){return e.visConfig.filled},nullValue:e.color.nullValue,getAttributeValue:function(e){return function(t){return t.properties.fillColor||e.color}},defaultValue:function(e){return e.color}}),strokeColor:{property:"strokeColor",field:"strokeColorField",scale:"strokeColorScale",domain:"strokeColorDomain",range:"strokeColorRange",key:"strokeColor",channelScaleType:B.CHANNEL_SCALES.color,accessor:"getLineColor",condition:function(e){return e.visConfig.stroked},nullValue:e.color.nullValue,getAttributeValue:function(e){return function(t){return t.properties.lineColor||e.visConfig.strokeColor||e.color}},defaultValue:function(e){return e.visConfig.strokeColor||e.color}},size:tF(tF({},e.size),{},{property:"stroke",accessor:"getLineWidth",condition:function(e){return e.visConfig.stroked},nullValue:0,getAttributeValue:function(){return function(e){return e.properties.lineWidth||tY}}}),height:{property:"height",field:"heightField",scale:"heightScale",domain:"heightDomain",range:"heightRange",key:"height",channelScaleType:B.CHANNEL_SCALES.size,accessor:"getElevation",condition:function(e){return e.visConfig.enable3d},nullValue:0,getAttributeValue:function(){return function(e){return e.properties.elevation||tB}}},radius:{property:"radius",field:"radiusField",scale:"radiusScale",domain:"radiusDomain",range:"radiusRange",key:"radius",channelScaleType:B.CHANNEL_SCALES.radius,accessor:"getPointRadius",nullValue:0,getAttributeValue:function(){return function(e){return e.properties.radius||tz}}}}}},{key:"getDefaultLayerConfig",value:function(e){return tF(tF({},(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultLayerConfig",this).call(this,e)),{},{heightField:null,heightDomain:[0,1],heightScale:"linear",radiusField:null,radiusDomain:[0,1],radiusScale:"linear",strokeColorField:null,strokeColorDomain:[0,1],strokeColorScale:"quantile"})}},{key:"getHoverData",value:function(e,t){var r,n=t instanceof Y.ArrowDataContainer?e:null==e?void 0:null===(r=e.properties)||void 0===r?void 0:r.index;return n>=0?t.row(n):null}},{key:"calculateDataAttribute",value:function(e,t){var r=this,n=e.dataContainer,a=e.filteredIndex;if(n instanceof Y.ArrowDataContainer){if(this.filteredIndex&&this.filteredIndex.length===n.numRows()||(this.filteredIndex=new Uint8ClampedArray(n.numRows()),this.filteredIndex.fill(1)),!(a&&a.length===n.numRows())||null!==this.filteredIndexTrigger){this.filteredIndex.fill(0);for(var o=0;o<a.length;++o)this.filteredIndex[a[o]]=1;this.filteredIndexTrigger=a}return this.dataToFeature}return a.map(function(e){return r.dataToFeature[e]}).filter(function(e){return e})}},{key:"formatLayerData",value:function(e,t){var r=this;if(null===this.config.dataId)return{};var n=e[this.config.dataId],a=n.gpuFilter,o=n.dataContainer,i=this.updateData(e,t).data,l=function(e,t,r){return e.valueAt(t.properties.index,r)},u=function(e){return e.properties.index},c=function(e){return function(e){return{index:e.properties.index}}},s=this.getAttributeAccessors({dataAccessor:c,dataContainer:o}),d=function(e){return r.filteredIndex?r.filteredIndex[e.properties.index]:1};return tF({data:i,getFilterValue:a.filterValueAccessor(o)(u,l),getFiltered:d},s)}},{key:"isInPolygon",value:function(e,t,r){if(0===this.centroids.length||!this.centroids[t])return!1;var n=(null===(o=r.properties)||void 0===o?void 0:o.shape)==="Rectangle",a=this.centroids[t];if(!a)return!1;if(n&&null!==(i=r.properties)&&void 0!==i&&i.bbox){var o,i,l,u=null===(l=r.properties)||void 0===l?void 0:l.bbox,c=(0,v.Z)(u,4),s=c[0],d=c[1],f=c[2],p=c[3];return a[0]>=s&&a[0]<=f&&a[1]>=d&&a[1]<=p}return(0,tg.Z)((0,tp.xm)(a),r)}},{key:"updateLayerMeta",value:function(e){this.dataContainer=e;var t=this.getPositionAccessor(e),r=tV(this.config.columns),n=tG(this.config.columns);if(e instanceof Y.ArrowDataContainer){if(this.dataToFeature.length<e.numChunks()){var a,o,i,l,u,c,s,d,f,p,g,y,v,m,b,O=e.numChunks()-this.dataToFeature.length==1,E=(i=(a=tF({dataContainer:e,getGeoColumn:r,getGeoField:n},O?{chunkIndex:this.dataToFeature.length}:null)).dataContainer,l=a.getGeoColumn,u=a.getGeoField,c=a.chunkIndex,s=l(i),f=null==(d=u(i))?void 0:null===(o=d.metadata)||void 0===o?void 0:o.get("ARROW:extension:name"),p=ev(ev({},void 0!==c&&c>=0?{chunkIndex:c,chunkOffset:s.data[0].length*c}:{}),{},{triangulate:!0,calculateMeanCenters:!0}),y=(g=(0,eg.KO)(s,f,p)).binaryGeometries,v=g.featureTypes,m=g.bounds,{dataToFeature:y,featureTypes:v,bounds:m,fixedRadius:!1,centroids:b=g.meanCenters}),T=E.dataToFeature,S=E.bounds,A=E.fixedRadius,P=E.featureTypes,L=E.centroids;L&&(this.centroids=this.centroids.concat(L)),this.updateMeta({bounds:S,fixedRadius:A,featureTypes:P}),this.dataToFeature=[].concat((0,h.Z)(this.dataToFeature),(0,h.Z)(T))}}else if(0===this.dataToFeature.length){var C=function(e){for(var t=e.dataContainer,r=t_(t,e.getFeature),n=tx(r),a=Boolean(r.find(function(e){var t;return e&&("properties"in e)&&(null===(t=e.properties)||void 0===t?void 0:t.radius)})),o=tR(r),i=[],l=0;l<r.length;l++){var u=r[l];if(u)try{var c=(0,tb.Z)(u);i.push(c.geometry.coordinates)}catch(s){i.push(null)}}return{dataToFeature:r,bounds:n,fixedRadius:a,featureTypes:o,centroids:i}}({dataContainer:e,getFeature:t}),_=C.dataToFeature,x=C.bounds,D=C.fixedRadius,R=C.featureTypes,I=C.centroids;I&&(this.centroids=I),this.dataToFeature=_,this.updateMeta({bounds:x,fixedRadius:D,featureTypes:R})}}},{key:"setInitialLayerConfig",value:function(e){var t=e.dataContainer;if(!t.numRows())return this;this.updateLayerMeta(t);var r=this.meta.featureTypes;return r&&r.polygon?this.updateLayerVisConfig({filled:!0,stroked:!0,strokeColor:er.next().value}):r&&r.point?this.updateLayerVisConfig({filled:!0,stroked:!1}):this}},{key:"isLayerHovered",value:function(e){return this.dataContainer instanceof Y.ArrowDataContainer?eb(e,this.id):(0,ea.Z)((0,R.Z)(a.prototype),"isLayerHovered",this).call(this,e)}},{key:"hasHoveredObject",value:function(e){return this.dataContainer instanceof Y.ArrowDataContainer?function(e,t,r,n,a){if(eb(e,r)&&e.index>=0&&t){var o,i=n(t),l=null==i?void 0:i.get(e.index),u=a(t),c=null==u?void 0:null===(o=u.metadata)||void 0===o?void 0:o.get("ARROW:extension:name"),s=(0,ey.N)(l,c),d=t.rowAsArray(e.index).reduce(function(e,r,n){var a,o=null==t?void 0:null===(a=t.getField)||void 0===a?void 0:a.call(t,n).name;return o!==u.name&&(e[o]=r),e},{});return s?{type:"Feature",geometry:s,properties:ev(ev({},d),{},{index:e.index})}:null}return null}(e,this.dataContainer,this.id,tV(this.config.columns),tG(this.config.columns)):(0,ea.Z)((0,R.Z)(a.prototype),"hasHoveredObject",this).call(this,e)}},{key:"renderLayer",value:function(e){var t=this,r=e.data,n=e.gpuFilter,a=e.objectHovered,o=e.mapState,i=e.interactionConfig,l=this.meta,u=l.fixedRadius,c=l.featureTypes,s=this.getRadiusScaleByZoom(o,u),d=this.getZoomFactor(o),f=this.getElevationZoomFactor(o),p=this.config.visConfig,g={lineWidthScale:p.thickness*d*8,elevationScale:p.elevationScale*f,pointRadiusScale:s,lineMiterLimit:4},y=tF(tF({},this.getVisualChannelUpdateTriggers()),{},{getFilterValue:n.filterValueUpdateTriggers,getFiltered:this.filteredIndexTrigger}),v=this.getDefaultDeckLayerProps(e),m={opacity:p.strokeOpacity},b=i.tooltip.enabled,O=this.hasHoveredObject(a),E=r.data,T=(0,w.Z)(r,tw),S=this.dataContainer instanceof Y.ArrowDataContainer?E:[E],A=S.map(function(e,r){return new eK.Z(tF(tF(tF(tF({},v),g),T),{},{data:e,id:S.length>1?"".concat(t.id,"-").concat(r):t.id,pickable:b,highlightColor:B.HIGHLIGH_COLOR_3D,autoHighlight:p.enable3d&&b,stroked:p.stroked,filled:p.filled,extruded:p.enable3d,wireframe:p.wireframe,wrapLongitude:!1,lineMiterLimit:2,capRounded:!0,jointRounded:!0,updateTriggers:y,extensions:[].concat((0,h.Z)(v.extensions),[new eZ.ws]),_subLayerProps:tF(tF(tF({},null!=c&&c.polygon?{"polygons-stroke":m}:{}),null!=c&&c.line?{linestrings:m}:{}),null!=c&&c.point?{points:{lineOpacity:p.strokeOpacity}}:{})}))});return[].concat((0,h.Z)(A),(0,h.Z)(O&&!p.enable3d?[new eK.Z(tF(tF(tF({},this.getDefaultHoverLayerProps()),g),{},{visible:v.visible,wrapLongitude:!1,data:[O],getLineWidth:T.getLineWidth,getPointRadius:T.getPointRadius,getElevation:T.getElevation,getLineColor:this.config.highlightColor,getFillColor:this.config.highlightColor,stroked:!0,filled:!1}))]:[]))}}],[{key:"type",get:function(){return"geojson"}},{key:"findDefaultLayerProps",value:function(e){var t=this,r=e.label,n=e.fields,a=void 0===n?[]:n,o=a.filter(function(e){return("geojson"===e.type||"geoarrow"===e.type)&&tj[e.analyzerType]}).map(function(e){return e.name}),i={geojson:ed()([].concat((0,h.Z)(B.GEOJSON_FIELDS.geojson),(0,h.Z)(o)))},l=this.findDefaultColumnField(i,a);return l&&l.length?{props:l.map(function(e){return{label:"string"==typeof r&&r.replace(/\.[^/.]+$/,"")||t.type,columns:e,isVisible:!0}})}:{props:[]}}}]),a}(en),tW=I.createElement,tq=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return tW(Z,this.props,tW("path",{d:"M13.6,22.7c2.9-3.6,4.4-6.3,4.4-8c0-2.7-2.2-4.9-4.9-4.9S8.2,12,8.2,14.7c0,1.7,1.5,4.4,4.4,8l0,0 C12.8,23,13.2,23,13.6,22.7C13.5,22.8,13.6,22.7,13.6,22.7z",className:"cr1"}),tW("path",{d:"M22.9,57.4c2.5-3.1,3.8-5.5,3.8-7c0-2.4-2-4.4-4.4-4.4S18,48,18,50.4c0,1.5,1.3,3.8,3.8,7l0,0 c0.3,0.3,0.7,0.4,1,0.1C22.9,57.4,22.9,57.4,22.9,57.4z",className:"cr2"}),tW("path",{d:"M51.4,22.5c2.8-3.4,4.2-6,4.2-7.6c0-2.6-2.1-4.8-4.8-4.8c-2.6,0-4.8,2.1-4.8,4.8c0,1.6,1.4,4.2,4.2,7.6 l0,0c0.3,0.3,0.8,0.4,1.1,0.1C51.3,22.5,51.4,22.5,51.4,22.5z",className:"cr3"}),tW("path",{d:"M49.2,53.8c3.7-4.5,5.5-7.8,5.5-9.9c0-3.3-2.7-6.1-6.1-6.1c-3.3,0-6.1,2.7-6.1,6.1 c0,2.1,1.8,5.4,5.5,9.9l0,0c0.3,0.3,0.7,0.4,1.1,0.1C49.1,53.8,49.1,53.8,49.2,53.8z",className:"cr4"}),tW("path",{d:"M31.4,39.6C36.5,33.5,39,29,39,26.1c0-4.4-3.6-8-8-8s-8,3.6-8,8c0,2.9,2.5,7.4,7.6,13.5l0,0 C30.8,39.8,31.1,39.9,31.4,39.6C31.3,39.7,31.4,39.6,31.4,39.6z",className:"cr5"}))}}]),a}(I.Component);(0,y.Z)(tq,"defaultProps",{height:"16px",predefinedClassName:"cluster-layer-icon",totalColor:5});var tK=["_filterData"];function tX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tX(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tX(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tQ={opacity:"opacity",clusterRadius:"clusterRadius",colorRange:"colorRange",radiusRange:"clusterRadiusRange",colorAggregation:"colorAggregation"},t$=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),(t=n.call(this,e)).registerVisConfig(tQ),t.getPointData=function(e){return e},t}return(0,b.Z)(a,[{key:"type",get:function(){return"cluster"}},{key:"layerIcon",get:function(){return tq}},{key:"visualChannels",get:function(){return{color:{aggregation:"colorAggregation",channelScaleType:B.CHANNEL_SCALES.colorAggr,defaultMeasure:"property.pointCount",domain:"colorDomain",field:"colorField",key:"color",property:"color",range:"colorRange",scale:"colorScale"}}}},{key:"renderLayer",value:function(e){var t=this.config.visConfig,r=e.data,n=e.gpuFilter,a=e.objectHovered,o=e.mapState,i=e.layerCallbacks,l={getColorValue:{colorField:this.config.colorField,colorAggregation:this.config.visConfig.colorAggregation},filterData:tJ({filterRange:n.filterRange},n.filterValueUpdateTriggers)},u=this.getDefaultDeckLayerProps(e),c=r._filterData,s=(0,w.Z)(r,tK),d=this.hasHoveredObject(a);return[new eZ.qt(tJ(tJ(tJ({},u),s),{},{filterData:c,radiusScale:1,radiusRange:t.radiusRange,clusterRadius:t.clusterRadius,colorRange:this.getColorRange(t.colorRange),colorScaleType:this.config.colorScale,colorAggregation:t.colorAggregation,zoom:Math.round(o.zoom),width:o.width,height:o.height,updateTriggers:l,onSetColorDomain:i.onSetLayerDomain}))].concat((0,h.Z)(d?[new ei.Z({id:"".concat(this.id,"-hovered"),visible:u.visible,data:[d],getFillColor:this.config.highlightColor,getRadius:function(e){return e.radius},radiusScale:1,pickable:!1})]:[]))}}]),a}(e5),t0=r(49657),t1=I.createElement,t2=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return t1(Z,this.props,t1("path",{className:"cr1",d:"M42.27,33.59l-4.34,4.34-4.34-4.34a13.25,13.25,0,0,1-8.9-12.52h0A13.24,13.24,0,0,1,37.93,7.83h0A13.24,13.24,0,0,1,51.17,21.07h0A13.25,13.25,0,0,1,42.27,33.59ZM37.93,28.3a7.22,7.22,0,1,0-7.22-7.22A7.22,7.22,0,0,0,37.93,28.3Z"}),t1("path",{className:"cr2",d:"M18.68,48.79l-2.44,2.44L13.8,48.79a7.44,7.44,0,0,1-5-7h0a7.44,7.44,0,0,1,7.44-7.44h0a7.44,7.44,0,0,1,7.44,7.44h0A7.44,7.44,0,0,1,18.68,48.79Zm-2.44-3a4.06,4.06,0,1,0-4.06-4.06A4.06,4.06,0,0,0,16.24,45.81Z"}),t1("path",{className:"cr3",d:"M48.85,55.52l-2.2,2.2-2.2-2.2a6.73,6.73,0,0,1-4.52-6.36h0a6.72,6.72,0,0,1,6.72-6.72h0a6.72,6.72,0,0,1,6.72,6.72h0A6.73,6.73,0,0,1,48.85,55.52Zm-2.2-2.69A3.67,3.67,0,1,0,43,49.17,3.67,3.67,0,0,0,46.65,52.83Z"}))}}]),a}(I.Component);(0,y.Z)(t2,"defaultProps",{height:"16px",predefinedClassName:"icon-layer-icon",totalColor:3});var t3=r(71383),t4=r(77848),t5=r(32311),t7=r(17846),t6=I.createElement,t8=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return t6(Z,this.props,t6("path",{d:"M56.0384598,50.5v-8.3076935H8.9615383V50.5H56.0384598z M8.9615383,22.8076916h13.8461533V14.5H8.9615383 V22.8076916z M25.5769234,22.8076916h13.8461533V14.5H25.5769234V22.8076916z M42.1923065,22.8076916h13.8461533V14.5H42.1923065 V22.8076916z M8.9615383,36.6538467h47.0769196v-8.3076935H8.9615383V36.6538467z"}))}}]),a}(I.Component);(0,y.Z)(t8,"defaultProps",{height:"16px",predefinedClassName:"data-ex-icons-table"});var t9=I.createElement,re=t4.default.div(o||(o=(0,t3.Z)(["\n  display: flex;\n  align-items: center;\n"]))),rt=(0,t5.Z)().x(function(e){return 10*e[0]}).y(function(e){return 10*e[1]}),rr=function(e){var t=e.mesh;return e.className,t9("svg",{width:"20px",height:"20px"},t9("g",{transform:"translate(10, 10)"},t.cells.map(function(e,r){return t9("path",{key:r,fill:"#000000",d:rt(e.map(function(e){return t.positions[e]}))})})))},rn=(0,t4.default)(re)(i||(i=(0,t3.Z)(["\n  padding-left: 6px;\n  width: 180px;\n  height: 48px;\n  margin-right: 12px;\n\n  .icon-table_item__name {\n    margin-left: 12px;\n  }\n"]))),ra=t4.default.code(l||(l=(0,t3.Z)(["\n  color: ",";\n"])),function(e){return e.theme.titleColorLT}),ro=t4.default.div(u||(u=(0,t3.Z)(["\n  font-size: 20px;\n  letter-spacing: 1.25px;\n  margin: 18px 0 14px 0;\n  color: ",";\n"])),function(e){return e.theme.titleColorLT}),ri=function(e){var t=e.icon,r=t.id;return t9(rn,{className:"icon-table__item"},t9(rr,{className:"icon-table__item__shape",mesh:t.mesh}),t9("div",{className:"icon-table_item__name"},t9(ra,null,r)))},rl=function(){return t9(t8,{className:"icon-example-table"},t9("thead",null,t9("tr",null,t9("th",null,"point_lat"),t9("th",null,"point_lng"),t9("th",null,"icon"))),t9("tbody",null,t9("tr",null,t9("td",null,"37.769897"),t9("td",null,"-122.41168"),t9("td",null,t9(ra,null,"android"))),t9("tr",null,t9("td",null,"37.806928"),t9("td",null,"-122.40218"),t9("td",null)),t9("tr",null,t9("td",null,"37.778564"),t9("td",null,"-122.39096"),t9("td",null,t9(ra,null,"calendar"))),t9("tr",null,t9("td",null,"37.745995"),t9("td",null,"-122.30220"),t9("td",null)),t9("tr",null,t9("td",null,"37.329841"),t9("td",null,"-122.103847"),t9("td",null,t9(ra,null,"control-off")))))},ru=t4.default.div(c||(c=(0,t3.Z)(["\n  display: flex;\n  align-items: flex-start;\n  flex-wrap: wrap;\n"]))),rc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){return t9("div",{className:"icon-info-modal"},t9("div",{className:"icon-info-modal__description"},t9(t7.FormattedMessage,{id:"modal.iconInfo.description1"})," ",t9("code",null,t9(t7.FormattedMessage,{id:"modal.iconInfo.code"})),t9(t7.FormattedMessage,{id:"modal.iconInfo.description2"})),t9("div",{className:"icon-info-modal__example"},t9(ro,null,t9(t7.FormattedMessage,{id:"modal.iconInfo.example"})),t9(rl,null)),t9("div",{className:"icon-info-modal__icons"},t9(ro,null,t9(t7.FormattedMessage,{id:"modal.iconInfo.icons"})),t9(ru,{className:"icon-info-modal__icons__table"},e.map(function(e){return t9(ri,{key:e.id,icon:e})}))))}};function rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rf=new eo.Z,rp="".concat(B.KEPLER_UNFOLDED_BUCKET,"/icons/svg-icons.json"),rg=function(e){var t=e.lat,r=e.lng,n=e.altitude;return function(e){return function(a){return[e.valueAt(a.index,r.fieldIdx),e.valueAt(a.index,t.fieldIdx),(null==n?void 0:n.fieldIdx)>-1?e.valueAt(a.index,n.fieldIdx):0]}}},ry=function(e){var t=e.icon;return function(e){return function(r){return e.valueAt(r.index,t.fieldIdx)}}},rh=["lat","lng","icon"],rv=["altitude"],rm={radius:"radius",fixedRadius:"fixedRadius",opacity:"opacity",colorRange:"colorRange",radiusRange:"radiusRange"},rb=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return((0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"getIconAccessor",void 0),(0,y.Z)((0,eX.Z)(t),"_layerInfoModal",void 0),(0,y.Z)((0,eX.Z)(t),"iconGeometry",void 0),t.registerVisConfig(rm),t.getPositionAccessor=function(e){return rg(t.config.columns)(e)},t.getIconAccessor=function(e){return ry(t.config.columns)(e)},t._layerInfoModal=rc(e.svgIcons),t.iconGeometry=e.iconGeometry||null,(0,Y.isTest)())?(0,D.Z)(t):(e.svgIcons?t.setSvgIcons(e.svgIcons):t.getSvgIcons(),t)}return(0,b.Z)(a,[{key:"svgIconUrl",get:function(){return rp}},{key:"type",get:function(){return"icon"}},{key:"requiredLayerColumns",get:function(){return rh}},{key:"optionalColumns",get:function(){return rv}},{key:"columnPairs",get:function(){return this.defaultPointColumnPairs}},{key:"layerIcon",get:function(){return t2}},{key:"visualChannels",get:function(){return{color:rd(rd({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).color),{},{accessor:"getFillColor",defaultValue:function(e){return e.color}}),size:rd(rd({},(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this).size),{},{property:"radius",range:"radiusRange",channelScaleType:"radius",accessor:"getRadius",defaultValue:1})}}},{key:"layerInfoModal",get:function(){return{id:"iconInfo",template:this._layerInfoModal,modalProps:{title:"modal.iconInfo.title"}}}},{key:"getSvgIcons",value:function(){var e=this;S().fetch&&this.svgIconUrl&&S().fetch(this.svgIconUrl,{method:"GET",mode:"cors",cache:"no-cache"}).then(function(e){return e.json()}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setSvgIcons(t.svgIcons)})}},{key:"setSvgIcons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.iconGeometry=e.reduce(function(e,t){var r;return rd(rd({},e),{},(0,y.Z)({},t.id,t.mesh.cells.reduce(function(e,r){return r.forEach(function(r){e.push.apply(e,[t.mesh.positions[r][0],-t.mesh.positions[r][1],t.mesh.positions[r][2]])}),e},[])))},{}),this._layerInfoModal=rc(e)}},{key:"calculateDataAttribute",value:function(e,t){for(var r=e.dataContainer,n=e.filteredIndex,a=this.getIconAccessor(r),o=[],i=0;i<n.length;i++){var l=n[i],u={index:l},c=t(u),s=a(u);c.every(Number.isFinite)&&"string"==typeof s&&o.push({index:l,icon:s})}return o}},{key:"formatLayerData",value:function(e,t){if(null===this.config.dataId)return{};var r=this.config.textLabel,n=e[this.config.dataId],a=n.gpuFilter,o=n.dataContainer,i=this.getPositionAccessor(o),l=this.updateData(e,t),u=l.data,c=ep({textLabel:r,triggerChanged:l.triggerChanged,oldLayerData:t,data:u,dataContainer:o}),s=this.getAttributeAccessors({dataContainer:o});return rd({data:u,getPosition:i,getFilterValue:a.filterValueAccessor(o)(),textLabels:c},s)}},{key:"updateLayerMeta",value:function(e,t){var r=this.getPointsBounds(e,t);this.updateMeta({bounds:r})}},{key:"renderLayer",value:function(e){var t,r=this,n=e.data,a=e.gpuFilter,o=e.objectHovered,i=e.mapState,l=e.interactionConfig,u=this.getRadiusScaleByZoom(i),c=rd({radiusScale:u},this.config.visConfig.fixedRadius?{}:{radiusMaxPixels:500}),s=rd({getPosition:this.config.columns,getFilterValue:a.filterValueUpdateTriggers},this.getVisualChannelUpdateTriggers()),d=this.getDefaultDeckLayerProps(e),f=this.getBrushingExtensionProps(l),p=ef(u,n.getRadius,i),g=[].concat((0,h.Z)(d.extensions),[rf]),y=rd({getFilterValue:n.getFilterValue,extensions:g,filterRange:d.filterRange},f),v=(0,h.Z)(this.renderTextLabelLayer({getPosition:n.getPosition,sharedProps:y,getPixelOffset:p,updateTriggers:s},e)),m=this.hasHoveredObject(o),b={depthTest:(null===(t=this.config.columns.altitude)||void 0===t?void 0:t.fieldIdx)>-1,cullFace:t0.default.FRONT};return this.iconGeometry?[new eZ.x8(rd(rd(rd(rd(rd({},d),f),c),n),{},{parameters:b,getIconGeometry:function(e){var t;return null===(t=r.iconGeometry)||void 0===t?void 0:t[e]},updateTriggers:s,extensions:g}))].concat((0,h.Z)(m?[new eZ.x8(rd(rd(rd({},this.getDefaultHoverLayerProps()),c),{},{visible:d.visible,data:[m],parameters:b,getPosition:n.getPosition,getRadius:n.getRadius,getFillColor:this.config.highlightColor,getIconGeometry:function(e){var t;return null===(t=r.iconGeometry)||void 0===t?void 0:t[e]}}))]:[]),(0,h.Z)(v)):[]}}],[{key:"findDefaultLayerProps",value:function(e){var t=e.fieldPairs,r=void 0===t?[]:t,n=e.fields,a=void 0===n?[]:n,o={props:[]};if(!r.length||!a.length)return o;var i=a.filter(function(e){return e.name.replace(/[_,.]+/g," ").trim().split(" ").some(function(e){return B.ICON_FIELDS.icon.some(function(t){return t.includes(e)})})});if(!i.length)return o;var l=em(r[0],!0);return{props:i.map(function(e){return{label:e.name.replace(/[_,.]+/g," ").trim(),columns:rd(rd({},l),{},{icon:{value:e.name,fieldIdx:e.fieldIdx}}),isVisible:!0}})}}}]),a}(en),rO=r(12613);function rE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rE(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t.length>0?r.slice().reverse().filter(function(t){var r=(0,Y.findById)(t)(e);return(null==r?void 0:r.overlayType)===$.mapboxgl&&n[t]}).reduce(function(r,a){var o=e.findIndex(function(e){return e.id===a});if(-1===o)return r;var i=e[o];return i.overlayType===$.mapboxgl&&n[a]?rT(rT({},r),{},(0,y.Z)({},i.id,{id:i.id,data:t[o].data,isVisible:i.config.isVisible,config:t[o].config,hidden:i.config.hidden,sourceId:t[o].config.source})):r},{}):{}}function rA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r&&function(e,t,r){Object.keys(t).forEach(function(t){r[t]||e.removeLayer(t)})}(e,r,t),Object.values(t).forEach(function(t){var n=t.id,a=t.config,o=t.data,i=t.sourceId,l=t.isVisible;if(o||a){var u,c,s,d,f,p,g,y,h=r&&r[n]||{},v=h.data,m=h.config;o&&o!==v&&(u=e,c=i,s=o,d=u.getSource(c),d?d.setData(s):u.addSource(c,{type:"geojson",data:s})),m!==a&&(f=e,p=n,g=a,y=l,f.getLayer(p)&&f.removeLayer(p),f.addLayer(g),f.setLayoutProperty(p,"visibility",y?"visible":"none"))}})}function rP(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},n={type:"FeatureCollection",features:[]},a=0;a<e.length;a++){var o=e[a],i={index:o},l=t(i);l&&n.features.push({type:"Feature",properties:rT({index:o},r(i)),geometry:l})}return n}var rL=function(e){return"gpu:".concat(e)};function rC(e){var t=e.filterRange,r=e.filterValueUpdateTriggers;return Object.values(r).filter(function(e){return e}).length?Object.values(r).reduce(function(e,r,n){return r?[].concat((0,h.Z)(e),[[">=",rL(r),t[n][0]],["<=",rL(r),t[n][1]]]):e},["all"]):null}function r_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rD=["lat","lng"],rR=function(e){var t=e.lat,r=e.lng;return"".concat(t.fieldIdx,"-").concat(r.fieldIdx)},rI=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){var e;(0,m.Z)(this,a);for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),(0,y.Z)((0,eX.Z)(e),"datasetSelector",function(e){return e.dataId}),(0,y.Z)((0,eX.Z)(e),"gpuFilterSelector",function(e,t){return(e.dataId&&t[e.dataId]||{}).gpuFilter}),(0,y.Z)((0,eX.Z)(e),"columnsSelector",function(e){return rR(e.columns)}),(0,y.Z)((0,eX.Z)(e),"sourceSelector",(0,rO.createSelector)(e.datasetSelector,e.columnsSelector,function(e,t){return"".concat(e,"-").concat(t)})),(0,y.Z)((0,eX.Z)(e),"filterSelector",(0,rO.createSelector)(e.gpuFilterSelector,function(e){return rC(e)})),e}return(0,b.Z)(a,[{key:"overlayType",get:function(){return $.mapboxgl}},{key:"type",get:function(){return null}},{key:"isAggregated",get:function(){return!0}},{key:"requiredLayerColumns",get:function(){return rD}},{key:"columnPairs",get:function(){return this.defaultPointColumnPairs}},{key:"noneLayerDataAffectingProps",get:function(){return[]}},{key:"visualChannels",get:function(){return{}}},{key:"isValidFilter",value:function(e){return Array.isArray(e)&&e.length}},{key:"getDataUpdateTriggers",value:function(e){var t=this,r=e.filteredIndex,n=e.gpuFilter,a=e.id,o=this.config.columns,i=Object.values(this.visualChannels).reduce(function(e,r){return rx(rx({},e),t.config[r.field]?(0,y.Z)({},r.field,t.config[r.field].name):{})},{});return{getData:rx(rx({datasetId:a,columns:o,filteredIndex:r},i),n.filterValueUpdateTriggers),getMeta:{datasetId:a,columns:o}}}},{key:"getGeometry",value:function(e){return e.every(Number.isFinite)?{type:"Point",coordinates:e}:null}},{key:"calculateDataAttribute",value:function(e,t){var r=this,n=e.dataContainer,a=e.filteredIndex,o=e.gpuFilter,i=function(e){return r.getGeometry(t(e))},l=Object.values(this.visualChannels).map(function(e){return r.config[e.field]}).filter(function(e){return e}),u=l.length?function(e){return l.reduce(function(t,r){return rx(rx({},t),{},(0,y.Z)({},r.name,r.valueAccessor(e)))},{})}:function(e){return{}},c=o.filterValueUpdateTriggers,s=o.filterValueAccessor,d=Object.values(c).filter(function(e){return e}).length,f=s(n)(),p=d?function(e){var t=f(e);return Object.values(c).reduce(function(e,r,n){return rx(rx({},e),r?(0,y.Z)({},rL(r),t[n]):{})},{})}:function(e){return{}};return rP(a,i,function(e){return rx(rx({},u(e)),p(e))})}},{key:"shouldRenderLayer",value:function(){return"string"==typeof this.type&&this.config.isVisible&&this.hasAllColumns()}}]),a}(en),rk=I.createElement,rw=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return rk(Z,this.props,rk("path",{d:"M51.87,21C49.55,16.67,43.77,15.29,39,18a11.42,11.42,0,0,0-1.65,1.13c-2.73,2.14-2.12,3-6,4.89-2.27,1.07-3.42,1.08-6.88,1.4l-2.24.21a14,14,0,0,0-2.86.84c-6.64,2.73-10.11,9.86-7.76,15.94s9.63,8.79,16.27,6.07A14,14,0,0,0,31.77,46l0,0,.06-.07c.43-.4.8-.78,1.14-1.14a2.66,2.66,0,0,0,.32-.36l.17-.19c3-3.53,2-5,4.9-7.39,2.38-1.93,5.41-.95,9-3C52.19,31.15,54.19,25.43,51.87,21ZM26,44.59a8.7,8.7,0,0,1-2.26.59A7.16,7.16,0,0,1,16,40.85c-1.44-3.72.68-8.08,4.73-9.74A8.33,8.33,0,0,1,23,30.53a7.15,7.15,0,0,1,7.71,4.32C32.19,38.57,30.06,42.93,26,44.59Z",className:"cr2",style:{opacity:.8}}),rk("path",{d:"M57,18.18A14.56,14.56,0,0,0,42.25,10.7a16.62,16.62,0,0,0-6.12,2,17.35,17.35,0,0,0-2.39,1.65,20.15,20.15,0,0,0-2.83,2.73,4.52,4.52,0,0,1-2,1.45,5.88,5.88,0,0,1-2.26.63l-1.45.14-1.27.12-2.33.22-.2,0-.18,0a18.88,18.88,0,0,0-4,1.18c-9.6,3.93-14.51,14.57-11,23.71A17.59,17.59,0,0,0,24.81,55.4,20.19,20.19,0,0,0,30,54.05a20,20,0,0,0,5.26-3.19l.82-.71.05-.08,1-1c.21-.22.41-.45.59-.66l.13-.15a20,20,0,0,0,3.39-5.48c.36-.87.36-.87.68-1.14a9.09,9.09,0,0,1,1.56-.32,18.79,18.79,0,0,0,6.69-2.19,16.56,16.56,0,0,0,7.88-9.9A14.93,14.93,0,0,0,57,18.18ZM47.63,34.27a13.93,13.93,0,0,1-5.06,1.61,7.75,7.75,0,0,0-3.86,1.36,7.06,7.06,0,0,0-2.33,3.24,14.17,14.17,0,0,1-2.51,4.09l-.1.11a5.11,5.11,0,0,1-.43.47c-.31.35-.7.73-1.14,1.14l-.09.09-.12.09a14.4,14.4,0,0,1-4,2.44,14.73,14.73,0,0,1-3.84,1c-5.87.69-11.13-2.27-13.08-7.35-2.45-6.32,1.16-13.76,8-16.59a15,15,0,0,1,3-.87l2.29-.22.9-.07,2-.2a10.88,10.88,0,0,0,3.85-1.08,9.43,9.43,0,0,0,3.77-2.76A14.75,14.75,0,0,1,37,18.71a11.5,11.5,0,0,1,1.71-1.17,11.08,11.08,0,0,1,4.16-1.36,9.26,9.26,0,0,1,9.42,4.64C54.75,25.42,52.65,31.47,47.63,34.27Z",className:"cr1",style:{opacity:.36}}),rk("path",{d:"M33,44.79a9.53,9.53,0,0,1-1.13,1.14C32.3,45.53,32.67,45.15,33,44.79Z",className:"cr1",style:{opacity:.36}}),rk("path",{d:"M25.83,44.13c-3.82,1.55-8,0-9.33-3.46s.65-7.55,4.45-9.1,8,0,9.33,3.46S29.63,42.57,25.83,44.13Z",className:"cr3"}),rk("path",{d:"M31.81,46a.09.09,0,0,1,0,0h0Z",className:"cr3"}))}}]),a}(I.Component);(0,y.Z)(rw,"defaultProps",{height:"16px",predefinedClassName:"heatmap-layer-icon",totalColor:3});var rM=["colorField","colorDomain","colorScale"];function rF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rF(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rZ=18,rN=function(e){var t=e.lat,r=e.lng;return function(e){return function(n){return[e.valueAt(n.index,r.fieldIdx),e.valueAt(n.index,t.fieldIdx)]}}},rU=function(e){var t=e.lat,r=e.lng;return"".concat(t.fieldIdx,"-").concat(r.fieldIdx)},rV={opacity:"opacity",colorRange:"colorRange",radius:"heatmapRadius"},rG=function(e){var t=B.SCALE_FUNC.quantize,r=["#000000"].concat((0,h.Z)(e.colors)),n=t().domain([0,1]).range(r),a=n.range().reduce(function(e,t){var r=n.invertExtent(t);return[].concat((0,h.Z)(e),[r[0],"rgb(".concat((0,Y.hexToRgb)(t).join(","),")")])},[]);return a[1]="rgba(0,0,0,0)",a},rB=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"getPosition",void 0),(0,y.Z)((0,eX.Z)(t),"columnsSelector",function(e){return rU(e.columns)}),(0,y.Z)((0,eX.Z)(t),"visConfigSelector",function(e){return e.visConfig}),(0,y.Z)((0,eX.Z)(t),"weightFieldSelector",function(e){return e.weightField?e.weightField.name:null}),(0,y.Z)((0,eX.Z)(t),"weightDomainSelector",function(e){return e.weightDomain}),(0,y.Z)((0,eX.Z)(t),"paintSelector",(0,rO.createSelector)(t.visConfigSelector,t.weightFieldSelector,t.weightDomainSelector,function(e,t,r){return{"heatmap-weight":t?["interpolate",["linear"],["get",t],r[0],0,r[1],1]:1,"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,rZ,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"]].concat((0,h.Z)(rG(e.colorRange))),"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,rZ,e.radius],"heatmap-opacity":e.opacity}})),(0,y.Z)((0,eX.Z)(t),"computeHeatmapConfiguration",(0,rO.createSelector)(t.sourceSelector,t.filterSelector,t.paintSelector,function(e,r,n){return rj({type:"heatmap",id:t.id,source:e,layout:{visibility:"visible"},paint:n},t.isValidFilter(r)?{filter:r}:{})})),t.registerVisConfig(rV),t.getPosition=eQ()(rN,rU),t}return(0,b.Z)(a,[{key:"type",get:function(){return"heatmap"}},{key:"visualChannels",get:function(){return{weight:{property:"weight",field:"weightField",scale:"weightScale",domain:"weightDomain",key:"weight",defaultMeasure:"property.density",supportedFieldTypes:[B.ALL_FIELD_TYPES.real,B.ALL_FIELD_TYPES.integer],channelScaleType:B.CHANNEL_SCALES.size}}}},{key:"layerIcon",get:function(){return rw}},{key:"getVisualChannelDescription",value:function(e){return"color"===e?{label:"property.color",measure:"property.density"}:{label:"property.weight",measure:this.config.weightField?this.config.weightField.name:"property.density"}}},{key:"getDefaultLayerConfig",value:function(e){var t=rj(rj({},(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultLayerConfig",this).call(this,e)),{},{weightField:null,weightDomain:[0,1],weightScale:"linear"});return t.colorField,t.colorDomain,t.colorScale,(0,w.Z)(t,rM)}},{key:"getPositionAccessor",value:function(e){return this.getPosition(this.config.columns)(e)}},{key:"updateLayerMeta",value:function(e){var t=this.getPositionAccessor(e),r=this.getPointsBounds(e,t);this.updateMeta({bounds:r})}},{key:"formatLayerData",value:function(e,t){if(null===this.config.dataId)return{};var r=this.config.weightField,n=e[this.config.dataId].dataContainer,a=this.getPositionAccessor(n),o=this.updateData(e,t).data,i=this.computeHeatmapConfiguration(this.config,e);return i.id=this.id,{columns:this.config.columns,config:i,data:o,weightField:r,getPosition:a}}}]),a}(rI),rY=r(76208),rz=I.createElement,rH=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return rz(Z,this.props,rz("path",{d:"M44.59,54.5H19.41L6.81,32.68,19.41,10.87H44.59L57.19,32.68Zm-23-3.83H42.38l10.38-18-10.38-18H21.62l-10.38,18Z"}),rz("polygon",{points:"24.65 32.86 24.65 37.79 22.53 37.79 22.53 26.3 24.65 26.3 24.65 30.91 29.32 30.91 29.32 26.3 31.43 26.3 31.43 37.79 29.32 37.79 29.32 32.86 24.65 32.86"}),rz("path",{d:"M33.79,37.05l.6-1.67a5.86,5.86,0,0,0,1.39.61,5.59,5.59,0,0,0,1.5.19A2.57,2.57,0,0,0,39,35.66a1.81,1.81,0,0,0,.61-1.46A1.29,1.29,0,0,0,38.94,33a4.55,4.55,0,0,0-2.05-.32H35.74V31h1.1A5.4,5.4,0,0,0,38,30.85a2.1,2.1,0,0,0,.77-.29,1.53,1.53,0,0,0,.51-.54,1.58,1.58,0,0,0,.15-.73,1.14,1.14,0,0,0-.51-1,2.67,2.67,0,0,0-1.5-.34,4.56,4.56,0,0,0-1.51.24,5,5,0,0,0-1.34.73l-.7-1.61a4.92,4.92,0,0,1,1.66-.83,6.91,6.91,0,0,1,2-.31,4.41,4.41,0,0,1,2.81.79,2.71,2.71,0,0,1,1,2.24,2.33,2.33,0,0,1-.54,1.62,3.45,3.45,0,0,1-1.46.93v0a3,3,0,0,1,1.67.81,2.3,2.3,0,0,1,.64,1.7A3.27,3.27,0,0,1,40.48,37a5,5,0,0,1-3.16.91A6.77,6.77,0,0,1,33.79,37.05Z"}))}}]),a}(I.Component);(0,y.Z)(rH,"defaultProps",{height:"16px",predefinedClassName:"h3-hexagon-layer-icon",totalColor:4});var rW=rH;function rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rq(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rX=["hex_id"],rJ=function(e){var t=e.hex_id;return function(e){return function(r){return e.valueAt(r.index,t.fieldIdx)}}},rQ=500,r$=1,r0={colorRange:"colorRange",filled:rK(rK({},B.LAYER_VIS_CONFIGS.filled),{},{defaultValue:!0}),opacity:rK(rK({},B.LAYER_VIS_CONFIGS.opacity),{},{label:"Fill Opacity",range:[0,1],property:"opacity"}),outline:"outline",strokeColor:"strokeColor",strokeColorRange:"strokeColorRange",strokeOpacity:rK(rK({},B.LAYER_VIS_CONFIGS.opacity),{},{label:"Stroke Opacity",range:[0,1],property:"strokeOpacity"}),thickness:"thickness",coverage:"coverage",enable3d:"enable3d",sizeRange:"elevationRange",coverageRange:"coverageRange",elevationScale:"elevationScale",enableElevationZoomFactor:"enableElevationZoomFactor"},r1=new eo.Z,r2=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"dataToFeature",void 0),t.dataToFeature={centroids:[]},t.registerVisConfig(r0),t.getPositionAccessor=function(e){return rJ(t.config.columns)(e)},t}return(0,b.Z)(a,[{key:"type",get:function(){return"hexagonId"}},{key:"name",get:function(){return"H3"}},{key:"requiredLayerColumns",get:function(){return rX}},{key:"layerIcon",get:function(){return rW}},{key:"visualChannels",get:function(){var e=(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this);return{color:rK(rK({},e.color),{},{accessor:"getFillColor",condition:function(e){return e.visConfig.filled}}),strokeColor:{property:"strokeColor",key:"strokeColor",field:"strokeColorField",scale:"strokeColorScale",domain:"strokeColorDomain",range:"strokeColorRange",channelScaleType:B.CHANNEL_SCALES.color,accessor:"getLineColor",condition:function(e){return e.visConfig.outline},defaultValue:function(e){return e.visConfig.strokeColor||e.color}},size:rK(rK({},e.size),{},{property:"height",accessor:"getElevation",nullValue:0,condition:function(e){return e.visConfig.enable3d},defaultValue:rQ}),coverage:{property:"coverage",field:"coverageField",scale:"coverageScale",domain:"coverageDomain",range:"coverageRange",key:"coverage",channelScaleType:B.CHANNEL_SCALES.radius,accessor:"getCoverage",nullValue:0,defaultValue:r$}}}},{key:"setInitialLayerConfig",value:function(e){if(!e.dataContainer.numRows())return this;var t=(0,Y.findDefaultColorField)(e);return t&&(this.updateLayerConfig({colorField:t}),this.updateLayerVisualChannel(e,"color")),this}},{key:"getDefaultLayerConfig",value:function(e){var t=(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultLayerConfig",this).call(this,e);return rK(rK({},t),{},{strokeColorField:null,strokeColorDomain:[0,1],strokeColorScale:"quantile",colorUI:rK(rK({},t.colorUI),{},{strokeColorRange:B.DEFAULT_COLOR_UI}),coverageField:null,coverageDomain:[0,1],coverageScale:"linear",textLabel:[rK(rK({},B.DEFAULT_TEXT_LABEL),{},{anchor:"middle"})]})}},{key:"calculateDataAttribute",value:function(e,t){e.dataContainer;for(var r=e.filteredIndex,n=[],a=0;a<r.length;a++){var o=r[a],i=t({index:o}),l=this.dataToFeature.centroids[o];l&&n.push({index:o,id:i,centroid:l})}return n}},{key:"formatLayerData",value:function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],null===this.config.dataId)return{};var r=e[this.config.dataId],n=r.gpuFilter,a=r.dataContainer,o=this.getPositionAccessor(a),i=this.updateData(e,t),l=i.data,u=i.triggerChanged,c=this.getAttributeAccessors({dataContainer:a}),s=ep({textLabel:this.config.textLabel,triggerChanged:u,oldLayerData:t,data:l,dataContainer:a});return rK({data:l,getHexId:o,getFilterValue:n.filterValueAccessor(a)(),textLabels:s,getPosition:function(e){return e.centroid}},c)}},{key:"updateLayerMeta",value:function(e,t){var r=e.map(function(e,r){var n=t({index:r});return(0,Y.h3IsValid)(n)?(0,Y.getCentroid)({id:n}):null},!0),n=(0,Y.createDataContainer)(r),a=this.getPointsBounds(n,function(e,t){return[t.valueAt(e.index,0),t.valueAt(e.index,1)]});this.dataToFeature={centroids:r},this.updateMeta({bounds:a})}},{key:"renderLayer",value:function(e){var t=e.data,r=e.gpuFilter,n=e.objectHovered,a=e.mapState,o=e.interactionConfig,i=this.getZoomFactor(a),l=this.getElevationZoomFactor(a),u=this.config,c=u.visConfig,s=this.getVisualChannelUpdateTriggers(),d={getHexagon:this.config.columns,getFillColor:s.getFillColor,getLineColor:s.getLineColor,getElevation:s.getElevation,getFilterValue:r.filterValueUpdateTriggers},f={getCoverage:s.getCoverage},p=this.getDefaultDeckLayerProps(e),g=this.hasHoveredObject(n),y=ef(1,null,a),v=this.getBrushingExtensionProps(o),m=[].concat((0,h.Z)(p.extensions),[r1]),b=rK({getFilterValue:t.getFilterValue,extensions:m,filterRange:p.filterRange,visible:p.visible},v);return[new rY.ZP(rK(rK(rK(rK({},p),t),v),{},{extensions:m,wrapLongitude:!1,filled:c.filled,stroked:c.outline,lineWidthScale:c.thickness,getHexagon:function(e){return e.id},coverage:u.coverageField?1:c.coverage,autoHighlight:c.enable3d,highlightColor:B.HIGHLIGH_COLOR_3D,extruded:c.enable3d,elevationScale:c.elevationScale*l,updateTriggers:d,_subLayerProps:{"hexagon-cell":{type:eZ.iC,getCoverage:t.getCoverage,updateTriggers:f,strokeOpacity:c.strokeOpacity}}}))].concat((0,h.Z)(g&&!u.sizeField?[new eK.Z(rK(rK({},this.getDefaultHoverLayerProps()),{},{visible:p.visible,data:[(0,Y.idToPolygonGeo)(g)],getLineColor:u.highlightColor,lineWidthScale:8*i,wrapLongitude:!1}))]:[]),(0,h.Z)(this.renderTextLabelLayer({getPosition:t.getPosition,sharedProps:b,getPixelOffset:y,updateTriggers:s},e)))}}],[{key:"findDefaultLayerProps",value:function(e){var t=e.fields,r=void 0===t?[]:t,n=e.dataContainer,a=e.label,o=(0,Y.getHexFields)(r,n);return o.length?{props:o.map(function(e){return{isVisible:!0,label:a,columns:{hex_id:{value:e.name,fieldIdx:r.findIndex(function(t){return t.name===e.name})}}}})}:{props:[]}}}]),a}(en),r3=r(70606),r4=r(71203),r5=r(54478),r7=I.createElement,r6=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return r7(Z,this.props,r7("g",{transform:"translate(-20, -99)",id:"layer1"},r7("g",{transform:"matrix(0.26458333,0,0,0.26458333,-191.59545,42.388813)",id:"g3042"},r7("ellipse",{id:"path2999",cx:"931.42627",cy:"431.70096",rx:"62.283249",ry:"3.8673975",transform:"matrix(1.0332818,0,0,0.76491127,-30.674511,101.23938)"}),r7("g",{id:"g7696",transform:"translate(525.68251,-207.68859)"},r7("path",{id:"path7668",d:"m 393.98828,480.0918 c -10.68594,0.80336 -21.57673,7.18633 -28.60547,16.5332 -1.00324,0.62224 -3.5626,2.19214 -5.32812,2.97656 -2.56279,1.13864 -5.17733,2.74246 -7.98047,2.66016 -1.90943,-0.0561 -3.53566,-1.4477 -5.32031,-2.12891 -4.53998,-1.72443 -9.58546,-5.01773 -13.83594,-1.06445 -1.06796,1.52824 -0.66318,3.76636 -0.26563,5.58789 0.61739,2.82883 2.18398,5.45191 3.99024,7.71484 2.3163,2.9019 8.51367,7.1836 8.51367,7.1836 0,0 -5.90097,1.56898 -7.18164,3.99023 -0.45797,0.86587 -0.24013,2.08692 0.26562,2.92578 1.09219,1.81161 3.30762,2.80797 5.32032,3.45899 4.02627,1.30232 8.51745,-0.13838 12.67968,0.625 1.31495,0.24117 2.49566,1.01912 3.81446,1.23828 0.60636,0.10077 1.45382,0.0869 2.07422,0.0664 1.72295,3.33668 4.08103,6.36876 7.15625,8.80468 0,0 -2.22425,5.11025 -3.72266,7.44532 -8.94053,13.58909 -24.40686,25.32714 -26.73438,43.99218 0.0505,12.91431 6.57316,25.37407 16.24415,32.82422 16.96401,13.06839 41.70379,15.60258 62.9414,12.85938 19.21169,-2.48152 39.64942,-10.88975 52.11328,-25.71875 8.24478,-9.80932 10.46731,-24.07583 10.82813,-36.88477 0.29354,-10.4205 0.0459,-22.87017 -7.10547,-30.45508 -2.17907,-2.31118 -6.14999,-3.78838 -9.13672,-2.70703 -3.82412,1.38452 -4.00601,7.16466 -6.76758,10.15039 -2.72735,2.94875 -5.62298,6.30576 -9.47461,7.44531 -2.38943,0.70694 -5.03518,-0.0449 -7.44531,-0.67773 -7.17835,-1.88468 -13.0331,-7.65187 -20.30469,-9.13672 -5.52704,-1.1286 -16.91992,0.33984 -16.91992,0.33984 l 6.0918,-3.38476 c 0,0 10.28858,-6.55346 13.53515,-11.50586 4.26486,-6.50575 7.12111,-14.56296 6.76758,-22.33398 -0.86105,-19.16955 -13.62762,-32.46378 -36.20703,-32.82422 z"}),r7("path",{id:"path7007",d:"m 338.82884,592.10146 c 2.32751,-18.66504 17.79291,-30.40265 26.73344,-43.99174 1.49841,-2.33507 3.72237,-7.44474 3.72237,-7.44474 -9.72152,-7.70054 -12.30749,-21.34514 -10.15193,-31.80941 4.68877,-15.70277 19.97053,-27.64482 34.85497,-28.76382 22.57941,0.36044 35.34754,13.65505 36.20859,32.8246 0.35353,7.77102 -2.5031,15.82851 -6.76796,22.33426 -3.24657,4.9524 -13.53592,11.50552 -13.53592,11.50552 l -6.09116,3.38399 c 0,0 11.39286,-1.467 16.9199,-0.3384 7.27159,1.48485 13.12552,7.25206 20.30387,9.13674 2.41013,0.63278 5.05533,1.38374 7.44476,0.6768 3.85163,-1.13955 6.74779,-4.496 9.47514,-7.44475 2.76157,-2.98573 2.94384,-8.76743 6.76796,-10.15195 2.98673,-1.08135 6.95767,0.39601 9.13674,2.70719 7.15138,7.58491 7.3999,20.03532 7.10636,30.45582 -0.36082,12.80894 -2.58395,27.07605 -10.82873,36.88537 -12.46386,14.829 -32.9016,23.23673 -52.11329,25.71825 -21.23761,2.7432 -45.97799,0.20927 -62.942,-12.85912 -9.67099,-7.45015 -16.19266,-19.9103 -16.24311,-32.82461 z"}),r7("path",{id:"path7009",d:"m 338.82929,592.10139 c 0.0504,12.91431 6.57076,25.37435 16.24175,32.82449 16.96402,13.0684 41.70592,15.60201 62.94353,12.85882 16.49647,-2.13082 33.88089,-8.64571 46.3608,-19.82886 -11.1421,7.01421 -24.41974,11.29014 -37.17209,12.93733 -21.23762,2.74319 -45.97952,0.20958 -62.94353,-12.85882 -9.67099,-7.45014 -16.19132,-13.1378 -16.24175,-26.05211 1.29011,-12.22719 20.91701,-42.26515 18.15858,-41.25572 -2.75843,1.00943 -27.16334,24.82083 -27.34729,41.37487 z"}),r7("path",{id:"path7019",d:"m 377.39451,569.59751 c 5.20454,-4.30421 12.0709,-7.93589 18.81215,-7.52486 10.1405,0.6183 16.82414,12.34588 26.71325,14.67347 9.16319,2.15674 28.21822,-1.12873 28.21822,-1.12873 0,0 -5.26736,15.74679 -10.91105,21.44586 -7.06529,7.13462 -16.80867,12.27156 -26.71325,13.92098 -8.25808,1.37523 -17.24717,-0.21883 -24.83203,-3.76243 -6.52035,-3.04627 -12.9578,-7.86122 -16.17845,-14.29723 -2.08339,-4.16338 -2.25437,-9.40356 -1.12872,-13.92099 0.90003,-3.61206 3.15128,-7.0337 6.01988,-9.40607 z"}),r7("circle",{transform:"matrix(1.0416624,0,0,1.0416624,-10.12887,-52.065753)",r:"8",cy:"542.64807",cx:"388.79144",id:"path7031"}),r7("circle",{transform:"matrix(1.1485883,0,0,1.1485883,-51.700726,-110.08886)",id:"circle7125",cx:"384.53302",cy:"599.31769",r:"8"}),r7("path",{id:"path7130",d:"m 362.8314,531.83625 c 0,0 -1.86312,0.10762 -2.77606,-0.0441 -1.3188,-0.21916 -2.50024,-0.99563 -3.81519,-1.2368 -4.16223,-0.76338 -8.65327,0.67681 -12.67954,-0.62551 -2.0127,-0.65102 -4.22868,-1.64695 -5.32087,-3.45856 -0.50575,-0.83886 -0.72402,-2.06062 -0.26605,-2.92649 1.28067,-2.42125 7.18318,-3.99065 7.18318,-3.99065 0,0 -6.1971,-4.28129 -8.5134,-7.18319 -1.80626,-2.26293 -3.37327,-4.88645 -3.99066,-7.71528 -0.39755,-1.82153 -0.80191,-4.05867 0.26605,-5.58691 4.25048,-3.95328 9.29431,-0.66025 13.83429,1.06418 1.78465,0.68121 3.41144,2.07223 5.32087,2.12834 2.80314,0.0823 5.41853,-1.5218 7.98132,-2.66044 2.14112,-0.9513 6.11901,-3.45857 6.11901,-3.45857 0,0 -2.51761,3.36571 -3.19252,5.32088 -0.6999,2.02751 -0.77532,4.24025 -0.79815,6.38505 -0.0274,2.58533 0.36815,5.1658 0.79815,7.71527 0.51514,3.05437 2.24347,5.95014 2.12834,9.0455 -0.0938,2.52426 -2.27877,7.22725 -2.27877,7.22725 z"}),r7("ellipse",{transform:"rotate(-70.917917)",ry:"8.876749",rx:"11.292704",cy:"523.04565",cx:"-351.69467",id:"path7132"}),r7("ellipse",{id:"ellipse7134",cx:"-371.65863",cy:"539.63354",rx:"6.4400997",ry:"5.6922021",transform:"matrix(0.3727878,-0.92791662,0.95838646,0.28547397,0,0)"}),r7("ellipse",{transform:"matrix(1.2858994,0,0,1.2858994,493.87481,-538.72884)",ry:"1.7910415",rx:"1.877719",cy:"810.7829",cx:"-89.047676",id:"path7136"}),r7("path",{transform:"matrix(1.1485883,0,0,1.1485883,-51.700726,-110.08886)",id:"path7198",d:"m 383.88781,586.81856 c 0,0 4.75583,1.20253 7.03749,2.08594 2.91222,1.12756 8.43329,4.0806 8.43329,4.0806 l 2.17633,-1.0882 c 0,0 -6.13833,-5.82773 -10.06554,-6.2569 -5.46591,-0.59732 -7.58157,1.17856 -7.58157,1.17856 z"}),r7("path",{transform:"matrix(1.1485883,0,0,1.1485883,-51.700726,-110.08886)",id:"path7248",d:"m 397.87853,516.42095 v 2 c 11.54716,4.14107 17.99592,13.80846 18.56055,26.37891 9.2e-4,0.0202 9.5e-4,0.0404 0.002,0.0605 0.0245,-0.68856 0.0292,-1.37543 -0.002,-2.06054 -0.56463,-12.57045 -7.01339,-22.23784 -18.56055,-26.37891 z m -43.76562,25.92578 c -0.13422,1.35759 -0.19199,2.74885 -0.14649,4.16016 0.0423,-1.42272 0.18091,-2.81599 0.4043,-4.16016 z"}),r7("ellipse",{transform:"matrix(1.1796431,0.18084016,-0.22761203,0.93723889,-70.598803,-9.4836272)",ry:"2.1433234",rx:"6.0402751",cy:"433.62253",cx:"484.71768",id:"path7276"}),r7("path",{transform:"matrix(1.1485883,0,0,1.1485883,-51.700726,-110.08886)",id:"path7358",d:"m 450.56176,570.21133 c 0.31422,-0.51687 0.84685,-1.08434 1.45172,-1.08879 0.8227,-0.006 1.51933,0.78122 1.99611,1.45172 1.20869,1.69982 1.81464,5.98831 1.81464,5.98831 0,0 -4.7514,-2.00855 -5.62539,-4.17367 -0.27546,-0.68237 -0.0193,-1.54878 0.36292,-2.17757 z"}),r7("path",{transform:"matrix(1.1485883,0,0,1.1485883,-51.700726,-110.08886)",id:"path7436",d:"m 399.55635,576.28702 c 0,0 5.77103,-0.38519 8.54224,0.27556 7.19511,1.71555 13.03674,7.22358 20.1156,9.36891 2.31239,0.7008 7.16446,1.10222 7.16446,1.10222 0,0 -9.1879,1.00957 -13.50225,-0.27555 -4.98282,-1.48424 -8.43433,-6.25057 -13.22669,-8.26669 -2.87487,-1.20944 -9.09336,-2.20445 -9.09336,-2.20445 z"})))))}}]),a}(I.Component);(0,y.Z)(r6,"defaultProps",{height:"16px",predefinedClassName:"scenegraph-layer-icon",totalColor:3});var r8=I.createElement,r9=t4.default.table(s||(s=(0,t3.Z)(["\n  width: 100%;\n  border-spacing: 0;\n\n  thead {\n    tr th {\n      background: ",";\n      color: ",";\n      padding: 18px 12px;\n      text-align: start;\n    }\n  }\n\n  tbody {\n    tr td {\n      border-bottom: ",";\n      padding: 12px;\n    }\n  }\n"])),function(e){return e.theme.panelBackgroundLT},function(e){return e.theme.titleColorLT},function(e){return e.theme.panelBorderLT}),ne=t4.default.div(d||(d=(0,t3.Z)(["\n  font-size: 20px;\n  letter-spacing: 1.25px;\n  margin: 18px 0 14px 0;\n  color: ",";\n"])),function(e){return e.theme.titleColorLT}),nt=function(){return r8(r9,{className:"scenegraph-example-table"},r8("thead",null,r8("tr",null,r8("th",null,"point_lat"),r8("th",null,"point_lng"),r8("th",null,"alt"))),r8("tbody",null,r8("tr",null,r8("td",null,"37.769897"),r8("td",null,"-122.41168"),r8("td",null,"0")),r8("tr",null,r8("td",null,"37.806928"),r8("td",null,"-122.40218"),r8("td",null,"0")),r8("tr",null,r8("td",null,"37.778564"),r8("td",null,"-122.39096"),r8("td",null,"1000")),r8("tr",null,r8("td",null,"37.745995"),r8("td",null,"-122.30220"),r8("td",null,"2000")),r8("tr",null,r8("td",null,"37.329841"),r8("td",null,"-122.103847"),r8("td",null,"3000"))))};function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var na=["lat","lng"],no=["altitude"],ni=function(e){var t=e.lat,r=e.lng,n=e.altitude;return function(e){return function(a){return[e.valueAt(a.index,r.fieldIdx),e.valueAt(a.index,t.fieldIdx),n&&n.fieldIdx>-1?e.valueAt(a.index,n.fieldIdx):0]}}},nl={opacity:"opacity",colorRange:"colorRange",sizeScale:"sizeScale",angleX:nn(nn({},B.LAYER_VIS_CONFIGS.angle),{},{property:"angleX",label:"angle X"}),angleY:nn(nn({},B.LAYER_VIS_CONFIGS.angle),{},{property:"angleY",label:"angle Y"}),angleZ:nn(nn({},B.LAYER_VIS_CONFIGS.angle),{},{property:"angleZ",defaultValue:90,label:"angle Z"})},nu=[0,0,0],nc=[1,1,1],ns=[255,255,255,255],nd=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"_layerInfoModal",void 0),t.registerVisConfig(nl),t.getPositionAccessor=function(e){return ni(t.config.columns)(e)},t._layerInfoModal=function(){return r8("div",{className:"scenegraph-info-modal"},r8("div",{className:"scenegraph-info-modal__description"},r8("span",null,"In your csv you can specify points with optional altitude. The models will show at each point you specify. You can use a sample model or upload one in"," "),r8("code",null,"glTF (GLB or Embedded)"),r8("span",null," format.")),r8("div",{className:"scenegraph-info-modal__example"},r8(ne,null,"Example:"),r8(nt,null)),r8("div",{className:"scenegraph-info-modal__icons"},r8(ne,null,"Sample Models"),r8("div",null,"Duck"),r8("div",null,"Use your own model")))},t}return(0,b.Z)(a,[{key:"type",get:function(){return"3D"}},{key:"requiredLayerColumns",get:function(){return na}},{key:"optionalColumns",get:function(){return no}},{key:"columnPairs",get:function(){return this.defaultPointColumnPairs}},{key:"layerIcon",get:function(){return r6}},{key:"layerInfoModal",get:function(){return{id:"scenegraphInfo",template:this._layerInfoModal,modalProps:{title:"How to use Scenegraph"}}}},{key:"calculateDataAttribute",value:function(e,t){e.dataContainer;for(var r=e.filteredIndex,n=[],a=0;a<r.length;a++){var o=r[a],i=t({index:o});i.every(Number.isFinite)&&n.push({position:i,index:o})}return n}},{key:"formatLayerData",value:function(e,t){if(null===this.config.dataId)return{};var r,n=e[this.config.dataId],a=n.gpuFilter,o=n.dataContainer;return{data:this.updateData(e,t).data,getPosition:this.getPositionAccessor(o),getFilterValue:a.filterValueAccessor(o)()}}},{key:"updateLayerMeta",value:function(e,t){var r=this.getPointsBounds(e,t);this.updateMeta({bounds:r})}},{key:"renderLayer",value:function(e){var t=e.data,r=e.gpuFilter,n=this.config.visConfig,a=n.sizeScale,o=n.angleX,i=void 0===o?0:o,l=n.angleY,u=void 0===l?0:l,c=n.angleZ,s=void 0===c?90:c;return[new r3.Z(nn(nn(nn({},this.getDefaultDeckLayerProps(e)),{},{extensions:[]},t),{},{fetch:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.propName,a=r.layer;return"scenegraph"===n?(0,r4.z)(t,r5.E,a.getLoadOptions()):e(t).then(function(e){return e.json()})},scenegraph:this.config.visConfig.scenegraph||"https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF-Binary/Duck.glb",sizeScale:void 0===a?1:a,getTranslation:nu,getScale:nc,getOrientation:[i,u,s],getColor:ns,parameters:{depthTest:!0,blend:!1},updateTriggers:{getOrientation:{angleX:i,angleY:u,angleZ:s},getPosition:this.config.columns,getFilterValue:r.filterValueUpdateTriggers}}))]}}]),a}(en),nf=r(98869),np=I.createElement,ng=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return np(Z,this.props,np("g",{clipPath:"url(#clip0)",className:"cr1"},np("path",{d:"M53.025 4.85005C50.25 2.07505 45.75 2.07505 42.975 4.85005C40.2 7.62505 40.2 12.2 42.975 14.975L48 20L53.025 14.9C55.8 12.2 55.8 7.62505 53.025 4.85005ZM48 11.375C47.175 11.375 46.5 10.7 46.5 9.87505C46.5 9.05005 47.175 8.37505 48 8.37505C48.825 8.37505 49.5 9.05005 49.5 9.87505C49.5 10.7 48.825 11.375 48 11.375Z"})),np("g",{clipPath:"url(#clip1)",className:"cr2"},np("path",{d:"M20.025 36.85C17.25 34.075 12.75 34.075 9.97502 36.85C7.20002 39.625 7.20002 44.2 9.97502 46.975L15 52L20.025 46.9C22.8 44.2 22.8 39.625 20.025 36.85ZM15 43.375C14.175 43.375 13.5 42.7 13.5 41.875C13.5 41.05 14.175 40.375 15 40.375C15.825 40.375 16.5 41.05 16.5 41.875C16.5 42.7 15.825 43.375 15 43.375Z"})),np("path",{className:"cr3",d:"M45.9943 19.8697C46.0661 20.6951 45.4552 21.4223 44.6299 21.4941L34.782 22.3504L38.1515 40.1604L17.8748 54.7185C17.2019 55.2016 16.2647 55.0478 15.7815 54.3748C15.2984 53.7019 15.4522 52.7647 16.1252 52.2815L34.8483 38.8389L31.2177 19.6491L44.37 18.5053C45.1953 18.4336 45.9225 19.0444 45.9943 19.8697Z"}),np("defs",null,np("clipPath",{id:"clip0"},np("rect",{width:"18",height:"18",transform:"translate(39 2)"})),np("clipPath",{id:"clip1"},np("rect",{width:"18",height:"18",transform:"translate(6 34)"}))))}}]),a}(I.Component);function ny(e){for(var t,r,n=!0,a=0;a<e.length&&(n=Array.isArray(null===(t=e[a])||void 0===t?void 0:null===(r=t.geometry)||void 0===r?void 0:r.coordinates)&&!e[a].geometry.coordinates.find(function(e){return e.length<4}));a+=1);return n}function nh(e){var t=e.map(function(e){return{ts:e}}),r=Object.keys(ty.DATA_TYPES).filter(function(e){return![ty.DATA_TYPES.TIME,ty.DATA_TYPES.DATETIME].includes(e)}),n=ty.Analyzer.computeColMeta(t,[],{ignoredDataTypes:r})[0];return n&&"TIME"===n.category?n:null}function nv(e,t){if(1>e.numRows())return!1;var r=(e.numRows()>1e4?(0,Y.getSampleContainerData)(e,1e4):e).mapIndex(t.valueAccessor).map(tC).filter(Y.notNullorUndefined);return!!(tR(r).line&&ny(r))&&Boolean(nh(r[0].geometry.coordinates.map(function(e){return e[3]})))}function nm(e){var t={dataToTimeStamp:[],animationDomain:null},r=e.find(function(e){var t,r,n;return(null==e?void 0:null===(t=e.geometry)||void 0===t?void 0:null===(r=t.coordinates)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.length)>3});if(!r)return t;var n=nh(r.geometry.coordinates.map(function(e){return e[3]}));if(!n)return t;var a=n.format,o=function(e){return e&&(0,Y.notNullorUndefined)(e[3])?(0,Y.timeToUnixMilli)(e[3],a):null},i=e.map(function(e){return e&&e.geometry&&Array.isArray(e.geometry.coordinates)?e.geometry.coordinates.map(o):null}),l=nb(i);return{dataToTimeStamp:i,animationDomain:l}}function nb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){var r,n=(null==t?void 0:t.find(function(e){return(0,Y.notNullorUndefined)(e)&&Number.isFinite(e)}))||null,a=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length-1;t>0;){if((0,Y.notNullorUndefined)(e[t])&&Number.isFinite(e[t]))return e[t];t--}return null}(t);return(0,Y.notNullorUndefined)(n)&&(0,Y.notNullorUndefined)(a)&&Number.isFinite(n)&&Number.isFinite(a)&&(e[0]=Math.min(e[0],n),e[1]=Math.max(e[1],a)),e},[1/0,-1/0])}(0,y.Z)(ng,"defaultProps",{size:"tiny",height:"16px",predefinedClassName:"trip-layer-icon"});var nO=I.createElement,nE=t4.default.code(f||(f=(0,t3.Z)(["\n  color: ",";\n"])),function(e){return e.theme.titleColorLT}),nT=t4.default.div(p||(p=(0,t3.Z)(["\n  font-size: 20px;\n  letter-spacing: 1.25px;\n  margin: 18px 0 14px 0;\n  color: ",";\n"])),function(e){return e.theme.titleColorLT});function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nP=1,nL={opacity:"opacity",thickness:{type:"number",defaultValue:.5,label:"Stroke Width",isRanged:!1,range:[0,100],step:.1,group:"stroke",property:"thickness"},colorRange:"colorRange",trailLength:"trailLength",sizeRange:"strokeWidthRange"},nC=["geojson"],n_=function(e){var t=e.geojson;return function(e){return function(r){return e.valueAt(r.index,t.fieldIdx)}}},nx=function(e){return e.geojson.fieldIdx},nD=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"dataToFeature",void 0),(0,y.Z)((0,eX.Z)(t),"dataToTimeStamp",void 0),(0,y.Z)((0,eX.Z)(t),"getFeature",void 0),(0,y.Z)((0,eX.Z)(t),"_layerInfoModal",void 0),t.dataToFeature=[],t.dataToTimeStamp=[],t.registerVisConfig(nL),t.getFeature=eQ()(n_,nx),t._layerInfoModal=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],function(){return nO("div",{className:"trip-info-modal"},nO("div",{className:"trip-info-modal__description"},nO("p",null,nO(t7.FormattedMessage,{id:"modal.tripInfo.description1"}),nO("code",null,nO(t7.FormattedMessage,{id:"modal.tripInfo.code"})),nO(t7.FormattedMessage,{id:"modal.tripInfo.description2"}))),nO("div",{className:"trip-info-modal__example"},nO(nT,null,nO(t7.FormattedMessage,{id:"modal.tripInfo.example"})),nO("pre",null,nO(nE,null,'\n              {\n                "type": "FeatureCollection",\n                "features": [\n                  {\n                    "type": "Feature",\n                    "properties": { "vendor":  "A",\n                    "vol":20},\n                    "geometry": {\n                      "type": "LineString",\n                      "coordinates": [\n                        [-74.20986, 40.81773, 0, 1564184363],\n                        [-74.20987, 40.81765, 0, 1564184396],\n                        [-74.20998, 40.81746, 0, 1564184409]\n                      ]\n                    }\n                  }\n                ]\n              }\n            '))))}}(),t}return(0,b.Z)(a,[{key:"type",get:function(){return a.type}},{key:"name",get:function(){return"Trip"}},{key:"layerIcon",get:function(){return ng}},{key:"columnPairs",get:function(){return this.defaultPointColumnPairs}},{key:"requiredLayerColumns",get:function(){return nC}},{key:"visualChannels",get:function(){var e=(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this);return nA(nA({},e),{},{color:nA(nA({},e.color),{},{accessor:"getColor",nullValue:e.color.nullValue,getAttributeValue:function(e){return function(t){return t.properties.lineColor||e.color}},defaultValue:function(e){return e.color}}),size:nA(nA({},e.size),{},{property:"stroke",accessor:"getWidth",condition:function(e){return e.visConfig.stroked},nullValue:0,getAttributeValue:function(){return function(e){return e.properties.lineWidth||nP}}})})}},{key:"animationDomain",get:function(){return this.config.animation.domain}},{key:"layerInfoModal",get:function(){return{id:"iconInfo",template:this._layerInfoModal,modalProps:{title:"modal.tripInfo.title"}}}},{key:"getPositionAccessor",value:function(e){return this.getFeature(this.config.columns)(e)}},{key:"getDefaultLayerConfig",value:function(e){return nA(nA({},(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultLayerConfig",this).call(this,e)),{},{animation:{enabled:!0,domain:null}})}},{key:"getHoverData",value:function(e,t){return t.row(e.properties.index)}},{key:"calculateDataAttribute",value:function(e,t){var r=this;return e.dataContainer,e.filteredIndex.map(function(e){return r.dataToFeature[e]}).filter(function(e){return e&&"LineString"===e.geometry.type})}},{key:"formatLayerData",value:function(e,t){var r=this;if(null===this.config.dataId)return{};var n=e[this.config.dataId],a=n.dataContainer,o=n.gpuFilter,i=this.updateData(e,t).data,l=function(e,t,r){return e.valueAt(t.properties.index,r)},u=function(e){return e.properties.index},c=function(e){return function(e){return{index:e.properties.index}}},s=this.getAttributeAccessors({dataAccessor:c,dataContainer:a});return nA({data:i,getFilterValue:o.filterValueAccessor(a)(u,l),getPath:function(e){return e.geometry.coordinates},getTimestamps:function(e){return r.dataToTimeStamp[e.properties.index]}},s)}},{key:"updateAnimationDomain",value:function(e){this.updateLayerConfig({animation:nA(nA({},this.config.animation),{},{domain:e})})}},{key:"updateLayerMeta",value:function(e){var t=this.getPositionAccessor(e);if(t!==this.meta.getFeature){this.dataToFeature=t_(e,t);var r=nm(this.dataToFeature),n=r.dataToTimeStamp,a=r.animationDomain;this.dataToTimeStamp=n,this.updateAnimationDomain(a);var o=tx(this.dataToFeature),i=tR(this.dataToFeature);this.updateMeta({bounds:o,featureTypes:i,getFeature:t})}}},{key:"setInitialLayerConfig",value:function(e){var t=e.dataContainer;return t.numRows()&&this.updateLayerMeta(t),this}},{key:"renderLayer",value:function(e){var t,r=e.data,n=e.gpuFilter,a=e.mapState,o=e.animationConfig,i=this.config.visConfig,l=this.getZoomFactor(a);if(!(o&&Array.isArray(o.domain)&&o.domain.every(Number.isFinite)&&Number.isFinite(o.currentTime)))return[];var u=null===(t=o.domain)||void 0===t?void 0:t[0],c=nA(nA({},this.getVisualChannelUpdateTriggers()),{},{getTimestamps:{columns:this.config.columns,domain0:u},getFilterValue:n.filterValueUpdateTriggers}),s=this.getDefaultDeckLayerProps(e);return[new nf.Z(nA(nA(nA({},s),r),{},{getTimestamps:function(e){return(r.getTimestamps(e)||[]).map(function(e){return e-u})},widthScale:this.config.visConfig.thickness*l*8,capRounded:!0,jointRounded:!0,wrapLongitude:!1,parameters:{depthTest:a.dragRotate,depthMask:!1},trailLength:1e3*i.trailLength,currentTime:o.currentTime-u,updateTriggers:c}))]}}],[{key:"type",get:function(){return"trip"}},{key:"findDefaultLayerProps",value:function(e,t){var r=this,n=e.label,a=e.fields,o=void 0===a?[]:a,i=e.dataContainer,l=e.id,u=o.filter(function(e){return"geojson"===e.type}).map(function(e){return e.name}),c={geojson:ed()([].concat((0,h.Z)(B.GEOJSON_FIELDS.geojson),(0,h.Z)(u)))},s=(this.findDefaultColumnField(c,o)||[]).filter(function(e){return nv(i,o[e.geojson.fieldIdx])});return s.length?{props:s.map(function(e){return{label:"string"==typeof n&&n.replace(/\.[^/.]+$/,"")||r.type,columns:e,isVisible:!0}}),foundLayers:t.filter(function(e){return"geojson"!==e.type||e.dataId!==l||!s.find(function(t){return e.columns.geojson.name===t.geojson.name})})}:{props:[]}}}]),a}(en),nR=r(66306),nI=I.createElement,nk=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"render",value:function(){return nI(Z,this.props,nI("path",{d:"M14.76,58,15,20.54,50.06,6.75V44Zm4-34.86L18.6,52.38l27.66-11V12.33Z"}),nI("path",{d:"M27.21,38.58a7.38,7.38,0,0,1-3.62-.9l.3-2a6.49,6.49,0,0,0,3.3.9c1.49,0,2.18-.59,2.18-1.63,0-2.26-5.71-1.28-5.71-5.3,0-2,1.26-3.54,4.16-3.54a8.38,8.38,0,0,1,3.28.64l-.29,1.9a8.41,8.41,0,0,0-2.88-.54c-1.63,0-2.14.66-2.14,1.42,0,2.19,5.71,1.18,5.71,5.27C31.5,37.16,29.93,38.58,27.21,38.58Z"}),nI("path",{d:"M36.17,36.36v0h5.06l0,2H33.32V36.9c3-2.88,5.67-5.09,5.67-7,0-1-.64-1.67-2.19-1.67a5,5,0,0,0-3,1.1l-.53-1.79a6.31,6.31,0,0,1,3.91-1.28c2.66,0,4,1.34,4,3.41C41.21,31.94,39.13,33.89,36.17,36.36Z"}))}}]),a}(I.Component);(0,y.Z)(nk,"defaultProps",{height:"18px",predefinedClassName:"s2-layer-icon"});var nw=r(29119),nM=r.n(nw),nF=r(41137);function nj(e){var t=e.toString().padEnd(16,"0"),r=nM().fromString(t,16),n=nF.S2.idToLatLng(r.toString()),a=n.lat;return[n.lng,a]}var nZ=RegExp("^[0-9a-z]*$","g");function nN(e){return"string"==typeof e&&Boolean(e.match(nZ))}function nU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nU(Object(r),!0).forEach(function(t){(0,y.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nG={token:["s2","s2_token"]},nB=["token"],nY=function(e){var t=e.token;return function(e){return function(r){return e.valueAt(r.index,t.fieldIdx)}}},nz=500,nH={opacity:"opacity",colorRange:"colorRange",filled:nV(nV({},B.LAYER_VIS_CONFIGS.filled),{},{type:"boolean",label:"Fill Color",defaultValue:!0,property:"filled"}),thickness:nV(nV({},B.LAYER_VIS_CONFIGS.thickness),{},{defaultValue:.5}),strokeColor:"strokeColor",strokeColorRange:"strokeColorRange",sizeRange:"strokeWidthRange",stroked:"stroked",enable3d:"enable3d",elevationScale:"elevationScale",enableElevationZoomFactor:"enableElevationZoomFactor",heightRange:"elevationRange",wireframe:"wireframe"},nW=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(e){var t;return(0,m.Z)(this,a),t=n.call(this,e),(0,y.Z)((0,eX.Z)(t),"dataToFeature",void 0),t.registerVisConfig(nH),t.getPositionAccessor=function(e){return nY(t.config.columns)(e)},t}return(0,b.Z)(a,[{key:"type",get:function(){return"s2"}},{key:"name",get:function(){return"S2"}},{key:"requiredLayerColumns",get:function(){return nB}},{key:"layerIcon",get:function(){return nk}},{key:"visualChannels",get:function(){var e=(0,ea.Z)((0,R.Z)(a.prototype),"visualChannels",this);return{color:nV(nV({},e.color),{},{accessor:"getFillColor"}),size:nV(nV({},e.size),{},{property:"stroke",accessor:"getLineWidth",condition:function(e){return e.visConfig.stroked},defaultValue:1}),strokeColor:{property:"strokeColor",field:"strokeColorField",scale:"strokeColorScale",domain:"strokeColorDomain",range:"strokeColorRange",key:"strokeColor",channelScaleType:B.CHANNEL_SCALES.color,accessor:"getLineColor",condition:function(e){return e.visConfig.stroked},nullValue:e.color.nullValue,defaultValue:function(e){return e.visConfig.strokeColor||e.color}},height:{property:"height",field:"heightField",scale:"heightScale",domain:"heightDomain",range:"heightRange",key:"height",channelScaleType:B.CHANNEL_SCALES.size,accessor:"getElevation",condition:function(e){return e.visConfig.enable3d},nullValue:0,defaultValue:nz}}}},{key:"getDefaultLayerConfig",value:function(e){return nV(nV({},(0,ea.Z)((0,R.Z)(a.prototype),"getDefaultLayerConfig",this).call(this,e)),{},{heightField:null,heightDomain:[0,1],heightScale:"linear",strokeColorField:null,strokeColorDomain:[0,1],strokeColorScale:"quantile"})}},{key:"calculateDataAttribute",value:function(e,t){e.dataContainer;for(var r=e.filteredIndex,n=[],a=0;a<r.length;a++){var o=r[a],i=t({index:o});nN(i)&&n.push({index:o,token:i})}return n}},{key:"updateLayerMeta",value:function(e,t){var r=e.reduce(function(e,r,n){var a=t({index:n});return nN(a)&&e.push(nj(a)),e},[],!0),n=(0,Y.createDataContainer)(r),a=this.getPointsBounds(n,function(e,t){return[t.valueAt(e.index,0),t.valueAt(e.index,1)]});this.dataToFeature={centroids:r},this.updateMeta({bounds:a})}},{key:"formatLayerData",value:function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],null===this.config.dataId)return{};var r=e[this.config.dataId],n=r.gpuFilter,a=r.dataContainer,o=this.getPositionAccessor(a),i=this.updateData(e,t).data,l=this.getAttributeAccessors({dataContainer:a});return nV({data:i,getS2Token:o,getFilterValue:n.filterValueAccessor(a)()},l)}},{key:"renderLayer",value:function(e){var t=e.data,r=e.gpuFilter,n=e.interactionConfig,a=e.mapState,o=this.getDefaultDeckLayerProps(e),i=this.getElevationZoomFactor(a),l=this.getZoomFactor(a),u=this.config.visConfig,c=nV(nV({},this.getVisualChannelUpdateTriggers()),{},{getFilterValue:r.filterValueUpdateTriggers});return[new nR.Z(nV(nV(nV(nV({},o),n),t),{},{getS2Token:function(e){return e.token},autoHighlight:u.enable3d,highlightColor:B.HIGHLIGH_COLOR_3D,lineWidthScale:u.thickness*l*8,stroked:u.stroked,lineMiterLimit:2,filled:u.filled,opacity:u.opacity,wrapLongitude:!1,elevationScale:u.elevationScale*i,extruded:u.enable3d,wireframe:u.wireframe,pickable:!0,updateTriggers:c}))]}}],[{key:"findDefaultLayerProps",value:function(e){var t=e.fields,r=this.findDefaultColumnField(nG,void 0===t?[]:t);return r&&r.length?{props:r.map(function(e){return{isVisible:!0,label:"S2",columns:e}})}:{props:[]}}}]),a}(en),nq=r(30720),nK=r(82298),nX=r(47789),nJ={PRIMARY:[38,181,242],SECONDARY:[170,170,170],HIGHLIGHT:[255,255,0]},nQ={ADD_POSITION:"addPosition",MOVE_POSITION:"movePosition",TRANSLATING:"translating",ADD_FEATURE:"addFeature"},n$=[].concat((0,h.Z)(nJ.PRIMARY),[26]),n0=[].concat((0,h.Z)(nJ.PRIMARY),[255]),n1=[].concat((0,h.Z)(nJ.SECONDARY),[0]),n2=[].concat((0,h.Z)(nJ.SECONDARY),[255]),n3=[].concat((0,h.Z)(nJ.SECONDARY),[13]),n4={getRadius:5,getFillColor:n1,getOutlineColor:function(e){var t;return(null==e?void 0:null===(t=e.properties)||void 0===t?void 0:t.featureIndex)<0?n2:n0},highlightMultiplier:[].concat((0,h.Z)(nJ.HIGHLIGHT),[128]),highlightMultiplierNone:n1},n5={getColor:function(e,t){return t?n$:n1},highlightMultiplier:[].concat((0,h.Z)(nJ.HIGHLIGHT),[26]),highlightMultiplierNone:n1},n7={getColor:function(e,t,r){return n0},getWidth:function(e,t,r){return t?2.5:2},getTentativeLineColor:function(e,t){return n2},getTentativeLineWidth:function(e,t){return 2},getTentativeFillColor:n3,dashArray:[4,3],solidArray:[0,0],highlightMultiplier:[].concat((0,h.Z)(nJ.HIGHLIGHT),[255])},n6=function(e){(0,x.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,R.Z)(a);if(r){var n=(0,R.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,D.Z)(this,e)});function a(){return(0,m.Z)(this,a),n.apply(this,arguments)}return(0,b.Z)(a,[{key:"getNearestPoint",value:function(e,t,r){var n=(0,ea.Z)((0,R.Z)(a.prototype),"getNearestPoint",this).call(this,e,t,r);if(n&&r){var o=r.project(n.geometry.coordinates),i=r.project(t.geometry.coordinates);if(Math.sqrt(Math.pow(o[0]-i[0],2)+Math.pow(o[1]-i[1],2))>B.EDITOR_LAYER_PICKING_RADIUS)return}return n}},{key:"handleClick",value:function(e,t){var r;(null==e?void 0:null===(r=e.sourceEvent)||void 0===r?void 0:r.button)!==2&&(0,ea.Z)((0,R.Z)(a.prototype),"handleClick",this).call(this,e,t)}}]),a}(nK.ModifyMode);function n8(e,t){return e&&(t===B.EDITOR_MODES.DRAW_POLYGON||t===B.EDITOR_MODES.DRAW_RECTANGLE)}function n9(e,t,r){var n,a=r.leftOfCursor;return{text:e,style:{"margin-top":r.aboveCursor?"-70px":"15px","margin-left":a?"-200px":"15px","font-family":t.fontFamily,"font-size":t.tooltipFontSize,"font-weight":400,padding:"7px 18px","box-shadow":t.tooltipBoxShadow,"background-color":t.tooltipBg,color:t.tooltipColor,"border-radius":t.primaryBtnRadius}}}var ae=new nK.CompositeMode([new nK.TranslateMode,new n6]);function at(e){var t=e.editorMenuActive,r=e.editor,n=e.onSetFeatures,a=e.setSelectedFeature,o=e.featureCollection,i=e.selectedFeatureIndexes,l=e.viewport,u=r.mode,c=ae;return t&&(u===B.EDITOR_MODES.DRAW_POLYGON?c=nK.DrawPolygonMode:u===B.EDITOR_MODES.DRAW_RECTANGLE&&(c=nK.DrawRectangleMode)),new nq.nk({id:B.EDITOR_LAYER_ID,mode:c,data:o,selectedFeatureIndexes:i,visible:r.visible,pickable:!0,pickingRadius:B.EDITOR_LAYER_PICKING_RADIUS,modeConfig:{viewport:l,screenSpace:!0,lockRectangles:!0},pickingLineWidthExtraPixels:5,filled:i.length>0,onEdit:function(e){var t=e.updatedData,r=e.editType;switch(r){case nQ.ADD_FEATURE:var o=t.features;if(o.length){var i=o[o.length-1];i.properties.isClosed=!0,i.id=(0,Y.generateHashId)(6),n(t.features),a(i)}break;case nQ.ADD_POSITION:case nQ.MOVE_POSITION:case nQ.TRANSLATING:n(t.features)}},autoHighlight:!n8(t,u),highlightColor:function(e){var t=e.object;if(t){if(t.id===(null===(n=r.selectedFeature)||void 0===n?void 0:n.id))return n5.highlightMultiplierNone;var n,a=t.properties.editHandleType;if("intermediate"===a)return n4.highlightMultiplierNone;if("existing"===a)return n4.highlightMultiplier}return i.length?n5.highlightMultiplier:n7.highlightMultiplier},extensions:[new nX.Z({dash:!0})],dashGapPickable:!0,getDashArray:function(e,t){var n,a;return(null==e?void 0:null===(n=e.properties)||void 0===n?void 0:n.guideType)==="tentative"?n7.dashArray:(null==e?void 0:e.id)===(null===(a=r.selectedFeature)||void 0===a?void 0:a.id)?n7.solidArray:n7.dashArray},getLineColor:n7.getColor,getFillColor:n5.getColor,getRadius:n4.getRadius,getLineWidth:n7.getWidth,getEditHandlePointRadius:n4.getRadius,getEditHandlePointColor:n4.getFillColor,getEditHandlePointOutlineColor:n4.getOutlineColor,getTentativeLineColor:n7.getTentativeLineColor,getTentativeLineWidth:n7.getTentativeLineWidth,getTentativeFillColor:n7.getTentativeFillColor,parameters:{}})}var ar={PointLayer:eC,ArcLayer:ej,LineLayer:eq,GridLayer:tn,HexagonLayer:tf,GeojsonLayer:tH,ClusterLayer:t$,IconLayer:rb,HeatmapLayer:rB,H3Layer:r2,ScenegraphLayer:nd,TripLayer:nD,S2GeometryLayer:nW},an=(g={},(0,y.Z)(g,B.LAYER_TYPES.point,eC),(0,y.Z)(g,B.LAYER_TYPES.arc,ej),(0,y.Z)(g,B.LAYER_TYPES.line,eq),(0,y.Z)(g,B.LAYER_TYPES.grid,tn),(0,y.Z)(g,B.LAYER_TYPES.hexagon,tf),(0,y.Z)(g,B.LAYER_TYPES.geojson,tH),(0,y.Z)(g,B.LAYER_TYPES.cluster,t$),(0,y.Z)(g,B.LAYER_TYPES.icon,rb),(0,y.Z)(g,B.LAYER_TYPES.heatmap,rB),(0,y.Z)(g,B.LAYER_TYPES.hexagonId,r2),(0,y.Z)(g,B.LAYER_TYPES["3D"],nd),(0,y.Z)(g,B.LAYER_TYPES.trip,nD),(0,y.Z)(g,B.LAYER_TYPES.s2,nW),g),aa={isDrawingActive:n8,onClick:function(e,t,r){var n=r.editorMenuActive,a=r.editor,o=r.setSelectedFeature,i=r.onLayerClick,l=r.mapIndex,u=n8(n,a.mode);if((null==e?void 0:null===(s=e.layer)||void 0===s?void 0:s.id)===B.EDITOR_LAYER_ID&&null!=e&&e.object){var c=null===(d=e.object.geometry)||void 0===d?void 0:d.type;if(u)a.selectedFeature&&o(null);else if(null!=c&&c.endsWith("Polygon")||null!=c&&c.endsWith("Point")){if(t.rightButton&&Array.isArray(null===(f=t.srcEvent)||void 0===f?void 0:f.point)){var s,d,f,p,g=t.srcEvent.point;p={mapIndex:void 0===l?0:l,rightClick:!0,position:{x:g[0],y:g[1]}}}o(null!=c&&c.endsWith("Polygon")?e.object:a.selectedFeature,p)}i(null,t)}else if(u)i(null,t);else{if(a.selectedFeature){if(t.rightButton)return!0;o(null)}return!1}return!0},onHover:function(e,t){var r,n,a=t.hoverInfo,o=t.editor;return!!n8(t.editorMenuActive,o.mode)||(null==e?void 0:null===(r=e.layer)||void 0===r?void 0:r.id)===B.EDITOR_LAYER_ID&&(null==a?void 0:null===(n=a.layer)||void 0===n?void 0:n.id)===B.EDITOR_LAYER_ID},getTooltip:function(e,t){var r=t.editor,n=t.theme,a=t.editorMenuActive,o=e.object,i=e.layer,l=e.viewport,u=void 0===l?{}:l,c=e.pixel,s=void 0===c?[]:c,d=(null==u?void 0:u.width)-s[0]<200,f=(null==u?void 0:u.height)-s[1]<100;if(null!==(p=r.selectionContext)&&void 0!==p&&p.rightClick)return null;if(n8(a,r.mode))return null!=i&&null!==(g=i.state)&&void 0!==g&&null!==(y=g.mode)&&void 0!==y&&null!==(h=y._clickSequence)&&void 0!==h&&h.length?null:n9("Click to start new feature",n,{leftOfCursor:d,aboveCursor:f});if((null==i?void 0:i.id)===B.EDITOR_LAYER_ID){var p,g,y,h,v,m,b,O=r.selectedFeature;return O&&(!o||o.id&&o.id===O.id)?n9("Right click to view options\nDrag to move the feature",n,{leftOfCursor:d,aboveCursor:f}):(null==o?void 0:null===(v=o.properties)||void 0===v?void 0:v.editHandleType)==="intermediate"?n9("Click to insert a point",n,{leftOfCursor:d,aboveCursor:f}):(null==o?void 0:null===(m=o.geometry)||void 0===m?void 0:m.type)==="Point"||(null==o?void 0:null===(b=o.properties)||void 0===b?void 0:b.guideType)==="tentative"?n9("Drag to move the point",n,{leftOfCursor:d,aboveCursor:f}):n9("Click to select the feature\nRight click to view options",n,{leftOfCursor:d,aboveCursor:f})}return null},getCursor:function(e){var t,r=e.editorMenuActive,n=e.editor,a=e.hoverInfo;return n8(r,n.mode)?"crosshair":(null==a?void 0:null===(t=a.layer)||void 0===t?void 0:t.id)===B.EDITOR_LAYER_ID&&n.selectedFeature?"move":null}}},17846:function(e,t,r){"use strict";r.r(t),r.d(t,{FormattedMessage:function(){return k},LOCALES:function(){return i},LOCALE_CODES:function(){return l},messages:function(){return _}});var n=r(59499);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var i={en:"English",fi:"Suomi",pt:"Portugu\xeas",es:"Espa\xf1ol",ca:"Catal\xe0",ja:"日本語",cn:"简体中文",ru:"Русский"},l=Object.keys(i).reduce(function(e,t){return o(o({},e),{},(0,n.Z)({},t,t))},{});function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var c={property:{weight:"weight",label:"label",fillColor:"fill color",color:"color",coverage:"coverage",strokeColor:"stroke color",radius:"radius",outline:"outline",stroke:"stroke",density:"density",height:"height",sum:"sum",pointCount:"Point Count"},placeholder:{search:"Search",selectField:"Select a field",yAxis:"Y Axis",selectType:"Select A Type",selectValue:"Select A Value",enterValue:"Enter a value",empty:"empty",selectLayer:"Select a layer"},misc:{by:"",valuesIn:"Values in",valueEquals:"Value equals",dataSource:"Data Source",brushRadius:"Brush Radius (km)",empty:" "},mapLayers:{title:"Map Layers",label:"Label",road:"Road",border:"Border",building:"Building",water:"Water",land:"Land","3dBuilding":"3d Building",background:"Background"},panel:{text:{label:"label",labelWithId:"Label {labelId}",fontSize:"Font size",fontColor:"Font color",backgroundColor:"Background color",textAnchor:"Text anchor",alignment:"Alignment",addMoreLabel:"Add More Label",outlineWidth:"Outline width",outlineColor:"Outline color"}},sidebar:{panels:{layer:"Layers",filter:"Filters",interaction:"Interactions",basemap:"Base map"},panelViewToggle:{list:"View List",byDataset:"View by Dataset"}},layer:{required:"Required*",radius:"Radius",color:"Color",fillColor:"Fill Color",outline:"Outline",weight:"Weight",propertyBasedOn:"{property} based on",coverage:"Coverage",stroke:"Stroke",strokeWidth:"Stroke Width",strokeColor:"Stroke Color",basic:"Basic",trailLength:"Trail Length",trailLengthDescription:"Number of seconds for a path to completely fade out",newLayer:"new layer",elevationByDescription:"When off, height is based on count of points",colorByDescription:"When off, color is based on count of points",aggregateBy:"Aggregate {field} by","3DModel":"3D Model","3DModelOptions":"3D Model Options",type:{point:"point",arc:"arc",line:"line",grid:"grid",hexbin:"hexbin",polygon:"polygon",geojson:"geojson",cluster:"cluster",icon:"icon",heatmap:"heatmap",hexagon:"hexagon",hexagonid:"H3",trip:"trip",s2:"S2","3d":"3D"},layerUpdateError:"An error occurred during layer update: {errorMessage}. Make sure the format of the input data is valid."},layerVisConfigs:{angle:"Angle",strokeWidth:"Stroke Width (Pixels)",strokeWidthRange:"Stroke Width Range",radius:"Radius",fixedRadius:"Fixed Radius to meter",fixedRadiusDescription:"Map radius to absolute radius in meters, e.g. 5 to 5 meters",radiusRange:"Radius Range",clusterRadius:"Cluster Radius in Pixels",radiusRangePixels:"Radius Range in pixels",opacity:"Opacity",coverage:"Coverage",outline:"Outline",colorRange:"Color range",stroke:"Stroke",strokeColor:"Stroke Color",strokeColorRange:"Stroke Color range",targetColor:"Target Color",colorAggregation:"Color Aggregation",heightAggregation:"Height Aggregation",resolutionRange:"Resolution range",sizeScale:"Size Scale",worldUnitSize:"World Unit Size",elevationScale:"Elevation Scale",enableElevationZoomFactor:"Use elevation zoom factor",enableElevationZoomFactorDescription:"Adjust height/elevation based on current zoom factor",enableHeightZoomFactor:"Use height zoom factor",heightScale:"Height Scale",coverageRange:"Coverage Range",highPrecisionRendering:"High Precision Rendering",highPrecisionRenderingDescription:"High precision will result in slower performance",height:"Height",heightDescription:"Click button at top right of the map to switch to 3d view",fill:"Fill",enablePolygonHeight:"Enable Polygon Height",showWireframe:"Show Wireframe",weightIntensity:"Weight Intensity",zoomScale:"Zoom Scale",heightRange:"Height Range",heightMultiplier:"Height Multiplier",darkModeEnabled:"Dark base map"},layerManager:{addData:"Add Data",addLayer:"Add Layer",layerBlending:"Layer Blending",overlayBlending:"Overlay Blending"},mapManager:{mapStyle:"Map style",addMapStyle:"Add Map Style","3dBuildingColor":"3D Building Color",backgroundColor:"Background Color"},effectManager:{effects:"Effects",addEffect:"Add effect",pickDateTime:"Pick date/time",currentTime:"Current time",pickCurrrentTime:"Pick current time",date:"Date",time:"Time",timezone:"Timezone"},layerConfiguration:{defaultDescription:"Calculate {property} based on selected field",howTo:"How to"},filterManager:{addFilter:"Add Filter"},datasetTitle:{showDataTable:"Show data table",removeDataset:"Remove dataset"},datasetInfo:{rowCount:"{rowCount} rows"},tooltip:{hideLayer:"Hide layer",showLayer:"Show layer",hideFeature:"Hide feature",showFeature:"Show feature",hide:"hide",show:"show",removeLayer:"Remove layer",duplicateLayer:"Duplicate layer",resetAfterError:"Try to enable the layer after an error",layerSettings:"Layer settings",closePanel:"Close current panel",switchToDualView:"Switch to dual map view",showLegend:"Show legend",disable3DMap:"Disable 3D Map",DrawOnMap:"Draw on map",selectLocale:"Select locale",hideLayerPanel:"Hide layer panel",showLayerPanel:"Show layer panel",moveToTop:"Move to top of data layers",selectBaseMapStyle:"Select base map style",removeBaseMapStyle:"Remove base map style",delete:"Delete",timePlayback:"Time Playback",cloudStorage:"Cloud Storage","3DMap":"3D Map",animationByWindow:"Moving Time Window",animationByIncremental:"Incremental Time Window",speed:"speed",play:"play",pause:"pause",reset:"reset",export:"export",showEffectPanel:"Show effect panel",hideEffectPanel:"Hide effect panel",removeEffect:"Remove effect",disableEffect:"Disable effect",effectSettings:"Effect settings"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"Export Image",exportData:"Export Data",exportMap:"Export Map",shareMapURL:"Share Map URL",saveMap:"Save Map",select:"Select",polygon:"Polygon",rectangle:"Rectangle",hide:"Hide",show:"Show"},i),editor:{filterLayer:"Filter Layers",copyGeometry:"Copy Geometry",noLayersToFilter:"No layers to filter"},modal:{title:{deleteDataset:"Delete Dataset",addDataToMap:"Add Data To Map",exportImage:"Export Image",exportData:"Export Data",exportMap:"Export Map",addCustomMapboxStyle:"Add Custom Map Style",saveMap:"Save Map",shareURL:"Share URL"},button:{delete:"Delete",download:"Download",export:"Export",addStyle:"Add Style",save:"Save",defaultCancel:"Cancel",defaultConfirm:"Confirm"},exportImage:{ratioTitle:"Ratio",ratioDescription:"Choose the ratio for various usages.",ratioOriginalScreen:"Original Screen",ratioCustom:"Custom",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"Resolution",resolutionDescription:"High resolution is better for prints.",mapLegendTitle:"Map Legend",mapLegendAdd:"Add legend on map"},exportData:{datasetTitle:"Dataset",datasetSubtitle:"Choose the datasets you want to export",allDatasets:"All",dataTypeTitle:"Data Type",dataTypeSubtitle:"Choose the type of data you want to export",filterDataTitle:"Filter Data",filterDataSubtitle:"You can choose exporting original data or filtered data",filteredData:"Filtered data",unfilteredData:"Unfiltered Data",fileCount:"{fileCount} Files",rowCount:"{rowCount} Rows"},deleteData:{warning:"you are going to delete this dataset. It will affect {length} layers"},addStyle:{publishTitle:"2. If entered mapbox style url in step.1, publish your style at mapbox or provide access token. (Optional)",publishSubtitle1:"You can create your own map style at",publishSubtitle2:"and",publishSubtitle3:"publish",publishSubtitle4:"it.",publishSubtitle5:"To use private style, paste your",publishSubtitle6:"access token",publishSubtitle7:"here. *kepler.gl is a client-side application, data stays in your browser..",exampleToken:"e.g. pk.abcdefg.xxxxxx",pasteTitle:"1. Paste style url",pasteSubtitle0:"Style url can be a mapbox",pasteSubtitle1:"What is a",pasteSubtitle2:"style URL",pasteSubtitle3:"or a style.json using the",pasteSubtitle4:"Mapbox GL Style Spec",namingTitle:"3. Name your style"},shareMap:{title:"Share Map",shareUriTitle:"Share Map Url",shareUriSubtitle:"Generate a map url to share with others",cloudTitle:"Cloud storage",cloudSubtitle:"Login and upload map data to your personal cloud storage",shareDisclaimer:"kepler.gl will save your map data to your personal cloud storage, only people with the URL can access your map and data. You can edit/delete the data file in your cloud account anytime.",gotoPage:"Go to your Kepler.gl {currentProvider} page"},statusPanel:{mapUploading:"Map Uploading",error:"Error"},saveMap:{title:"Cloud storage",subtitle:"Login to save map to your personal cloud storage"},exportMap:{formatTitle:"Map format",formatSubtitle:"Choose the format to export your map to",html:{selection:"Export your map into an interactive html file.",tokenTitle:"Mapbox access token",tokenSubtitle:"Use your own Mapbox access token in the html (optional)",tokenPlaceholder:"Paste your Mapbox access token",tokenMisuseWarning:"* If you do not provide your own token, the map may fail to display at any time when we replace ours to avoid misuse. ",tokenDisclaimer:"You can change the Mapbox token later using the following instructions: ",tokenUpdate:"How to update an existing map token.",modeTitle:"Map Mode",modeSubtitle1:"Select the app mode. More ",modeSubtitle2:"info",modeDescription:"Allow users to {mode} the map",read:"read",edit:"edit"},json:{configTitle:"Map Config",configDisclaimer:"Map config will be included in the Json file. If you are using kepler.gl in your own app. You can copy this config and pass it to ",selection:"Export current map data and config into a single Json file. You can later open the same map by uploading this file to kepler.gl.",disclaimer:"* Map config is coupled with loaded datasets. ‘dataId’ is used to bind layers, filters, and tooltips to a specific dataset. When passing this config to addDataToMap, make sure the dataset id matches the dataId/s in this config."}},loadingDialog:{loading:"Loading..."},loadData:{upload:"Load Files",storage:"Load from Storage"},tripInfo:{title:"How to enable trip animation",description1:"In order to animate the path, the geoJSON data needs to contain `LineString` in its feature geometry, and the coordinates in the LineString need to have 4 elements in the formats of",code:" [longitude, latitude, altitude, timestamp] ",description2:"with the last element being a timestamp. Valid timestamp formats include unix in seconds such as `1564184363` or in milliseconds such as `1564184363000`.",example:"Example:"},iconInfo:{title:"How to draw icons",description1:"In your csv, create a column, put the name of the icon you want to draw in it. You can leave the cell empty if you do not want the icon to show for some points. When the column is named",code:"icon",description2:" kepler.gl will automatically create a icon layer for you.",example:"Example:",icons:"Icons"},storageMapViewer:{lastModified:"Last modified {lastUpdated} ago",back:"Back"},overwriteMap:{title:"Saving map...",alreadyExists:"already exists in your {mapSaved}. Would you like to overwrite it?"},loadStorageMap:{back:"Back",goToPage:"Go to your Kepler.gl {displayName} page",storageMaps:"Storage / Maps",noSavedMaps:"No saved maps yet"}},header:{visibleLayers:"Visible layers",layerLegend:"Legend"},interactions:{tooltip:"Tooltip",brush:"Brush",coordinate:"Coordinates",geocoder:"Geocoder"},layerBlending:{title:"Layer Blending",additive:"additive",normal:"normal",subtractive:"subtractive"},overlayBlending:{title:"Map overlay blending",description:"Blend layers with the base map so that both are visible.",screen:"dark base map",normal:"normal",darken:"light base map"},columns:{title:"Columns",lat:"lat",lng:"lon",altitude:"altitude",icon:"icon",geojson:"geojson",token:"token",arc:{lat0:"source lat",lng0:"source lng",lat1:"target lat",lng1:"target lng"},line:{alt0:"source altitude",alt1:"target altitude"},grid:{worldUnitSize:"Grid Size (km)"},hexagon:{worldUnitSize:"Hexagon Radius (km)"},hex_id:"hex id"},color:{customPalette:"Custom Palette",steps:"steps",type:"type",reversed:"reversed",opacity:"Opacity"},scale:{colorScale:"Color Scale",sizeScale:"Size Scale",strokeScale:"Stroke Scale",strokeColorScale:"Stroke Color Scale",scale:"Scale"},fileUploader:{message:"Drag & Drop Your File(s) Here",chromeMessage:"*Chrome user: Limit file size to 250mb, if need to upload larger file, try Safari",disclaimer:"*kepler.gl is a client-side application with no server backend. Data lives only on your machine/browser. No information or map data is sent to any server.",configUploadMessage:"Upload {fileFormatNames} or saved map **Json**. Read more about [**supported file formats**]",browseFiles:"browse your files",uploading:"Uploading",fileNotSupported:"File {errorFiles} is not supported.",or:"or"},geocoder:{title:"Enter an address or coordinates, ex 37.79,-122.40"},fieldSelector:{clearAll:"Clear All",formatting:"Formatting"},compare:{modeLabel:"Comparison Mode",typeLabel:"Comparison Type",types:{absolute:"Absolute",relative:"Relative"}},mapPopover:{primary:"Primary"},density:"density","Bug Report":"Bug Report","User Guide":"User Guide",Save:"Save",Share:"Share"};function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var d={property:{weight:"painotus",label:"nimi\xf6",fillColor:"t\xe4ytt\xf6v\xe4ri",color:"v\xe4ri",strokeColor:"viivan v\xe4ri",radius:"s\xe4de",outline:"\xe4\xe4riviiva",stroke:"viiva",density:"tiheys",coverage:"kattavuus",sum:"summa",pointCount:"pisteiden lukum\xe4\xe4r\xe4"},placeholder:{search:"Etsi",selectField:"Valitse kentt\xe4",yAxis:"Y-akseli",selectType:"Valitse tyyppi",selectValue:"Valitse arvo",enterValue:"Anna arvo",empty:"tyhj\xe4"},misc:{by:"",valuesIn:"Arvot joukossa:",valueEquals:"Arvo on yht\xe4suuri kuin",dataSource:"Aineistol\xe4hde",brushRadius:"Harjan s\xe4de (km)",empty:" "},mapLayers:{title:"Kartan tasot",label:"Nimi\xf6t",road:"Tiet",border:"Rajat",building:"Rakennukset",water:"Vesi",land:"Maa","3dBuilding":"3d-rakennukset",background:"Tausta"},panel:{text:{label:"Nimi\xf6",labelWithId:"Nimi\xf6 {labelId}",fontSize:"Fontin koko",fontColor:"Fontin v\xe4ri",textAnchor:"Tekstin ankkuri",alignment:"Sijoittelu",addMoreLabel:"Lis\xe4\xe4 uusia nimi\xf6it\xe4"}},sidebar:{panels:{layer:"Tasot",filter:"Suodattimet",interaction:"Interaktiot",basemap:"Taustakartta"}},layer:{required:"Pakollinen*",radius:"S\xe4de",weight:"Painotus",propertyBasedOn:"{property} perustuen arvoon",color:"V\xe4ri",fillColor:"T\xe4yt\xf6n v\xe4ri",outline:"\xe4\xe4riviiva",coverage:"Kattavuus",stroke:"Viiva",strokeWidth:"Viivan paksuus",strokeColor:"Viivan v\xe4ri",basic:"Perus",trailLength:"J\xe4ljen pituus",trailLengthDescription:"J\xe4ljen kesto sekunteina, ennenkuin se himmenee n\xe4kyvist\xe4",newLayer:"uusi taso",elevationByDescription:"Kun asetus on pois p\xe4\xe4lt\xe4, korkeus perustuu pisteiden m\xe4\xe4r\xe4\xe4n",colorByDescription:"Kun asetus on pois p\xe4\xe4lt\xe4, v\xe4ri perustuu pisteiden m\xe4\xe4r\xe4\xe4n",aggregateBy:"Aggregoi kentt\xe4 {field} by","3DModel":"3D-malli","3DModelOptions":"3D-mallin asetukset",type:{point:"piste",arc:"kaari",line:"viiva",grid:"ruudukko",hexbin:"hexbin",polygon:"polygoni",geojson:"geojson",cluster:"klusteri",icon:"kuva",heatmap:"l\xe4mp\xf6kartta",hexagon:"kuusikulmio",hexagonid:"H3",trip:"matka",s2:"S2","3d":"3D"},layerUpdateError:"Tason p\xe4ivityksen aikana tapahtui virhe: {errorMessage}. Varmista, ett\xe4 sy\xf6tetietojen muoto on kelvollinen."},layerVisConfigs:{strokeWidth:"Viivan paksuus",strokeWidthRange:"Viivan paksuuden rajat",radius:"S\xe4de",fixedRadius:"Vakios\xe4de metrein\xe4",fixedRadiusDescription:"Kartan s\xe4de absoluuttiseksi s\xe4teeksi metrein\xe4, esim. 5 -> 5 metriin",radiusRange:"S\xe4teen rajat",clusterRadius:"Klusterien s\xe4de pikselein\xe4",radiusRangePixels:"S\xe4teen rajat pikselein\xe4",opacity:"L\xe4pin\xe4kyvyys",coverage:"Kattavuus",outline:"\xc4\xe4riviiva",colorRange:"V\xe4rien rajat",stroke:"Viiva",strokeColor:"Viivan v\xe4ri",strokeColorRange:"Viivan v\xe4rin rajat",targetColor:"Kohteen v\xe4ri",colorAggregation:"V\xe4rien aggregointi",heightAggregation:"Korkeuden aggregointi",resolutionRange:"Resoluution rajat",sizeScale:"Koon skaala",worldUnitSize:"Yksikk\xf6",elevationScale:"Korottamisen skaala",enableElevationZoomFactor:"K\xe4yt\xe4 korkeuden zoomauskerrointa",enableElevationZoomFactorDescription:"S\xe4\xe4d\xe4 korkeus / korkeus nykyisen zoomauskertoimen perusteella",enableHeightZoomFactor:"K\xe4yt\xe4 korkeuden zoomauskerrointa",heightScale:"Korkeuden skaala",coverageRange:"Peitt\xe4vyyden rajat",highPrecisionRendering:"Tarkka render\xf6inti",highPrecisionRenderingDescription:"Tarkka render\xf6inti johtaa hitaampaan suorittamiseen",height:"Korkeus",heightDescription:"Klikkaa oikeasta yl\xe4nurkasta nappia vaihtaaksesi 3D-n\xe4kym\xe4\xe4n",fill:"T\xe4ytt\xf6",enablePolygonHeight:"Salli polygonien korkeus",showWireframe:"N\xe4yt\xe4 rautalankamalli",weightIntensity:"Painotuksen intensiteetti",zoomScale:"Zoomausskaala",heightRange:"Korkeuden rajat",heightMultiplier:"Korkeuskerroin"},layerManager:{addData:"Lis\xe4\xe4 aineisto",addLayer:"Lis\xe4\xe4 taso",layerBlending:"Tasojen sekoittuvuus"},mapManager:{mapStyle:"Kartan tyyli",addMapStyle:"Lis\xe4\xe4 tyyli kartalle","3dBuildingColor":"3D-rakennusten v\xe4ri",backgroundColor:"Taustav\xe4ri"},layerConfiguration:{defaultDescription:"Laske suureen {property} arvo valitun kent\xe4n perusteella",howTo:"Miten toimii"},filterManager:{addFilter:"Lis\xe4\xe4 suodatin"},datasetTitle:{showDataTable:"N\xe4yt\xe4 attribuuttitaulu",removeDataset:"Poista aineisto"},datasetInfo:{rowCount:"{rowCount} rivi\xe4"},tooltip:{hideLayer:"Piilota taso",showLayer:"N\xe4yt\xe4 taso",hideFeature:"Piilota kohde",showFeature:"N\xe4yt\xe4 kohde",hide:"piilota",show:"n\xe4yt\xe4",removeLayer:"Poista taso",resetAfterError:"Yrit\xe4 ottaa taso k\xe4ytt\xf6\xf6n virheen j\xe4lkeen",layerSettings:"Tason asetukset",closePanel:"Sulje paneeli",switchToDualView:"Vaihda kaksoiskarrtan\xe4kym\xe4\xe4n",showLegend:"N\xe4yt\xe4 selite",disable3DMap:"Poistu 3D-n\xe4kym\xe4st\xe4",DrawOnMap:"Piirr\xe4 kartalle",selectLocale:"Valitse kielisyys",hideLayerPanel:"Piilota tasopaneeli",showLayerPanel:"N\xe4yt\xe4 tasopaneeli",moveToTop:"Siirr\xe4 tasojen p\xe4\xe4llimm\xe4iseksi",selectBaseMapStyle:"Valitse taustakarttatyyli",delete:"Poista",timePlayback:"Ajan animointi",cloudStorage:"Pilvitallennus","3DMap":"3D-n\xe4kym\xe4"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"Vie kuva",exportData:"Vie aineistot",exportMap:"Vie kartta",shareMapURL:"Jaa kartan URL",saveMap:"Tallenna kartta",select:"valitse",polygon:"polygoni",rectangle:"nelikulmio",hide:"piilota",show:"n\xe4yt\xe4"},i),modal:{title:{deleteDataset:"Poista aineisto",addDataToMap:"Lis\xe4\xe4 aineistoja kartalle",exportImage:"Vie kuva",exportData:"Vie aineistot",exportMap:"Vie kartta",addCustomMapboxStyle:"Lis\xe4\xe4 oma Mapbox-tyyli",saveMap:"Tallenna kartta",shareURL:"Jaa URL"},button:{delete:"Poista",download:"Lataa",export:"Vie",addStyle:"Lis\xe4\xe4 tyyli",save:"Tallenna",defaultCancel:"Peru",defaultConfirm:"Vahvista"},exportImage:{ratioTitle:"Kuvasuhde",ratioDescription:"Valitse sopiva kuvasuhde k\xe4ytt\xf6tapaustasi varten.",ratioOriginalScreen:"Alkuper\xe4inen n\xe4ytt\xf6",ratioCustom:"Kustomoitu",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"Resoluutio",resolutionDescription:"Korkea resoluutio on parempi tulostamista varten.",mapLegendTitle:"Kartan selite",mapLegendAdd:"Lis\xe4\xe4 selite karttaan"},exportData:{datasetTitle:"Aineistot",datasetSubtitle:"Valitse aineisto, jonka aiot vied\xe4",allDatasets:"Kaikki",dataTypeTitle:"Aineistojen formaatti",dataTypeSubtitle:"Valitse aineistoformaatti valitsemillesi aineistoille",filterDataTitle:"Suodata aineistoja",filterDataSubtitle:"Voit vied\xe4 joko alkuper\xe4iset aineistot tai suodatetut aineistot",filteredData:"Suodatetut aineistot",unfilteredData:"Suodattamattomat aineistot",fileCount:"{fileCount} tiedostoa",rowCount:"{rowCount} rivi\xe4"},deleteData:{warning:"aiot poistaa t\xe4m\xe4n aineiston. Aineostoa k\xe4ytt\xe4vien tasojen lukum\xe4\xe4r\xe4: {length}"},addStyle:{publishTitle:"1. Julkaise tyylisi Mapboxissa tai anna tunniste",publishSubtitle1:"Voit luoda oman karttatyylisi sivulla",publishSubtitle2:"ja",publishSubtitle3:"julkaista",publishSubtitle4:"sen.",publishSubtitle5:"K\xe4ytt\xe4\xe4ksesi yksityist\xe4 tyyli\xe4, liit\xe4",publishSubtitle6:"tunnisteesi",publishSubtitle7:"t\xe4nne. *kepler.gl on client-side sovellus, data pysyy vain selaimessasi...",exampleToken:"esim. pk.abcdefg.xxxxxx",pasteTitle:"2. Liit\xe4 tyyli-URL",pasteSubtitle1:"Mik\xe4 on",pasteSubtitle2:"tyyli-URL?",namingTitle:"3. Nime\xe4 tyylisi"},shareMap:{shareUriTitle:"Jaa kartan URL",shareUriSubtitle:"Luo kartalle URL, jonka voit jakaa muiden kanssa",cloudTitle:"Pilvitallennus",cloudSubtitle:"Kirjaudu sis\xe4\xe4n ja lataa kartta ja aineistot henkil\xf6kohtaiseen pilvipalveluun",shareDisclaimer:"kepler.gl tallentaa kartan datan henkil\xf6kohtaiseen pilvitallennustilaasi, vain ihmiset, joilla on URL, voivat p\xe4\xe4st\xe4 k\xe4siksi karttaan ja aineistoihin. Voit muokata tiedostoja tai poistaa ne pilvipalvelustasi milloin vain.",gotoPage:"Mene Kepler.gl {currentProvider} sivullesi"},statusPanel:{mapUploading:"Karttaa ladataan",error:"Virhe"},saveMap:{title:"Pilvitallennus",subtitle:"Kirjaudu sis\xe4\xe4n pilvipalveluusi tallentaaksesi kartan"},exportMap:{formatTitle:"Kartan formaatti",formatSubtitle:"Valitse formaatti, jossa viet kartan",html:{selection:"Vie kartta interaktiivisena html-tiedostona",tokenTitle:"Mapbox-tunniste",tokenSubtitle:"K\xe4yt\xe4 omaa Mapbox-tunnistettasi html-tiedostossa (valinnainen)",tokenPlaceholder:"Liit\xe4 Mapbox-tunnisteesi",tokenMisuseWarning:"* Jos et k\xe4yt\xe4 omaa tunnistettasi, kartta voi lakata toimimasta milloin vain kun vaihdamme omaa tunnistettamme v\xe4\xe4rink\xe4yt\xf6n est\xe4miseksi. ",tokenDisclaimer:"Voit vaihtaa Mapbox-tunnisteesi n\xe4iden ohjeiden avulla: ",tokenUpdate:"Kuinka vaihtaa olemassaoleva Mapbox-tunniste",modeTitle:"Kartan tila",modeSubtitle1:"Valitse kartan tila.",modeSubtitle2:"Lis\xe4tietoja",modeDescription:"Anna k\xe4ytt\xe4jien {mode} karttaa",read:"lukea",edit:"muokata"},json:{configTitle:"Kartan asetukset",configDisclaimer:"Kartan asetukset sis\xe4ltyv\xe4t Json-tiedostoon. Jos k\xe4yt\xe4t kirjastoa kepler.gl omassa sovelluksessasi. Voit kopioida asetukset ja antaa ne funktiolle: ",selection:"Vie kyseisen kartan aineistot ja asetukset yhdess\xe4 json-tiedostossa. Voit my\xf6hemmin avata saman kartan lataamalla tiedoston kepler.gl:n",disclaimer:"* Kartan asetukset ovat sidoksissa ladattuihin aineistoihin. Arvoa ‘dataId’ k\xe4ytet\xe4\xe4n tasojen, suodattimien ja vihjeiden liitt\xe4miseksi tiettyyn aineistoon. Varmista, ett\xe4 aineiston dataId:t vastaavat asetusten arvoja jos lataat asetukset k\xe4ytt\xe4en `addDataToMap`-funktiolle."}},loadingDialog:{loading:"Ladataan..."},loadData:{upload:"Lataa tiedostot",storage:"Lataa tallennustilasta"},tripInfo:{title:"Kuinka k\xe4ytt\xe4\xe4 matka-animaatiota",description1:"Reitin animoimiseksi geoJSON-aineiston t\xe4ytyy olla geometriatyypilt\xe4\xe4n `LineString`, LineString-koordinaattien t\xe4ytyy sis\xe4lt\xe4\xe4 4 elementti\xe4 formaatissa:",code:" [pituusaste, leveysaste, korkeus, aikaleima] ",description2:"siten, ett\xe4 viimeinen elementti on aikaleima. Aikaleima voi olla muodoltaan unix-sekunteja, kuten `1564184363` tai millisekunteja, kuten `1564184363000`.",example:"Esimerkki:"},iconInfo:{title:"Miten piirt\xe4\xe4 kuvia",description1:"csv-tiedostossasi, luo sarake nimelt\xe4 icon. Voit j\xe4tt\xe4\xe4 sen tyhj\xe4ksi jos et halua piirt\xe4\xe4 kuvaa joillain pisteill\xe4. Kun sarakkeen nimi on ",code:"icon",description2:" kepler.gl luo automaattisesti kuvatason sinua varten.",example:"Esimerkki:",icons:"Kuvat"},storageMapViewer:{lastModified:"Viimeksi muokattu {lastUpdated} sitten",back:"Takaisin"},overwriteMap:{title:"Tallennetaan karttaa...",alreadyExists:"on jo {mapSaved}:ssa. Haluatko ylikirjoittaa sen?"},loadStorageMap:{back:"Takaisin",goToPage:"Mene Kepler.gl {displayName} sivullesi",storageMaps:"Tallennus / Kartat",noSavedMaps:"Ei tallennettuja karttoja viel\xe4"}},header:{visibleLayers:"N\xe4kyviss\xe4 olevat tasot",layerLegend:"Tason selite"},interactions:{tooltip:"Vihje",brush:"Harja",coordinate:"Koordinaatit"},layerBlending:{title:"Tasojen sekoittuvuus",additive:"lis\xe4\xe4v\xe4",normal:"normaali",subtractive:"v\xe4hent\xe4v\xe4"},columns:{title:"Sarakkeet",lat:"lat",lng:"lng",altitude:"korkeus",icon:"kuva",geojson:"geojson",arc:{lat0:"l\xe4hd\xf6n lat",lng0:"l\xe4hd\xf6n lng",lat1:"kohteen lat",lng1:"kohteen lng"},line:{alt0:"l\xe4hteen korkeus",alt1:"kohde korkeus"},grid:{worldUnitSize:"Ruutujen koko (km)"},hexagon:{worldUnitSize:"Hexagonien s\xe4de (km)"}},color:{customPalette:"Mukautettu paletti",steps:"askeleet",type:"tyyppi",reversed:"k\xe4\xe4nteinen"},scale:{colorScale:"V\xe4rin skaala",sizeScale:"Koon skaala",strokeScale:"Viivan paksuuden skaala",scale:"Skaala"},fileUploader:{message:"Raahaa ja pudota tiedostosi t\xe4nne",chromeMessage:"*Chromen k\xe4ytt\xe4j\xe4: Rajoita tiedostokokosi 250Mb:hen. Jos haluat suurempia tiedostoja, kokeile Safaria",disclaimer:"*kepler.gl on client-side sovellus, data pysyy vain selaimessasi...Tietoja ei l\xe4hetet\xe4 palvelimelle.",configUploadMessage:"Lis\xe4\xe4 {fileFormatNames} tai tallennettu kartta **Json**. Lue lis\xe4\xe4 [**tuetuista formaateista**]",browseFiles:"selaa tiedostojasi",uploading:"ladataan",fileNotSupported:"Tiedosto {errorFiles} ei ole tuettu.",or:"tai"},density:"tiheys","Bug Report":"Bugiraportointi","User Guide":"Opas",Save:"Tallenna",Share:"Jaa"};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var p={property:{weight:"Espessura do texto",label:"R\xf3tulo",fillColor:"Cor do preenchimento",color:"Cor",strokeColor:"Cor da borda",radius:"Raio",outline:"Contorno",stroke:"Tra\xe7ado",density:"Densidade",height:"Altura",sum:"Soma",pointCount:"Contagem de Pontos"},placeholder:{search:"Pesquisar",selectField:"Selecione um campo",yAxis:"Eixo Y",selectType:"Selecione um Tipo",selectValue:"Selecione um valor",enterValue:"Insira um valor",empty:"Vazio"},misc:{by:"",valuesIn:"Valores em",valueEquals:"Valor igual a",dataSource:"Origem dos dados",brushRadius:"Raio do Tra\xe7o (km)",empty:" "},mapLayers:{title:"Camadas do mapa",label:"R\xf3tulo",road:"Estrada",border:"Fronteira",building:"Edif\xedcios",water:"\xc1gua",land:"Terra","3dBuilding":"Edif\xedcios em 3d",background:"Fundo"},panel:{text:{label:"R\xf3tulo",labelWithId:"R\xf3tulo {labelId}",fontSize:"Tamanho da fonte",fontColor:"Cor da fonte",textAnchor:"\xc2ncora do texto",alignment:"Alinhamento",addMoreLabel:"Adicionar mais R\xf3tulos"}},sidebar:{panels:{layer:"Camadas",filter:"Filtros",interaction:"Intera\xe7\xf5es",basemap:"Mapa base"}},layer:{required:"Obrigat\xf3rio*",radius:"Raio",color:"Cor",fillColor:"Cor de preenchimento",outline:"Contorno",weight:"Espessura",propertyBasedOn:"{property} baseada em",coverage:"Cobertura",stroke:"Tra\xe7o",strokeWidth:"Largura do Tra\xe7ado",strokeColor:"Cor do Tra\xe7ado",basic:"B\xe1sico",trailLength:"Comprimento da trilha",trailLengthDescription:"N\xfamero de segundos para um caminho completamente desaparecer",newLayer:"nova camada",elevationByDescription:"Quando desligado, a altura \xe9 baseada na contagem de pontos",colorByDescription:"Quando desligado, a cor \xe9 baseada na contagem de pontos",aggregateBy:"{field} agregado por","3DModel":"Modelo 3D","3DModelOptions":"Op\xe7\xf5es do Modelo 3D",type:{point:"ponto",arc:"arco",line:"linha",grid:"grade",hexbin:"hex\xe1gono",polygon:"pol\xedgono",geojson:"geojson",cluster:"grupo",icon:"icon",heatmap:"mapa de calor",hexagon:"hex\xe1gono",hexagonid:"H3",trip:"viagem",s2:"S2","3d":"3D"},layerUpdateError:"Ocorreu um erro ao atualizar a camada: {errorMessage}. Certifique-se de que o formato dos dados de entrada seja v\xe1lido."},layerVisConfigs:{strokeWidth:"Largura do Tra\xe7o",strokeWidthRange:"Alcance da Largura do Tra\xe7o",radius:"Raio",fixedRadius:"Raio ajustado para metro",fixedRadiusDescription:"Raio do Mapa para Raio absoluto em metros, e.g. 5 para 5 metros",radiusRange:"Alcance do Raio",clusterRadius:"Raio do Agrupamento em pixels",radiusRangePixels:"Alcance do Raio em pixels",opacity:"Opacidade",coverage:"Cobertura",outline:"Contorno",colorRange:"Alcance da Cor",stroke:"Tra\xe7ado",strokeColor:"Cor do Tra\xe7ado",strokeColorRange:"Alcance da Cor do Tra\xe7ado",targetColor:"Cor de destino",colorAggregation:"Agrega\xe7\xe3o da Cor",heightAggregation:"Agrega\xe7\xe3o da Altura",resolutionRange:"Alcance da Resolu\xe7\xe3o",sizeScale:"Escala de tamanho",worldUnitSize:"Tamanho unit\xe1rio do mundo",elevationScale:"Escala de Eleva\xe7\xe3o",enableElevationZoomFactor:"Use fator de zoom de eleva\xe7\xe3o",enableElevationZoomFactorDescription:"Ajuste a altura / eleva\xe7\xe3o com base no fator de zoom atual",enableHeightZoomFactor:"Usar fator de zoom de altura",heightScale:"Escala de Altura",coverageRange:"Alcance de cobertura",highPrecisionRendering:"Renderiza\xe7\xe3o de Alta Precis\xe3o",highPrecisionRenderingDescription:"Alta precis\xe3o ir\xe1 em resultar em baixa performance",height:"Altura",heightDescription:"Clique no bot\xe3o no canto superior direito para trocar para a visualiza\xe7\xe3o 3d",fill:"Preenchimento",enablePolygonHeight:"Habilitar Altura de Pol\xedgono",showWireframe:"Mostrar Wireframe",weightIntensity:"Intensidade da Espessura",zoomScale:"Escala do Zoom",heightRange:"Alcance da Altura",heightMultiplier:"Multiplicador de altura"},layerManager:{addData:"Adicionar Dados",addLayer:"Adicionar Camada",layerBlending:"Mistura de Camada"},mapManager:{mapStyle:"Estilo do Mapa",addMapStyle:"Adicionar Estilo de Mapa","3dBuildingColor":"Cor do Edif\xedcio 3D",backgroundColor:"Cor de Fundo"},layerConfiguration:{defaultDescription:"Calcular {property} baseada no campo selecionado",howTo:"Como"},filterManager:{addFilter:"Adicionar Filtro"},datasetTitle:{showDataTable:"Mostrar tabela de dados",removeDataset:"Remover tabela de dados"},datasetInfo:{rowCount:"{rowCount} linhas"},tooltip:{hideLayer:"esconder camada",showLayer:"mostrar camada",hideFeature:"Esconder propriedade",showFeature:"Mostrar propriedade",hide:"esconder",show:"mostrar",removeLayer:"Remover Camada",resetAfterError:"Tente habilitar a camada ap\xf3s um erro",layerSettings:"Configura\xe7\xf5es de Camada",closePanel:"Fechar painel atual",switchToDualView:"Trocar para visualiza\xe7\xe3o dupla de mapa",showLegend:"mostrar legenda",disable3DMap:"Desabilitar Mapa 3D",DrawOnMap:"Desenhar no mapa",selectLocale:"Selecionar l\xedngua",hideLayerPanel:"Esconder painel de camada",showLayerPanel:"Mostrar painel de camada",moveToTop:"Mover para o topo das camadas",selectBaseMapStyle:"Selecionar o Estilo do Mapa Base",delete:"Deletar",timePlayback:"Tempo de reprodu\xe7\xe3o",cloudStorage:"Armazenamento Cloud","3DMap":" Mapa 3D"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"Exportar Imagem",exportData:"Exportar Dados",exportMap:"Exportar Mapa",shareMapURL:"Compartilhar URL do Mapa",saveMap:"Salvar Mapa",select:"selecionar",polygon:"pol\xedgono",rectangle:"ret\xe2ngulo",hide:"esconder",show:"mostrar"},i),modal:{title:{deleteDataset:"Deletar Conjunto de Dados",addDataToMap:"Adicionar Dados ao Mapa",exportImage:"Exportar Imagem",exportData:"Exportar Dados",exportMap:"Exportar Mapa",addCustomMapboxStyle:"Adicionar Estilo Mapbox Customizado",saveMap:"Salvar Mapa",shareURL:"Compartilhar URL"},button:{delete:"Deletar",download:"Download",export:"Exportar",addStyle:"Adicionar Estilo",save:"Salvar",defaultCancel:"Cancelar",defaultConfirm:"Confirmar"},exportImage:{ratioTitle:"Propor\xe7\xe3o",ratioDescription:"Escolha a propor\xe7\xe3o para v\xe1rios usos.",ratioOriginalScreen:"Tela Original",ratioCustom:"Customizado",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"Resolu\xe7\xe3o",resolutionDescription:"Alta resolu\xe7\xe3o \xe9 melhor para impress\xf5es.",mapLegendTitle:"Legenda do Mapa",mapLegendAdd:"Adicionar Legenda no mapa"},exportData:{datasetTitle:"Conjunto de dados",datasetSubtitle:"Escolha o conjunto de dados que voc\xea quer exportar",allDatasets:"Todos",dataTypeTitle:"Tipo de Dado",dataTypeSubtitle:"Escolha o tipo de dados que voc\xea quer exportar",filterDataTitle:"Filtrar Dados",filterDataSubtitle:"Voc\xea pode escolher exportar os dados originais ou os dados filtrados",filteredData:"Dados Filtrados",unfilteredData:"Dados n\xe3o filtrados",fileCount:"{fileCount} Arquivos",rowCount:"{rowCount} Linhas"},deleteData:{warning:"voc\xea ir\xe1 deletar esse conjunto de dados. Isso ir\xe1 afetar {length} camadas"},addStyle:{publishTitle:"1. Publique o seu Estilo no Mapbox ou providencie a chave de acesso",publishSubtitle1:"Voc\xea pode criar o seu pr\xf3prio estilo em",publishSubtitle2:"e",publishSubtitle3:"publicar",publishSubtitle4:"isso.",publishSubtitle5:"Para utilizar estilo privado, cole a sua",publishSubtitle6:"chave de acesso",publishSubtitle7:"aqui. *kepler.gl \xe9 uma aplica\xe7\xe3o client-side, os dados permanecem no seu browser..",exampleToken:"e.g. pk.abcdefg.xxxxxx",pasteTitle:"2. Cole a url do seu estilo",pasteSubtitle1:"O que \xe9 uma",pasteSubtitle2:"URL de estilo",namingTitle:"3. Nomeie o seu estilo"},shareMap:{shareUriTitle:"Compartilhar a URL do Mapa",shareUriSubtitle:"Gerar a url do mapa e compartilhar com outros",cloudTitle:"Armazenamento Cloud",cloudSubtitle:"Conecte-se e envie os dados do mapa para o seu armazenamento cloud pessoal",shareDisclaimer:"kepler.gl ir\xe1 salvar os dados do mapa em seu armazenamento cloud pessoal, apenas pessoas com a URL podem acessar o seu mapa e dados. Voc\xea pode editar/deletar o arquivo de dados na sua conta de armazenamento cloud em qualquer momento.",gotoPage:"V\xe1 para a sua p\xe1gina Kepler.gl {currentProvider}"},statusPanel:{mapUploading:"Enviando Mapa",error:"Erro"},saveMap:{title:"Armazenamento Cloud",subtitle:"Conecte-se para salvar o mapa para o seu armazenamento cloud pessoal"},exportMap:{formatTitle:"Formato do mapa",formatSubtitle:"Escolher o formato de mapa para exportar",html:{selection:"Exportar seu mapa em um arquivo html interativo.",tokenTitle:"Chave de acesso do Mapbox",tokenSubtitle:"Use a sua pr\xf3pria chave de acesso Mapbox em seu arquivo html (opcional)",tokenPlaceholder:"Cole a sua chave de acesso Mapbox",tokenMisuseWarning:"* Se voc\xea n\xe3o fornecer a sua pr\xf3pria chave de acesso, o mapa pode falhar em exibir a qualquer momento quando n\xf3s substituirmos a nossa para evitar mau uso. ",tokenDisclaimer:"Voc\xea pode trocar a sua chave de acesso Mapbox mais tarde utizando as instru\xe7\xf5es seguintes: ",tokenUpdate:"Como atualizar a chave de acesso de um mapa existente.",modeTitle:"Modo do Mapa",modeSubtitle1:"Selecionar o modo do aplicativo. Mais ",modeSubtitle2:"info",modeDescription:"Permitir usu\xe1rios a {mode} o mapa",read:"ler",edit:"editar"},json:{configTitle:"Configura\xe7\xf5es do Mapa",configDisclaimer:"A configura\xe7\xe3o do mapa ser\xe1 incluida no arquivo Json. Se voc\xea est\xe1 utilizando kepler.gl no seu pr\xf3prio mapa. Voc\xea pode copiar essa configura\xe7\xe3o e passar para ele ",selection:"Exportar atuais dados e configura\xe7\xf5es do mapa em um \xfanico arquivo Json. Voc\xea pode mais tarde abrir o mesmo mapa enviando esse arquivo para o kepler.gl.",disclaimer:"* Configura\xe7\xe3o do mapa \xe9 aclopado com conjunto de dados carregados. ‘dataId’ \xe9 utilizado para ligar as camadas, filtros, e dicas de contextos a conjunto de dados expec\xedficos. Quando passando essa configura\xe7\xe3o para addDataToMap, tenha certeza de que o id do conjunto de dados combina com o(s) dataId/s nessa configura\xe7\xe3o."}},loadingDialog:{loading:"Carregando..."},loadData:{upload:"Carregar arquivo",storage:"Carregar do armazenamento"},tripInfo:{title:"Como habilitar anima\xe7\xe3o de viagem",description1:"Para animar o caminho, o dado geoJSON deve conter `LineString` na sua propriedade geometry, e as coordenadas na LineString devem ter 4 elementos no seguinte formato",code:" [longitude, latitude, altitude, data] ",description2:"com um ultimo elemento sendo uma data. Um formato de data v\xe1lida inclui segundos unix como `1564184363` ou em milisegundos como `1564184363000`.",example:"Exemplo:"},iconInfo:{title:"Como desenhar \xedcones",description1:"No seu csv, crie uma coluna, coloque o nome do \xedcone que voc\xea quer desenhar nele. Voc\xea pode deixar o campo vazio se voc\xea n\xe3o desejar que o \xedcone apare\xe7a para alguns pontos. Quando a coluna tem nome",code:"icon",description2:" kepler.gl ir\xe1 automaticamente criar uma camada de \xedcone para voc\xea.",example:"Exemplos:",icons:"\xcdcones"},storageMapViewer:{lastModified:"Modificado h\xe1 {lastUpdated}",back:"Voltar"},overwriteMap:{title:"Salvando mapa...",alreadyExists:"j\xe1 existe no mapa {mapSaved}. Voc\xea desejaria sobrescrever o mapa?"},loadStorageMap:{back:"Voltar",goToPage:"V\xe1 para a sua p\xe1gina {displayName} do Kepler.gl",storageMaps:"Armazenamento / Mapas",noSavedMaps:"Nenhum mapa salvo"}},header:{visibleLayers:"Camadas Vis\xedveis",layerLegend:"Legenda da Camada"},interactions:{tooltip:"Dica de contexto",brush:"Pincel",coordinate:"Coordenadas"},layerBlending:{title:"Mistura de Camadas",additive:"aditivo",normal:"normal",subtractive:"subtrativo"},columns:{title:"Colunas",lat:"lat",lng:"lon",altitude:"altitude",icon:"\xedcone",geojson:"geojson",arc:{lat0:"origem lat",lng0:"origem lng",lat1:"destino lat",lng1:"destino lng"},line:{alt0:"origem altitude",alt1:"destino altitude"},grid:{worldUnitSize:"Tamanho da Grade (km)"},hexagon:{worldUnitSize:"Raio do Hex\xe1gono (km)"}},color:{customPalette:"Paletas customizadas",steps:"caminhos",type:"tipo",reversed:"reverso"},scale:{colorScale:"Escala da Cor",sizeScale:"Tamanho da Escala",strokeScale:"Escala do Tra\xe7o",scale:"Escala"},fileUploader:{message:"Arraste e solte seu(s) arquivo(s) aqui",chromeMessage:"*Usu\xe1rios do chrome: O limite de tamanho de arquivo \xe9 250mb, se voc\xea precisa fazer upload de arquivos maiores tente o Safari",disclaimer:"*kepler.gl \xe9 uma aplica\xe7\xe3o client-side, sem um servidor backend. Os dados ficam apenas na sua m\xe1quina/browser. Nenhuma informa\xe7\xe3o ou dados de mapa \xe9 enviado para qualquer server.",configUploadMessage:"Envie {fileFormatNames} ou mapas salvos **Json**. Leia mais sobre [**tipos de arquivos suportados**]",browseFiles:"procure seus arquivos",uploading:"Enviando",fileNotSupported:"Arquivo {errorFiles} n\xe3o \xe9 suportado.",or:"ou"},density:"densidade","Bug Report":"Reportar Bug","User Guide":"Guia do Usu\xe1rio",Save:"Salvar",Share:"Compartilhar"};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var y={property:{weight:"peso",label:"etiqueta",fillColor:"color de relleno",color:"color",coverage:"cobertura",strokeColor:"color de trazo",radius:"radio",outline:"contorno",stroke:"trazo",density:"densidad",height:"altura",sum:"suma",pointCount:"Recuento de puntos"},placeholder:{search:"Busqueda",selectField:"Selecciona un campo",yAxis:"Eje Y",selectType:"Selecciona un Tipo",selectValue:"Selecciona un Valor",enterValue:"Entra un valor",empty:"vacio"},misc:{by:"",valuesIn:"Valores en",valueEquals:"Valor igual a",dataSource:"Fuente de datos",brushRadius:"Radio del pincel (km)",empty:" "},mapLayers:{title:"Capas del mapa",label:"Etiqueta",road:"Carretera",border:"Frontera",building:"Edificio",water:"Agua",land:"Tierra","3dBuilding":"Edificio 3D",background:"Fondo"},panel:{text:{label:"etiqueta",labelWithId:"Etiqueta {labelId}",fontSize:"Tama\xf1o de fuente",fontColor:"Color de fuente",textAnchor:"Anclaje del texto",alignment:"Alineaci\xf3n",addMoreLabel:"A\xf1adir m\xe1s etiquetas"}},sidebar:{panels:{layer:"Capas",filter:"Filtros",interaction:"Interacciones",basemap:"Mapa base"}},layer:{required:"Requerido*",radius:"Radio",color:"Color",fillColor:"Color de relleno",outline:"Contorno",weight:"Grueso",propertyBasedOn:"{property} basado en",coverage:"Cobertura",stroke:"Trazo",strokeWidth:"Grosor de trazo",strokeColor:"Color de trazo",basic:"B\xe1sico",trailLength:"Longitud de pista",trailLengthDescription:"Numero de segundos hasta que desaparezca el camino",newLayer:"nueva capa",elevationByDescription:"Si desactivado, la altura se basa en el recuento de puntos",colorByDescription:"Si desactivado, el color se basa en el recuento de puntos",aggregateBy:"{field} agregado por","3DModel":"Modelo 3D","3DModelOptions":"Opciones del modelo 3D",type:{point:"punto",arc:"arco",line:"l\xednea",grid:"malla",hexbin:"hexbin",polygon:"pol\xedgono",geojson:"geojson",cluster:"cluster",icon:"icono",heatmap:"concentraci\xf3n",hexagon:"hex\xe1gono",hexagonid:"H3",trip:"viaje",s2:"S2","3d":"3D"},layerUpdateError:"Se produjo un error durante la actualizaci\xf3n de la capa: {errorMessage}. Aseg\xfarese de que el formato de los datos de entrada sea v\xe1lido."},layerVisConfigs:{angle:"\xc1ngulo",strokeWidth:"Ancho del trazo",strokeWidthRange:"Rango del ancho del trazo",radius:"Radio",fixedRadius:"Radio fijo a medir",fixedRadiusDescription:"Ajustar el radio al radio absoluto en metros, p.e. 5 a 5 metros",radiusRange:"Rango de radio",clusterRadius:"Radio del cluster en p\xedxeles",radiusRangePixels:"Rango del radio en p\xedxeles",opacity:"Opacidad",coverage:"Cobertura",outline:"Contorno",colorRange:"Rango de color",stroke:"Trazo",strokeColor:"Color de trazo",strokeColorRange:"Rango de color de trazo",targetColor:"Color destino",colorAggregation:"Agregaci\xf3n de color",heightAggregation:"Agregaci\xf3n de la altura",resolutionRange:"Rango de resoluci\xf3n",sizeScale:"Medida de escala",worldUnitSize:"Medida de la unidad mundial",elevationScale:"Escala de elevaci\xf3n",enableElevationZoomFactor:"Usar factor de zoom de elevaci\xf3n",enableElevationZoomFactorDescription:"Ajuste la altura / elevaci\xf3n seg\xfan el factor de zoom actual",enableHeightZoomFactor:"Usar factor de zoom de altura",heightScale:"Escala de altura",coverageRange:"Rango de cobertura",highPrecisionRendering:"Representaci\xf3n de alta precisi\xf3n",highPrecisionRenderingDescription:"La precisi\xf3n alta tendr\xe1 un rendimiento m\xe1s bajo",height:"Altura",heightDescription:"Haz clic en el bot\xf3n de arriba a la derecha del mapa per cambiar a vista 3D",fill:"Rellenar",enablePolygonHeight:"Activar la altura del pol\xedgono",showWireframe:"Muestra esquem\xe0tico",weightIntensity:"Intensidad de peso",zoomScale:"Escala de zoom",heightRange:"Rango de alturas",heightMultiplier:"Multiplicador de altura"},layerManager:{addData:"A\xf1adir datos",addLayer:"A\xf1adir capa",layerBlending:"Combinar capas"},mapManager:{mapStyle:"Estilo de mapa",addMapStyle:"A\xf1adir estilo de mapa","3dBuildingColor":"Color edificios 3D",backgroundColor:"Color de fondo"},layerConfiguration:{defaultDescription:"Calcular {property} seg\xfan el campo seleccionado",howTo:"How to"},filterManager:{addFilter:"A\xf1adir filtro"},datasetTitle:{showDataTable:"Mostar la tabla de datos",removeDataset:"Eliminar conjunto de datos"},datasetInfo:{rowCount:"{rowCount} files"},tooltip:{hideLayer:"Ocultar la capa",showLayer:"Mostrar la capa",hideFeature:"Ocultar el objeto",showFeature:"Mostrar el objeto",hide:"Ocultar",show:"Mostrar",removeLayer:"Eliminar capa",resetAfterError:"Intente habilitar la capa despu\xe9s de un error",layerSettings:"Configuraci\xf3n de capa",closePanel:"Cerrar el panel actual",switchToDualView:"Cambiar a la vista de mapa dual",showLegend:"Mostrar leyenda",disable3DMap:"Desactivar mapa 3D",DrawOnMap:"Dibujar en el mapa",selectLocale:"Seleccionar configuraci\xf3n regional",hideLayerPanel:"Ocultar la tabla de capas",showLayerPanel:"Mostrar la tabla  de capas",moveToTop:"Desplazar arriba de las capas de datos",selectBaseMapStyle:"Seleccionar estilo de mapa base",delete:"Borrar",timePlayback:"Reproducci\xf3n de tiempo",cloudStorage:"Almacenaje en la nube","3DMap":"Mapa 3D",animationByWindow:"Ventana Temporal M\xf3vil",animationByIncremental:"Ventana Temporal Incremental",speed:"velocidad",play:"iniciar",pause:"pausar",reset:"reiniciar"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"Exportar imagen",exportData:"Exportar datos",exportMap:"Exportar mapa",shareMapURL:"Compartir el enlace del mapa",saveMap:"Guardar mapa",select:"selecciona",polygon:"pol\xedgono",rectangle:"rect\xe1ngulo",hide:"esconder",show:"mostrar"},i),modal:{title:{deleteDataset:"Borrar conjunto de datos",addDataToMap:"A\xf1adir datos al mapa",exportImage:"Exportar imagen",exportData:"Exportar datos",exportMap:"Exportar mapa",addCustomMapboxStyle:"A\xf1adir estilo de Mapbox propio",saveMap:"Guardar mapa",shareURL:"Compartir enlace"},button:{delete:"Borrar",download:"Descargar",export:"Exportar",addStyle:"A\xf1adir estilo",save:"Guardar",defaultCancel:"Cancelar",defaultConfirm:"Confirmar"},exportImage:{ratioTitle:"Ratio",ratioDescription:"Esoger ratio por diversos usos.",ratioOriginalScreen:"Pantalla original",ratioCustom:"Personalizado",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"Resoluci\xf3n",resolutionDescription:"Una alta resoluci\xf3n es mejor para las impresiones.",mapLegendTitle:"Leyenda del mapa",mapLegendAdd:"A\xf1adir leyenda al mapa"},exportData:{datasetTitle:"Conjunto de datos",datasetSubtitle:"Escoger los conjuntos de datos a exportar",allDatasets:"Todos",dataTypeTitle:"Tipo de datos",dataTypeSubtitle:"Escoger el tipo de datos a exportar",filterDataTitle:"Filtrar datos",filterDataSubtitle:"Se puede escoger exportar los datos originales o filtrados",filteredData:"Datos filtrados",unfilteredData:"Datos sin filtrar",fileCount:"{fileCount} Archivos",rowCount:"{rowCount} Files"},deleteData:{warning:"est\xe1s a punto de borrar este conjunto de datos. Afectar\xe1 a {length} capas"},addStyle:{publishTitle:"1. Publicar tu estilo en Mapbox o proporcionar el token de acceso",publishSubtitle1:"Puedes crear el tu propio estilo de mapa en",publishSubtitle2:"y",publishSubtitle3:"publicar",publishSubtitle4:"lo.",publishSubtitle5:"Para utilizar un estilo privado, engancha tu",publishSubtitle6:"token de acceso",publishSubtitle7:"aqu\xed. *kepler.gl es una aplicaci\xf3n cliente, los datos quedan en tu navegador..",exampleToken:"p.e. pk.abcdefg.xxxxxx",pasteTitle:"2. Engancha el enlace del estilo",pasteSubtitle1:"Qu\xe9 es un",pasteSubtitle2:"enlace del estilo",namingTitle:"3. Poner nombre a tu estilo"},shareMap:{shareUriTitle:"Compartir el enlace del mapa",shareUriSubtitle:"Generar un enlace del mapa para compartir con otros",cloudTitle:"Almacenage en la nube",cloudSubtitle:"Acceder y cargar datos del mapa a tu almacenage a la nube personal",shareDisclaimer:"kepler.gl guardar\xe1 los datos del mapa en el almacenage de tu nube personal, s\xf3lo quien tenga el enlace podra acceder al mapa y a los datos . Puedes editar/borrar el archivo de datos en tu cuenta en la nube en cualquier momento.",gotoPage:"Ves a la p\xe1gina de {currentProvider} de Kepler.gl"},statusPanel:{mapUploading:"Cargar un mapa",error:"Error"},saveMap:{title:"Almacentage en la nube",subtitle:"Acceder para guardar el mapa en teu almacenage en la nube"},exportMap:{formatTitle:"Formato de mapa",formatSubtitle:"Escoger el formato al que se desea exportar el mapa",html:{selection:"Exportar tu mapa como un archivo HTML interactivo.",tokenTitle:"Token de acceso de Mapbox",tokenSubtitle:"Utilizar tu token de acceso a Mapbox al archivo HTML (opcional)",tokenPlaceholder:"Enganchar tu token de acceso a Mapbox",tokenMisuseWarning:"* Si no proporcionas tu propio token, el mapa podr\xeda fallar en cualquier momento cuando reemplacemos nuestro token para evitar abusos. ",tokenDisclaimer:"Puedes cambiar el token de Mapbox posteriormente utilizando estas instrucciones: ",tokenUpdate:"Como actualitzar un token preexistente.",modeTitle:"Modo mapa",modeSubtitle1:"Seleccionar modo app. M\xe1s ",modeSubtitle2:"informaci\xf3n",modeDescription:"Permmite a los usuarios {modo} el mapa",read:"leer",edit:"editar"},json:{configTitle:"Configuraci\xf3n del mapa",configDisclaimer:"La configuraci\xf3n del mapa ser\xe1 incluida en el archivo Json. Si utilitzas kepler.gl en tu propia app puedes copiar esta configuraci\xf3n y pasarla a  ",selection:"Exportar los datos del mapa y la configuraci\xf3n en un solo archivo Json. Posteriormente puedes abrir este mismo mapa cargando este mismo archivo a kepler.gl.",disclaimer:"* La configuraci\xf3n del mapa se combina con los conjuntos de datos cargados. ‘dataId’ se utiliza para vincular capas, filtros y sugerencias a un conjunto de datos espec\xedfico. Cuando pases esta configuraci\xf3n a addDataToMap, asegura que el identificador del conjunto de datos coincida con los ‘dataId’ de esta configuraci\xf3n."}},loadingDialog:{loading:"Cargando..."},loadData:{upload:"Cargar archivos",storage:"Cargar desde almacenage"},tripInfo:{title:"Como habilitar la animaci\xf3n de viaje",description1:"Para animar la ruta, los datos geoJSON han de contener `LineString` en su geometr\xeda y las coordenadas de LineString deben tener 4 elementos en los formats de ",code:" [longitude, latitude, altitude, timestamp] ",description2:"y el \xfaltimo elemento debe ser la marca del tiempo. Los formatos v\xe1lidos para la marca de tiempo incluyen Unix en segundos como `1564184363` o en milisegundos como `1564184363000`.",example:"Ejemplo:"},iconInfo:{title:"Como dibujar \xedconos",description1:"En tu CSV crea una columna y pon el nombre del \xedcono que quieres dibujar. Puedes dejar la celda vac\xeda cuando no quieras que se muestre para ciertos puntos. Cuando la columna se llama",code:"\xedcono",description2:" kepler.gl autom\xe1ticamente crear\xe1 una capa de \xedcono.",example:"Ejemplo:",icons:"Iconos"},storageMapViewer:{lastModified:"\xdaltima modificaci\xf3n hace {lastUpdated}",back:"Atr\xe1s"},overwriteMap:{title:"Guardando el mapa...",alreadyExists:"ja existe en {mapSaved}. Lo quieres sobreescrivir?"},loadStorageMap:{back:"Atr\xe1s",goToPage:"Ves a la p\xe1gina {displayName} de Kepler.gl",storageMaps:"Almancenage / Mapas",noSavedMaps:"No hay ning\xfan mapa guardado todav\xeda"}},header:{visibleLayers:"Capas visibles",layerLegend:"Capa de leyenda"},interactions:{tooltip:"Sugerencias",brush:"Pincel",coordinate:"Coordenadas",geocoder:"Geocodificador"},layerBlending:{title:"Combinaci\xf3n de capas",additive:"aditiva",normal:"normal",subtractive:"substractiva"},columns:{title:"Columnas",lat:"lat",lng:"lon",altitude:"altura",icon:"\xedcono",geojson:"geojson",arc:{lat0:"lat origen",lng0:"lng origen ",lat1:"lat destino",lng1:"lng destino"},line:{alt0:"altura origen",alt1:"altura destino"},grid:{worldUnitSize:"Tama\xf1o de la malla (km)"},hexagon:{worldUnitSize:"Radio de hex\xe1gono (km)"},hex_id:"id hex"},color:{customPalette:"Paleta personalizada",steps:"pasos",type:"tipo",reversed:"invertida"},scale:{colorScale:"Escala de color",sizeScale:"Escala de medidas",strokeScale:"Escala de trazo",scale:"Escala"},fileUploader:{message:"Arrastra y suelta el archivo aqu\xed",chromeMessage:"*usuario de Chrome: la medida m\xe1xima son 250mb, si debes cargar un archivo m\xe1s grande utiliza Safari",disclaimer:"*kepler.gl es una aplicaci\xf3n al lado cliente que no utiliza ning\xfan servidor. Los datos s\xf3lo existen en tu m\xe1quina/navegador. No se envian datos ni mapas a ning\xfan servidor.",configUploadMessage:"Cargar {fileFormatNames} o un mapa guardado en **Json**. M\xe1s informaci\xf3n sobre [**supported file formats**]",browseFiles:"navega por tus archivos",uploading:"Cargando",fileNotSupported:"El archivo {errorFiles} no es compatible.",or:"o"},geocoder:{title:"Introduce una direcci\xf3n"},fieldSelector:{clearAll:"Quitar todos",formatting:"Formato"},compare:{modeLabel:"Modo Comparaci\xf3n",typeLabel:"Tipo de Comparaci\xf3n",types:{absolute:"Absoluta",relative:"Relativa"}},mapPopover:{primary:"Principal"},density:"densidad","Bug Report":"Informe de errores","User Guide":"Gu\xeda de usuario",Save:"Guadar",Share:"Compartir"};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var v={property:{weight:"pes",label:"etiqueta",fillColor:"color fons",color:"color",coverage:"cobertura",strokeColor:"color de tra\xe7",radius:"radi",outline:"outline",stroke:"tra\xe7",density:"densitat",height:"al\xe7ada",sum:"suma",pointCount:"Recompte de Punts"},placeholder:{search:"Cerca",selectField:"Selecciona un camp",yAxis:"Eix Y",selectType:"Selecciona un Tipus",selectValue:"Selecciona un Valor",enterValue:"Entra un valor",empty:"buit"},misc:{by:"",valuesIn:"Valors a",valueEquals:"Valor igual a",dataSource:"Font de dades",brushRadius:"Radi del pinzell (km)",empty:" "},mapLayers:{title:"Capes del mapa",label:"Etiqueta",road:"Carretera",border:"Frontera",building:"Edifici",water:"Aigua",land:"Terra","3dBuilding":"Edifici 3D",background:"Fons"},panel:{text:{label:"etiqueta",labelWithId:"Etiqueta {labelId}",fontSize:"Mida de la font",fontColor:"Color de la font",textAnchor:"\xc0ncora del text",alignment:"Alineaci\xf3",addMoreLabel:"Afegeix m\xe9s etiquetes"}},sidebar:{panels:{layer:"Capes",filter:"Filtres",interaction:"Interaccions",basemap:"Mapa base"}},layer:{required:"Requerit*",radius:"Radi",color:"Color",fillColor:"Color fons",outline:"Contorn",weight:"Gruix",propertyBasedOn:"{property} basada en",coverage:"Cobertura",stroke:"Tra\xe7",strokeWidth:"Amplada de tra\xe7",strokeColor:"Color de tra\xe7",basic:"Basic",trailLength:"Longitud de pista",trailLengthDescription:"Nombre de segons fins que desapareix el cam\xed",newLayer:"nova capa",elevationByDescription:"Si desactivat, l'al\xe7ada es basa en el recompte de punts",colorByDescription:"Si desactivat, el color es basa en el recompte de punts",aggregateBy:"{field} agregat per","3DModel":"Model 3D","3DModelOptions":"Opcions del model 3D",type:{point:"punt",arc:"arc",line:"l\xednia",grid:"malla",hexbin:"hexbin",polygon:"pol\xedgon",geojson:"geojson",cluster:"cluster",icon:"icona",heatmap:"heatmap",hexagon:"hex\xe0gon",hexagonid:"H3",trip:"viatge",s2:"S2","3d":"3D"},layerUpdateError:"S'ha produ\xeft un error durant l'actualitzaci\xf3 de la capa: {errorMessage}. Assegureu-vos que el format de les dades d’entrada sigui v\xe0lid."},layerVisConfigs:{angle:"Angle",strokeWidth:"Amplada tra\xe7",strokeWidthRange:"Rang amplada de tra\xe7",radius:"Radi",fixedRadius:"Radi fixe a mesurar",fixedRadiusDescription:"Ajusta el radi al radi absolut en metres, p.ex 5 a 5 metres",radiusRange:"Rang de radi",clusterRadius:"Radi Cluster en Pixels",radiusRangePixels:"Rang del radi en pixels",opacity:"Opacitat",coverage:"Cobertura",outline:"Outline",colorRange:"Rang de color",stroke:"Tra\xe7",strokeColor:"Color de tra\xe7",strokeColorRange:"Rang de color de tra\xe7",targetColor:"Color dest\xed",colorAggregation:"Agregaci\xf3 de color",heightAggregation:"Agregaci\xf3 al\xe7ada",resolutionRange:"Rang de resoluci\xf3",sizeScale:"Mida escala",worldUnitSize:"Mida de la unitat mundial",elevationScale:"Escala elevaci\xf3",enableElevationZoomFactor:"Utilitzeu el factor de zoom d’elevaci\xf3",enableElevationZoomFactorDescription:"'Ajusteu l'al\xe7ada / elevaci\xf3 en funci\xf3 del factor de zoom actual",enableHeightZoomFactor:"Utilitzeu el factor de zoom d’al\xe7ada",heightScale:"Escala al\xe7ada",coverageRange:"Rang ed cobertura",highPrecisionRendering:"Representaci\xf3 alta precisi\xf3",highPrecisionRenderingDescription:"La precisi\xf3 alta tindr\xe0 rendiment m\xe9s baix",height:"Al\xe7ada",heightDescription:"Fes clic al bot\xf3 a dalt a la dreta del mapa per canviar a vista 3D",fill:"Omple",enablePolygonHeight:"Activa al\xe7ada del pol\xedgon",showWireframe:"Mostra Wireframe",weightIntensity:"Intensitat de pes",zoomScale:"Escala de zoom",heightRange:"Rang al\xe7ada",heightMultiplier:"Multiplicador d'al\xe7ada"},layerManager:{addData:"Afegeix Dades",addLayer:"Afegeix Capes",layerBlending:"Combinar capes"},mapManager:{mapStyle:"Estil de mapa",addMapStyle:"Afegeix estils de mapa","3dBuildingColor":"Color edifici 3D",backgroundColor:"Color de fons"},layerConfiguration:{defaultDescription:"Calcula {property} segons el camp seleccionat",howTo:"How to"},filterManager:{addFilter:"Afegeix Filtre"},datasetTitle:{showDataTable:"Mostra taula de dades",removeDataset:"Elimina conjunt de dades"},datasetInfo:{rowCount:"{rowCount} files"},tooltip:{hideLayer:"oculta la capa",showLayer:"mostra la capa",hideFeature:"Amaga l'objecte",showFeature:"Mostra l'objecte",hide:"amaga",show:"mostra",removeLayer:"Elimina capa",resetAfterError:"Intenteu habilitar la capa despr\xe9s dun error",layerSettings:"Configuraci\xf3 de capa",closePanel:"Tanca panel actual",switchToDualView:"Canvia a la vista de mapa dual",showLegend:"mostra llegenda",disable3DMap:"Desactiva mapa 3D",DrawOnMap:"Dibuixa al mapa",selectLocale:"Selecciona configuraci\xf3 regional",hideLayerPanel:"Oculta el tauler de capes",showLayerPanel:"Mostra el tauler de capes",moveToTop:"Despla\xe7a a dalt de tot de les capes de dades",selectBaseMapStyle:"Selecciona estil de mapa base",delete:"Esborra",timePlayback:"Reproducci\xf3 de temps",cloudStorage:"Emmagatzematge al n\xfavol","3DMap":"Mapa 3D",animationByWindow:"Finestra Temporal M\xf2bil",animationByIncremental:"Finestra Temporal Incremental",speed:"velocitat",play:"iniciar",pause:"pausar",reset:"reiniciar"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"Exporta imatge",exportData:"Exporta dades",exportMap:"Exporta mapa",shareMapURL:"Comparteix URL del mapa",saveMap:"Desa mapa",select:"selecciona",polygon:"pol\xedgon",rectangle:"rectangle",hide:"amaga",show:"mostra"},i),modal:{title:{deleteDataset:"Esborra conjunt de dades",addDataToMap:"Afegeix dades al mapa",exportImage:"Exporta imatge",exportData:"Exporta dades",exportMap:"Exporta mapa",addCustomMapboxStyle:"Afegeix estil Mapbox propi",saveMap:"Desa mapa",shareURL:"Comparteix URL"},button:{delete:"Esborra",download:"Descarrega",export:"Exporta",addStyle:"Afegeix estil",save:"Desa",defaultCancel:"Cancel\xb7la",defaultConfirm:"Confirma"},exportImage:{ratioTitle:"R\xe0tio",ratioDescription:"Escull r\xe0tio per diversos usos.",ratioOriginalScreen:"Pantalla original",ratioCustom:"Personalitzat",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"Resoluci\xf3",resolutionDescription:"Alta resoluci\xf3 \xe9s millor per a les impressions.",mapLegendTitle:"Llegenda del mapa",mapLegendAdd:"Afegir llegenda al mapa"},exportData:{datasetTitle:"Conjunt de dades",datasetSubtitle:"Escull els conjunts de dades que vols exportar",allDatasets:"Tots",dataTypeTitle:"Tipus de dades",dataTypeSubtitle:"Escull els tipus de dades que vols exportar",filterDataTitle:"Filtra dades",filterDataSubtitle:"Pots escollir exportar les dades originals o les filtrades",filteredData:"Dades filtrades",unfilteredData:"Dades sense filtrar",fileCount:"{fileCount} Arxius",rowCount:"{rowCount} Files"},deleteData:{warning:"est\xe0s a punt d'esborrar aquest conjunt de dades. Afectar\xe0 {length} capes"},addStyle:{publishTitle:"2. Publica el teu estil a Mapbox o proporciona el token d'acc\xe9s",publishSubtitle1:"Pots crear el teu propi estil de mapa a",publishSubtitle2:"i",publishSubtitle3:"publicar",publishSubtitle4:"ho.",publishSubtitle5:"Per utilitzar un estil privat, enganxa el teu",publishSubtitle6:"token d'acc\xe9s",publishSubtitle7:"aqu\xed. *kepler.gl \xe9s una aplicaci\xf3 client, les dades romanen al teu navegador..",exampleToken:"p.ex. pk.abcdefg.xxxxxx",pasteTitle:"1. Enganxa la URL de l'estil",pasteSubtitle1:"Qu\xe8 \xe9s un",pasteSubtitle2:"URL de l'estil",namingTitle:"3. Posa nom al teu estil"},shareMap:{shareUriTitle:"Comparteix URL del mapa",shareUriSubtitle:"Genera una URL del mapa per compartir amb altri",cloudTitle:"Emmagatzematge al n\xfavol",cloudSubtitle:"Accedeix i carrega dades de mapa al teu emmagatzematge al n\xfavol personal",shareDisclaimer:"kepler.gl desar\xe0 les dades del mapa al teu emmagatzematge al n\xfavol personal, nom\xe9s qui tingui la URL podr\xe0 accedir al mapa i a les dades . Pots editar/esborrar l'arxiu de dades en el teu compte al n\xfavol en qualsevol moment.",gotoPage:"Ves a la p\xe0gina de {currentProvider} de Kepler.gl"},statusPanel:{mapUploading:"Carregar un mapa",error:"Error"},saveMap:{title:"Emmagatzematge al n\xfavol",subtitle:"Accedeix per desar el mapa al teu emmagatzematge al n\xfavol"},exportMap:{formatTitle:"Format de mapa",formatSubtitle:"Escull el format amb qu\xe8 vols exportar el teu mapa",html:{selection:"Exporta el teu mapa com un arxiu HTML interactiu.",tokenTitle:"Token d'acc\xe9s de Mapbox",tokenSubtitle:"Utilitza el teu token d'acc\xe9s de Mapbox a l'arxiu HTML (opcional)",tokenPlaceholder:"Enganxa el teu token d'acc\xe9s a Mapbox",tokenMisuseWarning:"* Si no proporciones el teu propi token, el mapa podria fallar en qualsevol moment quan reemplacem el nostre token per evitar abusos. ",tokenDisclaimer:"Pots canviar el toke de Mapbox m\xe9s endavant fent servir aquestes instruccions: ",tokenUpdate:"Com actualitzar un token preexistent.",modeTitle:"Mode mapa",modeSubtitle1:"Selecciona mode app. M\xe9s ",modeSubtitle2:"informaci\xf3",modeDescription:"Permet als usuaris {mode} el mapa",read:"llegir",edit:"editar"},json:{configTitle:"Configuraci\xf3 del mapa",configDisclaimer:"La configuraci\xf3 del mapa s'inclour\xe0 a l'arxiu Json. Si utilitzes kepler.gl a la teva pr\xf2pia app pots copiar aquesta configuraci\xf3 i passar-la a  ",selection:"Exporta les dades del mapa i la configuraci\xf3 en un sol arxiu Json. M\xe9s endavant pots obrir aquest mateix mapa carregant aquest mateix arxiu a kepler.gl.",disclaimer:"* La configuraci\xf3 del mapa es combina amb els conjunts de dades carregats. ‘dataId’ s'utilitza per lligar capes, filtres i suggeriments a un conjunt de dades espec\xedfic. Quan passis aquesta configuraci\xf3 a addDataToMap, assegura que l'identificador del conjunt de dades coincideixi amb els ‘dataId’ d'aquesta configuraci\xf3."}},loadingDialog:{loading:"Carregant..."},loadData:{upload:"Carregar arxius",storage:"Carregar des d'emmagatzematge"},tripInfo:{title:"Com habilitar l’animaci\xf3 de viatge",description1:"Per animar la ruta, les dades geoJSON han de contenir `LineString` en la seva geometria i les coordenades de LineString han de tenir 4 elements en els formats de ",code:" [longitude, latitude, altitude, timestamp] ",description2:"i el darrer element ha de ser la marca de temps. Els formats v\xe0lids per a la marca de temps inclouen Unix en segons com `1564184363` o en milisegons com `1564184363000`.",example:"Exemple:"},iconInfo:{title:"Com dibuixar icones",description1:"En el teu CSV crea una columna i posa-hi el nom de la icona que vols dibuixar. Pots deixar la cel\xb7la buida quan no vulguis que es mostri per a certs punts. Quan la columna s'anomena",code:"icon",description2:" kepler.gl autom\xe0ticament crear\xe0 una capa d'icona.",example:"Exemple:",icons:"Icones"},storageMapViewer:{lastModified:"Darrera modificaci\xf3 fa {lastUpdated}",back:"Enrere"},overwriteMap:{title:"Desant mapa...",alreadyExists:"ja existeix a {mapSaved}. El vols sobreescriure?"},loadStorageMap:{back:"Enrere",goToPage:"Ves a la p\xe0gina {displayName} de Kepler.gl",storageMaps:"Emmagatzematge / Mapes",noSavedMaps:"Cap mapa desat encara"}},header:{visibleLayers:"Capes visibles",layerLegend:"Llegenda de capes"},interactions:{tooltip:"Suggeriment",brush:"Pinzell",coordinate:"Coordenades",geocoder:"Geocodificador"},layerBlending:{title:"Combinaci\xf3 de capes",additive:"additiva",normal:"normal",subtractive:"substractiva"},columns:{title:"Columnes",lat:"lat",lng:"lon",altitude:"al\xe7ada",icon:"icona",geojson:"geojson",arc:{lat0:"lat origen",lng0:"lng origen ",lat1:"lat destinaci\xf3",lng1:"lng destinaci\xf3"},line:{alt0:"al\xe7ada origen",alt1:"al\xe7ada destinaci\xf3"},grid:{worldUnitSize:"Mida de malla (km)"},hexagon:{worldUnitSize:"Radi d'hex\xe0gon (km)"},hex_id:"id hex"},color:{customPalette:"Paleta personalitzada",steps:"intervals",type:"tipus",reversed:"invertida"},scale:{colorScale:"Escala de color",sizeScale:"Escala de mides",strokeScale:"Escala de tra\xe7",scale:"Escala"},fileUploader:{message:"Arrossega i deixa anar l'arxiu aqu\xed",chromeMessage:"*usuari de Chrome: la mida m\xe0xima s\xf3n 250mb, si has de carrgar un arxiu m\xe9s gran fes servir Safari",disclaimer:"*kepler.gl \xe9s una aplicaci\xf3 a la banda client que no es recolza en cap servidor. Les dades nom\xe9s existeixen a la teva m\xe0quina/navegador. No s'envien dades ni mapes a cap servidor.",configUploadMessage:"Carrega {fileFormatNames} o un mapa desat en **Json**. M\xe9s informaci\xf3 sobre [**supported file formats**]",browseFiles:"navega pels teus arxius",uploading:"Carregant",fileNotSupported:"L'arxiu {errorFiles} no \xe9s compatible.",or:"o"},geocoder:{title:"Introdueix una adre\xe7a"},fieldSelector:{clearAll:"Treure tots",formatting:"Format"},compare:{modeLabel:"Mode Comparaci\xf3",typeLabel:"Tipus de Comparaci\xf3",types:{absolute:"Absoluta",relative:"Relativa"}},mapPopover:{primary:"Principal"},density:"densitat","Bug Report":"Informe d'errors","User Guide":"Guia d'usuari",Save:"Desa",Share:"Comparteix"};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var b={property:{weight:"权重",label:"标签",fillColor:"填充色",color:"颜色",coverage:"覆盖范围",strokeColor:"线条颜色",radius:"半径",outline:"轮廓线",stroke:"线条粗细",density:"密度",height:"高度",sum:"总和",pointCount:"点数"},placeholder:{search:"搜索",selectField:"选择区域",yAxis:"Y轴",selectType:"选择类型",selectValue:"选择值",enterValue:"输入值",empty:"未选择"},misc:{by:"",valuesIn:"值包含",valueEquals:"值等于",dataSource:"数据源",brushRadius:"画笔半径 (km)",empty:" "},mapLayers:{title:"图层",label:"标签",road:"道路",border:"边界线",building:"建筑物",water:"水",land:"地面","3dBuilding":"3D建筑"},panel:{text:{label:"标签",labelWithId:"标签 {labelId}",fontSize:"字体大小",fontColor:"字体颜色",textAnchor:"文本锚",alignment:"对齐方式",addMoreLabel:"添加更多标签"}},sidebar:{panels:{layer:"图层",filter:"过滤器",interaction:"交互",basemap:"底图"}},layer:{required:"必填*",radius:"半径",color:"颜色",fillColor:"填充色",outline:"轮廓线",weight:"权重",propertyBasedOn:"{property}的基准",coverage:"覆盖范围",stroke:"线条粗细",strokeWidth:"线条宽度",strokeColor:"线条颜色",basic:"基础设置",trailLength:"轨迹长度",trailLengthDescription:"轨迹淡出的秒数",newLayer:"新建图层",elevationByDescription:"关闭时，高度取决于点数",colorByDescription:"关闭时，颜色取决于点数",aggregateBy:"{field}聚合如下: ","3DModel":"3D模型","3DModelOptions":"3D模型选项",type:{point:"point",arc:"arc",line:"line",grid:"grid",hexbin:"hexbin",polygon:"polygon",geojson:"geojson",cluster:"cluster",icon:"icon",heatmap:"heatmap",hexagon:"hexagon",hexagonid:"H3",trip:"trip",s2:"S2","3d":"3D"}},layerVisConfigs:{angle:"角度",strokeWidth:"线条宽度",strokeWidthRange:"线条宽度范围",radius:"半径",fixedRadius:"以米为单位固定半径",fixedRadiusDescription:"将半径映射到以米为单位的绝对半径（例: 5 → 5米）",radiusRange:"半径范围",clusterRadius:"聚类半径",radiusRangePixels:"半径范围[像素]",opacity:"透明度",coverage:"覆盖范围",outline:"轮廓",colorRange:"色彩范围",stroke:"线",strokeColor:"线条颜色",strokeColorRange:"线条色彩范围",targetColor:"目标颜色",colorAggregation:"颜色聚合",heightAggregation:"高度聚合",resolutionRange:"分辨率范围",sizeScale:"大小比例",worldUnitSize:"世界单位大小",elevationScale:"海拔比例",enableElevationZoomFactor:"使用高程缩放系数",enableElevationZoomFactorDescription:"根据当前缩放系数调整海拔",heightScale:"高度比例",coverageRange:"覆盖范围",highPrecisionRendering:"高精度渲染",highPrecisionRenderingDescription:"高精度渲染会导致性能下降",height:"高度",heightDescription:"点击屏幕右上角的按钮切换到3D视图",fill:"填充",enablePolygonHeight:"启用多边形高度",showWireframe:"显示线框",weightIntensity:"加权强度",zoomScale:"缩放比例",heightRange:"高度范围"},layerManager:{addData:"添加数据",addLayer:"添加图层",layerBlending:"混合图层"},mapManager:{mapStyle:"地图样式",addMapStyle:"添加地图样式","3dBuildingColor":"3D 建筑颜色"},layerConfiguration:{defaultDescription:"根据所选字段计算 {property}",howTo:"使用方法"},filterManager:{addFilter:"添加过滤器"},datasetTitle:{showDataTable:"显示数据表",removeDataset:"删除数据集"},datasetInfo:{rowCount:"{rowCount}行"},tooltip:{hideLayer:"隐藏图层",showLayer:"显示图层",hideFeature:"隐藏特征",showFeature:"显示特征",hide:"隐藏",show:"显示",removeLayer:"删除图层",duplicateLayer:"复制图层",layerSettings:"图层设置",closePanel:"关闭当前面板",switchToDualView:"切换到双地图视图",showLegend:"显示图例",disable3DMap:"禁用 3D 地图",DrawOnMap:"在地图上绘制",selectLocale:"选择语言",hideLayerPanel:"隐藏图层面板",showLayerPanel:"显示图层面板",moveToTop:"移至图层顶部",selectBaseMapStyle:"选择底图样式",delete:"删除",timePlayback:"时空回放",cloudStorage:"云存储","3DMap":"3D 地图",animationByWindow:"移动时间窗口",animationByIncremental:"增量时间窗口",speed:"速度",play:"播放",pause:"暂停",reset:"重置"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"导出图片",exportData:"导出数据",exportMap:"导出地图",shareMapURL:"分享地图网址",saveMap:"保存地图",select:"选择",polygon:"polygon",rectangle:"rectangle",hide:"隐藏",show:"显示"},i),editor:{filterLayer:"过滤图层",copyGeometry:"复制几何图形"},modal:{title:{deleteDataset:"删除数据集",addDataToMap:"添加数据到地图",exportImage:"导出图片",exportData:"导出数据",exportMap:"导出地图",addCustomMapboxStyle:"添加自定义地图",saveMap:"保存地图",shareURL:"分享网址"},button:{delete:"删除",download:"下载",export:"出口",addStyle:"添加样式",save:"保存",defaultCancel:"取消",defaultConfirm:"确认"},exportImage:{ratioTitle:"比率",ratioDescription:"选择不同用途的比例。",ratioOriginalScreen:"原始屏幕",ratioCustom:"自定义",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"分辨率",resolutionDescription:"高分辨率更适合打印。",mapLegendTitle:"地图图例",mapLegendAdd:"在地图上添加图例"},exportData:{datasetTitle:"数据集",datasetSubtitle:"选择要导出的数据集",allDatasets:"全部",dataTypeTitle:"数据类型",dataTypeSubtitle:"选择要导出的数据类型",filterDataTitle:"过滤数据",filterDataSubtitle:"可以选择导出原始数据或过滤后的数据",filteredData:"过滤数据",unfilteredData:"元数据",fileCount:"{fileCount} 个文件",rowCount:"{rowCount} 行"},deleteData:{warning:"确认要删除这个数据集。它会影响 {length} 个层"},addStyle:{publishTitle:"2. 如果在步骤1中输入了 mapbox 样式的 url，需要在 mapbox 上发布样式或提供访问令牌（access token）。（可选）",publishSubtitle1:"可以在以下位置创建自己的地图样式",publishSubtitle2:"并",publishSubtitle3:"发布",publishSubtitle4:"。",publishSubtitle5:"使用私有样式，需粘贴",publishSubtitle6:"访问令牌（access token）",publishSubtitle7:"。* Kepler.gl 是一个客户端应用程序，数据保留在您的浏览器中。",exampleToken:"例) pk.abcdefg.xxxxxx",pasteTitle:"1. 粘贴样式 url",pasteSubtitle0:"样式 url 可以是 Mapbox 的",pasteSubtitle1:"什么是",pasteSubtitle2:"样式 URL，",pasteSubtitle3:"还可以使用遵从Mapbox GL样式的style.json的url：",pasteSubtitle4:"Mapbox GL 样式规范",namingTitle:"3. 命名你的样式"},shareMap:{shareUriTitle:"分享地图网址",shareUriSubtitle:"生成分享地图的链接",cloudTitle:"云存储",cloudSubtitle:"登录并将地图数据上传到个人云存储",shareDisclaimer:"kepler.gl 将创建的地图存储在个人云存储中，因此只有知道 URL 的人才能访问地图及其数据。可以随时使用个人云存储帐户编辑/删除数据文件。",gotoPage:"跳转到Kepler.gl的{currentProvider}页面"},statusPanel:{mapUploading:"地图上传中",error:"错误"},saveMap:{title:"云存储",subtitle:"登录以将地图保存到个人云存储"},exportMap:{formatTitle:"地图的格式",formatSubtitle:"选择导出地图的格式",html:{selection:"将地图导出至交互式的html文件中。",tokenTitle:"Mapbox的访问令牌（access token）",tokenSubtitle:"在 html 中使用自己的 Mapbox 访问令牌（access token）（可选）",tokenPlaceholder:"粘贴个人的 Mapbox 访问令牌access token）",tokenMisuseWarning:"* 如果您不提供自己的令牌，则在我们更换令牌时，地图可能随时无法显示，以免被滥用。",tokenDisclaimer:"可以稍后使用以下说明更改 Mapbox 令牌：",tokenUpdate:"如何更新现有的地图令牌。",modeTitle:"地图模式",modeSubtitle1:"选择地图模式。更多的",modeSubtitle2:"信息",modeDescription:"允许用户{mode}地图",read:"阅读",edit:"编辑"},json:{configTitle:"地图配置",configDisclaimer:"地图配置将包含在 Json 文件中。如果您在自己的应用程序中使用 kepler.gl。您可以复制此配置并将其传递给",selection:"将当前地图数据和配置导出到单个 Json 文件中。稍后您可以通过将此文件上传到 kepler.gl 来打开同一张地图。",disclaimer:"* 地图配置与加载的数据集相结合。 “dataId”用于将图层、过滤器和工具提示绑定到特定数据集。将此配置传递给 addDataToMap 时，请确保数据集 ID 与此配置中的 dataId/s 匹配。"}},loadingDialog:{loading:"加载中..."},loadData:{upload:"上传文件",storage:"从存储中加载"},tripInfo:{title:"如何启用移动动画",description1:"要路径设置动画，geoJSON 数据必须包含 `LineString` 作为要素几何。此外，LineString 的坐标有四个元素",code:" [经度，纬度，高程，时间戳] ",description2:"最后一个元素是时间戳。有效的时间戳格式包括以秒为单位的 unix，例如`1564184363`或以毫秒为单位的`1564184363000`。",example:"例："},iconInfo:{title:"如何绘制图标",description1:"在您的 csv 中，创建一列，将您要绘制的图标的名称放入其中。如果不想在某些点上显示图标，可以将单元格留空。当列被命名为",code:"图标",description2:"时，kepler.gl 会自动为你创建一个图标层。",example:"例:",icons:"图标一览"},storageMapViewer:{lastModified:"上次修改 {lastUpdated} 前",back:"返回"},overwriteMap:{title:"正在保存地图...",alreadyExists:"已经存在于 {mapSaved} 中。你想覆盖吗？"},loadStorageMap:{back:"返回",goToPage:"跳转到 Kepler.gl 的 {displayName} 页面",storageMaps:"存储 / 地図",noSavedMaps:"还没有保存的地图"}},header:{visibleLayers:"可见图层",layerLegend:"图层图例"},interactions:{tooltip:"工具提示",brush:"刷",coordinate:"坐标",geocoder:"地理编码器"},layerBlending:{title:"图层混合",additive:"additive",normal:"normal",subtractive:"subtractive"},columns:{title:"列",lat:"纬度",lng:"经度",altitude:"海拔",icon:"图标",geojson:"geojson",token:"令牌",arc:{lat0:"起点 纬度",lng0:"起点 经度",lat1:"终点 纬度",lng1:"终点 经度"},grid:{worldUnitSize:"网格大小 (km)"},hexagon:{worldUnitSize:"六边形半径 (km)"},hex_id:"hex id"},color:{customPalette:"自定义调色板",steps:"步骤",type:"类型",reversed:"反转"},scale:{colorScale:"色阶",sizeScale:"大小比例",strokeScale:"描边比例",scale:"规模"},fileUploader:{message:"将您的文件拖放到此处（可多个）",chromeMessage:"*对于 Chrome 用户：文件大小最大为 250mb。如果需要上传更多文件，请尝试使用 Safari。",disclaimer:"* kepler.gl 在客户端上工作。数据仅保留在您自己的设备/浏览器中。没有信息或地图数据被发送到任何服务器。",configUploadMessage:"上传 {fileFormatNames} 或保存的地图 **Json**。阅读更多关于[**支持的文件格式**]",browseFiles:"浏览你的文件",uploading:"上传",fileNotSupported:"不支持文件 {errorFiles}。",or:"或"},geocoder:{title:"输入地址或坐标（例： 37.79,-122.40）"},fieldSelector:{clearAll:"清除所有",formatting:"格式化"},compare:{modeLabel:"比较模式",typeLabel:"比较类型",types:{absolute:"绝对",relative:"相对"}},mapPopover:{primary:"主要"},density:"密度","Bug Report":"错误报告","User Guide":"用户指南",Save:"保存",Share:"分享"};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var E={property:{weight:"重み",label:"ラベル",fillColor:"塗りつぶしの色",color:"色",coverage:"カバー率",strokeColor:"線の色",radius:"半径",outline:"輪郭線",stroke:"線の太さ",density:"密度",height:"高さ",sum:"合計",pointCount:"点の数"},placeholder:{search:"検索",selectField:"フィールドを選択",yAxis:"Y軸",selectType:"タイプを選択",selectValue:"値を選択",enterValue:"値を入力",empty:"未選択"},misc:{by:"",valuesIn:"値が以下に含まれる",valueEquals:"値が以下に等しい",dataSource:"データソース",brushRadius:"ブラシ半径 (km)",empty:" "},mapLayers:{title:"地図レイヤ",label:"ラベル",road:"道路",border:"境界線",building:"建物",water:"水",land:"地面","3dBuilding":"3D建物",background:"背景"},panel:{text:{label:"ラベル",labelWithId:"ラベル {labelId}",fontSize:"文字サイズ",fontColor:"文字色",textAnchor:"文字左右",alignment:"文字上下",addMoreLabel:"ラベルを追加"}},sidebar:{panels:{layer:"レイヤ",filter:"フィルター",interaction:"インタラクション",basemap:"ベースマップ"}},layer:{required:"必須*",radius:"半径",color:"色",fillColor:"塗りつぶしの色",outline:"輪郭線",weight:"重み",propertyBasedOn:"{property}の基準",coverage:"カバー率",stroke:"線",strokeWidth:"線の太さ",strokeColor:"線の色",basic:"基本設定",trailLength:"痕跡の長さ",trailLengthDescription:"痕跡が完全に消えるまでの秒数",newLayer:"新しいレイヤ",elevationByDescription:"オフの場合、高さは点の数に応じて決まります",colorByDescription:"オフの場合、色は点の数に応じて決まります",aggregateBy:"{field}を以下で集計: ","3DModel":"3Dモデル","3DModelOptions":"3Dモデルのオプション",type:{point:"point",arc:"arc",line:"line",grid:"grid",hexbin:"hexbin",polygon:"polygon",geojson:"geojson",cluster:"cluster",icon:"icon",heatmap:"heatmap",hexagon:"hexagon",hexagonid:"H3",trip:"trip",s2:"S2","3d":"3D"}},layerVisConfigs:{angle:"角度",strokeWidth:"線の太さ (ピクセル)",strokeWidthRange:"線の太さの範囲",radius:"半径",fixedRadius:"半径をメートルで固定",fixedRadiusDescription:"半径をメートル単位の絶対半径に変換します（例: 5 → 5メートル）",radiusRange:"半径の範囲",clusterRadius:"クラスターの範囲[ピクセル]",radiusRangePixels:"半径の範囲[ピクセル]",opacity:"不透明度",coverage:"カバー率",outline:"輪郭線",colorRange:"色の範囲",stroke:"線",strokeColor:"線の色",strokeColorRange:"線の色の範囲",targetColor:"Targetの色",colorAggregation:"色の集計",heightAggregation:"高さの集計",resolutionRange:"解像度の範囲",sizeScale:"サイズのスケール",worldUnitSize:"World Unit Size",elevationScale:"標高のスケール",enableElevationZoomFactor:"標高ズーム係数を使用する",enableElevationZoomFactorDescription:"現在のズーム率に基づいて高さ/標高を調整します",enableHeightZoomFactor:"高さズーム係数を使用する",heightScale:"高さのスケール",coverageRange:"カバー率の範囲",highPrecisionRendering:"高精度レンダリング",highPrecisionRenderingDescription:"高精度にすると速度は低下します",height:"高さ",heightDescription:"3Dビューに切り替えるには画面右上のボタンをクリックします",fill:"塗りつぶし",enablePolygonHeight:"ポリゴンの高さを有効にする",showWireframe:"ワイヤーフレームを表示",weightIntensity:"重みづけの強さ",zoomScale:"ズームのスケール",heightRange:"高さの範囲",heightMultiplier:"高さ乗数"},layerManager:{addData:"データ追加",addLayer:"レイヤ追加",layerBlending:"レイヤのブレンド"},mapManager:{mapStyle:"マップスタイル",addMapStyle:"マップスタイル追加","3dBuildingColor":"3D建物の色",backgroundColor:"背景色"},layerConfiguration:{defaultDescription:"選択されたフィールドに基づいて{property}を計算します",howTo:"使い方"},filterManager:{addFilter:"フィルター追加"},datasetTitle:{showDataTable:"データ表を表示",removeDataset:"データセットを削除"},datasetInfo:{rowCount:"{rowCount}行"},tooltip:{hideLayer:"レイヤを非表示",showLayer:"レイヤを表示",hideFeature:"フィーチャーを非表示",showFeature:"フィーチャーを表示",hide:"非表示にする",show:"表示する",removeLayer:"レイヤを削除",duplicateLayer:"レイヤを複製",layerSettings:"レイヤ設定",closePanel:"このパネルを閉じる",switchToDualView:"デュアルビューに切り替え",showLegend:"凡例を表示",disable3DMap:"3D地図を無効化",DrawOnMap:"地図上に図形を描画",selectLocale:"言語設定",hideLayerPanel:"レイヤパネルを非表示",showLayerPanel:"レイヤパネルを表示",moveToTop:"データレイヤの手前に移動",selectBaseMapStyle:"ベースマップのスタイルを選択",delete:"削除",timePlayback:"時系列で再生",cloudStorage:"クラウドストレージ","3DMap":"3D地図",animationByWindow:"時間枠を移動",animationByIncremental:"時間枠を増加",speed:"速度",play:"再生",pause:"一時停止",reset:"リセット"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"画像を出力",exportData:"データを出力",exportMap:"地図を出力",shareMapURL:"地図のURLを共有",saveMap:"地図を保存",select:"選択",polygon:"ポリゴン",rectangle:"長方形",hide:"非表示",show:"表示"},i),modal:{title:{deleteDataset:"データセットを削除",addDataToMap:"地図にデータを追加",exportImage:"画像を出力",exportData:"データを出力",exportMap:"地図を出力",addCustomMapboxStyle:"カスタムマップスタイルを追加",saveMap:"地図を保存",shareURL:"URLを共有"},button:{delete:"削除",download:"ダウンロード",export:"出力",addStyle:"スタイル追加",save:"保存",defaultCancel:"キャンセル",defaultConfirm:"確認"},exportImage:{ratioTitle:"縦横比",ratioDescription:"用途に適した縦横比を選択します。",ratioOriginalScreen:"元のスクリーンサイズ",ratioCustom:"カスタム",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"解像度",resolutionDescription:"印刷には高解像度が適しています。",mapLegendTitle:"地図の凡例",mapLegendAdd:"地図に判例を追加"},exportData:{datasetTitle:"データセット",datasetSubtitle:"エクスポートしたいデータセットを選択します",allDatasets:"全て",dataTypeTitle:"データ形式",dataTypeSubtitle:"エクスポートしたいデータ形式を選択します",filterDataTitle:"データのフィルタ",filterDataSubtitle:"元データ（フィルタなし）とフィルタ済データのどちらをエクスポートするか選択します",filteredData:"フィルタ済データ",unfilteredData:"元データ",fileCount:"{fileCount}個のファイル",rowCount:"{rowCount}行"},deleteData:{warning:"このデータセットを削除します。{length}個のレイヤに影響します。"},addStyle:{publishTitle:"2. ステップ1でMapboxのスタイルURLを指定した場合、Mapboxでスタイルを公開するか、アクセストークンを以下に入力します（オプション）",publishSubtitle1:"独自のスタイルを",publishSubtitle2:"で作成し、",publishSubtitle3:"公開",publishSubtitle4:"することができます",publishSubtitle5:"非公開のスタイルを使用するには、自身の",publishSubtitle6:"アクセストークン",publishSubtitle7:"をここに入力します。*kepler.glはクライアント上で動作するため、データは自身のブラウザに保持されます。",exampleToken:"例) pk.abcdefg.xxxxxx",pasteTitle:"1. スタイルのURLをペースト",pasteSubtitle0:"スタイルのURLはMapboxの",pasteSubtitle1:"What is a",pasteSubtitle2:"スタイルURL",pasteSubtitle3:"を指定するか、Mapbox GLの仕様に沿ったstyle.jsonのURLを指定します：",pasteSubtitle4:"Mapbox GL スタイル仕様",namingTitle:"3. スタイルの名称を設定"},shareMap:{shareUriTitle:"地図のURLを共有",shareUriSubtitle:"共有用に地図のURLを生成",cloudTitle:"クラウドストレージ",cloudSubtitle:"ログインして地図データを個人用クラウドストレージにアップロード",shareDisclaimer:"kepler.glは作成した地図をあなたのクラウドストレージに保存するため、そのURLを知っている人のみが地図やそのデータにアクセス可能です。クラウドストレージのアカウントでいつでもデータファイルを編集/削除することができます。",gotoPage:"Kepler.glの{currentProvider}ページに移動"},statusPanel:{mapUploading:"地図をアップロード中",error:"エラー"},saveMap:{title:"クラウドストレージ",subtitle:"地図を個人用クラウドストレージに保存するためにログインする"},exportMap:{formatTitle:"地図の形式",formatSubtitle:"地図の出力形式を選択します",html:{selection:"地図をインタラクティブなHTMLファイルとして出力します。",tokenTitle:"Mapboxアクセストークン",tokenSubtitle:"HTMLファイルで自分のMapboxアクセストークンを使用します (オプション)",tokenPlaceholder:"自分のMapboxアクセストークンをここに貼り付け",tokenMisuseWarning:"* 自分のトークンを使用しない場合は、デフォルトのトークンが悪用防止のために更新され、地図が表示されなくなる可能性があります。  ",tokenDisclaimer:"Mapboxのトークンは下記の方法に従って後から変更することも可能です：",tokenUpdate:"既存の地図のトークンを更新する方法",modeTitle:"地図のモード",modeSubtitle1:"地図のモードを選択します。詳細は",modeSubtitle2:"こちら",modeDescription:"ユーザーに地図の{mode}を許可",read:"閲覧",edit:"編集"},json:{configTitle:"地図の設定",configDisclaimer:"地図の設定はjsonファイルに収められます。他のアプリケーションでkepler.glを使用する場合、この設定をコピーペーストすることが可能です：",selection:"現在の地図データと設定を単一のjsonファイルに出力します。このファイルをkepler.glにアップロードすることで、同じ地図を後から開くことが可能になります。",disclaimer:"* 地図の設定は読み込まれたデータセットとセットになっています。‘dataId’によってレイヤ、フィルター、ツールチップは特定のデータセットに紐づけられます。 この設定をaddDataToMapに渡す際は、データセットIDがこの設定内のdataIdと一致するようにしてください。"}},loadingDialog:{loading:"ロード中..."},loadData:{upload:"ファイルをロード",storage:"ストレージからロード"},tripInfo:{title:"移動アニメーションを有効にする方法",description1:"経路をアニメーション化するには、geoJSONデータはfeatureのgeometryとして `LineString` を含む必要があります。また、LineStringの座標は4つの要素を",code:" [経度, 緯度, 標高, timestamp] ",description2:"という形式（最後にタイムスタンプを含む）で保持する必要があります。タイムスタンプの形式は、 UNIX時間の秒単位（例: `1564184363`）またはミリ秒単位（例: `1564184363000`）が有効です。",example:"例："},iconInfo:{title:"アイコンの描画方法",description1:"CSVファイルに列を作成し、描画したいアイコンの名称を記載します。アイコンの描画が不要な点があれば、セルを空白にすることも可能です。列名が",code:"icon",description2:"の場合、kepler.glは自動的にアイコンレイヤを作成します。",example:"例:",icons:"アイコン一覧"},storageMapViewer:{lastModified:"最終編集：{lastUpdated} 前",back:"戻る"},overwriteMap:{title:"地図を保存中...",alreadyExists:"既に{mapSaved}に存在します。上書きしますか？"},loadStorageMap:{back:"戻る",goToPage:"Kepler.glの{displayName}ページに移動",storageMaps:"ストレージ / 地図",noSavedMaps:"保存済の地図はまだありません"}},header:{visibleLayers:"表示中のレイヤ",layerLegend:"レイヤ判例"},interactions:{tooltip:"ツールチップ",brush:"ブラシ",coordinate:"座標",geocoder:"ジオコーダー"},layerBlending:{title:"レイヤのブレンド",additive:"additive",normal:"normal",subtractive:"subtractive"},columns:{title:"列",lat:"緯度",lng:"経度",altitude:"標高",icon:"アイコン",geojson:"geojson",token:"トークン",arc:{lat0:"出発 緯度",lng0:"出発 経度",lat1:"到着 緯度",lng1:"到着 経度"},grid:{worldUnitSize:"グリッドサイズ (km)"},hexagon:{worldUnitSize:"六角形の半径 (km)"},hex_id:"hex id"},color:{customPalette:"カスタムパレット",steps:"段階数",type:"タイプ",reversed:"反転"},scale:{colorScale:"カラースケール",sizeScale:"サイズのスケール",strokeScale:"線のスケール",scale:"スケール"},fileUploader:{message:"ここにファイルをドロップ（複数可）",chromeMessage:"*Chromeユーザーの場合: ファイルサイズは250mbまでにしてください。それ以上のファイルをアップロードする必要がある場合、Safariを試してください。",disclaimer:"*kepler.glはクライアント上で動作します。データは自身の機器・ブラウザにのみ保持されます。情報や地図データは、いかなるサーバーにも送信されません。",configUploadMessage:"{fileFormatNames} または保存済地図の**Json**をアップロードします。詳細は以下を参照してください：[**対応ファイル形式**]",browseFiles:"デバイスのファイルを選択",uploading:"アップロード中",fileNotSupported:"{errorFiles} はサポートされていないファイルです。",or:"or"},geocoder:{title:"住所または座標を入力（例： 37.79,-122.40）"},fieldSelector:{clearAll:"全て解除",formatting:"値の形式"},compare:{modeLabel:"比較モード",typeLabel:"比較方式",types:{absolute:"絶対",relative:"相対"}},mapPopover:{primary:"プライマリ"},density:"density","Bug Report":"バグを報告","User Guide":"ユーザーガイド",Save:"保存",Share:"共有"};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var S={property:{weight:"вес",label:"ярлык",fillColor:"цвет заливки",color:"цвет",coverage:"покрытие",strokeColor:"цвет обводки",radius:"радиус",outline:"контур",stroke:"обводка",density:"плотность",height:"высота",sum:"сумма",pointCount:"Кол-во точек"},placeholder:{search:"Поиск",selectField:"Выберите поле",yAxis:"Y Ось",selectType:"Выберите A тип",selectValue:"Выберите A значение",enterValue:"Введите значение",empty:"пустой"},misc:{by:"",valuesIn:"Значение в",valueEquals:"Значение равно",dataSource:"Источник данных",brushRadius:"Радиус кисти (km)",empty:" "},mapLayers:{title:"Слои карты",label:"Обозначения",road:"Дороги",border:"Границы",building:"Здания",water:"Вода",land:"Земля","3dBuilding":"3d здания"},panel:{text:{label:"Ярлык",labelWithId:"Ярлык {labelId}",fontSize:"Размер шрифта",fontColor:"Цвет шрифта",textAnchor:"Анкор текста",alignment:"Положение",addMoreLabel:"Добавить еще ярлык"}},sidebar:{panels:{layer:"Слои",filter:"Фильтры",interaction:"Взаимодействия",basemap:"Базовая карта"}},layer:{required:"Требования*",radius:"Радиус",color:"Цвет",fillColor:"Цвет заливки",outline:"Контур",weight:"Вес",propertyBasedOn:"{property} на основе",coverage:"Покрытие",stroke:"Обводка",strokeWidth:"Ширина обводки",strokeColor:"Цвет обводки",basic:"Basic",trailLength:"Trail Length",trailLengthDescription:"Number of seconds for a path to completely fade out",newLayer:"new layer",elevationByDescription:"When off, height is based on count of points",colorByDescription:"When off, color is based on count of points",aggregateBy:"Aggregate {field} by","3DModel":"3D Model","3DModelOptions":"3D Model Options",type:{point:"точки",arc:"дуги",line:"линии",grid:"сетка",hexbin:"hexbin",polygon:"многоугольники",geojson:"geojson",cluster:"кластеры",icon:"значки",heatmap:"тепловая карта",hexagon:"шестиугольник",hexagonid:"H3",trip:"пути",s2:"S2","3d":"3D"}},layerVisConfigs:{angle:"Угол",strokeWidth:"Ширина штриха (в пикселях)",strokeWidthRange:"Диапазон ширины штриха",radius:"Радиус",fixedRadius:"Фиксированный радиус в метрах",fixedRadiusDescription:"Сопоставьте радиус с абсолютным радиусом в метрах, например От 5 до 5 метров",radiusRange:"Диапазон радиуса",clusterRadius:"Радиус кластера в пикселях",radiusRangePixels:"Диапазон радиуса в пикселях",opacity:"Непрозрачность",coverage:"Покрытие",outline:"Контур",colorRange:"Цветовая гамма",stroke:"Обводка",strokeColor:"Цвет обводки",strokeColorRange:"Обводка Цветовой диапазон",targetColor:"Целевой цвет",colorAggregation:"Цветовая агрегация",heightAggregation:"Агрегация по высоте",resolutionRange:"Диапазон разрешения",sizeScale:"Шкала размеров",worldUnitSize:"Мировые ед.изм.",elevationScale:"Шкала возвышения",enableElevationZoomFactor:"Использовать коэффициент увеличения по высоте",enableElevationZoomFactorDescription:"Отрегулируйте высоту / возвышение на основе текущего коэффициента масштабирования",enableHeightZoomFactor:"вкл. коэффициент масштабирования по высоте",heightScale:"Масштаб высоты",coverageRange:"Диапазон покрытия",highPrecisionRendering:"Высокая точность рендеринга",highPrecisionRenderingDescription:"Высокая точность приведет к снижению производительности",height:"Высота",heightDescription:"Нажмите кнопку в правом верхнем углу карты, чтобы переключиться в 3D-вид",fill:"Наполнить",enablePolygonHeight:"Включить высоту многоугольника",showWireframe:"Показать каркас",weightIntensity:"Вес Интенсивность",zoomScale:"Масштаб увеличения",heightRange:"Диапазон высоты",heightMultiplier:"Множитель высоты"},layerManager:{addData:"Добавить данные",addLayer:"Добавить слой",layerBlending:"Смешивание слоев"},mapManager:{mapStyle:"Стиль карты",addMapStyle:"Добавить стиль карты","3dBuildingColor":"3D Цвет здания"},layerConfiguration:{defaultDescription:"Рассчитать {property} на основе выбранного поля",howTo:"How to"},filterManager:{addFilter:"Добавить фильтр"},datasetTitle:{showDataTable:"Показать таблицу данных ",removeDataset:"Удалить набор данных"},datasetInfo:{rowCount:"{rowCount} строк"},tooltip:{hideLayer:"скрыть слой",showLayer:"показать слой",hideFeature:"Скрыть функцию",showFeature:"Показать функцию",hide:"скрыть",show:"показать",removeLayer:"Удалить слой",duplicateLayer:"Дублировать слой",layerSettings:"Настройки слоя",closePanel:"Закрыть текущую панель",switchToDualView:"Перейти в режим двойной карты",showLegend:"Показать легенду",disable3DMap:"Отключить 3D Карту",DrawOnMap:"Рисовать на карте",selectLocale:"Выберите регион",hideLayerPanel:"Скрыть панель слоев",showLayerPanel:"Показать панель слоев",moveToTop:"Перейти к верхним слоям данных",selectBaseMapStyle:"Выберите стиль базовой карты",delete:"Удалить",timePlayback:"Воспроизведение времени",cloudStorage:"Облачное хранилище","3DMap":"3D Карта",animationByWindow:"Перемещение временного окна",animationByIncremental:"Дополнительное временное окно",speed:"скорость",play:"проиграть",pause:"пауза",reset:"перезапустить"},toolbar:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({exportImage:"Экспорт изображения",exportData:"Экспорт данных",exportMap:"Экспорт карты",shareMapURL:"Share Map URL",saveMap:"Сохарнить Карту",select:"Выбрать",polygon:"Многоугольник",rectangle:"Квадрат",hide:"Скрыть",show:"Показать"},i),editor:{filterLayer:"Слои фильтров",copyGeometry:"Копировать геометрию"},modal:{title:{deleteDataset:"Удалить данные",addDataToMap:"Добавить данные на карту",exportImage:"Экспорт изображения",exportData:"Экспорт данных",exportMap:"Экспорт карты",addCustomMapboxStyle:"Добавить собственный стиль карты",saveMap:"Поделиться Картой",shareURL:"Поделиться URL"},button:{delete:"Удалить",download:"Скачать",export:"Экспортировать",addStyle:"Добавить стиль",save:"Сохранить",defaultCancel:"Отменить",defaultConfirm:"Подтвердить"},exportImage:{ratioTitle:"Ratio",ratioDescription:"Выберите соотношение для различного использования",ratioOriginalScreen:"Исходный экран",ratioCustom:"Настройки",ratio4_3:"4:3",ratio16_9:"16:9",resolutionTitle:"Разрешение",resolutionDescription:"Для печати лучше использовать высокое разрешение",mapLegendTitle:"Легенда карты",mapLegendAdd:"Добавить легенду на карту"},exportData:{datasetTitle:"Набор данных",datasetSubtitle:"Выберите наборы данных, которые хотите экспортировать",allDatasets:"Все",dataTypeTitle:"Тип данных",dataTypeSubtitle:"Выберите тип данных, которые вы хотите экспортировать",filterDataTitle:"Отфильтрованные данные",filterDataSubtitle:"Вы можете выбрать экспорт исходных данных или отфильтрованных данных",filteredData:"Отфильтрованные данные",unfilteredData:"Нефильтрованные данные",fileCount:"{fileCount} Файлов",rowCount:"{rowCount} Строк"},deleteData:{warning:"вы собираетесь удалить этот набор данных. Это повлияет на {length} слой"},addStyle:{publishTitle:"2. Если вы указали URL-адрес файла mapbox на шаге 1, опубликуйте свой стиль на mapbox или предоставьте токен доступа. (Необязательно)",publishSubtitle1:"Вы можете создать свой собственный стиль карты",publishSubtitle2:"и",publishSubtitle3:"опубликовать",publishSubtitle4:"его.",publishSubtitle5:"Чтобы использовать частный стиль, вставьте свой",publishSubtitle6:"token доступа",publishSubtitle7:"прим. kepler.gl - это клиентское приложение, данные остаются в вашем браузере .",exampleToken:"например pk.abcdefg.xxxxxx",pasteTitle:"1. Вставить URL стиля",pasteSubtitle0:"URL стиля может быть mapbox",pasteSubtitle1:"Или",pasteSubtitle2:"URL стиля",pasteSubtitle3:"style.json используя",pasteSubtitle4:"Mapbox GL Style Spec",namingTitle:"3. Назови свой стиль"},shareMap:{shareUriTitle:"Поделиться URL карты",shareUriSubtitle:"Создать URL карты, чтобы поделиться с другими",cloudTitle:"Облачное хранилище",cloudSubtitle:"Войдите и загрузите данные карты в свое личное облачное хранилище",shareDisclaimer:"kepler.gl сохранит данные вашей карты в вашем личном облачном хранилище, только люди с URL-адресом могут получить доступ к вашей карте и данным. Вы можете редактировать / удалить файл данных в своей облачной учетной записи в любое время.",gotoPage:"Перейти на страницу Kepler.gl {currentProvider}"},statusPanel:{mapUploading:"Загрузка карты",error:"Ошибка"},saveMap:{title:"Облачное хранилище",subtitle:"Авторизуйтесь, чтобы сохранить карту в вашем личном облачном хранилище"},exportMap:{formatTitle:"Формат карты",formatSubtitle:"Выберите формат для экспорта карты",html:{selection:"Экспорт карты в интерактивный файл HTML.",tokenTitle:"Токен доступа к Mapbox",tokenSubtitle:"Используйте свой токен доступа Mapbox в html(необязательно)",tokenPlaceholder:"Вставьте токен доступа Mapbox",tokenMisuseWarning:"* If you do not provide your own token, the map may fail to display at any time when we replace ours to avoid misuse. ",tokenDisclaimer:"Если вы не предоставите свой собственный токен, карта может не отображаться в любое время, когда мы заменяем наш, чтобы избежать неправильного использования.",tokenUpdate:"Как обновить существующий токен карты.",modeTitle:"Режим карты",modeSubtitle1:"Выберите режим приложения. Подробнее",modeSubtitle2:"Информация",modeDescription:"Разрешить пользователям {mode} карту",read:"чтение",edit:"редактирование"},json:{configTitle:"Конфигурация карты",configDisclaimer:"Конфигурация карты будет включена в файл Json. Если вы используете kepler.gl в своем собственном приложении. Вы можете скопировать этот конфиг и передать его ",selection:"Экспорт текущих данных карты и конфигурации в один файл Json. Позже вы сможете открыть ту же карту, загрузив этот файл на kepler.gl.",disclaimer:"* Конфигурация карты связана с загруженными наборами данных. DataId используется для привязки слоев, фильтров и всплывающих подсказок к определенному набору данных. При передаче этой конфигурации addDataToMap, убедитесь, что идентификатор набора данных совпадает с dataId / s в этой конфигурации."}},loadingDialog:{loading:"Загрузка..."},loadData:{upload:"Загрузить файлы",storage:"Загрузить из хранилища"},tripInfo:{title:"Как включить анимацию поездки",description1:"Чтобы анимировать путь, данные geoJSON должны содержать LineString в своей геометрии объекта, а координаты в LineString должны иметь 4 элемента в форматах",code:" [longitude, latitude, altitude, timestamp] ",description2:"с последним элементом, являющимся отметкой времени. Допустимые форматы меток времени включают unix в секундах, например 1564184363, или в миллисекундах, например 1564184363000",example:",Пример:"},iconInfo:{title:"Как рисовать значки",description1:"В вашем csv создайте столбец, поместите в него имя значка, который вы хотите нарисовать. Вы можете оставить ячейку пустой, если не хотите, чтобы значок отображался для некоторых точек. Когда столбец назван",code:"значек",description2:" kepler.gl автоматически создаст для вас слой значков.",example:"Пример:",icons:"Значки"},storageMapViewer:{lastModified:"Последнее изменение {lastUpdated} назад",back:"Назад"},overwriteMap:{title:"Сохранение карты...",alreadyExists:"уже существует в вашем {mapSaved}. Хотите его перезаписать?"},loadStorageMap:{back:"Назад",goToPage:"Перейти на страницу Kepler.gl {displayName}",storageMaps:"Хранилище / Карты",noSavedMaps:"Нет сохраненных карт"}},header:{visibleLayers:"Видимые слои",layerLegend:"Легенда слоя"},interactions:{tooltip:"Подсказка",brush:"Кисть",coordinate:"Координаты",geocoder:"Геокодер"},layerBlending:{title:"Смешивание слоев",additive:"добавление",normal:"нормальное",subtractive:"вычитание"},columns:{title:"Столбцы",lat:"lat",lng:"lon",altitude:"высота",icon:"значек",geojson:"geojson",token:"token",arc:{lat0:"lat источника",lng0:"lng источника",lat1:"lat цели",lng1:"lng цели"},line:{alt0:"высота источника",alt1:"высота цели"},grid:{worldUnitSize:"Размер сетки (km)"},hexagon:{worldUnitSize:"Hexagon радиус (km)"},hex_id:"hex id"},color:{customPalette:"Ваша палитра",steps:"шагов",type:"тип",reversed:"перевернуть"},scale:{colorScale:"Цветовая шкала",sizeScale:"Масштаб размера",strokeScale:"Масштаб штриха",scale:"Масштаб"},fileUploader:{message:"Перетащите сюда ваши файлы",chromeMessage:"*Пользователь Chrome: ограничьте размер файла до 250 МБ, если нужно загрузить файл большего размера, попробуйте Safari",disclaimer:"*kepler.gl - это клиентское приложение без серверной части. Данные живут только на вашем компьютере. Никакая информация или данные карты не отправляются ни на один сервер.",configUploadMessage:"Загрузите {fileFormatNames} или сохраненную карту **Json**. Подробнее [**supported file formats**]",browseFiles:"Просматреть файлы",uploading:"Загрузка",fileNotSupported:"File {errorFiles} is not supported.",or:"or"},geocoder:{title:"Введите адрес или координаты, например 37.79, -122.40"},fieldSelector:{clearAll:"Очистить все",formatting:"Форматирование"},compare:{modeLabel:"Режим сравнения",typeLabel:"Тип сравнения",types:{absolute:"Абсолютный",relative:"Относительный"}},mapPopover:{primary:"Первичный"},density:"density","Bug Report":"Отчет об ошибках","User Guide":"Инструкции",Save:"Сохранить",Share:"Поделиться"};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var L=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).reduce(function(n,a){var o=t[a],i=r?"".concat(r,".").concat(a):a;return"string"==typeof o?n[i]=o:Object.assign(n,e(o,i)),n},{})},C=L(c),_={};_.en=C,_.fi=P(P({},C),L(d)),_.pt=P(P({},C),L(p)),_.es=P(P({},C),L(y)),_.ca=P(P({},C),L(v)),_.cn=P(P({},C),L(b)),_.ja=P(P({},C),L(E)),_.ru=P(P({},C),L(S));var x=r(36864),D=r(67294),R=r(95837),I=D.createElement,k=function(e){return I(R.Z,(0,x.Z)({defaultMessage:e.defaultMessage||e.id},e))}},57853:function(e,t,r){"use strict";r.d(t,{$I:function(){return O},Dh:function(){return L},F4:function(){return D},Mq:function(){return P},O6:function(){return A},UE:function(){return x},cu:function(){return S},j2:function(){return E},oy:function(){return v},sn:function(){return C},sw:function(){return R},tk:function(){return _},xd:function(){return b}});var n,a,o=r(90116),i=r(59499),l=r(75324),u=r(9021),c=r(30676),s=r(92735),d=r.n(s),f=r(75485),p=r(24836),g=r(46053);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,i.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=/^(null|NULL|Null|NaN|\/N||)$/;function m(e){try{return JSON.parse(e)}catch(t){return null}}var b=(n={},(0,i.Z)(n,f.ALL_FIELD_TYPES.boolean,{valid:function(e){return"boolean"==typeof e},parse:function(e){return"true"===e||"True"===e||"TRUE"===e||"1"===e}}),(0,i.Z)(n,f.ALL_FIELD_TYPES.integer,{valid:function(e){return parseInt(e,10)===e},parse:function(e){return parseInt(e,10)}}),(0,i.Z)(n,f.ALL_FIELD_TYPES.timestamp,{valid:function(e,t){return["x","X"].includes(t.format)?"number"==typeof e:"string"==typeof e},parse:function(e,t){return["x","X"].includes(t.format)?Number(e):e}}),(0,i.Z)(n,f.ALL_FIELD_TYPES.real,{valid:function(e){return parseFloat(e)===e},parse:parseFloat}),(0,i.Z)(n,f.ALL_FIELD_TYPES.object,{valid:p.isPlainObject,parse:m}),(0,i.Z)(n,f.ALL_FIELD_TYPES.array,{valid:Array.isArray,parse:m}),n);function O(e,t){if("string"==typeof e){var r,n,a=(0,u.Bj)(e);if(!Array.isArray(a)||a.length<2)throw Error("process Csv Data Failed: CSV is empty");n=a[0],r=a.slice(1)}else Array.isArray(e)&&e.length&&(r=e,Array.isArray(n=t)||(n=e[0],r=e.slice(1)));if(!r||!n)throw Error("invalid input passed to processCsvData");T(r);var o=(0,p.getSampleForTypeAnalyze)({fields:n,rows:r}),i=(0,p.getFieldsFromData)(o,n),l=E(r,i);return{fields:i,rows:l}}function E(e,t){var r=t.findIndex(function(e){return"_geojson"===e.name});return t.forEach(S.bind(null,e,r)),e}function T(e){for(var t=RegExp(v,"g"),r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)"string"==typeof e[r][n]&&e[r][n].match(t)&&(e[r][n]=null)}function S(e,t,r,n){var a=b[r.type];if(a){var o=e.find(function(e){return(0,p.notNullorUndefined)(e[n])});if(!o||a.valid(o[n],r))return;e.forEach(function(e){null!==e[n]&&(e[n]=a.parse(e[n],r),t>-1&&(0,p.isPlainObject)(e[t])&&(0,p.hasOwnProperty)(e[t],"properties")&&(e[t].properties[r.name]=e[n]))})}}function A(e){if(!Array.isArray(e))return null;if(!e.length)return{fields:[],rows:[]};var t=Object.keys(e[0]),r=e.map(function(e){return t.map(function(t){return e[t]})});return T(r),O(r,t)}function P(e){var t=d()(e);if(!t||!Array.isArray(t.features))throw Error("Read File Failed: File is not a valid GeoJSON. Read more about [supported file format](".concat(f.GUIDES_FILE_FORMAT_DOC,")"));for(var r=[],n=0;n<t.features.length;n++){var a=t.features[n];a.geometry&&r.push(h({_geojson:a},a.properties||{}))}var o=r.reduce(function(e,t){return Object.keys(t).forEach(function(t){e.includes(t)||e.push(t)}),e},[]);return r.forEach(function(e){o.forEach(function(t){t in e||(e[t]=null,e._geojson.properties&&(e._geojson.properties[t]=null))})}),A(r)}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.Bv;return e?t.load(e.datasets,e.config):null}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.Bv;if(!e)return null;var r=t.parseSavedData((0,p.toArray)(e));return r?Array.isArray(e)?r:r[0]:null}function _(e){return x(e.data.batches)}function x(e){if(0===e.length)return null;var t=new l.iA(e),r=[];t.schema.fields.forEach(function(e,t){var n,a=null===(n=e.metadata.get("ARROW:extension:name"))||void 0===n?void 0:n.startsWith("geoarrow");r.push({name:e.name,id:e.name,displayName:e.name,format:"",fieldIdx:t,type:a?f.ALL_FIELD_TYPES.geoarrow:(0,p.arrowDataTypeToFieldType)(e.type),analyzerType:a?c.DATA_TYPES.GEOMETRY:(0,p.arrowDataTypeToAnalyzerDataType)(e.type),valueAccessor:function(e){return function(r){return e.valueAt(r.index,t)}},metadata:e.metadata})});var n=(0,o.Z)(Array(t.numCols).keys()).map(function(e){return t.getChildAt(e)});return{fields:r,rows:[],cols:n,metadata:t.schema.metadata}}var D=(a={},(0,i.Z)(a,f.DATASET_FORMATS.row,A),(0,i.Z)(a,f.DATASET_FORMATS.geojson,P),(0,i.Z)(a,f.DATASET_FORMATS.csv,O),(0,i.Z)(a,f.DATASET_FORMATS.arrow,_),(0,i.Z)(a,f.DATASET_FORMATS.keplergl,C),a),R={processGeojson:P,processCsvData:O,processArrowTable:_,processArrowBatches:x,processRowObject:A,processKeplerglJSON:L,processKeplerglDataset:C,analyzerTypeToFieldType:p.analyzerTypeToFieldType,getFieldsFromData:p.getFieldsFromData,parseCsvRowsByFieldType:S}},23723:function(e,t,r){"use strict";r.d(t,{At:function(){return w},Cn:function(){return U},GA:function(){return C},KG:function(){return R},RS:function(){return Z},S1:function(){return F},T8:function(){return D},aG:function(){return x},pM:function(){return k},pq:function(){return _},q0:function(){return I},rY:function(){return V}});var n=r(90116),a=r(50029),o=r(59499),i=r(16496),l=r(82118),u=r(87794),c=r.n(u),s=r(75324),d=r(25389),f=r(34830),p=r(46408),g=r(67023),y=r(97283),h=r(57853),v=r(24836),m=r(75485);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(e){var t,r,n,a=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new T(t.call(e));r="@@asyncIterator",n="@@iterator"}throw TypeError("Object is not async iterable")}function T(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(T=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new T(e)}var S={METADATA:"metadata",PARTIAL_RESULT:"partial-result",FINAL_RESULT:"final-result"},A={shape:"object-row-table",dynamicTyping:!1},P={shape:"arrow-table",batchDebounceMs:10},L={shape:"object-row-table",jsonpaths:["$","$.features","$.datasets"]};function C(e){return Boolean(e instanceof s.iA)}function _(e){return Array.isArray(e)&&Boolean(e[0].data&&e[0].schema)}function x(e){return(0,v.isPlainObject)(e)&&(D(e)||R(e))}function D(e){return(0,v.isPlainObject)(e)&&"Feature"===e.type&&Boolean(e.geometry)}function R(e){return(0,v.isPlainObject)(e)&&"FeatureCollection"===e.type&&Boolean(e.features)}function I(e){return Array.isArray(e)&&(0,v.isPlainObject)(e[0])}function k(e){return Boolean((0,v.isPlainObject)(e)&&e.datasets&&e.config&&e.info&&(0,v.isPlainObject)(e.info)&&"kepler.gl"===e.info.app)}function w(e,t){return M.apply(this,arguments)}function M(){return(M=(0,l.Z)(c().mark(function e(t,r){var n,a,o,l,u,s,d,f,p,g;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=!1,o=!1,e.prev=3,u=E(t);case 5:return e.next=7,(0,i.Z)(u.next());case 7:if(!(a=!(s=e.sent).done)){e.next=18;break}return n+=f=(d=s.value).data&&(d.data.length||d.length)||0,g=O({rowCount:n,rowCountInBatch:f},Number.isFinite(p=Number.isFinite(d.bytesUsed)?d.bytesUsed/r.size:null)?{percent:p}:{}),e.next=15,O(O({},d),{},{progress:g});case 15:a=!1,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),o=!0,l=e.t0;case 24:if(e.prev=24,e.prev=25,!(a&&null!=u.return)){e.next=29;break}return e.next=29,(0,i.Z)(u.return());case 29:if(e.prev=29,!o){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}},e,null,[[3,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function F(e,t){return j.apply(this,arguments)}function j(){return(j=(0,l.Z)(c().mark(function e(t,r){var n,a,o,l,u,s,d,p,g,y,h;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=null,a=[],o=!1,l=!1,e.prev=4,s=E(t);case 6:return e.next=8,(0,i.Z)(s.next());case 8:if(!(o=!(d=e.sent).done)){e.next=16;break}if((p=d.value).batchType===S.FINAL_RESULT)p.container&&(n=O({},p.container)),p.jsonpath&&p.jsonpath.length>1?new f.Z(p.jsonpath).setFieldAtPath(n,a):p.jsonpath&&1===p.jsonpath.length&&(n=a);else for(h=0,y=C(p.data)?p.data.batches:p.data;h<(null==y?void 0:y.length);h++)a.push(y[h]);return e.next=13,O(O(O({},p),p.schema?{headers:Object.keys(p.schema)}:{}),{},{fileName:r,data:n||a});case 13:o=!1,e.next=6;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),l=!0,u=e.t0;case 22:if(e.prev=22,e.prev=23,!(o&&null!=s.return)){e.next=27;break}return e.next=27,(0,i.Z)(s.return());case 27:if(e.prev=27,!l){e.next=30;break}throw u;case 30:return e.finish(27);case 31:return e.finish(22);case 32:case"end":return e.stop()}},e,null,[[4,18,22,32],[23,,27,31]])}))).apply(this,arguments)}function Z(e){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(c().mark(function e(t){var r,a,o,i,l,u,s;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.file,o=void 0===(a=t.loaders)?[]:a,l=void 0===(i=t.loadOptions)?{}:i,o=[p.H,g.w,y.T].concat((0,n.Z)(o)),l=O({csv:A,arrow:P,json:L,metadata:!0},l),e.next=5,(0,d.Y)(r,o,l);case 5:return s=w(e.sent,{size:r.size}),e.abrupt("return",F(s,r.name));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e){var t=e.content,r=e.fileCache;return new Promise(function(e,a){var o,i,l=t.fileName,u=t.data,c=(0,v.generateHashIdFromString)(l);if(_(u)?(o=m.DATASET_FORMATS.arrow,i=h.UE):k(u)?(o=m.DATASET_FORMATS.keplergl,i=h.Dh):I(u)?(o=m.DATASET_FORMATS.row,i=h.O6):x(u)&&(o=m.DATASET_FORMATS.geojson,i=h.Mq),o&&i){var s=i(u);e([].concat((0,n.Z)(r),[{data:s,info:{id:c,label:t.fileName,format:o}}]))}a("Unknown File Format")})}function V(e){var t=e.reduce(function(e,t){var r=t.data,n=t.info;if((null==n?void 0:n.format)===m.DATASET_FORMATS.keplergl)e.keplerMaps.push(O(O({},r),{},{options:{centerMap:!(r.config&&r.config.mapState)}}));else if(m.DATASET_FORMATS[null==n?void 0:n.format]){var a={data:r,info:O({id:(null==n?void 0:n.id)||(0,v.generateHashId)(4)},n||{})};e.datasets.push(a)}return e},{datasets:[],keplerMaps:[]});return t.keplerMaps.concat({datasets:t.datasets})}},45394:function(e,t,r){"use strict";r.r(t),r.d(t,{CSV_NULLS:function(){return n.oy},DATASET_HANDLERS:function(){return n.F4},PARSE_FIELD_VALUE_FROM_STRING:function(){return n.xd},Processors:function(){return n.sw},filesToDataPayload:function(){return a.rY},isArrowData:function(){return a.pq},isArrowTable:function(){return a.GA},isFeature:function(){return a.T8},isFeatureCollection:function(){return a.KG},isGeoJson:function(){return a.aG},isKeplerGlMap:function(){return a.pM},isRowObject:function(){return a.q0},makeProgressIterator:function(){return a.At},parseCsvRowsByFieldType:function(){return n.cu},parseRowsByFields:function(){return n.j2},processArrowBatches:function(){return n.UE},processArrowTable:function(){return n.tk},processCsvData:function(){return n.$I},processFileData:function(){return a.Cn},processGeojson:function(){return n.Mq},processKeplerglDataset:function(){return n.sn},processKeplerglJSON:function(){return n.Dh},processRowObject:function(){return n.O6},readBatch:function(){return a.S1},readFileInBatches:function(){return a.RS}});var n=r(57853),a=r(23723),o=r(49710),i={};for(var l in o)0>["default","CSV_NULLS","DATASET_HANDLERS","PARSE_FIELD_VALUE_FROM_STRING","Processors","parseCsvRowsByFieldType","parseRowsByFields","processArrowBatches","processArrowTable","processCsvData","processGeojson","processKeplerglDataset","processKeplerglJSON","processRowObject","filesToDataPayload","isArrowData","isArrowTable","isFeature","isFeatureCollection","isGeoJson","isKeplerGlMap","isRowObject","makeProgressIterator","processFileData","readBatch","readFileInBatches"].indexOf(l)&&(i[l]=(function(e){return o[e]}).bind(0,l));r.d(t,i)},49710:function(){},57562:function(e,t,r){"use strict";r.r(t),r.d(t,{BRUSH_CONFIG:function(){return rP},DEFAULT_ANIMATION_CONFIG:function(){return rj},DEFAULT_EDITOR:function(){return rZ},INITIAL_MAP_STATE:function(){return as},INITIAL_MAP_STYLE:function(){return aR},INITIAL_PROVIDER_STATE:function(){return oW},INITIAL_UI_STATE:function(){return ou},INITIAL_VIS_STATE:function(){return rN},NEGATIVE_SIGNS:function(){return rA},TOOLTIP_MINUS_SIGN:function(){return rS},VIS_STATE_MERGERS:function(){return tW},addDataToMapUpdater:function(){return ii},addDefaultLayers:function(){return nV},addDefaultTooltips:function(){return nG},addEffectUpdater:function(){return nl},addFilterUpdater:function(){return r2},addLayerToLayerOrder:function(){return rT},addLayerUpdater:function(){return nn},applyCPUFilterUpdater:function(){return nN},applyLayerConfigUpdater:function(){return rB},applyMergersUpdater:function(){return nL},apply_:function(){return t5},bindLayerCallbacks:function(){return rm},calculateLayerData:function(){return rs},closeSpecificMapAtIndex:function(){return nD},combineUpdaters:function(){return h},combinedUpdaters:function(){return h},compose_:function(){return t8},computeDeckLayers:function(){return rb},copyTableColumnUpdater:function(){return n0},createLayerFromConfig:function(){return tP},default:function(){return iR},defaultInteractionConfig:function(){return rF},deleteFeatureUpdater:function(){return nX},duplicateLayerUpdater:function(){return ni},enhanceReduxMiddleware:function(){return iV},exportData:function(){return iN},exportFileErrorUpdater:function(){return o0},exportFileSuccessUpdater:function(){return oQ},exportFileToCloudUpdater:function(){return oJ},filterOutById:function(){return rn},findDefaultLayer:function(){return rc},findFieldsToShow:function(){return rL},findMapBounds:function(){return ie},fitBoundsUpdater:function(){return af},formatCsv:function(){return iU},getCustomDeckLayers:function(){return rv},getFileExtensions:function(){return iF},getFileFormatNames:function(){return iM},getInitialInputStyle:function(){return aQ},getLayerHoverProp:function(){return rd},getLayerOrderFromLayers:function(){return rO},getTooltipDisplayDeltaValue:function(){return rC},getTooltipDisplayValue:function(){return r_},if_:function(){return t6},initialFileLoadingProgress:function(){return nB},insertLayerAtRightOrder:function(){return tD},interactionConfigChangeUpdater:function(){return nb},isLayerRenderable:function(){return rp},isLayerVisible:function(){return rg},isSavedLayerConfigV1:function(){return tT},keplerGlReducer:function(){return iR},keplerGlReducerCore:function(){return iE},layerClickUpdater:function(){return nO},layerColorUIChangeUpdater:function(){return r3},layerConfigChangeUpdater:function(){return rY},layerDataIdChangeUpdater:function(){return rW},layerHoverUpdater:function(){return nm},layerSetIsValidUpdater:function(){return rz},layerTextLabelChangeUpdater:function(){return rH},layerTypeChangeUpdater:function(){return rK},layerVisConfigChangeUpdater:function(){return rJ},layerVisualChannelChangeUpdater:function(){return rX},loadCloudMapErrorUpdater:function(){return o3},loadCloudMapSuccessUpdater:function(){return o2},loadCloudMapUpdater:function(){return o1},loadFileStepSuccessUpdater:function(){return nI},loadFilesErrUpdater:function(){return nZ},loadFilesUpdater:function(){return nR},loadMapStylesUpdater:function(){return aU},loadNextFileUpdater:function(){return nk},log:function(){return t3},makeLoadFileTask:function(){return nw},mapClickUpdater:function(){return nE},mapStateLens:function(){return iT},mapStateReducer:function(){return aP},mapStateReducerFactory:function(){return aA},mapStateUpdaters:function(){return f},mapStyleLens:function(){return iS},mapStyleReducer:function(){return a3},mapStyleUpdaters:function(){return p},map_:function(){return rr},mergeAnimationConfig:function(){return tZ},mergeDatasetsByOrder:function(){return tH},mergeEditor:function(){return tz},mergeEffects:function(){return tw},mergeFilters:function(){return tO},mergeInteractionTooltipConfig:function(){return tM},mergeInteractions:function(){return tR},mergeLayerBlending:function(){return tF},mergeLayers:function(){return tx},mergeOverlayBlending:function(){return tj},mergeSplitMaps:function(){return tk},merge_:function(){return t9},mouseMoveUpdater:function(){return nT},nextFileBatchUpdater:function(){return nj},parseLayerConfig:function(){return tS},parseProgress:function(){return nF},payload_:function(){return t4},pickViewportPropsFromMapState:function(){return ab},pick_:function(){return re},pinTableColumnUpdater:function(){return n$},postSaveLoadSuccessUpdater:function(){return o$},prepareLayersForDeck:function(){return ry},prepareLayersToRender:function(){return rh},prepareStateForDatasetReplace:function(){return n6},processFileContentUpdater:function(){return nM},providerReducer:function(){return o9},providerStateReducerFactory:function(){return o8},providerStateUpdaters:function(){return y},receiveMapConfigUpdater:function(){return nv},removeDatasetUpdater:function(){return nd},removeEffectUpdater:function(){return nu},removeElementAtIndex:function(){return ra},removeFilterUpdater:function(){return nr},removeLayerUpdater:function(){return na},renameDatasetUpdater:function(){return nC},renderDeckGlLayer:function(){return rf},reorderEffectUpdater:function(){return nc},reorderLayerOrder:function(){return rE},reorderLayerUpdater:function(){return no},replaceDataInMapUpdater:function(){return ih},replaceDatasetDepsInState:function(){return n8},replaceFilterDatasetIds:function(){return tE},resetMapConfigUpdater:function(){return nh},resetProviderStatusUpdater:function(){return o4},serializeEffect:function(){return tC},serializeLayer:function(){return tL},serializeVisState:function(){return t_},setColumnDisplayFormatUpdater:function(){return n1},setEditorModeUpdater:function(){return nW},setFeaturesUpdater:function(){return nq},setFilterAnimationTimeConfigUpdater:function(){return n3},setFilterAnimationTimeUpdater:function(){return rQ},setFilterAnimationWindowUpdater:function(){return r$},setFilterPlotUpdater:function(){return r1},setFilterUpdater:function(){return r0},setFilterViewUpdater:function(){return ne},setInitialLayerConfig:function(){return rq},setLayerAnimationTimeConfigUpdater:function(){return n5},setLayerAnimationTimeUpdater:function(){return r8},setMapInfoUpdater:function(){return nU},setPolygonFilterLayerUpdater:function(){return nJ},setSelectedFeatureUpdater:function(){return nK},showDatasetTableUpdater:function(){return ng},sortTableColumnUpdater:function(){return nQ},swap_:function(){return rt},toggleEditorVisibilityUpdater:function(){return n2},toggleFilterAnimationUpdater:function(){return r4},toggleFilterFeatureUpdater:function(){return nt},toggleLayerAnimationControlUpdater:function(){return r7},toggleLayerAnimationUpdater:function(){return r5},toggleLayerForMapUpdater:function(){return nA},toggleSplitMapUpdater:function(){return nS},uiStateLens:function(){return iP},uiStateReducer:function(){return oB},uiStateReducerFactory:function(){return oG},uiStateUpdaters:function(){return g},updateAllLayerDomainData:function(){return nz},updateAnimationDomain:function(){return nH},updateDatasetPropsUpdater:function(){return nx},updateEffectUpdater:function(){return ns},updateFileLoadingProgressUpdater:function(){return nY},updateFilterAnimationSpeedUpdater:function(){return r6},updateLayerAnimationSpeedUpdater:function(){return r9},updateLayerBlendingUpdater:function(){return nf},updateOverlayBlendingUpdater:function(){return np},updateStateOnLayerVisibilityChange:function(){return rV},updateStateWithLayerAndData:function(){return rU},updateTableColorUpdater:function(){return ny},updateVisDataUpdater:function(){return nP},validateColumn:function(){return tU},validateLayerWithData:function(){return tY},validateLayersByDatasets:function(){return tB},validateSavedLayerColumns:function(){return tN},validateSavedTextLabel:function(){return tV},validateSavedVisualChannels:function(){return tG},visStateLens:function(){return iA},visStateMergers:function(){return s},visStateReducer:function(){return an},visStateUpdaters:function(){return d},with_:function(){return t7}});var n,a,o,i,l,u,c,s={};r.r(s),r.d(s,{VIS_STATE_MERGERS:function(){return tW},createLayerFromConfig:function(){return tP},insertLayerAtRightOrder:function(){return tD},isSavedLayerConfigV1:function(){return tT},mergeAnimationConfig:function(){return tZ},mergeDatasetsByOrder:function(){return tH},mergeEditor:function(){return tz},mergeEffects:function(){return tw},mergeFilters:function(){return tO},mergeInteractionTooltipConfig:function(){return tM},mergeInteractions:function(){return tR},mergeLayerBlending:function(){return tF},mergeLayers:function(){return tx},mergeOverlayBlending:function(){return tj},mergeSplitMaps:function(){return tk},parseLayerConfig:function(){return tS},replaceFilterDatasetIds:function(){return tE},serializeEffect:function(){return tC},serializeLayer:function(){return tL},serializeVisState:function(){return t_},validateColumn:function(){return tU},validateLayerWithData:function(){return tY},validateLayersByDatasets:function(){return tB},validateSavedLayerColumns:function(){return tN},validateSavedTextLabel:function(){return tV},validateSavedVisualChannels:function(){return tG}});var d={};r.r(d),r.d(d,{DEFAULT_ANIMATION_CONFIG:function(){return rj},DEFAULT_EDITOR:function(){return rZ},INITIAL_VIS_STATE:function(){return rN},addDefaultLayers:function(){return nV},addDefaultTooltips:function(){return nG},addEffectUpdater:function(){return nl},addFilterUpdater:function(){return r2},addLayerUpdater:function(){return nn},applyCPUFilterUpdater:function(){return nN},applyLayerConfigUpdater:function(){return rB},applyMergersUpdater:function(){return nL},closeSpecificMapAtIndex:function(){return nD},copyTableColumnUpdater:function(){return n0},defaultInteractionConfig:function(){return rF},deleteFeatureUpdater:function(){return nX},duplicateLayerUpdater:function(){return ni},initialFileLoadingProgress:function(){return nB},interactionConfigChangeUpdater:function(){return nb},layerClickUpdater:function(){return nO},layerColorUIChangeUpdater:function(){return r3},layerConfigChangeUpdater:function(){return rY},layerDataIdChangeUpdater:function(){return rW},layerHoverUpdater:function(){return nm},layerSetIsValidUpdater:function(){return rz},layerTextLabelChangeUpdater:function(){return rH},layerTypeChangeUpdater:function(){return rK},layerVisConfigChangeUpdater:function(){return rJ},layerVisualChannelChangeUpdater:function(){return rX},loadFileStepSuccessUpdater:function(){return nI},loadFilesErrUpdater:function(){return nZ},loadFilesUpdater:function(){return nR},loadNextFileUpdater:function(){return nk},makeLoadFileTask:function(){return nw},mapClickUpdater:function(){return nE},mouseMoveUpdater:function(){return nT},nextFileBatchUpdater:function(){return nj},parseProgress:function(){return nF},pinTableColumnUpdater:function(){return n$},prepareStateForDatasetReplace:function(){return n6},processFileContentUpdater:function(){return nM},receiveMapConfigUpdater:function(){return nv},removeDatasetUpdater:function(){return nd},removeEffectUpdater:function(){return nu},removeFilterUpdater:function(){return nr},removeLayerUpdater:function(){return na},renameDatasetUpdater:function(){return nC},reorderEffectUpdater:function(){return nc},reorderLayerUpdater:function(){return no},replaceDatasetDepsInState:function(){return n8},resetMapConfigUpdater:function(){return nh},setColumnDisplayFormatUpdater:function(){return n1},setEditorModeUpdater:function(){return nW},setFeaturesUpdater:function(){return nq},setFilterAnimationTimeConfigUpdater:function(){return n3},setFilterAnimationTimeUpdater:function(){return rQ},setFilterAnimationWindowUpdater:function(){return r$},setFilterPlotUpdater:function(){return r1},setFilterUpdater:function(){return r0},setFilterViewUpdater:function(){return ne},setInitialLayerConfig:function(){return rq},setLayerAnimationTimeConfigUpdater:function(){return n5},setLayerAnimationTimeUpdater:function(){return r8},setMapInfoUpdater:function(){return nU},setPolygonFilterLayerUpdater:function(){return nJ},setSelectedFeatureUpdater:function(){return nK},showDatasetTableUpdater:function(){return ng},sortTableColumnUpdater:function(){return nQ},toggleEditorVisibilityUpdater:function(){return n2},toggleFilterAnimationUpdater:function(){return r4},toggleFilterFeatureUpdater:function(){return nt},toggleLayerAnimationControlUpdater:function(){return r7},toggleLayerAnimationUpdater:function(){return r5},toggleLayerForMapUpdater:function(){return nA},toggleSplitMapUpdater:function(){return nS},updateAllLayerDomainData:function(){return nz},updateAnimationDomain:function(){return nH},updateDatasetPropsUpdater:function(){return nx},updateEffectUpdater:function(){return ns},updateFileLoadingProgressUpdater:function(){return nY},updateFilterAnimationSpeedUpdater:function(){return r6},updateLayerAnimationSpeedUpdater:function(){return r9},updateLayerBlendingUpdater:function(){return nf},updateOverlayBlendingUpdater:function(){return np},updateStateOnLayerVisibilityChange:function(){return rV},updateStateWithLayerAndData:function(){return rU},updateTableColorUpdater:function(){return ny},updateVisDataUpdater:function(){return nP}});var f={};r.r(f),r.d(f,{INITIAL_MAP_STATE:function(){return as},fitBoundsUpdater:function(){return af},getMapDimForSplitMap:function(){return am},pickViewportPropsFromMapState:function(){return ab},receiveMapConfigUpdater:function(){return ay},resetMapConfigUpdater:function(){return ag},togglePerspectiveUpdater:function(){return ap},toggleSplitMapUpdater:function(){return ah},toggleSplitMapViewportUpdater:function(){return av},updateMapUpdater:function(){return ad}});var p={};r.r(p),r.d(p,{INITIAL_MAP_STYLE:function(){return aR},addCustomMapStyleUpdater:function(){return aH},editCustomMapStyleUpdater:function(){return aW},getInitialInputStyle:function(){return aQ},getMapStyles:function(){return aI},initMapStyleUpdater:function(){return aF},inputMapStyleUpdater:function(){return az},loadCustomMapStyleUpdater:function(){return aY},loadMapStyleErrUpdater:function(){return aV},loadMapStylesUpdater:function(){return aU},mapConfigChangeUpdater:function(){return aj},mapStyleChangeUpdater:function(){return aN},receiveMapConfigUpdater:function(){return aG},removeCustomMapStyleUpdater:function(){return aK},requestMapStylesUpdater:function(){return aM},resetMapConfigMapStyleUpdater:function(){return aB},set3dBuildingColorUpdater:function(){return aX},setBackgroundColorUpdater:function(){return aJ}});var g={};r.r(g),r.d(g,{DEFAULT_ACTIVE_SIDE_PANEL:function(){return a6},DEFAULT_EXPORT_DATA:function(){return on},DEFAULT_EXPORT_HTML:function(){return oo},DEFAULT_EXPORT_IMAGE:function(){return ot},DEFAULT_EXPORT_JSON:function(){return oi},DEFAULT_EXPORT_MAP:function(){return ol},DEFAULT_LOAD_FILES:function(){return or},DEFAULT_MAP_CONTROLS:function(){return oe},DEFAULT_MODAL:function(){return a8},DEFAULT_NOTIFICATIONS:function(){return oa},INITIAL_UI_STATE:function(){return ou},addNotificationUpdater:function(){return oD},cleanupExportImageUpdater:function(){return oE},hideExportDropdownUpdater:function(){return op},initUiStateUpdater:function(){return oc},loadFilesErrUpdater:function(){return ow},loadFilesSuccessUpdater:function(){return ok},loadFilesUpdater:function(){return oI},openDeleteModalUpdater:function(){return ov},removeNotificationUpdater:function(){return oR},setExportDataTypeUpdater:function(){return oA},setExportDataUpdater:function(){return oL},setExportFilteredUpdater:function(){return oP},setExportImageDataUriUpdater:function(){return ob},setExportImageErrorUpdater:function(){return oO},setExportImageSettingUpdater:function(){return om},setExportMapFormatUpdater:function(){return o_},setExportMapHTMLModeUpdater:function(){return ox},setExportSelectedDatasetUpdater:function(){return oS},setLocaleUpdater:function(){return oj},setMapControlVisibilityUpdater:function(){return oh},setUserMapboxAccessTokenUpdater:function(){return oC},showDatasetTableUpdater:function(){return oF},showExportDropdownUpdater:function(){return of},startExportingImageUpdater:function(){return oT},toggleMapControlUpdater:function(){return oy},toggleModalUpdater:function(){return od},togglePanelListViewUpdater:function(){return oZ},toggleSidePanelCloseButtonUpdater:function(){return og},toggleSidePanelUpdater:function(){return os},toggleSplitMapUpdater:function(){return oM}});var y={};r.r(y),r.d(y,{INITIAL_PROVIDER_STATE:function(){return oW},exportFileErrorUpdater:function(){return o0},exportFileSuccessUpdater:function(){return oQ},exportFileToCloudUpdater:function(){return oJ},loadCloudMapErrorUpdater:function(){return o3},loadCloudMapSuccessUpdater:function(){return o2},loadCloudMapUpdater:function(){return o1},postSaveLoadSuccessUpdater:function(){return o$},resetProviderStatusUpdater:function(){return o4}});var h={};r.r(h),r.d(h,{addDataToMapComposed:function(){return iu},addDataToMapUpdater:function(){return ii},combinedLayerTypeChangeUpdater:function(){return ip},combinedMapStyleChangeUpdater:function(){return id},defaultAddDataToMapOptions:function(){return io},isValidConfig:function(){return ia},loadFilesSuccessUpdater:function(){return il},replaceDataInMapUpdater:function(){return ih},toggleSplitMapUpdater:function(){return ig}});var v=r(90116),m=r(59499),b=r(12e3),O=r(485),E=r(11514),T=r(83618),S=r(17674),A=r(4730),P=r(90251),L=r(63157),C=r(19549),_=r.n(C),x=r(19487),D=r.n(x),R=r(3706),I=r.n(R),k=r(34953),w=r.n(k),M=r(67215),F=r.n(M),j=r(34813),Z=r.n(j),N=r(77181),U=r.n(N),V=r(40367),G=r.n(V),B=r(51668),Y=r.n(B),z=r(28184),H=r(45394),W=_().fromPromise(function(e){var t=e.file,r=e.fileCache,n=e.loaders,a=e.loadOptions;return(0,H.readFileInBatches)({file:t,fileCache:r,loaders:n,loadOptions:a})},"LOAD_FILE_TASK"),q=_().fromPromise(H.processFileData,"PROCESS_FILE_CONTENT"),K=(0,C.taskCreator)(function(e,t,r){var n=e.url,a=e.id;return(0,z.AV)(n,function(e,n){e?r(e):(n||r(Error("Map style response is empty")),t({id:a,style:n}))})},"LOAD_MAP_STYLE_TASK"),X=_().fromPromise(function(e){var t=e.provider,r=e.payload;return t.uploadMap(r)},"EXPORT_FILE_TO_CLOUD_TASK"),J=_().fromPromise(function(e){var t=e.provider,r=e.payload;return t.downloadMap(r)},"LOAD_CLOUD_MAP_TASK"),Q=_().fromCallback(function(e,t){return t()},"ACTION_TASK"),$=_().fromCallback(function(e,t){return window.setTimeout(function(){return t()},e)},"DELAY_TASK"),ee=_().fromPromise(function(e){return e},"UNWRAP"),et=r(24836),er=r(19213),en=r.n(er),ea=r(92777),eo=r(82262),ei=r(75485);function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ec=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,ea.Z)(this,e),(0,m.Z)(this,"id",void 0),(0,m.Z)(this,"type",void 0),(0,m.Z)(this,"isEnabled",void 0),(0,m.Z)(this,"parameters",void 0),(0,m.Z)(this,"isConfigActive",void 0),(0,m.Z)(this,"isJsonEditorActive",void 0),(0,m.Z)(this,"deckEffect",void 0),(0,m.Z)(this,"_uiConfig",void 0),this.id=r.id||"e_".concat((0,et.generateHashId)(6));var n=this.getDefaultProps(r);this.type=n.type,this.isEnabled=n.isEnabled,this.isConfigActive=n.isConfigActive,this.isJsonEditorActive=n.isJsonEditorActive,this._uiConfig=ei.LIGHT_AND_SHADOW_EFFECT.type===this.type?ei.LIGHT_AND_SHADOW_EFFECT.parameters:(null===(t=ei.POSTPROCESSING_EFFECTS[this.type])||void 0===t?void 0:t.parameters)||[],this.parameters=(0,et.validateEffectParameters)(n.parameters,this._uiConfig),this.deckEffect=null,this._initializeEffect()}return(0,eo.Z)(e,[{key:"_initializeEffect",value:function(){}},{key:"getDefaultProps",value:function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:n.id||"e_".concat((0,et.generateHashId)(6)),type:n.type||ei.DEFAULT_POST_PROCESSING_EFFECT_TYPE,isEnabled:null===(e=n.isEnabled)||void 0===e||e,isConfigActive:null===(t=n.isConfigActive)||void 0===t||t,isJsonEditorActive:null!==(r=n.isJsonEditorActive)&&void 0!==r&&r,parameters:eu({},n.parameters)}}},{key:"setProps",value:function(e){var t,r,n,a,o;this.id=null!==(t=e.id)&&void 0!==t?t:this.id,this.type=null!==(r=e.type)&&void 0!==r?r:this.type,this.isEnabled=null!==(n=e.isEnabled)&&void 0!==n?n:this.isEnabled,this.isConfigActive=null!==(a=e.isConfigActive)&&void 0!==a?a:this.isConfigActive,this.isJsonEditorActive=null!==(o=e.isJsonEditorActive)&&void 0!==o?o:this.isJsonEditorActive,this.parameters=eu(eu({},this.parameters),(0,et.validateEffectParameters)(e.parameters,this._uiConfig))}},{key:"isValidToSave",value:function(){return Boolean(this.type&&this.id&&this.deckEffect)}},{key:"getParameterDescriptions",value:function(){return this._uiConfig||[]}}]),e}(),es=r(74450),ed=r(45959),ef=r(63553),ep=r(37247),eg=r(58760),ey=r(13315),eh=r(93774),ev=r.n(eh),em=r(97456),eb=r(72761),eO=r(81163),eE=r(47582);function eT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eA(e,t,r,n){var a=e.indexOf(r);return a<0?(L.console.error("Cannot edit ".concat(t," layer shader")),e):e.slice(0,a)+n+e.slice(a)}var eP=em.Z?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},em.Z):void 0;eP.fs=eA(eP.fs,"custom shadow #1","uniform vec4 shadow_uColor;","uniform bool u_outputUniformShadow;"),eP.fs=eA(eP.fs,"custom shadow #1","vec4 rgbaDepth = texture2D(shadowMap, position.xy);","if(u_outputUniformShadow) return 1.0;"),eP.getUniforms=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=em.Z.getUniforms(e,t);return void 0!==e.outputUniformShadow&&(r.u_outputUniformShadow=e.outputUniformShadow),r};var eL=function(e){(0,ed.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,ep.Z)(a);if(r){var n=(0,ep.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,ef.Z)(this,e)});function a(e){var t;return(0,ea.Z)(this,a),(t=n.call(this,e)).useOutputUniformShadow=!1,t}return(0,eo.Z)(a,[{key:"preRender",value:function(e,t){var r=t.layers,n=t.layerFilter,a=t.viewports,o=t.onViewportActive,i=t.views;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),!this.programManager&&(this.programManager=eO.Z.getDefaultProgramManager(e),eP&&this.programManager.addDefaultModule(eP)),this.dummyShadowMap||(this.dummyShadowMap=new eE.Z(e,{width:1,height:1}));for(var l=0;l<this.shadowPasses.length;l++)this.shadowPasses[l].render({layers:r,layerFilter:n,viewports:a,onViewportActive:o,views:i,moduleParameters:{shadowLightId:l,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices,useOutputUniformShadow:!1}})}}},{key:"getModuleParameters",value:function(e){var t=(0,es.Z)((0,ep.Z)(a.prototype),"getModuleParameters",this).call(this,e);return t.outputUniformShadow=this.outputUniformShadow,t}},{key:"cleanup",value:function(){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return eT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eT(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(this.shadowPasses);try{for(t.s();!(e=t.n()).done;)e.value.delete()}catch(r){t.e(r)}finally{t.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(eP),this.programManager=null)}}]),a}(eb.Z);function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ex=e_(e_({},ei.LIGHT_AND_SHADOW_EFFECT),{},{class:null}),eD=function(e){(0,ed.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,ep.Z)(a);if(r){var n=(0,ep.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,ef.Z)(this,e)});function a(e){return(0,ea.Z)(this,a),n.call(this,e)}return(0,eo.Z)(a,[{key:"_initializeEffect",value:function(){this.parameters=e_(e_({},ei.DEFAULT_LIGHT_AND_SHADOW_PROPS),{},{timezone:ev().tz.guess(!0)},this.parameters);var e=this.parameters,t=new eg.M({color:e.ambientLightColor,intensity:e.ambientLightIntensity}),r=new ey.Z({timestamp:e.timestamp,color:e.sunLightColor,intensity:e.sunLightIntensity,_shadow:!0});this.deckEffect=new eL({ambientLight:t,sunLight:r}),this.deckEffect&&(this.deckEffect.shadowColor=[].concat((0,v.Z)((0,et.normalizeColor)(e.shadowColor)),[e.shadowIntensity]))}},{key:"getDefaultProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,es.Z)((0,ep.Z)(a.prototype),"getDefaultProps",this).call(this,e_({type:ex.type},e))}},{key:"setProps",value:function(e){if((0,es.Z)((0,ep.Z)(a.prototype),"setProps",this).call(this,e),e.parameters){var t=this.parameters;if(this.type===ex.type){var r=this.deckEffect;if(r){r.shadowColor=[].concat((0,v.Z)((0,et.normalizeColor)(t.shadowColor)),[t.shadowIntensity]),r.ambientLight.intensity=t.ambientLightIntensity,r.ambientLight.color=t.ambientLightColor.slice();var n=r.directionalLights[0];n&&(n.intensity=t.sunLightIntensity,n.color=t.sunLightColor.slice(),n.timestamp=t.timestamp)}}}}}]),a}(ec),eR=r(19877),eI=r(90137),ek=r(25943),ew=r(45999),eM=r(22753),eF=r(45508),ej=r(33186),eZ=r(59508),eN=r(85263),eU=r(70664),eV=r(7888),eG=r(10188),eB=r(34129),eY=r(98220),ez=r(33819),eH=r(41205);function eW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eW(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eK=[eq(eq({},ei.POSTPROCESSING_EFFECTS.ink),{},{class:eI.E}),eq(eq({},ei.POSTPROCESSING_EFFECTS.brightnessContrast),{},{class:ek.d}),eq(eq({},ei.POSTPROCESSING_EFFECTS.hueSaturation),{},{class:ew.a}),eq(eq({},ei.POSTPROCESSING_EFFECTS.vibrance),{},{class:eM.I}),eq(eq({},ei.POSTPROCESSING_EFFECTS.sepia),{},{class:eF.H}),eq(eq({},ei.POSTPROCESSING_EFFECTS.dotScreen),{},{class:ej.W}),eq(eq({},ei.POSTPROCESSING_EFFECTS.colorHalftone),{},{class:eZ.t}),eq(eq({},ei.POSTPROCESSING_EFFECTS.noise),{},{class:eN.t}),eq(eq({},ei.POSTPROCESSING_EFFECTS.triangleBlur),{},{class:eU.e}),eq(eq({},ei.POSTPROCESSING_EFFECTS.zoomBlur),{},{class:eV.T}),eq(eq({},ei.POSTPROCESSING_EFFECTS.tiltShift),{},{class:eG.P}),eq(eq({},ei.POSTPROCESSING_EFFECTS.edgeWork),{},{class:eB.c}),eq(eq({},ei.POSTPROCESSING_EFFECTS.vignette),{},{class:eY.x}),eq(eq({},ei.POSTPROCESSING_EFFECTS.magnify),{},{class:ez.L}),eq(eq({},ei.POSTPROCESSING_EFFECTS.hexagonalPixelate),{},{class:eH.T})],eX=function(e,t,r){var n,a,o,i=t.find(function(t){return t.name===e}),l=r[e];return null!==(n=null!==(a=null!==(o=null==i?void 0:i.defaultValue)&&void 0!==o?o:null==l?void 0:l.value)&&void 0!==a?a:l)&&void 0!==n?n:null==i?void 0:i.min},eJ=function(e){(0,ed.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,ep.Z)(a);if(r){var n=(0,ep.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,ef.Z)(this,e)});function a(e){return(0,ea.Z)(this,a),n.call(this,e)}return(0,eo.Z)(a,[{key:"_initializeEffect",value:function(){var e=this,t=eK.find(function(t){return t.type===e.type});if(t){this.deckEffect=new eR.Z(t.class,this.parameters);var r=null===(n=this.deckEffect)||void 0===n?void 0:null===(a=n.module)||void 0===a?void 0:a.uniforms;if(r){var n,a,o,i=Object.keys(r),l={};i.forEach(function(t){l[t]=eX(t,e._uiConfig,r)}),this.parameters=eq(eq({},l),this.parameters),null===(o=this.deckEffect)||void 0===o||o.setProps(this.parameters)}}}},{key:"getDefaultProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,es.Z)((0,ep.Z)(a.prototype),"getDefaultProps",this).call(this,eq({type:ei.DEFAULT_POST_PROCESSING_EFFECT_TYPE},e))}},{key:"setProps",value:function(e){if((0,es.Z)((0,ep.Z)(a.prototype),"setProps",this).call(this,e),e.parameters){var t;null===(t=this.deckEffect)||void 0===t||t.setProps(this.parameters)}}}]),a}(ec);function eQ(e){return(null==e?void 0:e.type)===ei.LIGHT_AND_SHADOW_EFFECT.type?new eD(e):new eJ(e)}var e$=r(46053),e0=r(83594),e1=r.n(e0),e2=r(99131),e3=r(49642),e4=r(19648),e5=r.n(e4);function e7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e7(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e8(e,t){if(!e.gpu)return e;var r=e.gpuChannel||[];return(e.dataId.forEach(function(n,a){var o=function(t){return function(r){var a=(0,et.toArray)(r.dataId).indexOf(n);return r.id!==e.id&&a>-1&&r.gpu&&(0,et.toArray)(r.gpuChannel)[a]===t}};if(!Number.isFinite(r[a])||t.find(o(r[a])))for(var i=0;i<ei.MAX_GPU_FILTERS;){if(!t.find(o(i))){r[a]=i;return}i++}}),r.length&&r.every(Number.isFinite))?e6(e6({},e),{},{gpuChannel:r}):e6(e6({},e),{},{gpu:!1})}var e9=function(e){return e.index},te=function(e,t,r){return e.valueAt(t.index,r)};function tt(e,t,r){for(var n,a,o,i,l=Array(ei.MAX_GPU_FILTERS).fill(0).map(function(e){return[0,0]}),u={},c=[],s=function(r){var n,a,o=e.find(function(e){return e.gpu&&e.dataId.includes(t)&&e.gpuChannel&&e.gpuChannel[e.dataId.indexOf(t)]===r});l[r][0]=o?o.value[0]-(null===(n=o.domain)||void 0===n?void 0:n[0]):0,l[r][1]=o?o.value[1]-(null===(a=o.domain)||void 0===a?void 0:a[0]):0,u["gpuFilter_".concat(r)]=o?o.name[o.dataId.indexOf(t)]:null,c.push(o)},d=0;d<ei.MAX_GPU_FILTERS;d++)s(d);return{filterRange:l,filterValueUpdateTriggers:u,filterValueAccessor:function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e9,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te;return function(o){return c.map(function(i){if(!i)return 0;var l,u=tr(t,i),c=r[u],s=i.type===ei.FILTER_TYPES.timeRange?c.filterProps&&Array.isArray(c.filterProps.mappedValue)?c.filterProps.mappedValue[n(o)]:e5().utc(a(e,o,u)).valueOf():a(e,o,u);return(0,et.notNullorUndefined)(s)?s-(null===(l=i.domain)||void 0===l?void 0:l[0]):Number.MIN_SAFE_INTEGER})}}}}}function tr(e,t){var r=(0,et.toArray)(t.dataId).indexOf(e);if(r<0)return -1;var n=t.fieldIdx[r];return(0,et.notNullorUndefined)(n)?n:-1}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ti="name";function tl(e,t,r,n,a){return e?(0,et.timeToUnixMilli)(n.valueAt(a.index,t),r):n.valueAt(a.index,t)}var tu=function(){function e(t){var r=t.info,n=t.data,a=t.color,o=t.metadata,i=t.supportedFilterTypes,l=t.disableDataOperation;(0,ea.Z)(this,e),(0,m.Z)(this,"id",void 0),(0,m.Z)(this,"type",void 0),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"color",void 0),(0,m.Z)(this,"fields",void 0),(0,m.Z)(this,"dataContainer",void 0),(0,m.Z)(this,"allIndexes",void 0),(0,m.Z)(this,"filteredIndex",void 0),(0,m.Z)(this,"filteredIdxCPU",void 0),(0,m.Z)(this,"filteredIndexForDomain",void 0),(0,m.Z)(this,"fieldPairs",void 0),(0,m.Z)(this,"gpuFilter",void 0),(0,m.Z)(this,"filterRecord",void 0),(0,m.Z)(this,"filterRecordCPU",void 0),(0,m.Z)(this,"changedFilters",void 0),(0,m.Z)(this,"sortColumn",void 0),(0,m.Z)(this,"sortOrder",void 0),(0,m.Z)(this,"pinnedColumns",void 0),(0,m.Z)(this,"supportedFilterTypes",void 0),(0,m.Z)(this,"disableDataOperation",void 0),(0,m.Z)(this,"metadata",void 0);var u,c,s=n.cols?n.cols:n.rows,d=n.cols?et.DataForm.COLS_ARRAY:et.DataForm.ROWS_ARRAY,f=(0,et.createDataContainer)(s,{fields:n.fields,inputDataFormat:d}),p=to({id:(0,et.generateHashId)(4),label:"new dataset",type:""},r),g=p.id,y=n.fields.map(function(e,t){var r,n,a;return to(to({},e),{},{fieldIdx:t,id:e.name,displayName:e.displayName||e.name,valueAccessor:(r=e,n=t,a=f,tl.bind(null,r.type===ei.ALL_FIELD_TYPES.timestamp,n,r.format||"",a))})}),h=f.getPlainIndex(),v={id:p.id,format:p.format||"",label:p.label||""};this.id=p.id,this.type=p.type,this.label=p.label,this.color=a,this.metadata=to(to({},v),o),this.dataContainer=f,this.allIndexes=h,this.filteredIndex=h,this.filteredIndexForDomain=h,this.fieldPairs=(u=y,c=u.map(function(e){return e.name.toLowerCase()}),c.reduce(function(e,t,r){var n,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return tn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tn(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(ei.TRIP_POINT_FIELDS);try{for(a.s();!(n=a.n()).done;){var o=n.value,i=RegExp("(^|".concat(tc,")").concat(o[0],"(").concat(tc,"|$)"));if(i.test(t)){var l=ts(i,o,c,t),s=l.partnerIdx,d=l.altIdx;if(s>-1){var f=t.replace(i,"").trim();e.push({defaultName:f||"point",pair:to({lat:{fieldIdx:r,value:u[r].name},lng:{fieldIdx:s,value:u[s].name}},d>-1?{alt:{fieldIdx:d,value:u[d].name}}:{}),suffix:o});break}}}}catch(p){a.e(p)}finally{a.f()}return e},[])),this.fields=y,this.gpuFilter=tt([],g,y),this.supportedFilterTypes=void 0===i?null:i,this.disableDataOperation=void 0!==l&&l}return(0,eo.Z)(e,[{key:"update",value:function(e){var t,r,n=e.cols?e.cols:e.rows;null===(t=(r=this.dataContainer).update)||void 0===t||t.call(r,n),this.allIndexes=this.dataContainer.getPlainIndex(),this.filteredIndex=this.allIndexes,this.filteredIndexForDomain=this.allIndexes}},{key:"length",get:function(){return this.dataContainer.numRows()}},{key:"getColumnField",value:function(e){var t=this.fields.find(function(t){return t[ti]===e});return this._assetField(e,t),t}},{key:"getColumnFieldIdx",value:function(e){var t=this.fields.findIndex(function(t){return t[ti]===e});return this._assetField(e,Boolean(t>-1)),t}},{key:"getColumnDisplayFormat",value:function(e){var t=this.fields.find(function(t){return t[ti]===e});return this._assetField(e,t),null==t?void 0:t.displayFormat}},{key:"getValue",value:function(e,t){var r=this.getColumnField(e);return r?r.valueAccessor({index:t}):null}},{key:"updateColumnField",value:function(e,t){this.fields=Object.assign((0,v.Z)(this.fields),(0,m.Z)({},e,t))}},{key:"updateTableColor",value:function(e){this.color=e}},{key:"getColumnFilterProps",value:function(e){var t=this.getColumnFieldIdx(e);if(t<0)return null;var r=this.fields[t];if(r.hasOwnProperty("filterProps"))return r.filterProps;var n=this.getColumnFilterDomain(r);if(!n)return null;var a=(0,et.getFilterProps)(r,n),o=to(to({},r),{},{filterProps:a});return this.updateColumnField(t,o),a}},{key:"filterTable",value:function(e,t,r){var n=this,a=this.dataContainer,o=this.id,i=this.filterRecord,l=this.fields,u=(0,et.getFilterRecord)(o,e,r||{});if(this.filterRecord=u,this.gpuFilter=tt(e,o,l),!e.length)return this.filteredIndex=this.allIndexes,this.filteredIndexForDomain=this.allIndexes,this;this.changedFilters=(0,et.diffFilters)(u,i);var c=Boolean(this.changedFilters.dynamicDomain),s=Boolean(this.changedFilters.cpu),d={};if(c||s){var f=c?u.dynamicDomain:null,p=s?u.cpu:null,g=e.reduce(function(e,r){var o=tr(n.id,r),i=-1!==o?l[o]:null;return to(to({},e),{},(0,m.Z)({},r.id,(0,et.getFilterFunction)(i,n.id,r,t,a)))},{});d=(0,et.filterDataByFilterTypes)({dynamicDomainFilters:f,cpuFilters:p,filterFuncs:g},a)}return this.filteredIndex=d.filteredIndex||this.filteredIndex,this.filteredIndexForDomain=d.filteredIndexForDomain||this.filteredIndexForDomain,this}},{key:"filterTableCPU",value:function(e,t){var r={cpuOnly:!0,ignoreDomain:!0};if(!e.length)return this.filteredIdxCPU=this.allIndexes,this.filterRecordCPU=(0,et.getFilterRecord)(this.id,e,r),this;if(!e.find(function(e){return e.gpu}))return this.filteredIdxCPU=this.filteredIndex,this.filterRecordCPU=(0,et.getFilterRecord)(this.id,e,r),this;var n=td(this);n.filterRecord=this.filterRecordCPU,n.filteredIndex=this.filteredIdxCPU||[];var a=n.filterTable(e,t,r);return this.filteredIdxCPU=a.filteredIndex,this.filterRecordCPU=a.filterRecord,this}},{key:"getColumnFilterDomain",value:function(e){var t,r=this.dataContainer,n=e.valueAccessor;switch(e.type){case ei.ALL_FIELD_TYPES.real:case ei.ALL_FIELD_TYPES.integer:return(0,et.getNumericFieldDomain)(r,n);case ei.ALL_FIELD_TYPES.boolean:return{domain:[!0,!1]};case ei.ALL_FIELD_TYPES.string:case ei.ALL_FIELD_TYPES.date:return{domain:(0,et.getOrdinalDomain)(r,n)};case ei.ALL_FIELD_TYPES.timestamp:return(0,et.getTimestampFieldDomain)(r,n);default:return{domain:(0,et.getOrdinalDomain)(r,n)}}}},{key:"getColumnLayerDomain",value:function(e,t){var r=this.dataContainer,n=this.filteredIndexForDomain;if(!ei.SCALE_TYPES[t])return e0.console.error("scale type ".concat(t," not supported")),null;var a=e.valueAccessor,o=function(e){return a({index:e})},i=(0,et.getSortingFunction)(e.type);switch(t){case ei.SCALE_TYPES.ordinal:case ei.SCALE_TYPES.point:return(0,et.getOrdinalDomain)(r,a);case ei.SCALE_TYPES.quantile:return(0,et.getQuantileDomain)(n,o,i);case ei.SCALE_TYPES.log:return(0,et.getLogDomain)(n,o);case ei.SCALE_TYPES.quantize:case ei.SCALE_TYPES.linear:case ei.SCALE_TYPES.sqrt:default:return(0,et.getLinearDomain)(n,o)}}},{key:"_assetField",value:function(e,t){t||e0.console.error("".concat(e," doesnt exist in dataset ").concat(this.id))}}]),e}(),tc="[#_&@\\.\\-\\ ]";function ts(e,t,r,n){var a=r.findIndex(function(r){return r===n.replace(e,function(e){return e.replace(t[0],t[1])})}),o=-1;return a>-1&&ei.ALTITUDE_FIELDS.some(function(a){return(o=r.findIndex(function(r){return r===n.replace(e,function(e){return e.replace(t[0],a)})}))>-1}),{partnerIdx:a,altIdx:o}}function td(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}function tf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(t).reduce(function(e,t){return e[t[0]]=t[1],e},td(e))}var tp=["info","data"];function tg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ty=["#8F2FBF","#005CFF","#C06C84","#F8B195","#547A82","#3EACA8","#A2D4AB"].map(et.hexToRgb),th=["enabled"];function tv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tO(e,t,r){var n=r?null==t?void 0:t.map(function(e){return e.id}):e.preserveFilterOrder;if(!Array.isArray(t)||!t.length)return e;var a,o,i,l=(0,et.validateFiltersUpdateDatasets)(e,t),u=l.validated,c=l.failed,s=l.updatedDatasets,d=tA(e.filters,u,n);a=d,o={},d=(i=d=a.map(function(e,t){if(e.gpu){var r=!0;if((0,et.toArray)(e.dataId).forEach(function(e){var t=o[e];t===ei.MAX_GPU_FILTERS?r=!1:o[e]=t?t+1:1}),!r)return(0,et.set)(["gpu"],!1,e)}return e})).reduce(function(e,t,r){var n=e;return t.gpu&&(t=e8(t,e),n=(0,et.set)([r],t,e)),n},i);var f=I()(en()(u.map(function(e){return e.dataId}))),p=(0,et.applyFiltersToDatasets)(f,s,d,e.layers);return tb(tb({},e),{},{filters:d,datasets:p,preserveFilterOrder:n,filterToBeMerged:[].concat((0,v.Z)(e.filterToBeMerged),(0,v.Z)(c))})}function tE(e,t,r){var n=[];return e.forEach(function(e){if(e.dataId.includes(t)){var a=e.dataId.map(function(e){return e===t?r:e});n.push(tb(tb({},e),{},{dataId:a}))}}),n.length?n:null}function tT(e){return null==e?void 0:e.visualChannels}function tS(e,t){var r,n,a,o={version:e$.we,config:{visState:{layers:[t],layerOrder:[t.id]}}};return null===(r=e.parseSavedConfig(o))||void 0===r?void 0:null===(n=r.visState)||void 0===n?void 0:null===(a=n.layers)||void 0===a?void 0:a[0]}function tA(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0,o=(0,v.Z)(e),i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return tv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tv(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(t);try{for(i.s();!(r=i.n()).done;){var l=r.value,u=n.indexOf(l.id),c=a?0:o.length;if(u>0){for(var s=u+1,d=-1;s-- >0&&d<0;)!function(){var e=n[s-1];d=o.findIndex(function(t){return t.id===e})}();d>-1&&(c=d+1)}o=(0,et.arrayInsert)(o,c,l)}}catch(f){i.e(f)}finally{i.f()}return o}function tP(e,t){var r=tT(t)?tS(e.schema,t):t;if(!r)return null;var n=tB(e.datasets,e.layerClasses,[r],{allowEmptyColumn:!0}),a=n.validated,o=n.failed;if(null!=o&&o.length||!a.length)return null;var i=a[0];return i.updateLayerDomain(e.datasets),i}function tL(e,t){var r,n=t_({layers:[e],layerOrder:[e.id]},t);return null==n?void 0:null===(r=n.layers)||void 0===r?void 0:r[0]}function tC(e,t){var r,n=t_({effects:[e],effectOrder:[e.id]},t);return null==n?void 0:null===(r=n.effects)||void 0===r?void 0:r[0]}function t_(e,t){var r,n=t.getConfigToSave({visState:e});return n?null===(r=t.parseSavedConfig(n))||void 0===r?void 0:r.visState:void 0}function tx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=r?rO(t):e.preserveLayerOrder;if(!Array.isArray(t)||!t.length)return e;var a=[],o=[];t.forEach(function(t){var r;null!=t&&null!==(r=t.config)&&void 0!==r&&r.dataId&&e.isMergingDatasets[t.config.dataId]?a.push(t):o.push(t)});var i=tB(e.datasets,e.layerClasses,o),l=i.validated,u=i.failed;a.push.apply(a,(0,v.Z)(u));var c=tD(e.layers,l,e.layerOrder,n),s=c.newLayerOrder,d=c.newLayers;return tb(tb({},e),{},{layers:d,layerOrder:s,preserveLayerOrder:n,layerToBeMerged:[].concat((0,v.Z)(e.layerToBeMerged),a)})}function tD(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!(null!=t&&t.length))return{newLayers:e,newLayerOrder:r};var a=r.map(function(t){return(0,et.findById)(t)(e)}).filter(function(e){return Boolean(e)}),o=e.concat(t),i=tA(a,t,n,!0);return{newLayerOrder:rO(i),newLayers:o}}function tR(e,t,r){var n={},a={};return t&&Object.keys(t).forEach(function(r){if(e.interactionConfig[r]){var o="tooltip"===r||"brush"===r?e.interactionConfig[r].config:null,i=t[r]||{},l=i.enabled,u=(0,A.Z)(i,th),c=u;if("tooltip"===r){var s=tM(e,u),d=s.mergedTooltip,f=s.unmergedTooltip;c={fieldsToShow:tb(tb({},o.fieldsToShow),d)},Object.keys(f).length&&(a.tooltip={fieldsToShow:f,enabled:Boolean(l)})}n[r]=tb(tb({},e.interactionConfig[r]),{},{enabled:Boolean(l)},o?{config:Z()(tb(tb({},o),c),Object.keys(o))}:{})}}),tb(tb({},e),{},{interactionConfig:tb(tb({},e.interactionConfig),n),interactionToBeMerged:tI(e,a)})}function tI(e,t){var r,n,a,o,i;return null!=t&&null!==(r=t.tooltip)&&void 0!==r&&r.fieldsToShow?{tooltip:tb(tb(tb({},e.interactionToBeMerged.tooltip),"boolean"==typeof(null==t?void 0:null===(n=t.tooltip)||void 0===n?void 0:n.enabled)?{enabled:t.tooltip.enabled}:{}),{},{fieldsToShow:tb(tb({},null===(a=e.interactionToBeMerged)||void 0===a?void 0:null===(o=a.tooltip)||void 0===o?void 0:o.fieldsToShow),null==t?void 0:null===(i=t.tooltip)||void 0===i?void 0:i.fieldsToShow)})}:e.interactionToBeMerged}function tk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];var r=(0,v.Z)(e.splitMaps),n=[];return t.forEach(function(t,a){var o=Object.entries(t.layers);o.length>0?o.forEach(function(o){var i=(0,S.Z)(o,2),l=i[0],u=i[1],c=e.layers.find(function(e){return e.id===l})?r:n;c[a]=c[a]||tb(tb({},t),{},{layers:c===r?(0,et.getInitialMapLayersForSplitMap)(e.layers):[]}),c[a].layers=tb(tb({},c[a].layers),{},(0,m.Z)({},l,u))}):r.push(t)}),tb(tb({},e),{},{splitMaps:r,splitMapsToBeMerged:[].concat((0,v.Z)(e.splitMapsToBeMerged),n)})}function tw(e,t,r){var n=[].concat((0,v.Z)(e.effects),(0,v.Z)((t||[]).map(function(e){return r?eQ(Y().all([e,{isConfigActive:!1}])):e}).filter(function(e){return Boolean(e&&e.isValidToSave())})));return tb(tb({},e),{},{effects:n,effectOrder:n.map(function(e){return e.id})})}function tM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={},n={};if(!t||!t.fieldsToShow||!Object.keys(t.fieldsToShow).length)return{mergedTooltip:n,unmergedTooltip:r};for(var a in t.fieldsToShow)!e.datasets[a]||e.isMergingDatasets[a]?r[a]=t.fieldsToShow[a]:function(){var r=e.datasets[a].fields.map(function(e){return e.name}),o=t.fieldsToShow[a].filter(function(e){return r.includes(e.name)});n[a]=o}();return{mergedTooltip:n,unmergedTooltip:r}}function tF(e,t,r){return t&&ei.LAYER_BLENDINGS[t]?tb(tb({},e),{},{layerBlending:t}):e}function tj(e,t,r){return t&&ei.OVERLAY_BLENDINGS[t]?tb(tb({},e),{},{overlayBlending:t}):e}function tZ(e,t,r){return t&&t.currentTime?tb(tb({},e),{},{animationConfig:tb(tb(tb({},e.animationConfig),t),{},{domain:null})}):e}function tN(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={},o=0,i=Object.keys(r);o<i.length;o++)!function(){var n=i[o];a[n]=tb({},r[n]);var l=t[n];if(l){var u=e.findIndex(function(e){return e.name===l});u>-1&&(a[n].fieldIdx=u,a[n].value=l)}}();var l=Object.keys(a).every(function(t){return tU(a[t],a,e)})?a:null;if(n.throwOnError){var u=Object.keys(r).filter(function(e){return!r[e].optional}).filter(function(e){return!(null!=a&&a[e].value)});if(u.length)throw Error("Layer has missing or invalid columns: ".concat(u.join(", ")));var c=Object.keys(t).filter(function(e){var t;return!(null!=a&&null!==(t=a[e])&&void 0!==t&&t.value)});if(c.length)throw Error("Layer has invalid columns: ".concat(c.join(", ")))}return l}function tU(e,t,r){return!!e.optional||!!e.value||!!e.validator&&e.validator(e,t,r)}function tV(e,t,r){var n=(0,S.Z)(t,1)[0],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(Array.isArray(r)?r:[r]).map(function(t){var r=t.field?e.find(function(e){return Object.keys(t.field).every(function(r){return t.field[r]===e[r]})}):null;if(void 0===r&&a.throwOnError)throw Error("Layer has invalid text label field: ".concat(JSON.stringify(t.field)));return Object.keys(n).reduce(function(e,a){return tb(tb({},e),{},(0,m.Z)({},a,"field"===a?r:t[a]||n[a]))},{})})}function tG(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object.values(t.visualChannels).forEach(function(a){var o=a.field,i=a.scale,l=a.key;if(r.config){r.config[o]&&(c=e.find(function(e){return r.config&&e.name===r.config[o].name}));var u=tb(tb({},c?(0,m.Z)({},o,c):{}),r.config[i]?(0,m.Z)({},i,r.config[i]):{});if(Object.keys(u).length&&t.updateLayerConfig(u),t.validateVisualChannel(l),n.throwOnError){var c,s,d,f,p=null===(s=r.config)||void 0===s?void 0:null===(d=s[o])||void 0===d?void 0:d.name;if(p&&p!==(null===(f=t.config[o])||void 0===f?void 0:f.name))throw Error("Layer has invalid visual channel field: ".concat(o))}}}),t}function tB(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,a=[],o=[];return r.forEach(function(r){var i,l=null;null!=r&&null!==(i=r.config)&&void 0!==i&&i.dataId&&e[r.config.dataId]&&(l=tY(e[r.config.dataId],r,t,n)),l?a.push(l):o.push(r)}),{validated:a,failed:o}}function tY(e,t,r){var n=e.fields,a=e.id,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t.type,l=o.throwOnError;if(!i||!r.hasOwnProperty(i)||!t.config){if(l)throw Error('Layer has invalid type "'.concat(i,'" or config is missing'));return null}var u=new r[i]({id:t.id,dataId:a,label:t.config.label,color:t.config.color,isVisible:t.config.isVisible,hidden:t.config.hidden,highlightColor:t.config.highlightColor}),c=u.getLayerColumns();if(Object.keys(c)){var s=tN(n,t.config.columns,c,o);if(s)u.updateLayerConfig({columns:s});else if(!o.allowEmptyColumn)return null}var d=t.config.textLabel&&u.config.textLabel?tV(n,u.config.textLabel,t.config.textLabel,o):u.config.textLabel,f=u.copyLayerConfig(u.config.visConfig,t.config.visConfig||{},{shallowCopy:["colorRange","strokeColorRange"]});if(u.updateLayerConfig({visConfig:f,textLabel:d}),u=tG(n,u,t,o),l&&!u.isValidToSave())throw Error("Layer is not valid to save: ".concat(u.id));return u}function tz(e,t){var r;return t?tb(tb({},e),{},{editor:tb(tb({},e.editor),{},{features:[].concat((0,v.Z)(e.editor.features),(0,v.Z)(t.features||[])),visible:null!==(r=t.visible)&&void 0!==r?r:e.editor.visible})}):e}function tH(e,t){var r=tb(tb({},e.datasets),t);if(Array.isArray(e.preserveDatasetOrder)){var n=Object.keys(r).filter(function(t){var r;return!(null!==(r=e.preserveDatasetOrder)&&void 0!==r&&r.includes(t))});return[].concat((0,v.Z)(e.preserveDatasetOrder),(0,v.Z)(n)).reduce(function(e,t){return tb(tb({},e),r[t]?(0,m.Z)({},t,r[t]):{})},{})}return r}var tW=[{merge:tx,prop:"layers",toMergeProp:"layerToBeMerged",preserveOrder:"preserveLayerOrder"},{merge:tO,prop:"filters",toMergeProp:"filterToBeMerged",preserveOrder:"preserveFilterOrder",replaceParentDatasetIds:tE},{merge:tw,prop:"effects"},{merge:tR,prop:"interactionConfig",toMergeProp:"interactionToBeMerged",replaceParentDatasetIds:function(e,t,r){var n,a;return null!=e&&null!==(n=e.tooltip)&&void 0!==n&&n.fieldsToShow[t]?tb(tb({},e),{},{tooltip:tb(tb({},e.tooltip),{},{fieldsToShow:(0,m.Z)({},r,null==e?void 0:null===(a=e.tooltip)||void 0===a?void 0:a.fieldsToShow[t])})}):null},saveUnmerged:tI},{merge:tF,prop:"layerBlending"},{merge:tj,prop:"overlayBlending"},{merge:tk,prop:"splitMaps",toMergeProp:"splitMapsToBeMerged"},{merge:tZ,prop:"animationConfig"},{merge:tz,prop:"editor"}];function tq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tq(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tX(e){return(0,et.isObject)(e)&&"function"==typeof e.merge&&("string"==typeof e.prop||Array.isArray(e.prop))}function tJ(e,t){return Array.isArray(t)?Boolean(t.some(function(t){return e.hasOwnProperty(t)})):"string"==typeof t&&e.hasOwnProperty(t)}function tQ(e,t,r){return Array.isArray(t)?t.reduce(function(t,n,a){return r?tK(tK({},t),{},(0,m.Z)({},r[a],e[n])):t},{}):e[t]}var t$=r(55165);function t0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?t0(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var t2=function(e){return e};function t3(e){return function(t){return e1().log(e,t)}}function t4(e){return{payload:e}}function t5(e,t){return function(r){return e(r,t)}}function t7(e){return function(t){return e(t)(t)}}function t6(e,t){return e?t:t2}function t8(e){return function(t){return e.reduce(function(e,t){return t(e)},t)}}function t9(e){return function(t){return t1(t1({},t),e)}}function re(e){return function(t){return function(r){return t1(t1({},r),{},(0,m.Z)({},e,t(r[e])))}}}function rt(e){return function(t){return t.map(function(t){return t.id===e.id?e:t})}}function rr(e){return function(t){return t.map(function(t){return e(t)})}}function rn(e){return function(t){return t.filter(function(t){return t.id!==e})}}function ra(e){return function(t){return[].concat((0,v.Z)(t.slice(0,e)),(0,v.Z)(t.slice(e+1,t.length)))}}var ro=r(25788),ri=r(53235);function rl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ru(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rc(e,t){return e?Object.keys(t).reduce(function(r,n){var a="function"==typeof t[n].findDefaultLayerProps?t[n].findDefaultLayerProps(e,r):{props:[]},o=Array.isArray(a)?a:a.props||[];return(a.foundLayers||r).concat(o.map(function(t){return ru(ru({},t),{},{type:n,dataId:e.id})}))},[]).map(function(r){var n=new t[r.type](r);return"function"==typeof n.setInitialLayerConfig&&e.dataContainer?n.setInitialLayerConfig(e):n}):[]}function rs(e,t,r){var n;try{if(e.isValid||(e._oldDataUpdateTriggers=void 0),!e.type||!e.hasAllColumns()||!e.config.dataId)return{layer:e,layerData:{}};n=e.formatLayerData(t.datasets,r),e.isValid||(e=e.updateLayerConfig({isVisible:!0})),e.isValid=!0,e.errorMessage=null}catch(a){(e=e.updateLayerConfig({isVisible:!1})).isValid=!1,e.errorMessage=a instanceof Error&&a.message?a.message.substring(0,100):"Unknown error",n={}}return{layer:e,layerData:n}}function rd(e){var t=e.interactionConfig,r=e.hoverInfo,n=e.layers,a=e.layersToRender,o=e.datasets;if(t.tooltip.enabled&&r&&r.picked){var i=r.object,l=n[r.layer.props.idx];if((i||r.index>=0)&&l&&l.getHoverData&&a[l.id]){var u=l.config.dataId;if(!u)return null;var c=o[u],s=c.dataContainer,d=c.fields,f=l.getHoverData(i||r.index,s,d);return f?{data:f,fields:d,fieldsToShow:t.tooltip.config.fieldsToShow[u],layer:l}:null}}return null}function rf(e,t){var r=e.datasets,n=e.layer,a=e.layerIndex,o=e.data,i=e.hoverInfo,l=e.clicked,u=e.mapState,c=e.interactionConfig,s=e.animationConfig,d=e.mapLayers,f=(r[n.config.dataId]||{}).gpuFilter,p=!d||d&&d[n.id];return n.renderLayer({data:o,gpuFilter:f,idx:a,interactionConfig:c,layerCallbacks:t,mapState:u,animationConfig:s,objectHovered:l||i,visible:p})}function rp(e,t){return e.id!==ei.GEOCODER_LAYER_ID&&e.shouldRenderLayer(t)}function rg(e,t){return e.config.isVisible&&(!t||t&&t[e.id])}function ry(e,t){return e.reduce(function(e,r,n){return ru(ru({},e),{},(0,m.Z)({},r.id,rp(r,t[n])&&r.overlayType===t$.OVERLAY_TYPE_CONST.deckgl))},{})}function rh(e,t,r){return e.reduce(function(e,n,a){return ru(ru({},e),{},(0,m.Z)({},n.id,rp(n,t[a])&&rg(n,r)))},{})}function rv(e){var t;return[Array.isArray(null==e?void 0:e.layers)?null==e?void 0:e.layers:(0,et.isFunction)(null==e?void 0:e.layers)?null==e?void 0:e.layers():[],Array.isArray(null==e?void 0:e.topLayers)?null==e?void 0:e.topLayers:(0,et.isFunction)(null==e?void 0:e.topLayers)?null==e?void 0:e.topLayers():[]]}function rm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.keys(e).reduce(function(r,n){return ru(ru({},r),{},(0,m.Z)({},n,function(r){return e[n](t,r)}))},{})}function rb(e,t,r,n){var a=e.visState,o=e.mapState,i=e.mapStyle,l=a.datasets,u=a.layers,c=a.layerOrder,s=a.layerData,d=a.hoverInfo,f=a.clicked,p=a.interactionConfig,g=a.animationConfig,y=a.splitMaps,h=t||{},m=h.mapIndex,b=h.mapboxApiAccessToken,O=h.mapboxApiUrl,E=h.primaryMap,T=h.layersForDeck,A=h.editorInfo,P=[];if(s&&s.length){var L=(0,et.getMapLayersFromSplitMaps)(y,m||0),C=T||ry(u,s);P=c.slice().reverse().filter(function(e){return C[e]}).reduce(function(e,t){var n=u.findIndex(function(e){return e.id===t}),a=r?rm(r,n):{},i=u[n],c=s[n],y=rf({datasets:l,layer:i,layerIndex:n,data:c,hoverInfo:d,clicked:f,mapState:o,interactionConfig:p,animationConfig:g,mapLayers:L},a);return e.concat(y||[])},[])}if(!E)return P;null!=i&&i.visibleLayerGroups["3d building"]&&E&&b&&O&&P.push(new ri.Di({id:"_keplergl_3d-building",mapboxApiAccessToken:b,mapboxApiUrl:O,threeDBuildingColor:i.threeDBuildingColor,updateTriggers:{getFillColor:i.threeDBuildingColor}}));var _=rv(n),x=(0,S.Z)(_,2),D=x[0],R=x[1],I=[];return A&&I.push((0,t$.getEditorLayer)(ru({},A))),[].concat((0,v.Z)(D),(0,v.Z)(P),(0,v.Z)(R),I)}function rO(e){return e.map(function(e){return e.id})}function rE(e,t,r){var n=e.indexOf(t),a=e.indexOf(r);return(0,ro.arrayMove)(e,n,a)}function rT(e,t){return[t].concat((0,v.Z)(e))}var rS="−",rA=["-","−"],rP={range:[0,50]};function rL(e){var t,r,n,a,o=e.fields,i=e.id,l=e.maxDefaultTooltips,u=ei.DEFAULT_TOOLTIP_FIELDS.reduce(function(e,t){return o.find(function(e){var r=e.name;return t.name===r})&&e.push(t),e},[]);return(0,m.Z)({},i,u.length?u:(t=o,r=l,a=(n=ei.TRIP_POINT_FIELDS,n.reduce(function(e,t){return[].concat((0,v.Z)(e),(0,v.Z)(t))},[])),t.filter(function(e){var t=e.name,r=e.type;return t.replace(/[_,.]+/g," ").trim().split(" ").every(function(e){return!a.includes(e)})&&r!==ei.ALL_FIELD_TYPES.geojson&&r!==ei.ALL_FIELD_TYPES.geoarrow&&"object"!==r}).slice(0,r).map(function(e){return{name:e.name,format:null}})))}function rC(e){var t=e.primaryData,r=e.field,n=e.compareType,a=e.data,o=e.fieldIdx,i=null;if(t&&(r.type===ei.ALL_FIELD_TYPES.integer||r.type===ei.ALL_FIELD_TYPES.real)){var l=t.valueAt(o),u=a.valueAt(o);if((0,et.isNumber)(l)&&(0,et.isNumber)(u)){var c=n===ei.COMPARE_TYPES.RELATIVE?u/l-1:u-l,s=n===ei.COMPARE_TYPES.RELATIVE?ei.TOOLTIP_FORMATS.DECIMAL_PERCENT_FULL_2[ei.TOOLTIP_KEY]:r.displayFormat||ei.TOOLTIP_FORMATS.DECIMAL_DECIMAL_FIXED_3[ei.TOOLTIP_KEY];i=(0,et.getFormatter)(s,r)(c);var d=(i=(0,et.defaultFormatter)(i)).charAt(0);"+"===d||rA.includes(d)||(i="+".concat(i))}else i=rS}return i}function r_(e){var t=e.item,r=e.field,n=e.value;return(0,et.notNullorUndefined)(n)?null!=t&&t.format?(0,et.getFormatter)(null==t?void 0:t.format,r)(n):r.displayFormat?(0,et.getFormatter)(r.displayFormat,r)(n):(0,et.parseFieldValue)(n,r.type):""}var rx=["dataId"],rD=["info"];function rR(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function rI(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rk(e,t)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function rk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,C.disableStackCapturing)();var rF={tooltip:{id:"tooltip",label:"interactions.tooltip",enabled:!0,config:{fieldsToShow:{},compareMode:!1,compareType:ei.COMPARE_TYPES.ABSOLUTE}},geocoder:{id:"geocoder",label:"interactions.geocoder",enabled:!1,position:null},brush:{id:"brush",label:"interactions.brush",enabled:!1,config:{size:.5}},coordinate:{id:"coordinate",label:"interactions.coordinate",enabled:!1,position:null}},rj={domain:null,currentTime:null,speed:1,isAnimating:!1,timeFormat:null,timezone:null,defaultTimeFormat:null,hideControl:!1,duration:null},rZ={mode:ei.EDITOR_MODES.DRAW_POLYGON,features:[],selectedFeature:null,visible:!0},rN={mapInfo:{title:"",description:""},layers:[],layerData:[],layerToBeMerged:[],layerOrder:[],filters:[],filterToBeMerged:[],datasets:{},editingDataset:void 0,effects:[],effectOrder:[],interactionConfig:rF,interactionToBeMerged:{},layerBlending:"normal",overlayBlending:"normal",hoverInfo:void 0,clicked:void 0,mousePos:{},maxDefaultTooltips:ei.MAX_DEFAULT_TOOLTIPS,splitMaps:[],splitMapsToBeMerged:[],isMergingDatasets:{},layerClasses:t$.LayerClasses,animationConfig:rj,editor:rZ,fileLoading:!1,fileLoadingProgress:{},loaders:[],loadOptions:{},mergers:tW,schema:e$.ZP};function rU(e,t){var r=t.layerData,n=t.layer,a=t.idx;return rM(rM({},e),{},{layers:e.layers.map(function(e,t){return t===a?n:e}),layerData:r?e.layerData.map(function(e,t){return t===a?r:e}):e.layerData})}function rV(e,t){var r=e;return e.splitMaps.length&&(r=rM(rM({},e),{},{splitMaps:t.config.isVisible?(0,et.addNewLayersToSplitMap)(e.splitMaps,t):(0,et.removeLayerFromSplitMaps)(e.splitMaps,t)})),t.config.animation.enabled&&(r=nH(e)),r}var rG=["field","scale","domain","aggregation"];function rB(e,t){var r,n=t.oldLayerId,a=t.newLayerConfig,o=t.layerIndex,i=tS(e.schema,a),l=e.layers.find(function(e){return e.id===n});if(!l||!i||null!=o&&e.layers[o]!==l)return e;var u=e.datasets[i.config.dataId];if(!u)return e;var c=tY(u,i,e.layerClasses);if(!c)return e;var s=e;if(c.type&&c.type!==l.type){var d=e.layers.findIndex(function(e){return e.id===n});if(d>=0&&(s=rK(s,(0,b.layerTypeChange)(l,c.type))).layers.length===e.layers.length){var f=s.layers[d].id;s=rB(s,(0,b.applyLayerConfig)(f,rM(rM({},a),{},{id:f})))}return s}var p=null!==(r=tL(l,e.schema))&&void 0!==r?r:{config:{}},g=tL(c,e.schema);if(!g)return e;if(!U()(p,g)){var y,h,v,m,O=(y=p.config,h=g.config,v={},(m=function(e){Object.keys(e).forEach(function(e){v.hasOwnProperty(e)||U()(y[e],h[e])||(v[e]=h[e])})})(y),m(h),v);"visConfig"in O&&(O.visConfig&&(s=rJ(s,(0,b.layerVisConfigChange)(l,O.visConfig))),delete O.visConfig),Object.keys(l.visualChannels).forEach(function(e){var t=l.visualChannels[e],r=rG.map(function(e){return t[e]});if(r.some(function(e){return e in O})){s=rX(s,(0,b.layerVisualChannelConfigChange)(l,Z()(c.config,r),e));var n,a=rI(r);try{for(a.s();!(n=a.n()).done;)delete O[n.value]}catch(o){a.e(o)}finally{a.f()}}}),Object.keys(O).length>0&&(s=rY(s,(0,b.layerConfigChange)(l,Z()(c.config,Object.keys(O)))))}return s}function rY(e,t){var r,n=t.oldLayer,a=e.layers.findIndex(function(e){return e.id===n.id}),o=Object.keys(t.newConfig);if("string"==typeof t.newConfig.dataId&&t.newConfig.dataId!==n.config.dataId){var i=t.newConfig,l=i.dataId,u=(0,A.Z)(i,rx),c=rW(e,{oldLayer:n,newConfig:{dataId:l}}),s=c.layers.find(function(e){return e.id===n.id});return s&&Object.keys(u).length?rY(c,{oldLayer:s,newConfig:u}):c}var d=n.updateLayerConfig(t.newConfig);if(d.shouldCalculateLayerData(o)){var f=e.layerData[a],p=rs(d,e,f);d=p.layer,r=p.layerData}var g=e;return"isVisible"in t.newConfig&&(g=rV(e,d)),rU(g,{layer:d,layerData:r,idx:a})}function rz(e,t){var r=t.oldLayer,n=t.isValid,a=e.layers.findIndex(function(e){return e.id===r.id}),o=e.layers[a];if(o){var i,l=null;if(n){var u=rs(o,e,void 0),c=u.layer,s=u.layerData;i=c,l=s}else(i=o.updateLayerConfig({isVisible:!1})).isValid=!1;return rU(e,{idx:a,layer:i,layerData:l})}return e}function rH(e,t){var r,n,a,o=t.oldLayer,i=t.idx,l=t.prop,u=t.value,c=o.config.textLabel,s=null!==(r=null===(n=o.getDefaultLayerConfig({dataId:""}))||void 0===n?void 0:null===(a=n.textLabel)||void 0===a?void 0:a[0])&&void 0!==r?r:ei.DEFAULT_TEXT_LABEL,d=c.slice();return c[i]||i!==c.length||(d=[].concat((0,v.Z)(c),[s])),d="all"===i&&"fields"===l?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei.DEFAULT_TEXT_LABEL,n=t.slice(),a=t.map(function(e){return e.field&&e.field.name}).filter(function(e){return e}),o=e.filter(function(e){return!a.includes(e.name)}),i=a.filter(function(t){return!e.find(function(e){return e.name===t})});return n=(n=n.filter(function(e){return e.field&&!i.includes(e.field.name)})).length?n:[r],n=[].concat((0,v.Z)(n.filter(function(e){return e.field})),(0,v.Z)(o.map(function(e){return rM(rM({},r),{},{field:e})})))}(u,c,s):function(e,t,r,n){if(!n[e].hasOwnProperty(t))return n;var a=n.slice();return"field"===t&&null===r&&n.length>1?a.splice(e,1):t&&(a=n.map(function(n,a){return a===e?rM(rM({},n),{},(0,m.Z)({},t,r)):n})),a}(i,l,u,d),rY(e,{oldLayer:o,newConfig:{textLabel:d}})}function rW(e,t){var r=t.oldLayer,n=t.newConfig.dataId;if(!r||!e.datasets[n])return e;var a=e.layers.findIndex(function(e){return e.id===r.id}),o=r.updateLayerConfig({dataId:n});if(o.isValidToSave()){var i,l,u,c,s,d=(i=e.datasets[n],l=e.layerClasses,u=o,(s=tL(u,c=e.schema))?tY(i,s,l,{allowEmptyColumn:!0}):null);o=d||new e.layerClasses[r.type]({dataId:n,id:r.id})}(o=o.updateLayerConfig({isVisible:r.config.isVisible,isConfigActive:!0})).updateLayerDomain(e.datasets);var f,p=rs(o,e,void 0);return rU(e,{layerData:p.layerData,layer:p.layer,idx:a})}function rq(e,t,r){var n=e;if(!Object.keys(t).length)return e;e.config.dataId||(n=e.updateLayerConfig({dataId:Object.keys(t)[0]}));var a=t[n.config.dataId];if(!a)return e;var o="function"==typeof r[n.type].findDefaultLayerProps?r[n.type].findDefaultLayerProps(a,[]):{props:[]},i=Array.isArray(o)?o:o.props||[];return i.length&&"function"==typeof(n=new r[e.type](rM(rM({},i[0]),{},{label:n.config.label,dataId:n.config.dataId,isVisible:!0,isConfigActive:n.config.isConfigActive}))).setInitialLayerConfig?n.setInitialLayerConfig(a):n}function rK(e,t){var r=t.oldLayer,n=t.newType;if(!r)return e;var a=r.id,o=e.layers.findIndex(function(e){return e.id===a});if(!e.layerClasses[n])return L.console.error("".concat(n," is not a valid layer type")),e;var i=new e.layerClasses[n]({label:r.config.label,isConfigActive:r.config.isConfigActive,dataId:r.config.dataId});r.type?(i.assignConfigToLayer(r.config,r.visConfigSettings),i.updateLayerDomain(e.datasets)):i=rq(i,e.datasets,e.layerClasses);var l=e.clicked,u=e.hoverInfo,c=rM(rM({},e),{},{clicked:r.isLayerHovered(l)?void 0:l,hoverInfo:r.isLayerHovered(u)?void 0:u}),s=rs(i,c),d=s.layerData,f=s.layer;return c=rU(c,{layerData:d,layer:f,idx:o}),(f.config.animation.enabled||r.config.animation.enabled)&&(c=nH(c)),e.splitMaps.length&&(c=rM(rM({},c),{},{splitMaps:c.splitMaps.map(function(e){var t=e.layers,r=t[a],n=(0,A.Z)(t,[a].map(rR));return a in e.layers?rM(rM({},e),{},{layers:rM(rM({},n),{},(0,m.Z)({},f.id,r))}):e})})),c=rM(rM({},c),{},{layerOrder:c.layerOrder.map(function(e){return e===r.id?i.id:e})})}function rX(e,t){var r=t.oldLayer,n=t.newConfig,a=t.channel;if(!r.config.dataId)return e;var o=e.datasets[r.config.dataId],i=e.layers.findIndex(function(e){return e.id===r.id}),l=r.updateLayerConfig(n);l.updateLayerVisualChannel(o,a);var u,c=e.layerData[i],s=rs(l,e,c);return rU(e,{layerData:s.layerData,layer:s.layer,idx:i})}function rJ(e,t){var r=t.oldLayer,n=e.layers.findIndex(function(e){return e.id===r.id}),a=Object.keys(t.newVisConfig),o=rM(rM({},r.config.visConfig),t.newVisConfig),i=r.updateLayerConfig({visConfig:o});if(i.shouldCalculateLayerData(a)){var l,u=e.layerData[n],c=rs(i,e,u);return rU(e,{layerData:c.layerData,layer:c.layer,idx:n})}return rU(e,{layer:i,idx:n})}function rQ(e,t){return r0(e,t)}function r$(e,t){var r=t.id,n=t.animationWindow;return rM(rM({},e),{},{filters:e.filters.map(function(e){return e.id===r?rM(rM({},e),{},{animationWindow:n}):e})})}function r0(e,t){var r,n=t.idx,a=t.prop,o=t.value,i=t.valueIndex,l=void 0===i?0:i,u=e.filters[n];if(!u)return L.console.error("filters.".concat(n," is undefined")),e;var c=(0,et.set)([a],o,u),s=e,d=c.dataId,f=(0,et.toArray)(d);switch(a){case et.FILTER_UPDATER_PROPS.dataId:c=(0,et.updateFilterDataId)(d);break;case et.FILTER_UPDATER_PROPS.name:var p,g,y=c.dataId[l],h=(0,et.applyFilterFieldName)(c,e.datasets[y],o,l,{mergeDomain:!1}),v=h.filter,m=h.dataset;if(!v)return e;(c=v).gpu&&(p=c,g=e.filters,c=e8((p.dataId.forEach(function(e,t){var r=g.filter(function(t){return t.dataId.includes(e)&&t.gpu});p.gpu&&r.length===ei.MAX_GPU_FILTERS&&(0,et.set)(["gpu"],!1,p)}),c=p),e.filters)),s=(0,et.set)(["datasets",y],m,e);break;case et.FILTER_UPDATER_PROPS.layerId:var b=F()(c.layerId,u.layerId);f=I()(b.map(function(t){return w()(e.layers.find(function(e){return e.id===t}),["config","dataId"])}).filter(function(e){return e}));var O=I()(null===(r=c.layerId)||void 0===r?void 0:r.map(function(t){return w()(e.layers.find(function(e){return e.id===t}),["config","dataId"])}).filter(function(e){return e}));c=rM(rM({},c),{},{dataId:O})}var E=e.filters.find(function(e){return e.view===ei.FILTER_VIEW_TYPES.enlarged});E&&E.id!==c.id&&(c.view=ei.FILTER_VIEW_TYPES.side),s=(0,et.set)(["filters",n],c,s);var T=et.LIMITED_FILTER_EFFECT_PROPS[a]?[f[l]]:f,S=(0,et.applyFiltersToDatasets)(T,s.datasets,s.filters,s.layers);return nz(s=(0,et.set)(["datasets"],S,s),T,c)}var r1=function(e,t){var r=t.idx,n=t.newProp,a=t.valueIndex,o=rM(rM({},e.filters[r]),n);if("yAxis"===Object.keys(n)[0]){var i=(0,et.getDefaultFilterPlotType)(o);i&&(o=rM(rM(rM({},o),(0,et.getFilterPlot)(rM(rM({},o),{},{plotType:i}),e.datasets[o.dataId[void 0===a?0:a]])),{},{plotType:i}))}return rM(rM({},e),{},{filters:e.filters.map(function(e,t){return t===r?o:e})})},r2=function(e,t){return t.dataId?rM(rM({},e),{},{filters:[].concat((0,v.Z)(e.filters),[(0,et.getDefaultFilter)({dataId:t.dataId,id:t.id})])}):e},r3=function(e,t){var r=t.oldLayer,n=t.prop,a=t.newConfig,o=r.config.visConfig[n],i=r.updateLayerColorUI(n,a),l=i.config.visConfig[n];return o!==l?rJ(e,{oldLayer:r,newVisConfig:(0,m.Z)({},n,l)}):rM(rM({},e),{},{layers:e.layers.map(function(e){return e.id===r.id?i:e})})},r4=function(e,t){return rM(rM({},e),{},{filters:e.filters.map(function(e,r){return r===t.idx?rM(rM({},e),{},{isAnimating:!e.isAnimating}):e})})},r5=function(e,t){return rM(rM({},e),{},{animationConfig:rM(rM({},e.animationConfig),{},{isAnimating:!e.animationConfig.isAnimating})})},r7=function(e,t){return rM(rM({},e),{},{animationConfig:rM(rM({},e.animationConfig),{},{hideControl:!e.animationConfig.hideControl})})},r6=function(e,t){return rM(rM({},e),{},{filters:e.filters.map(function(e,r){return r===t.idx?rM(rM({},e),{},{speed:t.speed}):e})})},r8=function(e,t){var r=t.value;return rM(rM({},e),{},{animationConfig:rM(rM({},e.animationConfig),{},{currentTime:r})})},r9=function(e,t){var r=t.speed;return rM(rM({},e),{},{animationConfig:rM(rM({},e.animationConfig),{},{speed:r})})},ne=function(e,t){var r=t.view,n=t.idx,a=r===ei.FILTER_VIEW_TYPES.enlarged;return rM(rM({},e),{},{filters:e.filters.map(function(e,t){return t===n?rM(rM({},e),{},{view:r}):a?rM(rM({},e),{},{view:ei.FILTER_VIEW_TYPES.side}):e})})},nt=function(e,t){var r=e.filters[t.idx],n=w()(r,["value","properties","isVisible"]),a=r0(e,{idx:t.idx,prop:"enabled",value:!n});return r0(a,{idx:t.idx,prop:"value",value:(0,et.featureToFilterValue)(r.value,r.id,{isVisible:!n})})},nr=function(e,t){var r=t.idx,n=e.filters[r],a=n.dataId,o=n.id,i=[].concat((0,v.Z)(e.filters.slice(0,r)),(0,v.Z)(e.filters.slice(r+1,e.filters.length))),l=(0,et.applyFiltersToDatasets)(a,e.datasets,i,e.layers),u=(0,et.getFilterIdInFeature)(e.editor.selectedFeature)===o?rM(rM({},e.editor),{},{selectedFeature:null}):e.editor,c=(0,et.set)(["filters"],i,e);return c=(0,et.set)(["datasets"],l,c),c=(0,et.set)(["editor"],u,c),nz(c,a,void 0)},nn=function(e,t){if(t.config){if(!(n=tP(e,t.config)))return L.console.warn("Failed to create layer from config, it usually means the config is not be in correct format",t.config),e;var r=rs(n,e);n=r.layer,a=r.layerData}else{var n,a,o,i=null!==(o=t.datasetId)&&void 0!==o?o:Object.keys(e.datasets)[0];n=new t$.Layer({isVisible:!0,isConfigActive:!0,dataId:i}),a={}}var l=rM(rM({},e),{},{layers:[].concat((0,v.Z)(e.layers),[n]),layerData:[].concat((0,v.Z)(e.layerData),[a]),layerOrder:[n.id].concat((0,v.Z)(e.layerOrder)),splitMaps:(0,et.addNewLayersToSplitMap)(e.splitMaps,n)});return n.config.animation.enabled&&(l=nH(l)),l};function na(e,t){var r=t.id,n=Number.isFinite(r)?Number(r):e.layers.findIndex(function(e){return e.id===r});if(n<0||n>=e.layers.length)return L.console.warn("can not remove layer with invalid id|idx ".concat(r)),e;var a=e.layers,o=e.layerData,i=e.layerOrder,l=e.clicked,u=e.hoverInfo,c=a[n],s=rM(rM({},e),{},{layers:rn(c.id)(a),layerData:ra(n)(o),layerOrder:i.filter(function(e){return e!==c.id}),clicked:c.isLayerHovered(l)?void 0:l,hoverInfo:c.isLayerHovered(u)?void 0:u,splitMaps:(0,et.removeLayerFromSplitMaps)(e.splitMaps,c)});return nH(s)}var no=function(e,t){var r=t.order;return rM(rM({},e),{},{layerOrder:r})},ni=function(e,t){var r=t.id,n=Number.isFinite(r)?Number(r):e.layers.findIndex(function(e){return e.id===r});if(n<0||!e.layers[n])return L.console.warn("layer ".concat(n," not found in layerOrder")),e;for(var a=e.layers,o=a[n],i=e.layerOrder.findIndex(function(e){return e===o.id}),l="Copy of ".concat(o.config.label),u=0;a.find(function(e){return e.config.label===l});)l="Copy of ".concat(o.config.label," ").concat(++u);var c=tL(o,e.schema);if(!(null!=c&&c.config))return e;c.config.label=l,c.id=(0,et.generateHashId)(t$.LAYER_ID_LENGTH);var s=nn(e,{config:c}),d=s.layers[s.layers.length-1],f=(0,et.arrayInsert)(s.layerOrder.slice(1,s.layerOrder.length),i,d.id);return s=no(s,{order:f}),nH(s)},nl=function(e,t){var r=eQ(t.config);e.effects.forEach(function(e){return e.setProps({isConfigActive:!1})});var n=[].concat((0,v.Z)(e.effects),[r]),a=(0,et.fixEffectOrder)(n,[r.id].concat((0,v.Z)(e.effectOrder)));return rM(rM({},e),{},{effects:n,effectOrder:a})},nu=function(e,t){var r=t.id,n=e.effects.findIndex(function(e){return e.id===r});if(n<0||n>=e.effects.length)return L.console.warn("can not remove effect with invalid id ".concat(r)),e;var a=e.effects,o=e.effectOrder,i=a[n];return rM(rM({},e),{},{effects:rn(i.id)(a),effectOrder:o.filter(function(e){return e!==i.id})})},nc=function(e,t){var r=t.order;return rM(rM({},e),{},{effectOrder:(0,et.fixEffectOrder)(e.effects,(0,v.Z)(r))})},ns=function(e,t){var r=t.id,n=t.props,a=e.effects.findIndex(function(e){return e.id===r});if(a<0||a>=e.effects.length)return L.console.warn("can not update effect with invalid id ".concat(r)),e;var o=e.effectOrder;if(void 0!==n.id&&n.id!==r){if(e.effects.findIndex(function(e){return e.id===n.id})>=0)return L.console.warn("can not update effect with existing effect id ".concat(r)),e;o=o.map(function(e){return e===r?n.id:e})}var i=(0,v.Z)(e.effects);return i[a].setProps(n),rM(rM({},e),{},{effects:i,effectOrder:o})};function nd(e,t){var r=t.dataId;if(!e.datasets[r])return e;var n=e.layers,a=e.datasets,o=(a[r],(0,A.Z)(a,[r].map(rR))),i=n.filter(function(e){return e.config.dataId===r}).map(function(e){return e.id}).reduce(function(e,t){return na(e,{id:t})},rM(rM({},e),{},{datasets:o})),l=i.filters.filter(function(e){return!e.dataId.includes(r)});return function(e,t){var r=t.dataId,n=e.interactionConfig,a=n.tooltip;if(a){var o=a.config,i=o.fieldsToShow,l=(i[r],(0,A.Z)(i,[r].map(rR)));n=rM(rM({},n),{},{tooltip:rM(rM({},a),{},{config:rM(rM({},o),{},{fieldsToShow:l})})})}return rM(rM({},e),{},{interactionConfig:n})}(i=rM(rM({},i),{},{filters:l}),{dataId:r})}var nf=function(e,t){return rM(rM({},e),{},{layerBlending:t.mode})},np=function(e,t){return rM(rM({},e),{},{overlayBlending:t.mode})},ng=function(e,t){return rM(rM({},e),{},{editingDataset:t.dataId})},ny=function(e,t){return nx(e,{dataId:t.dataId,props:{color:t.newColor}})},nh=function(e){return rM(rM(rM({},rN),e.initialState),{},{initialState:e.initialState})},nv=function(e,t){var r=t.payload,n=r.config,a=void 0===n?{}:n,o=r.options;if(!a.visState)return e;var i,l=(void 0===o?{}:o).keepExistingConfig?e:nh(e),u=rI(e.mergers);try{for(u.s();!(i=u.n()).done;){var c=i.value;tX(c)&&tJ(a.visState,c.prop)&&(l=c.merge(l,tQ(a.visState,c.prop,c.toMergeProp),!0))}}catch(s){u.e(s)}finally{u.f()}return l},nm=function(e,t){return rM(rM({},e),{},{hoverInfo:rM({},t.info)})};function nb(e,t){var r=t.config,n=rM(rM({},e.interactionConfig),(0,m.Z)({},r.id,r)),a=["brush","tooltip"];a.includes(r.id)&&r.enabled&&!e.interactionConfig[r.id].enabled&&a.forEach(function(e){e!==r.id&&(n[e]=rM(rM({},n[e]),{},{enabled:!1}))});var o=rM(rM({},e),{},{interactionConfig:n});return"geocoder"!==r.id||r.enabled?o:nd(o,{dataId:"geocoder_dataset"})}var nO=function(e,t){return rM(rM({},e),{},{mousePos:e.interactionConfig.coordinate.enabled?rM(rM({},e.mousePos),{},{pinned:e.mousePos.pinned?null:D()(e.mousePos)}):e.mousePos,clicked:t.info&&t.info.picked?t.info:null})},nE=function(e,t){return rM(rM({},e),{},{clicked:null})},nT=function(e,t){var r=t.evt;return Object.values(e.interactionConfig).some(function(e){return e.enabled})?rM(rM({},e),{},{mousePos:rM(rM(rM({},e.mousePos),Array.isArray(r.point)?{mousePosition:(0,v.Z)(r.point)}:{}),Array.isArray(r.lngLat)?{coordinate:(0,v.Z)(r.lngLat)}:{})}):e},nS=function(e,t){return e.splitMaps&&0===e.splitMaps.length?rM(rM({},e),{},{splitMaps:(0,et.computeSplitMapLayers)(e.layers,{duplicate:!1})}):nD(e,t)},nA=function(e,t){var r=t.mapIndex,n=t.layerId,a=e.splitMaps;return rM(rM({},e),{},{splitMaps:a.map(function(e,t){return t===r?rM(rM({},a[t]),{},{layers:rM(rM({},a[t].layers),{},(0,m.Z)({},n,!a[t].layers[n]))}):e})})},nP=function(e,t){var r=t.config,n=t.options,a=r?nv(e,{payload:{config:r,options:n}}):e,o=(0,et.toArray)(t.datasets).reduce(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.info,a=(0,A.Z)(r,rD);return rM(rM({},t),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.info,n=e.data,a=(0,A.Z)(e,tp),o=(0,et.validateInputData)(n);if(!o)return{};if(r&&r.id&&t[r.id]){var i=t[r.id];return i.update(o),(0,m.Z)({},i.id,i)}var l=(r=r||{}).color||function(e){var t=ty.map(String),r=I()(Object.values(e).map(function(e){return String(e.color)})).filter(function(e){return t.includes(e)});if(r.length===t.length)return et.datasetColorMaker.next().value;for(var n=et.datasetColorMaker.next().value;r.includes(String(n));)n=et.datasetColorMaker.next().value;return n}(t),u=new tu(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({info:r,data:o,color:l},a));return(0,m.Z)({},u.id,u)}(rM({info:void 0===n?{}:n},a),e.datasets)||{})},{}),i=rM(rM({},a),{},{datasets:tH(a,o)}),l=e.mergers.filter(function(e){return e.waitForLayerData}),u=e.mergers.filter(function(e){return!l.includes(e)}),c=Object.keys(o);return nL(i,{mergers:u,postMergerPayload:{newDataIds:c,options:n,layerMergers:l}})};function nL(e,t){var r=t.mergers,n=t.postMergerPayload,a=function(e,t,r,n){for(var a=e,o=(0,v.Z)(r);o.length;){var i=function(){var r=o.shift();if(r&&tX(r)&&r.toMergeProp&&tJ(e,r.toMergeProp)){var i,l,u,c={mergers:o,postMergerPayload:n},s=tQ(a,r.toMergeProp,r.toMergeProp);a=function(e,t,r){return(0,et.toArray)(r).reduce(function(e,r){return tK(tK({},e),{},(0,m.Z)({},r,t[r]))},e)}(a,t,r.toMergeProp);var d=(i=function(){return r.merge(a,s,!1,c)},l=(0,C.getGlobalTaskQueue)(),[u=i(),(0,C.getGlobalTaskQueue)().filter(function(e){return!l.includes(e)})]),f=(0,S.Z)(d,2),p=f[0],g=f[1];if(a=p,g.length&&r.waitToFinish)return{v:{mergedState:a,allMerged:!1}}}}();if("object"==typeof i)return i.v}return{mergedState:a,allMerged:!0}}(e,rM(rM({},rN),e.initialState),r,n);return a.allMerged?function(e,t){var r=t.newDataIds,n=t.options,a=t.layerMergers,o=e.filters.filter(function(e){return e.dataId.find(function(e){return r.includes(e)})}),i=I()(o.reduce(function(e,t){return[].concat((0,v.Z)(e),(0,v.Z)(t.dataId))},[])),l=r.length<1,u=l?[]:e.layers.filter(function(e){return e.config.dataId&&r.includes(e.config.dataId)}),c=r.reduce(function(t,r){return rM(rM({},t),{},(0,m.Z)({},r,e.datasets[r]))},{});if(!u.length&&!1!==(n||{}).autoCreateLayers){var s=nV(e,c);e=s.state,u=s.newLayers}e.splitMaps.length&&(u=e.layers.filter(function(e){return e.config.dataId&&r.includes(e.config.dataId)}),e=rM(rM({},e),{},{splitMaps:(0,et.addNewLayersToSplitMap)(e.splitMaps,u)})),r.forEach(function(t){var r=e.interactionConfig.tooltip.config.fieldsToShow[t];(null==n?void 0:n.autoCreateTooltips)===!1||Array.isArray(r)&&r.length||(e=nG(e,c[t]))});var d=l?Object.keys(e.datasets):I()(Object.keys(c).concat(i)),f=nz(e,d,void 0);return f=nH(f),a&&a.length>0?nL(f,{mergers:a,postMergerPayload:rM(rM({},t),{},{layerMergers:[]})}):f}(a.mergedState,n):a.mergedState}function nC(e,t){return nx(e,{dataId:t.dataId,props:{label:t.label}})}var n_=["label","color","metadata"];function nx(e,t){var r=t.dataId,n=t.props,a=e.datasets,o=a[r];if(o){var i,l,u=(i=n,l=o,Object.entries(i).reduce(function(e,t){var r=(0,S.Z)(t,2),n=r[0],a=r[1];return n_.includes(n)&&("color"!==n||(0,et.isRgbColor)(a))?rM(rM({},e),{},(0,m.Z)({},n,(0,et.isPlainObject)(a)?Y()(l[n]||{},a):a)):e},{}));return rM(rM({},e),{},{datasets:rM(rM({},a),{},(0,m.Z)({},r,tf(o,u)))})}return e}function nD(e,t){var r,n=1-t.payload,a=null===(r=e.splitMaps[n])||void 0===r?void 0:r.layers,o=e.layers.map(function(e){return a&&!a[e.id]&&e.config.isVisible?e.updateLayerConfig({isVisible:!1}):e});return rM(rM({},e),{},{layers:o,splitMaps:[]})}var nR=function(e,t){var r=t.files,n=t.onFinish,a=void 0===n?b.loadFilesSuccess:n;if(!r.length)return e;var o=Array.from(r).reduce(function(e,t,r){return t9(nB(t,r))(e)},{}),i=t9({fileLoadingProgress:o,fileLoading:{fileCache:[],filesToLoad:r,onFinish:a}})(e);return nk(i)};function nI(e,t){if(!e.fileLoading)return e;var r=t.fileName,n=t.fileCache,a=e.fileLoading,o=a.filesToLoad,i=a.onFinish,l=nY(e,{fileName:r,progress:{percent:1,message:"Done"}}),u=re("fileLoading")(t9({fileCache:n}))(l);return(0,C.withTask)(u,$(200).map(o.length?b.loadNextFile:function(){return i(n)}))}function nk(e){if(!e.fileLoading)return e;var t=e.fileLoading.filesToLoad,r=(0,T.Z)(t),n=r[0],a=r.slice(1),o=re("fileLoading")(t9({filesToLoad:a}))(e),i=nY(o,{fileName:n.name,progress:{percent:0,message:"loading..."}}),l=e.loaders,u=e.loadOptions;return(0,C.withTask)(i,nw(n,o.fileLoading&&o.fileLoading.fileCache,l,u))}function nw(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return W({file:e,fileCache:t,loaders:r,loadOptions:n}).bimap(function(r){return(0,b.nextFileBatch)({gen:r,fileName:e.name,onFinish:function(e){return(0,b.processFileContent)({content:e,fileCache:t})}})},function(t){return(0,b.loadFilesErr)(e.name,t)})}function nM(e,t){var r=t.payload,n=r.content,a=r.fileCache,o=nY(e,{fileName:n.fileName,progress:{percent:1,message:"processing..."}});return(0,C.withTask)(o,q({content:n,fileCache:a}).bimap(function(e){return(0,b.loadFileStepSuccess)({fileName:n.fileName,fileCache:e})},function(e){return(0,b.loadFilesErr)(n.fileName,e)}))}function nF(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return e&&e.percent?{percent:e.percent}:{}}var nj=function(e,t){var r,n=t.payload,a=n.gen,o=n.fileName,i=n.progress,l=n.accumulated,u=n.onFinish,c=nY(e,{fileName:o,progress:nF(e.fileLoadingProgress[o],i)});return(0,C.withTask)(c,[].concat((0,v.Z)(o.endsWith("arrow")&&(null==l?void 0:null===(r=l.data)||void 0===r?void 0:r.length)>0?[q({content:l,fileCache:[]}).bimap(function(e){return(0,b.loadFilesSuccess)(e)},function(e){return(0,b.loadFilesErr)(o,e)})]:[]),[ee(a.next()).bimap(function(e){var t=e.value;return e.done?u(l):(0,b.nextFileBatch)({gen:a,fileName:o,progress:t.progress,accumulated:t,onFinish:u})},function(e){return(0,b.loadFilesErr)(o,e)})]))},nZ=function(e,t){var r=t.error,n=t.fileName;if(L.console.warn(r),!e.fileLoading)return e;var a=e.fileLoading,o=a.filesToLoad,i=a.onFinish,l=a.fileCache,u=nY(e,{fileName:n,progress:{error:r}});return(0,C.withTask)(u,$(200).map(o.length?b.loadNextFile:function(){return i(l)}))},nN=function(e,t){var r=t.dataId;return(0,et.toArray)(r).reduce(function(e,t){return(0,et.filterDatasetCPU)(e,t)},e)},nU=function(e,t){return rM(rM({},e),{},{mapInfo:rM(rM({},e.mapInfo),t.info)})};function nV(e,t){var r=Object.values(t).reduce(function(t,r){var n=rc(r,e.layerClasses);return n&&n.length?t.concat(n):t},[]);return{state:rM(rM({},e),{},{layers:[].concat((0,v.Z)(e.layers),(0,v.Z)(r)),layerOrder:[].concat((0,v.Z)(rO(r)),(0,v.Z)(e.layerOrder))}),newLayers:r}}function nG(e,t){var r=rL(rM(rM({},t),{},{maxDefaultTooltips:e.maxDefaultTooltips})),n=rM(rM({},e.interactionConfig.tooltip.config.fieldsToShow),r);return(0,et.set)(["interactionConfig","tooltip","config","fieldsToShow"],n,e)}function nB(e,t){var r=e.name||"Untitled File ".concat(t);return(0,m.Z)({},r,{percent:0,message:"",fileName:r,error:null})}function nY(e,t){var r=t.fileName,n=t.progress;return re("fileLoadingProgress")(re(r)(t9(n)))(e)}function nz(e,t,r){var n="string"==typeof t?[t]:t,a=[],o=[];return e.layers.forEach(function(t,i){if(t.config.dataId&&n.includes(t.config.dataId)){var l=r&&r.fixedDomain?t:t.updateLayerDomain(e.datasets,r),u=rs(l,e,e.layerData[i]),c=u.layerData,s=u.layer;a.push(s),o.push(c)}else a.push(t),o.push(e.layerData[i])}),rM(rM({},e),{},{layers:a,layerData:o})}function nH(e){var t=e.layers.filter(function(e){return e.config.isVisible&&e.config.animation&&e.config.animation.enabled&&Array.isArray(e.animationDomain)});if(!t.length)return rM(rM({},e),{},{animationConfig:rM(rM({},e.animationConfig),{},{domain:null,defaultTimeFormat:null})});var r=t.reduce(function(e,t){return[Math.min(e[0],t.animationDomain[0]),Math.max(e[1],t.animationDomain[1])]},[Number(1/0),-1/0]),n=(0,et.getTimeWidgetTitleFormatter)(r);return rM(rM({},e),{},{animationConfig:rM(rM({},e.animationConfig),{},{currentTime:(0,et.isInRange)(e.animationConfig.currentTime,r)?e.animationConfig.currentTime:r[0],domain:r,defaultTimeFormat:n})})}var nW=function(e,t){var r=t.mode;return rM(rM({},e),{},{editor:rM(rM({},e.editor),{},{mode:r,selectedFeature:null})})};function nq(e,t){var r=t.features,n=void 0===r?[]:r,a=n.length&&n[n.length-1],o=rM(rM({},e),{},{editor:rM(rM({},e.editor),{},{features:n.filter(function(e){return!(0,et.getFilterIdInFeature)(e)}),mode:a&&a.properties.isClosed?ei.EDITOR_MODES.EDIT:e.editor.mode})}),i=e.editor.selectedFeature;if(!i)return o;var l=n.find(function(e){return e.id===i.id}),u=l&&(0,et.getFilterIdInFeature)(l);if(u&&l){l.properties&&(l.properties.bbox=(0,P.Z)(l));var c=(0,et.featureToFilterValue)(l,u);return r0(o,{idx:e.filters.findIndex(function(e){return e.id===u}),prop:"value",value:c})}return o}var nK=function(e,t){var r=t.feature,n=t.selectionContext;return r&&r.properties&&(r.properties.bbox=(0,P.Z)(r)),rM(rM({},e),{},{editor:rM(rM({},e.editor),{},{selectedFeature:r,selectionContext:n})})};function nX(e,t){var r=t.feature;if(!r)return e;var n=rM(rM({},e),{},{editor:rM(rM({},e.editor),{},{selectedFeature:null})});if((0,et.getFilterIdInFeature)(r)){var a=n.filters.findIndex(function(e){return e.id===(0,et.getFilterIdInFeature)(r)});return a>-1?nr(n,{idx:a}):n}var o=rM(rM({},e.editor),{},{features:e.editor.features.filter(function(e){return e.id!==r.id}),selectedFeature:null});return rM(rM({},e),{},{editor:o})}function nJ(e,t){var r,n=t.layer,a=t.feature,o=(0,et.getFilterIdInFeature)(a),i=[n.id],l=e;if(o){if(r=e.filters.findIndex(function(e){return e.id===o}),!e.filters[r]){var u=rM(rM({},a),{},{properties:rM(rM({},a.properties),{},{filterId:null})});return rM(rM({},e),{},{editor:rM(rM({},e.editor),{},{features:[].concat((0,v.Z)(e.editor.features),[u]),selectedFeature:u})})}var c=e.filters[r].layerId,s=void 0===c?[]:c;i=s.includes(n.id)?s.filter(function(e){return e!==n.id}):[].concat((0,v.Z)(s),[n.id])}else{var d=(0,et.generatePolygonFilter)([],a);r=e.filters.length,l=rM(rM({},e),{},{filters:[].concat((0,v.Z)(e.filters),[d]),editor:rM(rM({},e.editor),{},{features:e.editor.features.filter(function(e){return e.id!==a.id}),selectedFeature:d.value})})}return r0(l,{idx:r,prop:"layerId",value:i})}function nQ(e,t){var r=t.dataId,n=t.column,a=t.mode,o=e.datasets[r];if(!o)return e;var i=a;if(!i){var l=w()(o,["sortColumn",n]);i=l?Object.keys(ei.SORT_ORDER).find(function(e){return e!==l}):ei.SORT_ORDER.ASCENDING}var u=function(e,t,r){var n=e.allIndexes,a=e.fields,o=e.dataContainer,i=a.findIndex(function(e){return e.name===t});if(i<0)return e;var l=ei.SORT_ORDER[r||""]||ei.SORT_ORDER.ASCENDING;if(l===ei.SORT_ORDER.UNSORT)return e.sortColumn={},e.sortOrder=null,e;var u=l===ei.SORT_ORDER.ASCENDING?e2.Z:e3.Z,c=n.slice().sort(function(e,t){var r=o.valueAt(e,i),n=o.valueAt(t,i);return!(0,et.notNullorUndefined)(r)&&(0,et.notNullorUndefined)(n)?1:(0,et.notNullorUndefined)(r)&&!(0,et.notNullorUndefined)(n)?-1:u(r,n)});return e.sortColumn=(0,m.Z)({},t,l),e.sortOrder=c,e}(o,n,i);return(0,et.set)(["datasets",r],u,e)}function n$(e,t){var r=t.dataId,n=t.column,a=e.datasets[r];if(!a)return e;var o,i,l,u,c=(u=a.getColumnField(n))?(l=Array.isArray(a.pinnedColumns)&&a.pinnedColumns.includes(u.name)?a.pinnedColumns.filter(function(e){return e!==u.name}):(a.pinnedColumns||[]).concat(u.name),tf(a,{pinnedColumns:l})):a;return(0,et.set)(["datasets",r],c,e)}function n0(e,t){var r=t.dataId,n=t.column,a=e.datasets[r];if(!a)return e;var o=a.fields.findIndex(function(e){return e.name===n});if(o<0)return e;var i=a.fields[o].type,l=a.dataContainer.map(function(e){return(0,et.parseFieldValue)(e.valueAt(o),i)},!0).join("\n");return G()(l),e}function n1(e,t){var r=t.dataId,n=t.formats,a=e.datasets[r];if(!a)return e;var o=a.fields;Object.keys(n).forEach(function(e){var t=a.fields.findIndex(function(t){return t.name===e});if(t>=0){var r=n[e],i=o[t];o=rt(t9({displayFormat:r})(i))(o)}});var i=tf(a,{fields:o});return re("datasets")(t9((0,m.Z)({},r,i)))(e)}function n2(e,t){return rM(rM({},e),{},{editor:rM(rM({},e.editor),{},{visible:!e.editor.visible})})}function n3(e,t){var r=t.idx,n=t.config,a=e.filters[r];if(!a)return L.console.error("filters.".concat(r," is undefined")),e;if(a.type!==ei.FILTER_TYPES.timeRange)return L.console.error("setFilterAnimationTimeConfig can only be called to update a time filter. check filter.type === 'timeRange'"),e;var o=n4(n);return re("filters")(rt(t9(o)(a)))(e)}function n4(e){var t=["timeFormat","timezone"];return Object.keys(e).reduce(function(r,n){return t.includes(n)?(r[n]=e[n],r):(L.console.error("setLayerAnimationTimeConfig takes timeFormat and/or timezone as options, found ".concat(n)),r)},{})}function n5(e,t){var r=t.config;if(!r)return e;var n=n4(r);return re("animationConfig")(t9(n))(e)}function n7(e,t,r){return t8([t5(n8,{dataId:t,dataIdToUse:r}),t5(nd,{dataId:t})])(e)}function n6(e,t,r){var n,a,o=t_(e,e.schema),i=n7(e,t,r),l=(0,v.Z)(e.layerOrder);return i.preserveDatasetOrder=Object.keys(e.datasets).map(function(e){return e===t?r:e}),null!==(n=i.layerToBeMerged)&&void 0!==n&&n.length&&(i.splitMapsToBeMerged=null!==(a=null==o?void 0:o.splitMaps)&&void 0!==a?a:[],i.layerOrder=(0,v.Z)(l)),i}function n8(e,t){var r=t.dataId,n=t.dataIdToUse,a=t_(e,e.schema);return e.mergers.reduce(function(e,t){var o=t.prop,i=t.toMergeProp,l=t.replaceParentDatasetIds,u=t.getChildDatasetIds,c=t.saveUnmerged,s=t.preserveOrder,d=(0,et.toArray)(o),f=(0,et.toArray)(i),p=a?d.map(function(e){return a[e]}):[],g=e;return p.forEach(function(e,t){var a,o,i,p,y,h,b,O,E,T={prop:d[t],toMergeProp:f[t],getChildDatasetIds:u,saveUnmerged:c},S=(null==l?void 0:l(e,r,n))||function e(t,r,n){var a,o;if(Array.isArray(t)){var i=t.map(function(t){return e(t,r,n)}).filter(function(e){return e});return i.length?i:null}return"string"==typeof t.dataId&&t.dataId===r?rM(rM({},t),{},{dataId:n}):Array.isArray(t.dataId)&&t.dataId.includes(r)?rM(rM({},t),{},{dataId:t.dataId.map(function(e){return e===r?n:e})}):null!==(a=t.config)&&void 0!==a&&a.dataId&&(null===(o=t.config)||void 0===o?void 0:o.dataId)===r?rM(rM({},t),{},{config:rM(rM({},t.config),{},{dataId:n})}):(0,et.isObject)(t)&&t.hasOwnProperty(r)?(0,m.Z)({},n,t[r]):null}(e,r,n);g=S?(o=g,i=S,p=T,y=p.prop,h=p.toMergeProp,b=p.getChildDatasetIds,O=function(e,t,r){var n=r.prop,a=r.toMergeProp,o=r.saveUnmerged;if(!t)return e;var i="layers"===n?t.reduce(function(e,t){return na(e,{id:t.id})},e):Array.isArray(e[n])?rM(rM({},e),{},(0,m.Z)({},n,e[n].filter(function(e){return!t.find(function(t){return e.id===t.id})}))):e,l=(0,m.Z)({},a,o?o(i,t):Array.isArray(i[a])?[].concat((0,v.Z)(i[a]),(0,v.Z)(t)):(0,et.isObject)(i[a])?rM(rM({},i[a]),t):i[a]);return rM(rM({},i),l)}(o,i,{prop:y,toMergeProp:h,saveUnmerged:p.saveUnmerged}),E=(null==b?void 0:b(i))||function e(t){var r;if(Array.isArray(t)){var n=t.map(e).filter(function(e){return e});return n.length?n:null}return(null==t?void 0:null===(r=t.newDataset)||void 0===r?void 0:r.info.id)||null}(i),E&&(O=(0,et.toArray)(E).reduce(function(e,t){return n7(e,t,t)},O)),O):g,void 0!==T.toMergeProp&&null!==(a=g[T.toMergeProp])&&void 0!==a&&a.length&&s&&(g[s]=e.map(function(e){return e.id}))}),g},e)}function n9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n9(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var at=(n={},(0,m.Z)(n,b.ActionTypes.ADD_FILTER,r2),(0,m.Z)(n,b.ActionTypes.ADD_LAYER,nn),(0,m.Z)(n,b.ActionTypes.APPLY_LAYER_CONFIG,rB),(0,m.Z)(n,b.ActionTypes.DUPLICATE_LAYER,ni),(0,m.Z)(n,b.ActionTypes.SET_FILTER_VIEW,ne),(0,m.Z)(n,b.ActionTypes.INTERACTION_CONFIG_CHANGE,nb),(0,m.Z)(n,b.ActionTypes.LAYER_CLICK,nO),(0,m.Z)(n,b.ActionTypes.LAYER_CONFIG_CHANGE,rY),(0,m.Z)(n,b.ActionTypes.LAYER_SET_IS_VALID,rz),(0,m.Z)(n,b.ActionTypes.LAYER_HOVER,nm),(0,m.Z)(n,b.ActionTypes.LAYER_TYPE_CHANGE,rK),(0,m.Z)(n,b.ActionTypes.LAYER_VIS_CONFIG_CHANGE,rJ),(0,m.Z)(n,b.ActionTypes.LAYER_TEXT_LABEL_CHANGE,rH),(0,m.Z)(n,b.ActionTypes.LAYER_VISUAL_CHANNEL_CHANGE,rX),(0,m.Z)(n,b.ActionTypes.LAYER_COLOR_UI_CHANGE,r3),(0,m.Z)(n,b.ActionTypes.TOGGLE_LAYER_ANIMATION,r5),(0,m.Z)(n,b.ActionTypes.TOGGLE_LAYER_ANIMATION_CONTROL,r7),(0,m.Z)(n,b.ActionTypes.LOAD_FILES,nR),(0,m.Z)(n,b.ActionTypes.LOAD_FILES_ERR,nZ),(0,m.Z)(n,b.ActionTypes.LOAD_NEXT_FILE,nk),(0,m.Z)(n,b.ActionTypes.LOAD_FILE_STEP_SUCCESS,nI),(0,m.Z)(n,b.ActionTypes.MAP_CLICK,nE),(0,m.Z)(n,b.ActionTypes.MOUSE_MOVE,nT),(0,m.Z)(n,b.ActionTypes.RECEIVE_MAP_CONFIG,nv),(0,m.Z)(n,b.ActionTypes.REMOVE_DATASET,nd),(0,m.Z)(n,b.ActionTypes.REMOVE_FILTER,nr),(0,m.Z)(n,b.ActionTypes.REMOVE_LAYER,na),(0,m.Z)(n,b.ActionTypes.REORDER_LAYER,no),(0,m.Z)(n,b.ActionTypes.RESET_MAP_CONFIG,nh),(0,m.Z)(n,b.ActionTypes.SET_FILTER,r0),(0,m.Z)(n,b.ActionTypes.SET_FILTER_ANIMATION_TIME,rQ),(0,m.Z)(n,b.ActionTypes.SET_FILTER_ANIMATION_TIME_CONFIG,n3),(0,m.Z)(n,b.ActionTypes.SET_FILTER_ANIMATION_WINDOW,r$),(0,m.Z)(n,b.ActionTypes.SET_FILTER_PLOT,r1),(0,m.Z)(n,b.ActionTypes.SET_MAP_INFO,nU),(0,m.Z)(n,b.ActionTypes.SHOW_DATASET_TABLE,ng),(0,m.Z)(n,b.ActionTypes.UPDATE_TABLE_COLOR,ny),(0,m.Z)(n,b.ActionTypes.TOGGLE_FILTER_ANIMATION,r4),(0,m.Z)(n,b.ActionTypes.UPDATE_FILTER_ANIMATION_SPEED,r6),(0,m.Z)(n,b.ActionTypes.SET_LAYER_ANIMATION_TIME,r8),(0,m.Z)(n,b.ActionTypes.UPDATE_LAYER_ANIMATION_SPEED,r9),(0,m.Z)(n,b.ActionTypes.TOGGLE_LAYER_FOR_MAP,nA),(0,m.Z)(n,b.ActionTypes.TOGGLE_SPLIT_MAP,nS),(0,m.Z)(n,b.ActionTypes.UPDATE_LAYER_BLENDING,nf),(0,m.Z)(n,b.ActionTypes.UPDATE_OVERLAY_BLENDING,np),(0,m.Z)(n,b.ActionTypes.UPDATE_VIS_DATA,nP),(0,m.Z)(n,b.ActionTypes.RENAME_DATASET,nC),(0,m.Z)(n,b.ActionTypes.UPDATE_DATASET_PROPS,nx),(0,m.Z)(n,b.ActionTypes.SET_FEATURES,nq),(0,m.Z)(n,b.ActionTypes.DELETE_FEATURE,nX),(0,m.Z)(n,b.ActionTypes.SET_POLYGON_FILTER_LAYER,nJ),(0,m.Z)(n,b.ActionTypes.SET_SELECTED_FEATURE,nK),(0,m.Z)(n,b.ActionTypes.SET_EDITOR_MODE,nW),(0,m.Z)(n,b.ActionTypes.TOGGLE_EDITOR_VISIBILITY,n2),(0,m.Z)(n,b.ActionTypes.TOGGLE_FILTER_FEATURE,nt),(0,m.Z)(n,b.ActionTypes.APPLY_CPU_FILTER,nN),(0,m.Z)(n,b.ActionTypes.SORT_TABLE_COLUMN,nQ),(0,m.Z)(n,b.ActionTypes.PIN_TABLE_COLUMN,n$),(0,m.Z)(n,b.ActionTypes.COPY_TABLE_COLUMN,n0),(0,m.Z)(n,b.ActionTypes.SET_COLUMN_DISPLAY_FORMAT,n1),(0,m.Z)(n,b.ActionTypes.NEXT_FILE_BATCH,nj),(0,m.Z)(n,b.ActionTypes.PROCESS_FILE_CONTENT,nM),(0,m.Z)(n,b.ActionTypes.SET_LAYER_ANIMATION_TIME_CONFIG,n5),(0,m.Z)(n,b.ActionTypes.ADD_EFFECT,nl),(0,m.Z)(n,b.ActionTypes.REORDER_EFFECT,nc),(0,m.Z)(n,b.ActionTypes.REMOVE_EFFECT,nu),(0,m.Z)(n,b.ActionTypes.UPDATE_EFFECT,ns),n),ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.Z)(at,ae(ae(ae({},rN),e),{},{initialState:e}))},an=ar(),aa=r(22659),ao=r(12345),ai=r(67296),al=r(74201);function au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ac(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?au(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):au(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var as={pitch:0,bearing:0,latitude:37.75043,longitude:-122.34679,zoom:9,dragRotate:!1,width:800,height:800,minZoom:void 0,maxZoom:void 0,maxBounds:void 0,isSplit:!1,isViewportSynced:!0,isZoomLocked:!1,splitMapViewports:[]},ad=function(e,t){var r=t.payload,n=r.viewport,a=r.mapIndex,o=void 0===a?0:a;if(e.isViewportSynced)return aO(e,n);var i=-1,l=e.splitMapViewports.map(function(e,t){return t===o?aO(e,n):(i=t,e)});return Number.isFinite(i)&&i>-1&&(l[i]=ac(ac({},l[i]),{},{width:l[o].width,height:l[o].height}),e.isZoomLocked&&(l[i]=ac(ac({},l[i]),{},{zoom:l[o].zoom}))),ac(ac(ac({},e),l[o]),{},{splitMapViewports:l})},af=function(e,t){var r=(0,et.getCenterAndZoomFromBounds)(t.payload,{width:e.width,height:e.height});if(!r)return e;var n=ac(ac({},e),{},{latitude:r.center[1],longitude:r.center[0]},Number.isFinite(r.zoom)?{zoom:r.zoom}:{});return n.splitMapViewports.length&&(n.splitMapViewports=n.splitMapViewports.map(function(e){return ac(ac({},e),{},{latitude:n.latitude,longitude:n.longitude,zoom:n.zoom})})),n},ap=function(e,t){var r=ac(ac(ac({},e),{pitch:e.dragRotate?0:50,bearing:e.dragRotate?0:24}),{},{dragRotate:!e.dragRotate});return r.splitMapViewports.length&&(r.splitMapViewports=r.splitMapViewports.map(function(e){return ac(ac({},e),{},{pitch:r.pitch,bearing:r.bearing,dragRotate:r.dragRotate})})),r},ag=function(e){return ac(ac(ac({},as),e.initialState),{},{initialState:e.initialState})},ay=function(e,t){var r=t.payload,n=r.config,a=r.options,o=r.bounds,i=void 0===o?null:o,l=((void 0===n?{}:n)||{}).mapState||{},u=Y()(e,l,{arrayMerge:function(e,t){return t}});return(void 0===a?{}:a).centerMap&&i&&(u=af(u,{payload:i})),ac(ac({},u),am(u.isSplit,e))},ah=function(e,t){return ac(ac(ac({},e),am(!e.isSplit,e)),{},{isSplit:!e.isSplit},!1==!e.isSplit?{isViewportSynced:!0,isZoomLocked:!1,splitMapViewports:[]}:{})},av=function(e,t){var r=ac(ac({},e),t.payload||{});if(r.isViewportSynced)r.splitMapViewports=[];else{if(e.isZoomLocked&&!r.isZoomLocked)return r;if(!e.isZoomLocked&&r.isZoomLocked){var n=r.splitMapViewports.findIndex(function(e){return r.zoom===e.zoom}),a=r.splitMapViewports.map(function(e,t){return t===n?e:ac(ac({},e),{},{zoom:r.splitMapViewports[n].zoom})});return r.splitMapViewports=a,r}var o=ab(r),i=ab(r);r.splitMapViewports=[o,i]}return r};function am(e,t){return t.isSplit===e?{}:{width:t.isSplit&&!e?2*t.width:t.width/2}}function ab(e){return Z()(e,["width","height","zoom","pitch","bearing","latitude","longitude","dragRotate","minZoom","maxZoom","maxBounds"])}function aO(e,t){var r,n=ac(ac({},e),Object.entries(t).reduce(function(e,t){var r=(0,S.Z)(t,2),n=r[0],a=r[1];return ac(ac({},e),void 0!==a?(0,m.Z)({},n,a):{})},{})||{});return n.minZoom&&n.zoom&&n.zoom<n.minZoom&&(n.zoom=n.minZoom),n.maxZoom&&n.zoom&&n.zoom>n.maxZoom&&(n.zoom=n.maxZoom),n.maxBounds&&(0,et.validateBounds)(n.maxBounds)&&(n=function(e,t){var r=aa.bounds([t.longitude,t.latitude],t.zoom,[t.width,t.height],et.MAPBOX_TILE_SIZE),n=(0,ai.Z)(r),a=t.maxBounds,o=(0,ai.Z)(a);if(!e.maxBounds||!e.maxBounds.every(function(e,t){return e===a[t]})){if(!(0,ao.Z)(n,o)){var i=(0,al.Xg)({width:t.width,height:t.width,bounds:[[a[0],a[1]],[a[2],a[3]]]}),l=i.latitude,u=i.longitude,c=i.zoom;t=ac(ac({},t),{},{latitude:l,longitude:u},Number.isFinite(c)?{zoom:c}:{})}return t}return(0,ao.Z)(n,o)||(t=ac(ac({},t),{},{longitude:e.longitude,latitude:e.latitude,zoom:e.zoom})),t}(e,n)),n}function aE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aE(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var aS=(a={},(0,m.Z)(a,b.ActionTypes.UPDATE_MAP,ad),(0,m.Z)(a,b.ActionTypes.FIT_BOUNDS,af),(0,m.Z)(a,b.ActionTypes.TOGGLE_PERSPECTIVE,ap),(0,m.Z)(a,b.ActionTypes.RECEIVE_MAP_CONFIG,ay),(0,m.Z)(a,b.ActionTypes.RESET_MAP_CONFIG,ag),(0,m.Z)(a,b.ActionTypes.TOGGLE_SPLIT_MAP,ah),(0,m.Z)(a,b.ActionTypes.TOGGLE_SPLIT_MAP_VIEWPORT,av),a),aA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.Z)(aS,aT(aT(aT({},as),e),{},{initialState:e}))},aP=aA(),aL=r(862);function aC(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function a_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ax(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a_(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var aD=function(){return{styleType:"dark-matter",visibleLayerGroups:{},topLayerGroups:{},mapStyles:ei.DEFAULT_MAP_STYLES.reduce(function(e,t){return ax(ax({},e),{},(0,m.Z)({},t.id,t))},{}),mapboxApiAccessToken:null,mapboxApiUrl:ei.DEFAULT_MAPBOX_API_URL,mapStylesReplaceDefault:!1,inputStyle:aQ(),threeDBuildingColor:(0,et.hexToRgb)(ei.DEFAULT_BLDG_COLOR),custom3DBuildingColor:!1,backgroundColor:(0,et.hexToRgb)(ei.DEFAULT_BACKGROUND_COLOR),isLoading:{},bottomMapStyle:void 0,topMapStyle:void 0}},aR=aD();function aI(e){var t=e.styleType,r=e.visibleLayerGroups,n=e.topLayerGroups,a=e.mapStyles[t];if(!a||!a.style)return{};var o=Object.keys(r).length,i=o?(0,et.editBottomMapStyle)({id:t,mapStyle:a,visibleLayerGroups:r}):a.style,l=o>0&&Object.values(n).some(function(e){return e}),u=l&&Object.keys(n).reduce(function(e,t){return ax(ax({},e),{},(0,m.Z)({},t,n[t]&&r[t]))},{}),c=l?(0,et.editTopMapStyle)({id:t,mapStyle:a,visibleLayerGroups:u}):null;return{bottomMapStyle:i,topMapStyle:c,editable:o}}function ak(e){return e&&e.paint&&e.paint["background-color"]}function aw(e){return Array.isArray(null==e?void 0:e.layers)?ei.DEFAULT_LAYER_GROUPS.filter(function(t){return e.layers.filter(t.filter).length}):[]}var aM=function(e,t){var r,n,a,o,i=t.payload,l=i.mapStyles,u=i.onSuccess,c=Object.keys(l).reduce(function(t,r){return ax(ax({},t),e.isLoading[r]?{}:(0,m.Z)({},r,l[r]))},{}),s=(r=c,n=e.mapboxApiAccessToken,a=e.mapboxApiUrl,o=u,[_().all(Object.values(r).map(function(e){var t=e.id,r=e.url,o=e.accessToken;return{id:t,url:(0,et.isValidStyleUrl)(r)?(0,et.getStyleDownloadUrl)(r,o||n,a):r}}).map(K)).bimap(function(e){return(0,b.loadMapStyles)(e.reduce(function(e,t){var n=t.id,a=t.style;return ax(ax({},e),{},(0,m.Z)({},n,ax(ax({},r[n]),{},{style:a})))},{}),o)},function(e){return(0,b.loadMapStyleErr)(Object.keys(r),e)})]),d=Object.keys(c).reduce(function(e,t){return ax(ax({},e),{},(0,m.Z)({},t,!0))},{}),f=ax(ax({},e),{},{isLoading:d});return(0,C.withTask)(f,s)},aF=function(e,t){var r=t.payload,n=void 0===r?{}:r;return ax(ax({},e),{},{mapboxApiAccessToken:n.mapboxApiAccessToken||e.mapboxApiAccessToken,mapboxApiUrl:n.mapboxApiUrl||e.mapboxApiUrl,mapStyles:n.mapStylesReplaceDefault?{}:e.mapStyles,mapStylesReplaceDefault:n.mapStylesReplaceDefault||!1})},aj=function(e,t){return ax(ax(ax({},e),t.payload),aI(ax(ax({},e),t.payload)))},aZ=function(e){return(0,et.isPlainObject)(null==e?void 0:e.style)},aN=function(e,t){var r,n,a=t.payload,o=a.styleType,i=a.onSuccess;if(!e.mapStyles[o]||(null===(r=e.mapStyles[o])||void 0===r?void 0:r.custom)==="MANAGED"&&!(null!==(n=e.mapStyles[o])&&void 0!==n&&n.url)&&!aZ(e.mapStyles[o]))return e;if(!aZ(e.mapStyles[o]))return aM(ax(ax({},e),{},{styleType:o}),{payload:{mapStyles:(0,m.Z)({},o,e.mapStyles[o]),onSuccess:i}});var l,u,c,s,d=(0,et.getDefaultLayerGroupVisibility)(e.mapStyles[o]),f=(0,et.mergeLayerGroupVisibility)(d,e.visibleLayerGroups),p=e.custom3DBuildingColor?e.threeDBuildingColor:function(e){if(!e.style)return(0,et.hexToRgb)(ei.DEFAULT_BLDG_COLOR);var t=(e.style.layers||[]).find(function(e){return"background"===e.id}),r=ak((e.style.layers||[]).find(function(e){return e.id.match(/building/)}))||ak(t)||ei.DEFAULT_BLDG_COLOR,n=e.id.match(/(?=(dark|night))/)?"brighter":"darker",a=(0,aL.B8)(r)[n]([.2]);return[a.r,a.g,a.b]}(e.mapStyles[o]),g=(c=e.mapStyles[e.styleType],s=e.backgroundColor||ei.DEFAULT_BACKGROUND_COLOR,o===ei.NO_MAP_ID?function(e,t){if(!e.style)return(0,et.colorMaybeToRGB)(t)||t;var r,n,a=Array.isArray(n=ak((e.style.layers||[]).find(function(e){var t=e.id;return ei.BASE_MAP_BACKGROUND_LAYER_IDS.includes(t)})))&&"interpolate"===n[0]?n[4]:n;return(null===(r=(0,et.colorMaybeToRGB)("string"==typeof a?a:t))||void 0===r?void 0:r.map(function(e){return Math.round(e)}))||t}(c,s):s);return ax(ax({},e),{},{styleType:o,visibleLayerGroups:f,threeDBuildingColor:p,backgroundColor:g},aI(ax(ax({},e),{},{visibleLayerGroups:f,styleType:o})))},aU=function(e,t){var r,n,a=t.payload||{},o=a.newStyles,i=a.onSuccess,l=Object.keys(o).reduce(function(e,t){return ax(ax({},e),{},(0,m.Z)({},t,ax(ax({},o[t]),{},{layerGroups:o[t].layerGroups||aw(o[t].style)})))},{}),u=Object.keys(e.isLoading).reduce(function(t,r){return ax(ax({},t),e.isLoading[r]&&aZ(o[r])?(0,m.Z)({},r,!1):(0,m.Z)({},r,e.isLoading[r]))},{}),c=ax(ax({},e),{},{isLoading:u,mapStyles:ax(ax({},e.mapStyles),l)}),s=(r=i,n={styleType:e.styleType},"function"==typeof r?Q().map(function(e){return r(n)}):null),d=o[e.styleType]?aN(c,{payload:{styleType:e.styleType}}):c;return s?(0,C.withTask)(d,s):d},aV=function(e,t){var r=t.payload,n=r.ids,a=r.error;e1().error(a);var o=Object.keys(e.isLoading).reduce(function(t,r){return ax(ax({},t),e.isLoading[r]&&(n||[]).includes(r)?(0,m.Z)({},r,!1):(0,m.Z)({},r,e.isLoading[r]))},{});return ax(ax({},e),{},{isLoading:o})},aG=function(e,t){var r=(t.payload.config||{}).mapStyle;if(!r)return e;var n=r.mapStyles?ax(ax({},r),{},{mapStyles:ax(ax({},r.mapStyles),e.mapStyles)}):r;n.custom3DBuildingColor=Boolean(r.threeDBuildingColor)||n.custom3DBuildingColor;var a=aj(e,{payload:n});return aN(a,{payload:{styleType:a.styleType}})},aB=function(e){var t=ax(ax(ax({},aR),{},{mapboxApiAccessToken:e.mapboxApiAccessToken,mapboxApiUrl:e.mapboxApiUrl,mapStylesReplaceDefault:e.mapStylesReplaceDefault},e.initialState),{},{mapStyles:e.mapStyles,initialState:e.initialState});return aN(t,{payload:{styleType:t.styleType}})},aY=function(e,t){var r=t.payload,n=r.icon,a=r.style,o=r.error;return ax(ax({},e),{},{inputStyle:ax(ax(ax(ax({},e.inputStyle),a?{id:"MANAGED"===e.inputStyle.custom?e.inputStyle.id:a.id||(0,et.generateHashId)(),style:D()(a),label:e.inputStyle.label||a.name,layerGroups:aw(a)}:{}),n?{icon:n}:{}),o?{error:o}:{})})},az=function(e,t){var r,n=t.payload,a=n.inputStyle,o=n.mapState,i=ax(ax({},e.inputStyle),a),l=(0,et.isValidStyleUrl)(i.url),u=null===(r=i.icon)||void 0===r?void 0:r.startsWith("data:image"),c=l||Boolean(i.uploadedFile),s=l&&!u?(0,et.getStyleImageIcon)({mapState:o,styleUrl:i.url||"",mapboxApiAccessToken:i.accessToken||e.mapboxApiAccessToken||"",mapboxApiUrl:e.mapboxApiUrl||ei.DEFAULT_MAPBOX_API_URL}):i.icon;return ax(ax({},e),{},{inputStyle:ax(ax({},i),{},{isValid:c,icon:s})})},aH=function(e){var t=e.inputStyle.id;if(!t)return e;var r=aq(e);return aN(r,{payload:{styleType:t}})},aW=function(e){return aq(e)};function aq(e){var t=e.inputStyle.id;return t?ax(ax({},e),{},{mapStyles:ax(ax({},e.mapStyles),{},(0,m.Z)({},t,ax(ax({},e.mapStyles[t]),e.inputStyle))),inputStyle:aQ()}):e}var aK=function(e,t){var r=t.payload.id,n=e.mapStyles,a=(n[r],(0,A.Z)(n,[r].map(aC))),o=ax(ax({},e),{},{mapStyles:a});return e.styleType===r?aN(o,{payload:{styleType:aD().styleType}}):o},aX=function(e,t){var r=t.payload;return ax(ax({},e),{},{threeDBuildingColor:r,custom3DBuildingColor:!0})},aJ=function(e,t){var r=t.payload;return ax(ax({},e),{},{backgroundColor:r})};function aQ(){return{id:null,accessToken:null,error:!1,isValid:!1,label:null,style:null,url:null,icon:null,custom:"LOCAL",uploadedFile:null}}function a$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a$(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var a1=(o={},(0,m.Z)(o,b.ActionTypes.INIT,aF),(0,m.Z)(o,b.ActionTypes.INPUT_MAP_STYLE,az),(0,m.Z)(o,b.ActionTypes.MAP_CONFIG_CHANGE,aj),(0,m.Z)(o,b.ActionTypes.MAP_STYLE_CHANGE,aN),(0,m.Z)(o,b.ActionTypes.REQUEST_MAP_STYLES,aM),(0,m.Z)(o,b.ActionTypes.LOAD_MAP_STYLES,aU),(0,m.Z)(o,b.ActionTypes.LOAD_MAP_STYLE_ERR,aV),(0,m.Z)(o,b.ActionTypes.RECEIVE_MAP_CONFIG,aG),(0,m.Z)(o,b.ActionTypes.LOAD_CUSTOM_MAP_STYLE,aY),(0,m.Z)(o,b.ActionTypes.ADD_CUSTOM_MAP_STYLE,aH),(0,m.Z)(o,b.ActionTypes.EDIT_CUSTOM_MAP_STYLE,aW),(0,m.Z)(o,b.ActionTypes.REMOVE_CUSTOM_MAP_STYLE,aK),(0,m.Z)(o,b.ActionTypes.RESET_MAP_CONFIG,aB),(0,m.Z)(o,b.ActionTypes.SET_3D_BUILDING_COLOR,aX),(0,m.Z)(o,b.ActionTypes.SET_BACKGROUND_COLOR,aJ),(0,m.Z)(o,b.ActionTypes.RESET_MAP_CONFIG,aB),o),a2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.Z)(a1,a0(a0(a0({},aR),e),{},{initialState:e}))},a3=a2(),a4=r(17846);function a5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a5(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var a6="layer",a8=ei.ADD_DATA_ID,a9={show:!0,active:!1,disableClose:!1,activeMapIndex:0},oe=Object.keys(ei.MAP_CONTROLS).reduce(function(e,t){return a7(a7({},e),{},(0,m.Z)({},t,a9))},{}),ot={ratio:ei.EXPORT_IMG_RATIOS.SCREEN,resolution:ei.RESOLUTIONS.ONE_X,legend:!1,mapH:0,mapW:0,imageSize:{zoomOffset:0,scale:1,imageW:0,imageH:0},center:!1,imageDataUri:"",exporting:!1,processing:!1,error:!1,escapeXhtmlForWebpack:!0},or={fileLoading:!1},on={selectedDataset:"",dataType:ei.EXPORT_DATA_TYPE.CSV,filtered:!0},oa=[],oo={exportMapboxAccessToken:null,userMapboxToken:"",mode:ei.EXPORT_HTML_MAP_MODES.READ},oi={hasData:!0},ol=(i={},(0,m.Z)(i,ei.EXPORT_MAP_FORMATS.HTML,oo),(0,m.Z)(i,ei.EXPORT_MAP_FORMATS.JSON,oi),(0,m.Z)(i,"format",ei.EXPORT_MAP_FORMATS.HTML),i),ou={readOnly:!1,activeSidePanel:a6,currentModal:a8,datasetKeyToRemove:null,visibleDropdown:null,exportImage:ot,exportData:on,exportMap:ol,mapControls:oe,notifications:oa,loadFiles:or,locale:a4.LOCALE_CODES.en,layerPanelListView:"list",filterPanelListView:"list",isSidePanelCloseButtonVisible:!0},oc=function(e,t){return a7(a7({},e),(t.payload||{}).initialUiState)},os=function(e,t){var r=t.payload;return r===e.activeSidePanel?e:a7(a7({},e),{},{activeSidePanel:r})},od=function(e,t){var r=t.payload;return a7(a7({},e),{},{currentModal:r})},of=function(e,t){var r=t.payload;return a7(a7({},e),{},{visibleDropdown:r})},op=function(e){return a7(a7({},e),{},{visibleDropdown:null})},og=function(e,t){var r=t.payload.show;return a7(a7({},e),{},{isSidePanelCloseButtonVisible:r})},oy=function(e,t){var r=t.payload,n=r.panelId,a=r.index;return a7(a7({},e),{},{mapControls:a7(a7({},e.mapControls),{},(0,m.Z)({},n,a7(a7({},e.mapControls[n]),{},{active:!e.mapControls[n].active,activeMapIndex:void 0===a?0:a})))})},oh=function(e,t){var r,n=t.payload,a=n.panelId,o=n.show;return null!==(r=e.mapControls)&&void 0!==r&&r[a]?a7(a7({},e),{},{mapControls:a7(a7({},e.mapControls),{},(0,m.Z)({},a,a7(a7({},e.mapControls[a]),{},{show:Boolean(o)})))}):e},ov=function(e,t){var r=t.payload;return a7(a7({},e),{},{currentModal:ei.DELETE_DATA_ID,datasetKeyToRemove:r})},om=function(e,t){var r=t.payload,n=a7(a7({},e.exportImage),r),a=(0,et.calculateExportImageSize)(n)||e.exportImage.imageSize;return a7(a7({},e),{},{exportImage:a7(a7({},n),{},{imageSize:a})})},ob=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportImage:a7(a7({},e.exportImage),{},{processing:!1,imageDataUri:r})})},oO=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportImage:a7(a7({},e.exportImage),{},{processing:!1,error:r})})},oE=function(e){return a7(a7({},e),{},{exportImage:a7(a7({},e.exportImage),{},{exporting:!1,imageDataUri:"",error:!1,processing:!1,center:!1})})},oT=function(e,t){var r=t.payload,n=a7(a7({},void 0===r?{}:r),{},{exporting:!0});return t8([oE,t5(om,t4(n))])(e)},oS=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportData:a7(a7({},e.exportData),{},{selectedDataset:r})})},oA=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportData:a7(a7({},e.exportData),{},{dataType:r})})},oP=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportData:a7(a7({},e.exportData),{},{filtered:r})})},oL=function(e){return a7(a7({},e),{},{exportMap:a7(a7({},e.exportMap),{},(0,m.Z)({},ei.EXPORT_MAP_FORMATS.JSON,a7(a7({},e.exportMap[ei.EXPORT_MAP_FORMATS.JSON]),{},{hasData:!e.exportMap[ei.EXPORT_MAP_FORMATS.JSON].hasData})))})},oC=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportMap:a7(a7({},e.exportMap),{},(0,m.Z)({},ei.EXPORT_MAP_FORMATS.HTML,a7(a7({},e.exportMap[ei.EXPORT_MAP_FORMATS.HTML]),{},{userMapboxToken:r})))})},o_=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportMap:a7(a7({},e.exportMap),{},{format:r})})},ox=function(e,t){var r=t.payload;return a7(a7({},e),{},{exportMap:a7(a7({},e.exportMap),{},(0,m.Z)({},ei.EXPORT_MAP_FORMATS.HTML,a7(a7({},e.exportMap[ei.EXPORT_MAP_FORMATS.HTML]),{},{mode:r})))})},oD=function(e,t){var r,n=t.payload,a=e.notifications||[],o=null==n?void 0:n.id;return r=(o?a.find(function(e){return e.id===o}):null)?a.map(function(e){return e.id===o?(0,et.createNotification)(a7(a7({},n),{},{count:e.count+1})):e}):[].concat((0,v.Z)(a),[(0,et.createNotification)(n)]),a7(a7({},e),{},{notifications:r})},oR=function(e,t){var r=t.payload;return a7(a7({},e),{},{notifications:e.notifications.filter(function(e){return e.id!==r})})},oI=function(e){return a7(a7({},e),{},{loadFiles:a7(a7({},e.loadFiles),{},{fileLoading:!0})})},ok=function(e){return a7(a7({},e),{},{loadFiles:a7(a7({},e.loadFiles),{},{fileLoading:!1})})},ow=function(e,t){var r=t.error;return oD(a7(a7({},e),{},{loadFiles:a7(a7({},e.loadFiles),{},{fileLoading:!1})}),{payload:(0,et.errorNotification)({message:(r||{}).message||"Failed to upload files",topic:ei.DEFAULT_NOTIFICATION_TOPICS.global})})},oM=function(e){return a7(a7({},e),{},{mapControls:Object.entries(e.mapControls).reduce(function(e,t){return a7(a7({},e),{},(0,m.Z)({},t[0],a7(a7({},t[1]),{},{activeMapIndex:0})))},{})})},oF=function(e){return od(e,{payload:ei.DATA_TABLE_ID})},oj=function(e,t){var r=t.payload.locale;return a7(a7({},e),{},{locale:r})},oZ=function(e,t){var r=t.payload,n=r.panelId,a=r.listView,o="layer"===n?"layerPanelListView":"filter"===n?"filterPanelListView":null;return o&&e[o]!==a?a7(a7({},e),{},(0,m.Z)({},o,a)):e};function oN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oN(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var oV=(l={},(0,m.Z)(l,b.ActionTypes.INIT,oc),(0,m.Z)(l,b.ActionTypes.TOGGLE_SIDE_PANEL,os),(0,m.Z)(l,b.ActionTypes.TOGGLE_MODAL,od),(0,m.Z)(l,b.ActionTypes.SHOW_EXPORT_DROPDOWN,of),(0,m.Z)(l,b.ActionTypes.HIDE_EXPORT_DROPDOWN,op),(0,m.Z)(l,b.ActionTypes.TOGGLE_SIDE_PANEL_CLOSE_BUTTON,og),(0,m.Z)(l,b.ActionTypes.OPEN_DELETE_MODAL,ov),(0,m.Z)(l,b.ActionTypes.TOGGLE_MAP_CONTROL,oy),(0,m.Z)(l,b.ActionTypes.SET_MAP_CONTROL_VISIBILITY,oh),(0,m.Z)(l,b.ActionTypes.ADD_NOTIFICATION,oD),(0,m.Z)(l,b.ActionTypes.REMOVE_NOTIFICATION,oR),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_IMAGE_SETTING,om),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_IMAGE_DATA_URI,ob),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_IMAGE_ERROR,oO),(0,m.Z)(l,b.ActionTypes.CLEANUP_EXPORT_IMAGE,oE),(0,m.Z)(l,b.ActionTypes.START_EXPORTING_IMAGE,oT),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_SELECTED_DATASET,oS),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_DATA_TYPE,oA),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_FILTERED,oP),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_DATA,oL),(0,m.Z)(l,b.ActionTypes.SET_USER_MAPBOX_ACCESS_TOKEN,oC),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_MAP_FORMAT,o_),(0,m.Z)(l,b.ActionTypes.SET_EXPORT_MAP_HTML_MODE,ox),(0,m.Z)(l,b.ActionTypes.LOAD_FILES,oI),(0,m.Z)(l,b.ActionTypes.LOAD_FILES_ERR,ow),(0,m.Z)(l,b.ActionTypes.TOGGLE_SPLIT_MAP,oM),(0,m.Z)(l,b.ActionTypes.SHOW_DATASET_TABLE,oF),(0,m.Z)(l,b.ActionTypes.SET_LOCALE,oj),(0,m.Z)(l,b.ActionTypes.TOGGLE_PANEL_LIST_VIEW,oZ),l),oG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.Z)(oV,oU(oU(oU({},ou),e),{},{initialState:e}))},oB=oG(),oY=r(57750);function oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oz(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var oW={isProviderLoading:!1,isCloudMapLoading:!1,providerError:null,currentProvider:null,successInfo:{},mapSaved:null,visualizations:[]};function oq(e,t){return"function"==typeof e?Q().map(function(r){return e(t)}):null}function oK(e,t){return e?"function"==typeof e[t]||(e1().error("".concat(t," is not a function of Cloud provider: ").concat(e.name)),!1):(e1().error("provider is not defined"),!1)}function oX(e){var t=e.type,r=e.message,n=e.delayClose,a=(0,et.generateHashId)(),o={id:a,type:ei.DEFAULT_NOTIFICATION_TYPES[t||""]||ei.DEFAULT_NOTIFICATION_TYPES.success,topic:ei.DEFAULT_NOTIFICATION_TOPICS.global,message:r},i=Q().map(function(e){return(0,b.addNotification)(o)});return void 0===n||n?[i,$(3e3).map(function(e){return(0,b.removeNotification)(a)})]:[i]}var oJ=function(e,t){var r=t.payload,n=r.mapData,a=r.provider,o=r.options,i=void 0===o?{}:o,l=r.onSuccess,u=r.onError,c=r.closeModal;if(!oK(a,"uploadMap"))return e;var s=oH(oH({},e),{},{isProviderLoading:!0,currentProvider:a.name}),d=X({provider:a,payload:{mapData:n,options:i}}).bimap(function(e){return(0,b.exportFileSuccess)({response:e,provider:a,options:i,onSuccess:l,closeModal:c})},function(e){return(0,b.exportFileError)({error:e,provider:a,options:i,onError:u})});return(0,C.withTask)(s,d)},oQ=function(e,t){var r=t.payload,n=r.response,a=r.provider,o=r.options,i=void 0===o?{}:o,l=r.onSuccess,u=r.closeModal,c=oH(oH({},e),{},{isProviderLoading:!1,successInfo:n},i.isPublic?{}:{mapSaved:a.name}),s=[oq(l,{response:n,provider:a,options:i}),u&&Q().map(function(t){return(0,b.postSaveLoadSuccess)("Map saved to ".concat(e.currentProvider,"!"))})].filter(function(e){return e});return s.length?(0,C.withTask)(c,s):c},o$=function(e,t){var r=t.payload||"Saved / Load to ".concat(e.currentProvider," Success"),n=[Q().map(function(e){return(0,b.toggleModal)(null)}),Q().map(function(e){return(0,b.resetProviderStatus)()})].concat((0,v.Z)(oX({message:r})));return(0,C.withTask)(e,n)},o0=function(e,t){var r,n=t.payload,a=n.error,o=n.provider,i=n.onError,l=oH(oH({},e),{},{isProviderLoading:!1});if(r=a,r&&r.message===oY.FILE_CONFLICT_MSG)return l.mapSaved=o.name,(0,C.withTask)(l,[Q().map(function(e){return(0,b.toggleModal)(ei.OVERWRITE_MAP_ID)})]);l.providerError=(0,et.getError)(a);var u=oq(i,{error:a,provider:o});return u?(0,C.withTask)(l,u):l},o1=function(e,t){var r=t.payload,n=r.loadParams,a=r.provider,o=r.onSuccess,i=r.onError;if(!n)return e1().warn("load map error: loadParams is undefined"),e;if(!oK(a,"downloadMap"))return e;var l=oH(oH({},e),{},{isProviderLoading:!0,isCloudMapLoading:!0}),u=J({provider:a,payload:n}).bimap(function(e){return(0,b.loadCloudMapSuccess)({response:e,loadParams:n,provider:a,onSuccess:o,onError:i})},function(e){return(0,b.loadCloudMapError)({error:e,provider:a,onError:i})});return(0,C.withTask)(l,u)},o2=function(e,t){var r,n=t.payload,a=n.response,o=n.loadParams,i=n.provider,l=n.onSuccess,u=n.onError,c=a&&(0,et.isPlainObject)(a)?(0,et.isPlainObject)(a.map)?a.map.datasets&&a.map.config?null:Error("Load map response.map should be an object with property datasets or config"):Error('Load map response should be an object property "map"'):Error("Load map response is empty");if(c)return o0(e,{payload:{error:c,provider:i,onError:u}});var s,d,f,p,g,y,h,v,m=oH(oH({},e),{},{mapSaved:i.name,currentProvider:i.name,isCloudMapLoading:!1,isProviderLoading:!1}),O=(p=a.map,y=function(e){var t=H.DATASET_HANDLERS[ei.DATASET_FORMATS.csv];if(!e)return e1().warn("format is not provided in load map response, will use csv by default"),t;if(!H.DATASET_HANDLERS[e]){var r=Object.keys(ei.DATASET_FORMATS).map(function(e){return"'".concat(e,"'")}).join(", ");return e1().warn("unknown format ".concat(e,". Please use one of ").concat(r,", will use csv by default")),t}return H.DATASET_HANDLERS[e]}(g=a.format),h=(0,et.toArray)(p.datasets).map(function(e,t){if(g===ei.DATASET_FORMATS.keplergl)return y(e);var r=e&&e.info||{id:(0,et.generateHashId)(6)},n=y(e.data||e);return{info:r,data:n}}),v=oH(oH({},p.info),{},{provider:i.name,loadParams:o}),oH({datasets:h,info:v},p.config?{config:p.config}:{})),E=[Q().map(function(e){return(0,b.addDataToMap)(O)}),oq(l,{response:a,loadParams:o,provider:i}),Q().map(function(e){return(0,b.postSaveLoadSuccess)("Map from ".concat(i.name," loaded"))})].filter(function(e){return e});return E.length?(0,C.withTask)(m,E):m},o3=function(e,t){var r=(0,et.getError)(t.payload.error)||"Error loading saved map";e1().warn(r);var n=oH(oH({},e),{},{isProviderLoading:!1,isCloudMapLoading:!1,providerError:null});return(0,C.withTask)(n,oX({type:"error",message:r,delayClose:!1}))},o4=function(e){return oH(oH({},e),{},{isProviderLoading:!1,providerError:null,isCloudMapLoading:!1,successInfo:{}})};function o5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o5(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var o6=(u={},(0,m.Z)(u,b.ProviderActionTypes.EXPORT_FILE_TO_CLOUD,oJ),(0,m.Z)(u,b.ProviderActionTypes.EXPORT_FILE_SUCCESS,oQ),(0,m.Z)(u,b.ProviderActionTypes.EXPORT_FILE_ERROR,o0),(0,m.Z)(u,b.ProviderActionTypes.RESET_PROVIDER_STATUS,o4),(0,m.Z)(u,b.ProviderActionTypes.POST_SAVE_LOAD_SUCCESS,o$),(0,m.Z)(u,b.ProviderActionTypes.LOAD_CLOUD_MAP,o1),(0,m.Z)(u,b.ProviderActionTypes.LOAD_CLOUD_MAP_SUCCESS,o2),(0,m.Z)(u,b.ProviderActionTypes.LOAD_CLOUD_MAP_ERROR,o3),u),o8=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,O.Z)(o6,o7(o7(o7({},oW),e),{},{initialState:e}))},o9=o8();function ie(e){var t=e.reduce(function(e,t){return t.meta&&t.meta.bounds&&e.push(t.meta.bounds),e},[]);return 0===t.length?null:t.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.min(e[1],t[1]),Math.max(e[2],t[2]),Math.max(e[3],t[3])]},[180,90,-180,-90])}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ia=function(e){return(0,et.isPlainObject)(e)&&(0,et.isPlainObject)(e.config)&&e.version},io={centerMap:!0,keepExistingConfig:!1,autoCreateLayers:!0,autoCreateTooltips:!0},ii=function(e,t){var r,n,a,o=t.payload,i=o.datasets,l=o.config,u=o.info,c=ir(ir({},io),o.options);if(Array.isArray(i)&&(null===(r=i[0])||void 0===r?void 0:r.info.format)==="arrow"&&(null===(n=i[0])||void 0===n?void 0:n.info.id)&&(null===(a=i[0])||void 0===a?void 0:a.info.id)in e.visState.datasets)return t8([re("visState")(t5(nP,{datasets:i,options:c,config:l}))])(e);var s=l;ia(l)&&(s=e.visState.schema.parseSavedConfig(l));var d,f,p=e.visState.layers,g=function(e){var t;return c.centerMap&&ie(e)||void 0};return t8([re("visState")(t5(nP,{datasets:i,options:c,config:s})),(d=Boolean(u),f=re("visState")(t5(nU,{info:u})),d?f:t2),t7(function(e){var t,r=e.visState;return re("mapState")(t5(ay,t4({config:s,options:c,bounds:g((t=r.layers).filter(function(e){return!p.find(function(t){return t===e})}))})))}),re("mapStyle")(t5(aG,t4({config:s,options:c}))),re("uiState")(t5(ok,t4(null))),re("uiState")(t5(od,t4(null))),re("uiState")(t9(c.hasOwnProperty("readOnly")?{readOnly:c.readOnly}:{}))])(e)},il=function(e,t){var r=(0,H.filesToDataPayload)(t.result),n=t8([re("visState")(t9({fileLoading:!1,fileLoadingProgress:{}}))])(e);return t8(r.map(function(e){return t5(ii,t4(e))}))(n)},iu=ii,ic=function(e){return function(t){return t.overlayBlending!==ei.OVERLAY_BLENDINGS.normal.value?ir(ir({},t),{},{overlayBlending:e}):t}},is=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r){return ir(ir({},r),{},{layers:r.layers.map(function(r){if((!t||r.id===t)&&r.visConfigSettings.hasOwnProperty("darkBaseMapEnabled")){var n=r.config.visConfig;return r.updateLayerConfig({visConfig:ir(ir({},n),{},{darkBaseMapEnabled:e})})}return r})})}},id=function(e,t){var r=t.payload,n=e.mapStyle,a=function(e){var t;return null===(t=n.mapStyles[e])||void 0===t?void 0:t.colorMode},o=a(n.styleType),i=a(r.styleType),l=e.visState;if(i!==o)switch(i){case ei.BASE_MAP_COLOR_MODES.DARK:l=t8([ic(ei.OVERLAY_BLENDINGS.screen.value),is(!0)])(l);break;case ei.BASE_MAP_COLOR_MODES.LIGHT:l=t8([ic(ei.OVERLAY_BLENDINGS.darken.value),is(!1)])(l)}return ir(ir({},e),{},{visState:l,mapStyle:aN(n,{payload:ir({},r)})})},ip=function(e,t){var r=e.visState,n=r.layers.findIndex(function(e){return e===t.oldLayer}),a=(r=rK(r,t)).layers[n];if(null!=a&&a.visConfigSettings.hasOwnProperty("darkBaseMapEnabled")){var o=e.mapStyle,i=o.mapStyles[o.styleType].colorMode,l=a.config.visConfig.darkBaseMapEnabled;switch(i){case ei.BASE_MAP_COLOR_MODES.DARK:l||(r=is(!0,a.id)(r));break;case ei.BASE_MAP_COLOR_MODES.LIGHT:l&&(r=is(!1,a.id)(r))}}return ir(ir({},e),{},{visState:r})},ig=function(e,t){var r,n,a=ir(ir({},e),{},{visState:nS(e.visState,t),uiState:oM(e.uiState),mapState:ah(e.mapState,t)}),o=0!==a.visState.splitMaps.length,i=null===(r=a.uiState.mapControls)||void 0===r?void 0:null===(n=r.mapLegend)||void 0===n?void 0:n.active;return o&&!i&&(a.uiState=oy(a.uiState,{payload:{panelId:"mapLegend",index:t.payload}})),a},iy={keepExistingConfig:!0,centerMap:!0,autoCreateLayers:!1},ih=function(e,t){var r=t.payload,n=r.datasetToReplaceId,a=r.datasetToUse,o=r.options,i=ir(ir({},iy),void 0===o?{}:o);if(!e.visState.datasets[n])return e;var l=a.info.id;if(!l)return e;var u=ir(ir({},e),{},{visState:n6(e.visState,n,l)});return ii(u,t4({datasets:a,options:i}))},iv=(c={},(0,m.Z)(c,b.ActionTypes.ADD_DATA_TO_MAP,ii),(0,m.Z)(c,b.ActionTypes.MAP_STYLE_CHANGE,id),(0,m.Z)(c,b.ActionTypes.LAYER_TYPE_CHANGE,ip),(0,m.Z)(c,b.ActionTypes.LOAD_FILES_SUCCESS,il),(0,m.Z)(c,b.ActionTypes.TOGGLE_SPLIT_MAP,ig),(0,m.Z)(c,b.ActionTypes.REPLACE_DATA_IN_MAP,ih),c);function im(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ib=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,E.combineReducers)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?im(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):im(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({visState:ar(e.visState),mapState:aA(e.mapState),mapStyle:a2(e.mapStyle),uiState:oG(e.uiState),providerState:o8(e.providerState)},t))},iO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,n){return iv[n.type]?iv[n.type](r,n):ib(e,t)(r,n)}},iE=iO(),iT=function(e){return{mapState:e.mapState}},iS=function(e){return{mapStyle:e.mapStyle}},iA=function(e){return{visState:e.visState}},iP=function(e){return{uiState:e.uiState}};function iL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iL(Object(r),!0).forEach(function(t){(0,m.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var i_={};function ix(e,t){var r=iO(e,t),n=function(e,t){var n=t.payload,a=n.id,o=n.mint,i=n.mapboxApiAccessToken,l=n.mapboxApiUrl,u=n.mapStylesReplaceDefault,c=n.initialUiState,s=e[a]&&!1===o?e[a]:void 0;return iC(iC({},e),{},(0,m.Z)({},a,r(s,(0,b.keplerGlInit)({mapboxApiAccessToken:i,mapboxApiUrl:l,mapStylesReplaceDefault:u,initialUiState:c}))))},a=function(e,t){var r=t.payload;return Object.keys(e).reduce(function(t,n){return iC(iC({},t),n===r?{}:(0,m.Z)({},n,e[n]))},{})},o=function(e,t){var r=t.payload,n=r.oldId,a=r.newId;return Object.keys(e).reduce(function(t,r){return iC(iC({},t),(0,m.Z)({},r===n?a:r,e[r]))},{})};return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i_,i=arguments.length>1?arguments[1]:void 0;Object.keys(t).forEach(function(e){var n=r(t[e],(0,b._actionFor)(e,i));t=(0,b._updateProperty)(t,e,n)});var l=(e={},(0,m.Z)(e,b.ActionTypes.REGISTER_ENTRY,n),(0,m.Z)(e,b.ActionTypes.DELETE_ENTRY,a),(0,m.Z)(e,b.ActionTypes.RENAME_ENTRY,o),e);return(0,O.Z)(l,i_)(t,i)}}var iD,iR=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.plugin=function(t,r){var n=this;return"object"==typeof t&&(t=(0,O.Z)(t,{})),e(function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a;return o.type&&!(null!=r&&null!==(e=r.override)&&void 0!==e&&e[o.type])&&(i=n(a,o)),Object.keys(i).forEach(function(e){i=(0,b._updateProperty)(i,e,t(i[e],(0,b._actionFor)(e,o)))}),i})},t.initialState=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.keys(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return["mapState","mapStyle","visState","uiState"].concat((0,v.Z)(r)).reduce(function(r,n){return iC(iC({},r),e[n]&&t[n]?(0,m.Z)({},n,iC(iC({},e[n]),t[n])):(0,m.Z)({},n,e[n]||t[n]||{}))},{})}(r,t,a),i=ix(o,n);return e(i,o)},t}(ix(i_)),iI=r(12613),ik=["csv","json","geojson","arrow"],iw=["CSV","Json","GeoJSON","Arrow"],iM=(0,iI.createSelector)(function(e){return e.loaders},function(e){return[].concat(iw,(0,v.Z)(e.map(function(e){return e.name})))}),iF=(0,iI.createSelector)(function(e){return e.loaders},function(e){return[].concat(ik,(0,v.Z)(e.flatMap(function(e){return e.extensions})))}),ij=r(9021);function iZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iN(e,t){var r=e.visState,n=e.appName,a=r.datasets,o=t.selectedDataset,i=t.dataType,l=t.filtered,u=n||et.DEFAULT_DATA_NAME,c=a[o]?[a[o]]:Object.values(a);c.length&&c.forEach(function(e){var t=e.dataContainer,r=e.fields,n=e.label,a=e.filteredIdxCPU,o=l?(0,et.createIndexedDataContainer)(t,void 0===a?[]:a):t;if(i===ei.EXPORT_DATA_TYPE.CSV){var c=iU(o,r),s=new L.Blob([c],{type:"text/csv"});(0,et.downloadFile)(s,"".concat(u,"_").concat(n,".csv"))}})}function iU(e,t){var r,n=[t.map(function(e){return e.displayName||e.name})],a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return iZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iZ(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(e.rows(!0));try{for(a.s();!(r=a.n()).done;){var o=r.value;n.push(o.map(function(e,r){return(0,et.parseFieldValue)(e,t[r].type)}))}}catch(i){a.e(i)}finally{a.f()}return(0,ij.Jb)(n)}function iV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat((0,v.Z)(e),[C.taskMiddleware])}},46053:function(e,t,r){"use strict";r.d(t,{we:function(){return b},Bv:function(){return eF},ZP:function(){return eF}});var n,a,o,i,l=r(92777),u=r(82262),c=r(59499),s=r(63157),d=r(10748),f=r(45959),p=r(63553),g=r(37247),y=r(34813),h=r.n(y),v=r(51144),m=r.n(v)()({v0:null,v1:null}),b=m.v1,O=r(90116);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.version,n=t.key,a=t.properties;(0,l.Z)(this,e),(0,c.Z)(this,"version",void 0),(0,c.Z)(this,"key",void 0),(0,c.Z)(this,"properties",void 0),this.version=void 0===r?b:r,this.properties=void 0===a?null:a,this.key=void 0===n?"":n}return(0,u.Z)(e,[{key:"loadPropertiesOrApplySchema",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return this._getPropertyValueFromSchema("load",e,t,r)}},{key:"savePropertiesOrApplySchema",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return this._getPropertyValueFromSchema("save",e,t,r)}},{key:"_getPropertyValueFromSchema",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];arguments.length>3&&arguments[3];var a="_".concat(e);return(0,c.Z)({},this.key,this.properties?Object.keys(this.properties).reduce(function(o,i){return T(T({},o),i in t?r.properties[i]?r.properties[i][e]?r.properties[i][a](t[i],[].concat((0,O.Z)(n),[t]),o):{}:(0,c.Z)({},i,t[i]):{})},{}):t)}},{key:"_isCurrentVersion",value:function(){return this.version===b}},{key:"outdatedVersionError",value:function(){this._isCurrentVersion()||s.console.error("".concat(this.key," ").concat(this.version," is outdated. save should not be called anymore"))}},{key:"_save",value:function(){return this.outdatedVersionError(),this.save.apply(this,arguments)}},{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.savePropertiesOrApplySchema(e,t,r)}},{key:"_load",value:function(){return this.load.apply(this,arguments)}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.loadPropertiesOrApplySchema(e,t,r)}}]),e}(),A=r(24836);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,g.Z)(e);if(t){var a=(0,g.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var _=function(e){(0,f.Z)(r,e);var t=C(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"save",value:function(e){var t=this;return(0,c.Z)({},this.key,e.map(function(e){return t.savePropertiesOrApplySchema(e)[t.key]}))}},{key:"load",value:function(e){return(0,c.Z)({},this.key,e)}}]),r}(S),x={id:null,label:null,color:null,allData:null,fields:new _({key:"fields",version:m.v0,properties:{name:null,type:null}})},D=L(L({},x),{},{fields:new _({key:"fields",version:m.v1,properties:{name:null,type:null,format:null,analyzerType:null,metadata:null}})}),R=function(e){(0,f.Z)(r,e);var t=C(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","dataset"),e}return(0,u.Z)(r,[{key:"save",value:function(e){var t=e.dataContainer?L(L({},e),{},{allData:e.dataContainer.flattenData()}):e;return this.savePropertiesOrApplySchema(t)[this.key]}},{key:"load",value:function(e){var t=e.fields,r=e.allData,n=t;if(t[0]&&(!t[0].hasOwnProperty("format")||!t[0].hasOwnProperty("analyzerType"))){var a=t.map(function(e){return e.name}),o=(0,A.getSampleForTypeAnalyze)({fields:a,rows:r}),i=(0,A.getFieldsFromData)(o,a);(n=i.map(function(e,t){return L(L({},h()(i[t],["name","type","format"])),{},{analyzerType:i[t].analyzerType})})).forEach(function(e,r){t[r].type!==e.type&&s.console.warn("detect ".concat(e.name," type is now ").concat(e.type," instead of ").concat(t[r].type))})}return{data:{fields:n,rows:e.allData},info:h()(e,["id","label","color"])}}}]),r}(S),I=(n={},(0,c.Z)(n,m.v0,new R({key:"dataset",version:m.v0,properties:x})),(0,c.Z)(n,m.v1,new R({key:"dataset",version:m.v1,properties:D})),n);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var M=new S({version:m.v1,key:"customStyle",properties:{accessToken:null,custom:null,icon:null,id:null,label:null,url:null}}),F=function(e){(0,f.Z)(a,e);var t,r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,g.Z)(a);if(r){var n=(0,g.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function a(){var e;(0,l.Z)(this,a);for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),(0,c.Z)((0,d.Z)(e),"version",m.v1),(0,c.Z)((0,d.Z)(e),"key","mapStyles"),e}return(0,u.Z)(a,[{key:"save",value:function(e){var t=Object.keys(e).reduce(function(t,r){return w(w({},t),e[r].custom?(0,c.Z)({},r,M.save(e[r]).customStyle):{})},{});return(0,c.Z)({},this.key,t)}},{key:"load",value:function(e){return"object"==typeof e&&Object.keys(e).length?(0,c.Z)({},this.key,e):{}}}]),a}(S),j={styleType:null,topLayerGroups:null,visibleLayerGroups:null,buildingLayer:null,mapStyles:new F},Z={styleType:null,topLayerGroups:null,visibleLayerGroups:null,threeDBuildingColor:null,backgroundColor:null,mapStyles:new F},N=(a={},(0,c.Z)(a,m.v0,new S({version:m.v0,properties:j,key:"mapStyle"})),(0,c.Z)(a,m.v1,new S({version:m.v1,properties:Z,key:"mapStyle"})),a);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var G={bearing:null,dragRotate:null,latitude:null,longitude:null,pitch:null,zoom:null},B=V(V({},G),{},{isSplit:null,isViewportSynced:null,isZoomLocked:null,splitMapViewports:null}),Y=(o={},(0,c.Z)(o,m.v0,new S({version:m.v0,properties:G,key:"mapState"})),(0,c.Z)(o,m.v1,new S({version:m.v1,properties:B,key:"mapState"})),o),z=r(4730),H=r(17674),W=r(75485),q=r(19487),K=r.n(q),X=["enlarged","view"];function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,g.Z)(e);if(t){var a=(0,g.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var ee=["name","type"],et=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),e}return(0,u.Z)(r,[{key:"save",value:function(e){return(0,c.Z)({},this.key,null!==e?this.savePropertiesOrApplySchema(e)[this.key]:null)}},{key:"load",value:function(e,t,r){var n,a,o=t.slice(-1),i=(0,H.Z)(o,1)[0],l=this.key;return"geojson"===i.type&&"sizeField"===this.key&&e&&(a=[0,50],l=(n=i).visConfig.extruded?"heightField":n.visConfig.stroked?"sizeField":10!==n.visConfig.radius||n.visConfig.radiusRange.some(function(e,t){return e!==a[t]})?"radiusField":"sizeField"),{visualChannels:Q(Q({},r.visualChannels||{}),{},(0,c.Z)({},l,e))}}}]),r}(S),er=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),e}return(0,u.Z)(r,[{key:"save",value:function(e){return(0,c.Z)({},this.key,e)}},{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,H.Z)(n,1)[0];return"sizeScale"===this.key&&"geojson"===a.type?{}:{visualChannels:Q(Q({},r.visualChannels||{}),{},(0,c.Z)({},this.key,e))}}}]),r}(S),en=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),e}return(0,u.Z)(r,[{key:"load",value:function(e,t,r){return{config:Q(Q({},r.config||{}),{},(0,c.Z)({},this.key,e))}}}]),r}(S),ea=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),e}return(0,u.Z)(r,[{key:"load",value:function(e,t,r){return{config:Q(Q({},r.config||{}),{},{columns:Object.keys(e).reduce(function(t,r){return Q(Q({},t),{},(0,c.Z)({},r,e[r].value))},{})})}}}]),r}(S),eo=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),e}return(0,u.Z)(r,[{key:"load",value:function(e,t,r){var n=r.config||{};return{config:Q(Q({},n),{},{visConfig:Q(Q({},n.visConfig||{}),{},(0,c.Z)({},this.key,e))})}}}]),r}(S),ei=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),(0,c.Z)((0,d.Z)(e),"key","visConfig"),e}return(0,u.Z)(r,[{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,H.Z)(n,1)[0],o={geojson:{extruded:"enable3d",elevationRange:"heightRange"}};if(a.type in o){var i=o[a.type];return{config:Q(Q({},r.config||{}),{},{visConfig:Object.keys(e).reduce(function(t,r){return Q(Q({},t),i[r]?(0,c.Z)({},i[r],e[r]):(0,c.Z)({},r,e[r]))},{})})}}return{config:Q(Q({},r.config||{}),{},{visConfig:e})}}}]),r}(S),el=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"version",m.v0),e}return(0,u.Z)(r,[{key:"load",value:function(e){return{}}}]),r}(S),eu={id:null,type:null,dataId:new en({key:"dataId"}),label:new en({key:"label"}),color:new en({key:"color"}),isVisible:new en({key:"isVisible"}),hidden:new en({key:"hidden"}),visConfig:new ei({key:"visConfig"}),columns:new ea,colorField:new et({properties:ee,key:"colorField"}),colorScale:new er({key:"colorScale"}),sizeField:new et({properties:ee,key:"sizeField"}),sizeScale:new er({key:"sizeScale"}),enable3d:new eo({key:"enable3d"}),colorAggregation:new eo({key:"colorAggregation"}),sizeAggregation:new eo({key:"sizeAggregation"}),isAggregated:new el},ec=function(e){(0,f.Z)(r,e);var t=$(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"save",value:function(e,t){return(0,c.Z)({},this.key,Object.keys(e).reduce(function(t,r){var n;return Q(Q({},t),null!==(n=e[r])&&void 0!==n&&n.value?(0,c.Z)({},r,e[r].value):{})},{}))}},{key:"load",value:function(e){return{columns:e}}}]),r}(S),es=function(e){(0,f.Z)(r,e);var t=$(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"save",value:function(e){return(0,c.Z)({},this.key,e.map(function(e){return Q(Q({},e),{},{field:e.field?h()(e.field,["name","type"]):null})}))}},{key:"load",value:function(e){return{textLabel:Array.isArray(e)?e:[e]}}}]),r}(S),ed={geojson:function(e,t,r){var n=t.slice(-1),a=(0,H.Z)(n,1)[0],o=!e.hasOwnProperty("strokeColorField"),i=e.radiusField||a.config.visConfig.radius!==W.LAYER_VIS_CONFIGS.radius.defaultValue;return o&&!i&&a.config.visConfig.stroked?{strokeColorField:e.colorField,strokeColorScale:e.colorScale}:{}}},ef=function(e){(0,f.Z)(r,e);var t=$(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"save",value:function(e,t){var r=t.slice(-1),n=(0,H.Z)(r,1)[0];return(0,c.Z)({},this.key,Object.keys(e).reduce(function(t,r){var a;return Q(Q({},t),{},(a={},(0,c.Z)(a,e[r].field,n.config[e[r].field]?h()(n.config[e[r].field],["name","type"]):null),(0,c.Z)(a,e[r].scale,n.config[e[r].scale]),a))},{}))}},{key:"load",value:function(e,t,r){var n=t.slice(-1),a=(0,H.Z)(n,1)[0],o=ed[a.type]?ed[a.type](e,t,r):{};return Q(Q({},r),{},{config:Q(Q(Q({},r.config||{}),e),o)})}}]),r}(S),ep={point:function(e,t,r){var n={},a=t.slice(-2,-1),o=(0,H.Z)(a,1)[0];return e.hasOwnProperty("filled")||e.strokeColor||e.strokeColorRange||(n.strokeColor=o.config.color,n.strokeColorRange=K()(e.colorRange),e.outline&&(n.filled=!1)),n},geojson:function(e,t,r){var n={},a=t.slice(-2,-1),o=(0,H.Z)(a,1)[0],i=o.visualChannels&&!o.visualChannels.hasOwnProperty("strokeColorField")&&!e.strokeColor&&!e.strokeColorRange,l=o.visualChannels&&o.visualChannels.radiusField||e&&e.radius!==W.LAYER_VIS_CONFIGS.radius.defaultValue;return i&&(n.strokeColor=o.config.color,n.strokeColorRange=K()(e.colorRange),l&&(n.filled=!0,n.stroked=!1)),n}},eg=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","visConfig"),e}return(0,u.Z)(r,[{key:"load",value:function(e,t,r){var n=t.slice(-2,-1),a=(0,H.Z)(n,1)[0],o=ep[a.type]?ep[a.type](e,t,r):{};return{visConfig:Q(Q({},e),o)}}}]),r}(S),ey={id:null,type:null,config:new S({version:m.v1,key:"config",properties:{dataId:null,label:null,color:null,highlightColor:null,columns:new ec({version:m.v1,key:"columns"}),isVisible:null,visConfig:new eg({version:m.v1}),hidden:null,textLabel:new es({version:m.v1,key:"textLabel"})}}),visualChannels:new ef({version:m.v1,key:"visualChannels"})},eh=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","layers"),e}return(0,u.Z)(r,[{key:"save",value:function(e,t){var r=this,n=t.slice(-1),a=(0,H.Z)(n,1)[0];return(0,c.Z)({},this.key,a.layerOrder.reduce(function(t,n){var a=(0,A.findById)(n)(e);return null!=a&&a.isValidToSave()&&t.push(r.savePropertiesOrApplySchema(a).layers),t},[]))}},{key:"load",value:function(e){var t=this;return(0,c.Z)({},this.key,e?e.map(function(r){return t.loadPropertiesOrApplySchema(r,e).layers}):[])}}]),r}(S),ev=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","filters"),e}return(0,u.Z)(r,[{key:"save",value:function(e){var t=this;return{filters:e.filter(A.isFilterValidToSave).map(function(e){return t.savePropertiesOrApplySchema(e).filters})}}},{key:"load",value:function(e){var t=this;return{filters:null==e?void 0:e.map(function(e){return t.loadPropertiesOrApplySchema(e).filters}).map(function(e){var t=e.enlarged,r=e.view,n=(0,z.Z)(e,X);return Q(Q({},n),{},{view:r||(t?W.FILTER_VIEW_TYPES.enlarged:W.FILTER_VIEW_TYPES.side)})})}}}]),r}(S),em=["tooltip","brush"],eb=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","interactionConfig"),e}return(0,u.Z)(r,[{key:"save",value:function(e){return Array.isArray(this.properties)?(0,c.Z)({},this.key,this.properties.reduce(function(t,r){return Q(Q({},t),e[r].enabled?(0,c.Z)({},r,e[r].config):{})},{})):{}}},{key:"load",value:function(e){return Array.isArray(this.properties)?(0,c.Z)({},this.key,this.properties.reduce(function(t,r){return Q(Q({},t),(0,c.Z)({},r,Q(Q({},e[r]||{}),{},{enabled:Boolean(e[r])})))},{})):{}}}]),r}(S),eO=[].concat(em,["geocoder","coordinate"]),eE=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","interactionConfig"),e}return(0,u.Z)(r,[{key:"save",value:function(e){return Array.isArray(this.properties)?(0,c.Z)({},this.key,this.properties.reduce(function(t,r){return Q(Q({},t),{},(0,c.Z)({},r,Q(Q({},e[r].config),{},{enabled:e[r].enabled})))},{})):{}}},{key:"load",value:function(e){var t=this;return Object.keys(e).forEach(function(r){if("tooltip"===r){var n=e[r].fieldsToShow;if(!(0,A.notNullorUndefined)(n))return(0,c.Z)({},t.key,e);Object.keys(n).forEach(function(e){n[e]=n[e].map(function(e){return e.name?e:{name:e,format:null}})})}}),(0,c.Z)({},this.key,e)}}]),r}(S),eT={dataId:null,id:null,name:null,type:null,value:null,enlarged:null},eS=function(e){(0,f.Z)(r,e);var t=$(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"save",value:function(e){return(0,c.Z)({},this.key,e?this.savePropertiesOrApplySchema(e)[this.key]:null)}},{key:"load",value:function(e){return(0,c.Z)({},this.key,e)}}]),r}(S),eA=function(e){(0,f.Z)(r,e);var t=$(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"convertLayerSettings",value:function(e,t){var r=(0,H.Z)(t,2),n=r[0],a=r[1];return"boolean"==typeof a?Q(Q({},e),{},(0,c.Z)({},n,a)):a&&"object"==typeof a&&a.isAvailable?Q(Q({},e),{},(0,c.Z)({},n,Boolean(a.isVisible))):e}},{key:"load",value:function(e){var t=this;return Array.isArray(e)&&e.length?{splitMaps:e.map(function(e){return Q(Q({},e),{},{layers:Object.entries(e.layers||{}).reduce(t.convertLayerSettings,{})})})}:{splitMaps:[]}}}]),r}(S),eP=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,l.Z)(this,r);for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,c.Z)((0,d.Z)(e),"key","effects"),e}return(0,u.Z)(r,[{key:"save",value:function(e,t){var r=this,n=t.slice(-1),a=(0,H.Z)(n,1)[0];return(0,c.Z)({},this.key,a.effectOrder.reduce(function(t,n){var a=(0,A.findById)(n)(e);return null!=a&&a.isValidToSave()&&t.push(r.savePropertiesOrApplySchema(a).effects),t},[]))}},{key:"load",value:function(e){var t=this;return(0,c.Z)({},this.key,e.map(function(r){var n=r.config?Q(Q({id:r.id},r.config),{},{parameters:Q({},r.config.params||{})}):r;return t.loadPropertiesOrApplySchema(n,e).effects}))}}]),r}(S),eL=Q(Q({},eT),{},{plotType:null,animationWindow:null,yAxis:new eS({version:m.v1,key:"yAxis",properties:{name:null,type:null}}),view:null,layerId:null,speed:null,enabled:null}),eC={filters:new ev({version:m.v0,properties:eT}),layers:new eh({version:m.v0,properties:eu}),interactionConfig:new eb({version:m.v0,properties:em}),layerBlending:null,overlayBlending:null},e_={filters:new ev({version:m.v1,properties:eL}),layers:new eh({version:m.v1,properties:ey}),effects:new eP({version:m.v1,properties:{id:null,type:null,isEnabled:null,parameters:null}}),interactionConfig:new eE({version:m.v1,properties:eO}),layerBlending:null,overlayBlending:null,splitMaps:new eA({key:"splitMaps",version:m.v1}),animationConfig:new S({version:m.v1,properties:{currentTime:null,speed:null},key:"animationConfig"}),editor:new S({version:m.v1,properties:{features:null,visible:null},key:"editor"})},ex=function(e){(0,f.Z)(r,e);var t=$(r);function r(){return(0,l.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return this.savePropertiesOrApplySchema(e,t,r)}},{key:"load",value:function(e){return this.loadPropertiesOrApplySchema(e)}}]),r}(S),eD=new S({version:m.v0,properties:eC,key:"visState"}),eR=new ex({version:m.v1,properties:e_,key:"visState"}),eI=(i={},(0,c.Z)(i,m.v0,{save:function(e){return eD.save(e)},load:function(e){var t;return eR.load(null===(t=eD.load(e))||void 0===t?void 0:t.visState)}}),(0,c.Z)(i,m.v1,eR),i);function ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ew(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eM={visState:eI,mapState:Y,mapStyle:N},eF=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.reducers,n=t.datasets,a=t.validVersions,o=t.version;(0,l.Z)(this,e),(0,c.Z)(this,"_validVersions",void 0),(0,c.Z)(this,"_version",void 0),(0,c.Z)(this,"_reducerSchemas",void 0),(0,c.Z)(this,"_datasetSchema",void 0),(0,c.Z)(this,"_datasetLastSaved",void 0),(0,c.Z)(this,"_savedDataset",void 0),this._validVersions=void 0===a?m:a,this._version=void 0===o?b:o,this._reducerSchemas=void 0===r?eM:r,this._datasetSchema=void 0===n?I:n,this._datasetLastSaved=null,this._savedDataset=null}return(0,u.Z)(e,[{key:"save",value:function(e){return{datasets:this.getDatasetToSave(e),config:this.getConfigToSave(e),info:ew({app:"kepler.gl",created_at:new Date().toString()},this.getMapInfo(e))}}},{key:"getMapInfo",value:function(e){return e.visState.mapInfo}},{key:"load",value:function(e,t){return 1===arguments.length&&(0,A.isPlainObject)(arguments[0])&&(Array.isArray(arguments[0].datasets)||(0,A.isPlainObject)(arguments[0].config))?this.load(arguments[0].datasets,arguments[0].config):ew(ew({},Array.isArray(e)?{datasets:this.parseSavedData(e)}:{}),t?{config:this.parseSavedConfig(t)}:{})}},{key:"getDatasetToSave",value:function(e){var t=this;if(!this.hasDataChanged(e))return this._savedDataset;var r=e.visState,n=Object.values(r.datasets).map(function(e){return{version:t._version,data:t._datasetSchema[t._version].save(e)}});return this._datasetLastSaved=r.datasets,this._savedDataset=n,n}},{key:"getConfigToSave",value:function(e){var t=this,r=Object.keys(this._reducerSchemas).reduce(function(r,n){return ew(ew({},r),e[n]?t._reducerSchemas[n][t._version].save(e[n]):{})},{});return{version:this._version,config:r}}},{key:"parseSavedData",value:function(e){var t=this;return e.reduce(function(e,r){var n=t.validateVersion(r.version);return n&&e.push(t._datasetSchema[n].load(r.data)),e},[])}},{key:"parseSavedConfig",value:function(e){var t=this,r=e.version,n=e.config;arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=this.validateVersion(r);return a?Object.keys(n).reduce(function(e,r){return ew(ew({},e),r in t._reducerSchemas?t._reducerSchemas[r][a].load(n[r]):{})},{}):null}},{key:"validateVersion",value:function(e){return e?this._validVersions[e]?e:(s.console.error("".concat(e," is not a valid version")),null):(s.console.error("There is no version number associated with this saved map"),null)}},{key:"hasDataChanged",value:function(e){return!0}}]),e}())},24836:function(e,t,r){"use strict";r.r(t),r.d(t,{ACCEPTED_ANALYZER_TYPES:function(){return tM},ArrowDataContainer:function(){return ng},DEFAULT_DATA_NAME:function(){return tQ},DEFAULT_EXPORT_JSON_SETTINGS:function(){return t$},DEFAULT_FILTER_STRUCTURE:function(){return ao},DEFAULT_HTML_NAME:function(){return tX},DEFAULT_IMAGE_NAME:function(){return tK},DEFAULT_JSON_NAME:function(){return tJ},DataForm:function(){return nx},DataRow:function(){return nc},FIELD_DISPLAY_FORMAT:function(){return to},FILTER_COMPONENTS:function(){return aa},FILTER_ID_LENGTH:function(){return ai},FILTER_UPDATER_PROPS:function(){return at},LAYER_FILTERS:function(){return al},LIMITED_FILTER_EFFECT_PROPS:function(){return ar},MAPBOX_TILE_SIZE:function(){return rT},SAMPLE_TIMELINE:function(){return tm},TIMELINE_MODES:function(){return tv},TimestampStepMap:function(){return n8},addNewLayersToSplitMap:function(){return rX},adjustValueToFilterDomain:function(){return aE},aggregate:function(){return eY},analyzerTypeToFieldType:function(){return tV},applyCustomFormat:function(){return tg},applyDefaultFormat:function(){return tf},applyFilterFieldName:function(){return aF},applyFiltersToDatasets:function(){return aM},applyValueMap:function(){return td},arrayDifference:function(){return X},arrayInsert:function(){return B},arrayMove:function(){return tu},arrowDataTypeToAnalyzerDataType:function(){return nh},arrowDataTypeToFieldType:function(){return ny},calculateExportImageSize:function(){return t4},camelToTitle:function(){return M},camelize:function(){return F},capitalizeFirstLetter:function(){return w},clamp:function(){return e0},colorMaybeToRGB:function(){return O},computeDeckEffects:function(){return r3},computeSplitMapLayers:function(){return r$},convertToPng:function(){return t5},createDataContainer:function(){return nR},createIndexedDataContainer:function(){return nI},createLinearGradient:function(){return b},createNotification:function(){return et},dataURItoBlob:function(){return t7},datasetColorMaker:function(){return tR},datetimeFormatter:function(){return th},defaultFormatter:function(){return tn},diffFilters:function(){return aO},domtoimage:function(){return eI},downloadFile:function(){return t6},durationDay:function(){return n5},durationHour:function(){return n4},durationMinute:function(){return n3},durationSecond:function(){return n2},durationWeek:function(){return n7},durationYear:function(){return n6},editBottomMapStyle:function(){return rU},editTopMapStyle:function(){return rN},enlargedHistogramBins:function(){return ae},errorNotification:function(){return er},exportHtml:function(){return rr},exportImage:function(){return t8},exportImageError:function(){return ea},exportJson:function(){return rt},exportMap:function(){return rn},exportMapToHTML:function(){return tY},exportToJsonString:function(){return t9},exporters:function(){return ra},featureToFilterValue:function(){return aZ},filterDataByFilterTypes:function(){return am},filterDatasetCPU:function(){return aV},filterObjectByPredicate:function(){return W},findById:function(){return K},findDefaultColorField:function(){return tw},fixEffectOrder:function(){return r4},flattenMessages:function(){return rf},floatFormatter:function(){return ta},formatNumber:function(){return function e(t,r){switch(r){case J.ALL_FIELD_TYPES.integer:if(t<0)return"-".concat(e(-t,"integer"));if(t<1e3)return"".concat(Math.round(t));if(t<1e4)return(0,eW.WU)(",")(Math.round(t));return ty(t);case J.ALL_FIELD_TYPES.real:if(t<0)return"-".concat(e(-t,"number"));if(t<1e3)return(0,eW.WU)(".4~r")(t);if(t<1e4)return(0,eW.WU)(",.2~f")(t);return ty(t);default:return e(t,"real")}}},formatNumberByStep:function(){return aC},generateHashId:function(){return R},generateHashIdFromString:function(){return I},generatePolygonFilter:function(){return aU},getBooleanFormatter:function(){return tp},getCenterAndZoomFromBounds:function(){return rL},getCentroid:function(){return nX},getColorGroupByName:function(){return v},getColumnFilterProps:function(){return ak},getColumnFormatter:function(){return ts},getDefaultFilter:function(){return au},getDefaultFilterPlotType:function(){return aw},getDefaultLayerGroupVisibility:function(){return rj},getError:function(){return function e(t){return t?"string"==typeof t?t:t instanceof Error?t.message:"object"==typeof t?t.error?e(t.error):t.err?e(t.err):t.message?e(t.message):JSON.stringify(t):null:"Something went wrong"}},getFieldFormatLabels:function(){return tG},getFieldsFromData:function(){return tN},getFilterFunction:function(){return ah},getFilterIdInFeature:function(){return aN},getFilterPlot:function(){return aB},getFilterProps:function(){return ag},getFilterRecord:function(){return ab},getFormatLabels:function(){return tB},getFormatValue:function(){return tA},getFormatter:function(){return tc},getFrequency:function(){return eG},getHexFields:function(){return n$},getHistogram:function(){return aL},getInitialMapLayersForSplitMap:function(){return rQ},getIntervalBins:function(){return aY},getLatLngBounds:function(){return e$},getLinearDomain:function(){return nW},getLogDomain:function(){return nq},getMapJSON:function(){return re},getMapLayersFromSplitMaps:function(){return na},getMode:function(){return eB},getNumericFieldDomain:function(){return aT},getNumericStepSize:function(){return aS},getOrdinalDomain:function(){return nH},getPolygonFilterFunctor:function(){return ay},getQuantileDomain:function(){return nz},getRoundingDecimalFromStep:function(){return te},getSampleContainerData:function(){return nk},getSampleData:function(){return e1},getSampleForTypeAnalyze:function(){return tZ},getScaleFromImageSize:function(){return t3},getSortingFunction:function(){return e6},getStyleDownloadUrl:function(){return rG},getStyleImageIcon:function(){return rB},getTimeWidgetHintFormatter:function(){return aH},getTimeWidgetTitleFormatter:function(){return aD},getTimelineFromAnimationConfig:function(){return tb},getTimelineFromFilter:function(){return tO},getTimestampFieldDomain:function(){return aA},getViewportFromMapState:function(){return no},h3IsValid:function(){return nK.rg},hasMobileWidth:function(){return Y},hasOwnProperty:function(){return e5},hasPortableWidth:function(){return z},hexToRgb:function(){return g},histogramBins:function(){return n9},histogramConstruct:function(){return aP},idToPolygonGeo:function(){return nJ},insertValue:function(){return Z},isChrome:function(){return k},isFilterValidToSave:function(){return aR},isFunction:function(){return q},isHexColor:function(){return y},isInPolygon:function(){return ax},isInRange:function(){return a_},isMSEdge:function(){return t2},isNumber:function(){return e4},isObject:function(){return N},isPlainObject:function(){return U},isRgbColor:function(){return E},isSideFilter:function(){return aW},isStyleUsingMapboxTiles:function(){return r6},isTest:function(){return H},isValidFilterValue:function(){return aI},isValidMapInfo:function(){return rH},isValidStyleUrl:function(){return rV},isValidTimeDomain:function(){return az},mergeFilterDomainStep:function(){return aj},mergeLayerGroupVisibility:function(){return rz},mergeMessages:function(){return rp},normalizeColor:function(){return T},normalizeEvent:function(){return rC},normalizeSliderValue:function(){return tt},notNullorUndefined:function(){return e3},numberSort:function(){return e7},observeDimensions:function(){return rb},onViewPortChange:function(){return nn},parseFieldValue:function(){return ti},preciseRound:function(){return e8},removeLayerFromSplitMaps:function(){return rJ},renameDuplicateFields:function(){return tU},reorderEffectOrder:function(){return r5},reverseColorRange:function(){return m},rgbToHex:function(){return h},roundToFour:function(){return e9},roundValToStep:function(){return tr},scaleMapStyleByResolution:function(){return rY},set:function(){return G},setLayerBlending:function(){return rc},setStyleSheetBaseHref:function(){return eO},shouldApplyFilter:function(){return ac},snapToMarks:function(){return eJ},successNotification:function(){return en},timeToUnixMilli:function(){return e2},toArray:function(){return j},transformRequest:function(){return r8},unique:function(){return eQ},unobserveDimensions:function(){return rO},updateFilterDataId:function(){return av},validateBounds:function(){return rP},validateEffectParameters:function(){return r7},validateFilter:function(){return af},validateFilterWithData:function(){return ap},validateFiltersUpdateDatasets:function(){return aG},validateInputData:function(){return tj},validatePolygonFilter:function(){return as},validateToken:function(){return r_}});var n,a,o,i,l,u,c=r(59499),s=r(17674),d=r(862);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e){var t=y(e);if(!t)return[0,0,0];var r=parseInt(t[1],16),n=parseInt(t[2],16),a=parseInt(t[3],16);return[r,n,a]}function y(e){return/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e)}function h(e){var t=(0,s.Z)(e,3),r=t[0],n=t[1],a=t[2];return"#".concat([r,n,a].map(function(e){var t,r;return 1===(r=e.toString(16)).length?"0".concat(r):r}).join("")).toUpperCase()}function v(e){return e&&"string"==typeof e.name?e.name.replace(/\b[^a-zA-Z]+$/,""):null}function m(e,t){return t?p(p({},t),{},{reversed:e,colors:t.colors.slice().reverse()}):null}function b(e,t){var r=parseFloat((100/t.length).toFixed(2)),n=t.map(function(e,t){return"rgba(".concat(e.join(","),", 1) ").concat(r*t,"%, rgba(").concat(e.join(","),", 1) ").concat(r*(t+1),"%")});return"linear-gradient(to ".concat(e,", ").concat(n.join(","),")")}function O(e){if(E(e))return e;if("string"==typeof e){var t=(0,d.B8)(e);if(Number.isFinite(null==t?void 0:t.r)&&Number.isFinite(null==t?void 0:t.g)&&Number.isFinite(null==t?void 0:t.b))return[t.r,t.g,t.b]}return null}function E(e){return Boolean(e&&Array.isArray(e)&&3===e.length&&e.every(function(e){return Number.isFinite(e)&&e<=255&&e>=0}))}function T(e){return e.map(function(e){return e/255})}var S=r(4730),A=r(83618),P=r(90116),L=r(63157),C=r.n(L),_=r(40228);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return Math.random().toString(36).substr(e)}function I(e){var t,r,n,a=0;if(0===e.length)return a.toString();for(t=0,n=e.length;t<n;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;return a.toString(36)}function k(){return C().chrome&&C().chrome.webstore}function w(e){return"string"==typeof e?e.charAt(0).toUpperCase()+e.slice(1):e}function M(e){return w(e.replace(/([A-Z])/g," $1"))}var F=function(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0===Number(e)?"":0===t?e.toLowerCase():e.toUpperCase()})};function j(e){return Array.isArray(e)?e:null==e?[]:[e]}var Z=function(e,t,r){return Array.isArray(e)&&"number"==typeof t?[].concat((0,P.Z)(e.slice(0,t)),[r],(0,P.Z)(e.slice(t+1,e.length))):D(D({},e),{},(0,c.Z)({},t,r))};function N(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function U(e){return e===Object(e)&&"function"!=typeof e&&!Array.isArray(e)}var V=function e(t,r,n){var a=(0,A.Z)(t),o=a[0],i=a.slice(1);return N(n)?0===i.length?Z(n,o,r):Z(n,o,e(i,r,n.hasOwnProperty(o)?n[o]:{})):n},G=function(e,t,r){return null===r?r:V(e,t,r)};function B(e,t,r){return Array.isArray(e)?[].concat((0,P.Z)(e.slice(0,t)),[r],(0,P.Z)(e.slice(t))):e}function Y(e){return C().matchMedia("(max-width: ".concat(e.palm,"px)")).matches}function z(e){return C().matchMedia("(max-width: ".concat(e.desk,"px)")).matches}function H(){var e;return void 0!==_&&(null==_?void 0:null===(e=_.env)||void 0===e?void 0:"production")==="test"}function W(e,t){return Object.entries(e).reduce(function(e,r){return t(r[0],r[1])?D(D({},e),{},(0,c.Z)({},r[0],r[1])):e},{})}function q(e){return"function"==typeof e}function K(e){return function(t){return t.find(function(t){return t.id===e})}}function X(e){return function(t){return e.reduce(function(e,r){var n=K(r.id)(t);return n?[].concat((0,P.Z)(e),[n]):e},[])}}var J=r(75485),Q=["message","type","topic","id","count"];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function et(e){var t=e.message,r=void 0===t?J.DEFAULT_NOTIFICATION_MESSAGE:t,n=e.type,a=void 0===n?J.DEFAULT_NOTIFICATION_TYPES.info:n,o=e.topic,i=void 0===o?J.DEFAULT_NOTIFICATION_TOPICS.global:o,l=e.id,u=void 0===l?R(J.DEFAULT_UUID_COUNT):l,c=e.count,s=void 0===c?1:c;return ee(ee({},(0,S.Z)(e,Q)),{},{id:u,message:r,type:a,topic:i,count:s>99?99:s})}var er=function(e){return ee(ee({},et(e)),{},{type:J.DEFAULT_NOTIFICATION_TYPES.error})},en=function(e){return ee(ee({},et(e)),{},{type:J.DEFAULT_NOTIFICATION_TYPES.success})},ea=function(e){return er(ee(ee({},e),{},{id:"EXPORT_IMAGE_ERROR_ID",topic:J.DEFAULT_NOTIFICATION_TOPICS.global,message:"Failed to export image, please take a screenshot of the javascript console, report the with [this link](".concat(J.BUG_REPORT_LINK,") ")}))},eo=r(83594),ei=r.n(eo),el=r(16223),eu=r.n(el);function ec(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}function es(e){return new Promise(function(t,r){var n=new(C()).Image;n.onload=function(){t(n)},n.onerror=function(t){var n=J.IMAGE_EXPORT_ERRORS.dataUri;ei().log(e),r({event:t,message:n})},n.src=e})}function ed(e){return -1!==e.search(/^(data:)/)}function ef(e){var t,r,n,a,o=((r=/\.([^\.\/]*?)$/g.exec(e))?r[1]:"").toLowerCase();return({woff:n="application/font-woff",woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:a="image/jpeg",jpeg:a,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[o]||""}function ep(e,t){return"data:".concat(t,";base64,").concat(e)}function eg(e){return -1!==e.search(/url\(['"]?(data:)([^'"]+?)['"]?\)/)}function ey(e){var t;return e.toBlob?new Promise(function(t){e.toBlob(t)}):new Promise(function(t){for(var r=C().atob(e.toDataURL().split(",")[1]),n=r.length,a=new Uint8Array(n),o=0;o<n;o++)a[o]=r.charCodeAt(o);t(new(C()).Blob([a],{type:"image/png"}))})}function eh(e){var t=em(e,"border-left-width"),r=em(e,"border-right-width");return e.scrollWidth+t+r}function ev(e){var t=em(e,"border-top-width"),r=em(e,"border-bottom-width");return e.scrollHeight+t+r}function em(e,t){var r=C().getComputedStyle(e).getPropertyValue(t);return parseFloat(r.replace("px",""))}function eb(e,t){return t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime()),new Promise(function(r){var n,a=new(C()).XMLHttpRequest;if(a.onreadystatechange=function(){if(4===a.readyState){if(200!==a.status){n?r(n):i("cannot fetch resource: ".concat(e,", status: ").concat(a.status));return}var t=new(C()).FileReader;t.onloadend=function(){r(t.result.split(/,/)[1])},t.readAsDataURL(a.response)}},a.ontimeout=function(){n?r(n):i("timeout of ".concat(3e4,"ms occurred while fetching resource: ").concat(e))},a.responseType="blob",a.timeout=3e4,a.open("GET",e,!0),a.send(),t.imagePlaceholder){var o=t.imagePlaceholder.split(/,/);o&&o[1]&&(n=o[1])}function i(e){ei().error(e),r("")}})}function eO(e,t){return eg(e)?e:e.replace(/url\(['"]?([^'"]+?)['"]?\)/g,function(e,r){var n,a,o=/^http/i.test(r)?r:new URL(r,t).href;return"url('".concat(o,"')")})}var eE=r(64130),eT=r.n(eE),eS=function(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,a,o){return!t(e)||eg(e)?Promise.resolve(e):Promise.resolve(e).then(r).then(function(t){var r=Promise.resolve(e);return t.forEach(function(e){r=r.then(function(t){return n(t,e,a,o)})}),r})},shouldProcess:t,impl:{readUrls:r,inline:n}};function t(t){return -1!==t.search(e)}function r(t){for(var r,n=[];null!==(r=e.exec(t));)n.push(r[1]);return n.filter(function(e){return!ed(e)})}function n(e,t,r,n){return Promise.resolve(t).then(function(e){var t,n,a,o,i;return r?(o=(a=eu().implementation.createHTMLDocument()).createElement("base"),a.head.appendChild(o),i=a.createElement("a"),a.body.appendChild(i),o.href=r,i.href=e,i.href):e}).then(function(e){return"function"==typeof n?n(e):eb(e,eC.impl.options)}).then(function(e){return ep(e,ef(t))}).then(function(r){var n,a;return e.replace(RegExp("(url\\(['\"]?)(".concat(t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),")(['\"]?\\))"),"g"),"$1".concat(r,"$3"))})}}(),eA=function(){return{resolveAll:function(){return e().then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join("\n")})},impl:{readAll:e}};function e(){return Promise.resolve(ec(eu().styleSheets)).then(function(e){return Promise.all(e.map(function(e){if(e.href){var t=e.href.includes("uber-fonts")?"no-cache":"default";return C().fetch(e.href,{credentials:"omit",cache:t}).then(function(e){return e.text()}).then(function(t){var r,n,a;return r=eO(t,e.href),n=eu().implementation.createHTMLDocument(""),(a=eu().createElement("style")).textContent=r,n.body.appendChild(a),a.sheet}).catch(function(t){ei().warn(J.IMAGE_EXPORT_ERRORS.styleSheet,e.href),ei().log(t)})}return Promise.resolve(e)}))}).then(function(e){var t=[];return e.forEach(function(e){var r;if(e){try{r=e.rules||e.cssRules}catch(n){ei().log("'Can't read the css rules of: ".concat(e.href),n);return}if(r&&"object"==typeof r)try{ec(r||[]).forEach(t.push.bind(t))}catch(a){ei().log("Error while reading CSS rules from ".concat(e.href),a);return}else{ei().log("getCssRules can not find cssRules");return}}}),t}).then(function(e){return e.filter(function(e){return e.type===C().CSSRule.FONT_FACE_RULE}).filter(function(e){return eS.shouldProcess(e.style.getPropertyValue("src"))})}).then(function(t){return t.map(e)});function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return eS.inlineAll(e.cssText,t,null)},src:function(){return e.style.getPropertyValue("src")}}}}}(),eP=function(){return{inlineAll:function t(r){var n,a;return r instanceof Element?(n=r,a=n.style.getPropertyValue("background"),a?eS.inlineAll(a,null,null).then(function(e){n.style.setProperty("background",e,n.style.getPropertyPriority("background"))}).then(function(){return n}):Promise.resolve(n)).then(function(){return r instanceof HTMLImageElement?e(r).inline(null):Promise.all(ec(r.childNodes).map(function(e){return t(e)}))}):Promise.resolve(r)},impl:{newImage:e}};function e(e){return{inline:function(t){return ed(e.src)?Promise.resolve():Promise.resolve(e.src).then(function(e){return"function"==typeof t?t(e):eb(e,eC.impl.options)}).then(function(t){return ep(t,ef(e.src))}).then(function(t){return new Promise(function(r,n){e.onload=r,e.onerror=n,e.src=t})})}}}}(),eL={imagePlaceholder:void 0,cacheBust:!1},eC={toSvg:e_,toPng:function(e,t){return ex(e,t||{}).then(function(e){return e.toDataURL()})},toJpeg:function(e,t){return ex(e,t=t||{}).then(function(e){return e.toDataURL("image/jpeg",t.quality||1)})},toBlob:function(e,t){return ex(e,t||{}).then(ey)},toPixelData:function(e,t){return ex(e,t||{}).then(function(t){return t.getContext("2d").getImageData(0,0,eh(e),ev(e)).data})},impl:{fontFaces:eA,images:eP,inliner:eS,options:{}}};function e_(e,t){var r;return void 0===(r=t=t||{}).imagePlaceholder?eC.impl.options.imagePlaceholder=eL.imagePlaceholder:eC.impl.options.imagePlaceholder=r.imagePlaceholder,void 0===r.cacheBust?eC.impl.options.cacheBust=eL.cacheBust:eC.impl.options.cacheBust=r.cacheBust,Promise.resolve(e).then(function(e){return function e(t,r,n){return n||!r||r(t)?Promise.resolve(t).then(function(e){return e instanceof C().HTMLCanvasElement?es(e.toDataURL()):e.cloneNode(!1)}).then(function(n){return function(t,r,n){var a,o,i,l,u=t.childNodes;return 0===u.length?Promise.resolve(r):(o=ec(u),l=Promise.resolve(),o.forEach(function(t){l=l.then(function(){return e(t,n,null)}).then(function(e){e&&r.appendChild(e)})}),l).then(function(){return r})}(t,n,r)}).then(function(e){var r,n;return e instanceof C().Element?Promise.resolve([t,e]).then(function(e){var t,r,n,a,o=(0,s.Z)(e,2),i=o[0],l=o[1];return n=C().getComputedStyle(i),a=l.style,n.cssText?(a.cssText=n.cssText,n.font&&(a.font=n.font)):function(e,t){ec(e).forEach(function(r){t.setProperty(r,e.getPropertyValue(r),e.getPropertyPriority(r))})}(n,a),[i,l]}).then(function(e){var t,r,n,a,o=(0,s.Z)(e,2),i=o[0],l=o[1];return n=(r=(0,s.Z)([i,l],2))[0],a=r[1],[":before",":after"].forEach(function(e){return function(e,t,r){var n=C().getComputedStyle(e,r),a=n.getPropertyValue("content");if(""!==a&&"none"!==a){var o,i=(o=0,"u".concat("0000".concat((1679616*Math.random()<<0).toString(36)).slice(-4)).concat(o++));t.className="".concat(t.className," ").concat(i);var l,u,c,s,d,f,p,g,y,h=eu().createElement("style");h.appendChild((s=function(e){return"".concat(e,":").concat(n.getPropertyValue(e)).concat(n.getPropertyPriority(e)?" !important":"")},d=".".concat(i,":").concat(r),y=n.cssText?(p=n.getPropertyValue("content"),"".concat(n.cssText," content: ").concat(p,";")):"".concat(ec(n).map(s).join("; "),";"),eu().createTextNode("".concat(d,"{").concat(y,"}")))),t.appendChild(h)}}(n,a,e)}),[i,l]}).then(function(e){var t,r,n,a,o=(0,s.Z)(e,2),i=o[0],l=o[1];return n=(r=(0,s.Z)([i,l],2))[0],a=r[1],n instanceof C().HTMLTextAreaElement&&(a.innerHTML=n.value),n instanceof C().HTMLInputElement&&a.setAttribute("value",n.value),[i,l]}).then(function(e){var t,r=(0,s.Z)(e,2),n=r[0],a=r[1];return(t=a)instanceof C().SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof C().SVGRectElement&&["width","height"].forEach(function(e){var r=t.getAttribute(e);r&&t.style.setProperty(e,r)})),[n,a]}).then(function(e){var t=(0,s.Z)(e,2);return t[0],t[1]}):e}):Promise.resolve()}(e,t.filter,!0)}).then(eD).then(eR).then(function(e){return t.bgcolor&&(e.style.backgroundColor=t.bgcolor),t.width&&(e.style.width="".concat(t.width,"px")),t.height&&(e.style.height="".concat(t.height,"px")),t.style&&Object.keys(t.style).forEach(function(r){e.style[r]=t.style[r]}),e}).then(function(r){return function(e,t,r){var n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return Promise.resolve(e).then(function(e){e.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var a,o=new(C()).XMLSerializer().serializeToString(e),i=n?o.replace(/#/g,"%23").replace(/\n/g,"%0A"):o,l='<foreignObject x="0" y="0" width="100%" height="100%">'.concat(i,"</foreignObject>"),u='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t,'" height="').concat(r,'">').concat(l,"</svg>");return eT()(u)})}(r,t.width||eh(e),t.height||ev(e),t.escapeXhtmlForWebpack)})}function ex(e,t){return e_(e,t).then(es).then(function(e){return new Promise(function(t){C().setTimeout(function(){t(e)},100)})}).then(function(r){var n=function(e){var r=eu().createElement("canvas");if(r.width=t.width||eh(e),r.height=t.height||ev(e),t.bgcolor){var n=r.getContext("2d");n.fillStyle=t.bgcolor,n.fillRect(0,0,r.width,r.height)}return r}(e);return n.getContext("2d").drawImage(r,0,0),n})}function eD(e){return eA.resolveAll().then(function(t){var r=eu().createElement("style");return e.appendChild(r),r.appendChild(eu().createTextNode(t)),e})}function eR(e){return eP.inlineAll(e).then(function(){return e})}var eI=eC,ek=r(46784),ew=r(41403),eM=r(36621),eF=r(61033),ej=r(19593),eZ=r(83529),eN=r(95450);function eU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eG=function(e){return e.reduce(function(e,t){return eV(eV({},e),{},(0,c.Z)({},t,(e[t]||0)+1))},{})},eB=function(e){var t=eG(e);return Object.keys(t).reduce(function(e,r){return t[e]>=t[r]?e:r},Object.keys(t)[0])};function eY(e,t){switch(t){case J.AGGREGATION_TYPES.average:return(0,ek.Z)(e);case J.AGGREGATION_TYPES.countUnique:return Object.keys(e.reduce(function(e,t){return e[t]=e[t]||0,e[t]+=1,e},{})).length;case J.AGGREGATION_TYPES.mode:return eB(e);case J.AGGREGATION_TYPES.maximum:return(0,ew.Z)(e);case J.AGGREGATION_TYPES.minimum:return(0,eM.Z)(e);case J.AGGREGATION_TYPES.median:return(0,eF.Z)(e);case J.AGGREGATION_TYPES.stdev:return(0,ej.Z)(e);case J.AGGREGATION_TYPES.sum:return(0,eZ.Z)(e);case J.AGGREGATION_TYPES.variance:return(0,eN.Z)(e);default:return e.length}}var ez=r(82787),eH=r.n(ez),eW=r(68830),eq=r(93774),eK=r.n(eq),eX=r(23360);function eJ(e,t){var r=(0,eX.Nw)(t,e);return 0===r?t[r]:r===t.length?t[r-1]:(0,t[t[r]-e<e-t[r-1]?r:r-1])}function eQ(e){var t=[];return new Set(e).forEach(function(e){e3(e)&&t.push(e)}),t}function e$(e,t,r){var n=e.map(function(e){return Number(Array.isArray(e))&&e[t]}).filter(Number.isFinite).sort(e7);return n.length?[Math.max(n[0],r[0]),Math.min(n[n.length-1],r[1])]:null}function e0(e){var t=(0,s.Z)(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return a<=r?r:a>=n?n:a}function e1(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=Math.max(Math.floor(e.length/t),1),a=[],o=0;o<e.length;o+=n)a.push(r(e[o]));return a}function e2(e,t){if(e3(e)){if("string"==typeof e)return eK().utc(e,t).valueOf();if("number"==typeof e)return"x"===t?1e3*e:e;if(e instanceof Date)return e.valueOf()}return null}function e3(e){return null!=e}function e4(e){return Number.isFinite(e)}function e5(e,t){return e.hasOwnProperty(t)}function e7(e,t){return e-t}function e6(e){switch(e){case J.ALL_FIELD_TYPES.real:case J.ALL_FIELD_TYPES.integer:case J.ALL_FIELD_TYPES.timestamp:return e7;default:return}}function e8(e,t){var r=Math.pow(10,t);return(Math.round(e*r+(t>0?1:0)*(Math.sign(e)*(10/Math.pow(100,t))))/r).toFixed(t)}function e9(e){return Number("".concat(Math.round("".concat(e,"e+4")),"e-4"))}function te(e){isNaN(e)&&(eH()("step is not a number"),eH()(e));var t=e.toString(),r=t.split("e-");if(2===r.length){var n=r[0].split("."),a=1===n.length?0:n[1].length;return parseInt(r[1],10)+a}var o=t.split(".");return 1===o.length?0:o[1].length}function tt(e,t,r,n){return n&&n.length?eJ(e,n):tr(t,r,e)}function tr(e,t,r){if(!e4(t)||!e4(e))return r;var n,a=te(t),o=Math.floor((r-e)/t),i=r-(o*t+e);n=0===(i=Number(e8(i,8)))?r:i<t/2?o*t+e:(o+1)*t+e;var l=e8(n,a);return Number(l)}var tn=function(e){return e3(e)?String(e):""},ta=function(e){return e4(e)?String(e9(e)):""},to=(n={},(0,c.Z)(n,J.ALL_FIELD_TYPES.string,tn),(0,c.Z)(n,J.ALL_FIELD_TYPES.timestamp,tn),(0,c.Z)(n,J.ALL_FIELD_TYPES.integer,tn),(0,c.Z)(n,J.ALL_FIELD_TYPES.real,tn),(0,c.Z)(n,J.ALL_FIELD_TYPES.boolean,tn),(0,c.Z)(n,J.ALL_FIELD_TYPES.date,tn),(0,c.Z)(n,J.ALL_FIELD_TYPES.geojson,function(e){return"string"==typeof e?e:U(e)?JSON.stringify(e):Array.isArray(e)?"[".concat(String(e),"]"):""}),(0,c.Z)(n,J.ALL_FIELD_TYPES.geoarrow,function(e){return e}),(0,c.Z)(n,J.ALL_FIELD_TYPES.object,JSON.stringify),(0,c.Z)(n,J.ALL_FIELD_TYPES.array,JSON.stringify),n),ti=function(e,t){return e3(e)?to[t]?to[t](e):String(e):""},tl=function(e,t,r){e.splice(r<0?e.length+r:r,0,e.splice(t,1)[0])},tu=function(e,t,r){return tl(e=e.slice(),t,r),e};function tc(e,t){if(!e)return tn;var r=Object.values(J.TOOLTIP_FORMATS).find(function(t){return t[J.TOOLTIP_KEY]===e});return r?tf(r):"string"==typeof e&&t?tg(e,t):tn}function ts(e){var t=e.format,r=e.displayFormat;if(!t&&!r)return to[e.type];var n=Object.values(J.TOOLTIP_FORMATS).find(function(e){return e[J.TOOLTIP_KEY]===r});return n?tf(n):"string"==typeof r&&e?tg(r,e):"object"==typeof r?td(r):tn}function td(e){return function(t){return e[t]}}function tf(e){if(!e||!e.format)return tn;switch(e.type){case J.TOOLTIP_FORMAT_TYPES.DECIMAL:return(0,eW.WU)(e.format);case J.TOOLTIP_FORMAT_TYPES.DATE:case J.TOOLTIP_FORMAT_TYPES.DATE_TIME:return th(null)(e.format);case J.TOOLTIP_FORMAT_TYPES.PERCENTAGE:return function(e){return"".concat((0,eW.WU)(J.TOOLTIP_FORMATS.DECIMAL_DECIMAL_FIXED_2.format)(e),"%")};case J.TOOLTIP_FORMAT_TYPES.BOOLEAN:return tp(e.format);default:return tn}}function tp(e){switch(e){case"01":return function(e){return e?"1":"0"};case"yn":return function(e){return e?"yes":"no"};default:return tn}}function tg(e,t){switch(t.type){case J.ALL_FIELD_TYPES.real:case J.ALL_FIELD_TYPES.integer:return(0,eW.WU)(e);case J.ALL_FIELD_TYPES.date:case J.ALL_FIELD_TYPES.timestamp:return th(null)(e);default:return function(e){return e}}}function ty(e){return(0,eW.WU)(".4~s")(e)}function th(e){return e?function(t){return function(r){return eK().utc(r).tz(e).format(t)}}:function(e){return function(t){return t?eK().utc(t).format(e):""}}}var tv={inner:"inner",outer:"outer"},tm={value:[5,15],domain:[1,100],speed:1,enableInteraction:!1,isAnimating:!1,step:null,mode:tv.inner},tb=function(e){var t=e.currentTime,r=e.domain,n=e.speed,a=e.isAnimating,o=e.timeSteps,i=e.defaultTimeFormat,l=e.timeFormat,u=e.timezone;return{value:j(t),enableInteraction:!0,domain:r,speed:n,isAnimating:a||!1,timeSteps:o,defaultTimeFormat:i,timeFormat:l,timezone:u,marks:null}},tO=function(e){var t,r=e.value,n=e.domain,a=e.speed,o=e.isAnimating,i=e.step,l=e.timeSteps,u=e.defaultTimeFormat,c=e.timeFormat;return{value:r,enableInteraction:!0,domain:n,speed:a,isAnimating:o,step:i,timeSteps:l,defaultTimeFormat:u,timeFormat:c,timezone:e.timezone,animationWindow:e.animationWindow,marks:null}},tE=r(87794),tT=r.n(tE),tS=r(30676),tA=function(e){return e[J.TOOLTIP_KEY]},tP=r(25634);function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var t_=tT().mark(tD),tx=["#8F2FBF","#005CFF","#C06C84","#F8B195","#547A82","#3EACA8","#A2D4AB"].map(g);function tD(){var e;return tT().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<tx.length+1)){t.next=7;break}return e===tx.length&&(e=0),t.next=5,tx[e++];case 5:t.next=1;break;case 7:case"end":return t.stop()}},t_)}var tR=tD(),tI=["_id","id","index","uuid","guid","uid","gid","serial","zip","code","post","region","fips","cbgs","h3","s2","lat","lon","lng","latitude","longitude","_x","_y"],tk=["metric","value","sum","count","unique","mean","mode","median","max","min","deviation","variance","p99","p95","p75","p50","p25","p05","cnt","val"];function tw(e){var t=e.fields,r=e.fieldPairs,n=void 0===r?[]:r,a=t.filter(function(e){if(e.type!==J.ALL_FIELD_TYPES.real&&e.type!==J.ALL_FIELD_TYPES.integer||n.find(function(t){return t.pair.lat.value===e.name||t.pair.lng.value===e.name}))return!1;var t=e.name.toLowerCase();if(""===t)return!1;var r=tI.find(function(e){return t.startsWith(e)||t.endsWith(e)}),a=tk.find(function(e){return t.startsWith(e)||t.endsWith(e)});return!r||a}).sort(function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase(),a=tk.findIndex(function(e){return r.startsWith(e)||r.endsWith(e)}),o=tk.findIndex(function(e){return n.startsWith(e)||n.endsWith(e)});return a!==o?-1===a?1:-1===o?-1:a-o:e.type!==t.type?e.type===J.ALL_FIELD_TYPES.real?-1:1:e.index-t.index});return a.length?a[0]:null}var tM=[tS.DATA_TYPES.DATE,tS.DATA_TYPES.TIME,tS.DATA_TYPES.DATETIME,tS.DATA_TYPES.NUMBER,tS.DATA_TYPES.INT,tS.DATA_TYPES.FLOAT,tS.DATA_TYPES.BOOLEAN,tS.DATA_TYPES.STRING,tS.DATA_TYPES.GEOMETRY,tS.DATA_TYPES.GEOMETRY_FROM_STRING,tS.DATA_TYPES.PAIR_GEOMETRY_FROM_STRING,tS.DATA_TYPES.ZIPCODE,tS.DATA_TYPES.ARRAY,tS.DATA_TYPES.OBJECT],tF=Object.keys(tS.DATA_TYPES).filter(function(e){return!tM.includes(e)});function tj(e){if(!U(e))return eH()("addDataToMap Error: dataset.data cannot be null"),null;if(!Array.isArray(e.fields))return eH()("addDataToMap Error: expect dataset.data.fields to be an array"),null;if(!Array.isArray(e.rows))return eH()("addDataToMap Error: expect dataset.data.rows to be an array"),null;var t=e.fields,r=e.rows,n=e.cols;if(t.every(function(e,n){if(U(e)||(eH()("fields needs to be an array of object, but find ".concat(typeof e)),t[n]={name:"column_".concat(n)}),e.name||(eH()("field.name is required but missing in ".concat(JSON.stringify(e))),t[n].name="column_".concat(n)),!e.type||!J.ALL_FIELD_TYPES[e.type])return eH()("unknown field type ".concat(e.type)),!1;if(!t.every(function(e){return e.analyzerType}))return eH()("field missing analyzerType"),!1;if(e.type===J.ALL_FIELD_TYPES.timestamp){var a=(function(e,t,r){for(var n,a=[],o=0;a.length<10&&o<e.length;)e3(null===(n=e[o])||void 0===n?void 0:n[t])&&a.push(e[o]),o++;return a})(r,n,10).map(function(e){return{ts:e[n]}}),o=tS.Analyzer.computeColMeta(a)[0];return o&&"TIME"===o.category&&o.format===e.format}return!0}))return{rows:r,fields:t,cols:n};var a=tZ({fields:t.map(function(e){return e.name}),rows:r}),o=tN(a,t.map(function(e){return e.name}));return{fields:t.map(function(e,t){return tC(tC({},e),{},{type:o[t].type,format:o[t].format,analyzerType:o[t].analyzerType})}),rows:r}}function tZ(e){var t=e.fields,r=e.rows,n=e.sampleCount,a=Math.min(void 0===n?50:n,r.length),o=(0,tP.Z)(0,a,1).map(function(e){return{}});return t.forEach(function(e,t){for(var n=0,i=0;i<a;)if(n>=r.length)o[i][e]=null,i++;else if(e3(r[n][t])){var l=r[n][t];o[i][e]="string"==typeof l?l.trim():l,i++,n++}else n++}),o}function tN(e,t){var r=tS.Analyzer.computeColMeta(e,[{regex:/.*geojson|all_points/g,dataType:"GEOMETRY"},{regex:/.*census/g,dataType:"STRING"}],{ignoredDataTypes:tF}),n=tU(t).fieldByIndex;return t.map(function(t,a){var o=n[a],i=r.find(function(e){return e.key===t}),l=(null==i?void 0:i.type)||"STRING",u=(null==i?void 0:i.format)||"";return l===tS.DATA_TYPES.STRING&&(l=e.some(function(e){var t;return!!((t=e[o])&&!(t.length<10)&&t.length%2==0&&(t.startsWith("00")||t.startsWith("01")))&&/^[0-9a-fA-F]+$/.test(t.slice(2))})?tS.DATA_TYPES.GEOMETRY:l),{name:o,id:o,displayName:o,format:u,fieldIdx:a,type:tV(l),analyzerType:l,valueAccessor:function(e){return function(t){return e.valueAt(t.index,a)}}}})}function tU(e){return e.reduce(function(e,t,r){var n=e.allNames,a=t;if(n.includes(t)){for(var o=0;n.includes("".concat(t,"-").concat(o));)o++;a="".concat(t,"-").concat(o)}return e.fieldByIndex[r]=a,e.allNames.push(a),e},{allNames:[],fieldByIndex:[]})}function tV(e){var t=tS.DATA_TYPES.DATE,r=tS.DATA_TYPES.TIME,n=tS.DATA_TYPES.DATETIME,a=tS.DATA_TYPES.NUMBER,o=tS.DATA_TYPES.INT,i=tS.DATA_TYPES.FLOAT,l=tS.DATA_TYPES.BOOLEAN,u=tS.DATA_TYPES.STRING,c=tS.DATA_TYPES.GEOMETRY,s=tS.DATA_TYPES.GEOMETRY_FROM_STRING,d=tS.DATA_TYPES.PAIR_GEOMETRY_FROM_STRING,f=tS.DATA_TYPES.ZIPCODE,p=tS.DATA_TYPES.ARRAY,g=tS.DATA_TYPES.OBJECT;switch(e){case t:return J.ALL_FIELD_TYPES.date;case r:case n:return J.ALL_FIELD_TYPES.timestamp;case i:return J.ALL_FIELD_TYPES.real;case o:return J.ALL_FIELD_TYPES.integer;case l:return J.ALL_FIELD_TYPES.boolean;case c:case s:case d:return J.ALL_FIELD_TYPES.geojson;case p:return J.ALL_FIELD_TYPES.array;case g:return J.ALL_FIELD_TYPES.object;case a:case u:case f:return J.ALL_FIELD_TYPES.string;default:return L.console.warn("Unsupported analyzer type: ".concat(e)),J.ALL_FIELD_TYPES.string}}function tG(e){var t,r=e&&J.FIELD_OPTS[e].format.tooltip||[];return(t=Object.values(J.TOOLTIP_FORMATS).filter(function(e){return r.includes(e.type)})).map(function(e){return tC(tC({},e),{},{label:e.type===J.TOOLTIP_FORMAT_TYPES.DATE_TIME||e.type===J.TOOLTIP_FORMAT_TYPES.DATE?tc(tA(e))("2020-05-11 14:00"):e.label})})}function tB(e,t){var r;return tG(null===(r=e.find(function(e){return e.name===t}))||void 0===r?void 0:r.type)}var tY=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.KEPLER_GL_VERSION;return'\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <meta charset="UTF-8"/>\n        <title>Kepler.gl embedded map</title>\n\n        <!--Uber Font-->\n        <link rel="stylesheet" href="https://d1a3f4spazzrp4.cloudfront.net/kepler.gl/uber-fonts/4.0.0/superfine.css">\n\n        <!--MapBox css-->\n        <link href="https:https://unpkg.com/maplibre-gl@^3/dist/maplibre-gl.css" rel="stylesheet">\n\n        <!-— facebook open graph tags -->\n        <meta property="og:url" content="http://kepler.gl/" />\n        <meta property="og:title" content="Large-scale WebGL-powered Geospatial Data Visualization Tool" />\n        <meta property="og:description" content="Kepler.gl is a powerful web-based geospatial data analysis tool. Built on a high performance rendering engine and designed for large-scale data sets." />\n        <meta property="og:site_name" content="kepler.gl" />\n        <meta property="og:image" content="https://d1a3f4spazzrp4.cloudfront.net/kepler.gl/kepler.gl-meta-tag.png" />\n        <meta property="og:image:type" content="image/png" />\n        <meta property="og:image:width" content="800" />\n        <meta property="og:image:height" content="800" />\n\n        <!-— twitter card tags -->\n        <meta name="twitter:card" content="summary_large_image">\n        <meta name="twitter:site" content="@openjsf">\n        <meta name="twitter:creator" content="@openjsf">\n        <meta name="twitter:title" content="Large-scale WebGL-powered Geospatial Data Visualization Tool">\n        <meta name="twitter:description" content="Kepler.gl is a powerful web-based geospatial data analysis tool. Built on a high performance rendering engine and designed for large-scale data sets.">\n        <meta name="twitter:image" content="https://d1a3f4spazzrp4.cloudfront.net/kepler.gl/kepler.gl-meta-tag.png" />\n\n        <!-- Load React/Redux -->\n        <script src="https://unpkg.com/react@16.8.4/umd/react.production.min.js" crossorigin></script>\n        <script src="https://unpkg.com/react-dom@16.8.4/umd/react-dom.production.min.js" crossorigin></script>\n        <script src="https://unpkg.com/redux@3.7.2/dist/redux.js" crossorigin></script>\n        <script src="https://unpkg.com/react-redux@7.1.3/dist/react-redux.min.js" crossorigin></script>\n        <script src="https://unpkg.com/styled-components@4.1.3/dist/styled-components.min.js" crossorigin></script>\n\n        <!-- Load Kepler.gl -->\n        <script src="https://unpkg.com/kepler.gl@'.concat(t,'/umd/keplergl.min.js" crossorigin></script>\n\n        <style type="text/css">\n          body {margin: 0; padding: 0; overflow: hidden;}\n        </style>\n\n        <!--MapBox token-->\n        <script>\n          /**\n           * Provide your MapBox Token\n           **/\n          const MAPBOX_TOKEN = \'').concat(e.mapboxApiAccessToken||"PROVIDE_MAPBOX_TOKEN","';\n          const WARNING_MESSAGE = 'Please Provide a Mapbox Token in order to use Kepler.gl. Edit this file and fill out MAPBOX_TOKEN with your access key';\n        </script>\n\n        <!-- GA: Delete this as you wish, However to pat ourselves on the back, we only track anonymous pageview to understand how many people are using kepler.gl. -->\n        <script>\n          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n          ga('create', 'UA-64694404-19', {\n            'storage': 'none',\n            'clientId': localStorage.getItem('ga:clientId')\n          });\n          ga(function(tracker) {\n              localStorage.setItem('ga:clientId', tracker.get('clientId'));\n          });\n          ga('set', 'checkProtocolTask', null); // Disable file protocol checking.\n          ga('set', 'checkStorageTask', null); // Disable cookie storage checking.\n          ga('set', 'historyImportTask', null); // Disable history checking (requires reading from cookies).\n          ga('set', 'page', 'keplergl-html');\n          ga('send', 'pageview');\n        </script>\n      </head>\n      <body>\n        <!-- We will put our React component inside this div. -->\n        <div id=\"app\">\n          <!-- Kepler.gl map will be placed here-->\n        </div>\n\n        <!-- Load our React component. -->\n        <script>\n          /* Validate Mapbox Token */\n          if ((MAPBOX_TOKEN || '') === '' || MAPBOX_TOKEN === 'PROVIDE_MAPBOX_TOKEN') {\n            alert(WARNING_MESSAGE);\n          }\n\n          /** STORE **/\n          const reducers = (function createReducers(redux, keplerGl) {\n            return redux.combineReducers({\n              // mount keplerGl reducer\n              keplerGl: keplerGl.keplerGlReducer.initialState({\n                uiState: {\n                  readOnly: ").concat(e.mode===J.EXPORT_HTML_MAP_MODES.READ,',\n                  currentModal: null\n                }\n              })\n            });\n          }(Redux, KeplerGl));\n\n          const middleWares = (function createMiddlewares(keplerGl) {\n            return keplerGl.enhanceReduxMiddleware([\n              // Add other middlewares here\n            ]);\n          }(KeplerGl));\n\n          const enhancers = (function craeteEnhancers(redux, middles) {\n            return redux.applyMiddleware(...middles);\n          }(Redux, middleWares));\n\n          const store = (function createStore(redux, enhancers) {\n            const initialState = {};\n\n            return redux.createStore(\n              reducers,\n              initialState,\n              redux.compose(enhancers)\n            );\n          }(Redux, enhancers));\n          /** END STORE **/\n\n          /** COMPONENTS **/\n          var KeplerElement = (function makeKeplerElement(react, keplerGl, mapboxToken) {\n            var LogoSvg = function LogoSvg() {\n              return react.createElement(\n                "div",\n                { className: "logo-container", style: {position: \'fixed\', zIndex: 10000, padding: \'4px\'} },\n                  react.createElement(\n                    "svg",\n                    {\n                      className: "kepler_gl__logo",\n                      width: "107px",\n                      height: "21px",\n                      viewBox: "0 0 124 24"\n                    },\n                    react.createElement(\n                      "g",\n                      { transform: "translate(13.500000, 13.500000) rotate(45.000000) translate(-13.500000, -13.500000) translate(4.000000, 4.000000)" },\n                      react.createElement("rect", { x: "0", y: "6", transform: "matrix(2.535181e-06 1 -1 2.535181e-06 18.1107 6.0369)", fill: "#535C6C", width: "12.1", height: "12.1" }),\n                      react.createElement("rect", { x: "6", y: "0", transform: "matrix(2.535182e-06 1 -1 2.535182e-06 18.1107 -6.0369)", fill:"#1FBAD6", width: "12.1", height: "12.1" })\n                    ),\n                    react.createElement(\n                      "g",\n                      {},\n                      react.createElement("path", { fill:"#1FBAD6", d: "M39,8.7h2.2l-2.8,4.2l2.9,5.1H39l-2.4-4.2h-1.3V18h-2V5l2-0.1v7.3h1.3L39,8.7z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M42.4,13.3c0-1.5,0.4-2.7,1.1-3.5s1.8-1.2,3.1-1.2c1.3,0,2.2,0.4,2.8,1.1c0.6,0.7,0.9,1.8,0.9,3.3 c0,0.4,0,0.8,0,1.1h-5.8c0,1.6,0.8,2.4,2.4,2.4c1,0,2-0.2,2.9-0.6l0.2,1.7c-0.4,0.2-0.9,0.4-1.4,0.5s-1.1,0.2-1.7,0.2 c-1.5,0-2.6-0.4-3.3-1.2C42.8,16.1,42.4,14.9,42.4,13.3z M46.6,10.1c-0.7,0-1.2,0.2-1.5,0.5c-0.4,0.4-0.6,0.9-0.6,1.7h4 c0-0.8-0.2-1.4-0.5-1.7S47.2,10.1,46.6,10.1z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M57.1,18.2c-1,0-1.8-0.3-2.3-0.9l0,0l0,1.3v2.5h-2V8.7h1.5l0.3,0.9h0c0.3-0.3,0.7-0.6,1.2-0.7 c0.4-0.2,0.9-0.3,1.4-0.3c1.2,0,2.1,0.4,2.7,1.1c0.6,0.7,0.9,2,0.9,3.7c0,1.6-0.3,2.8-1,3.7C59.2,17.8,58.3,18.2,57.1,18.2z M56.7,10.3c-0.4,0-0.8,0.1-1.1,0.2c-0.3,0.2-0.6,0.4-0.8,0.7v4.3c0.2,0.3,0.4,0.5,0.7,0.7c0.3,0.2,0.7,0.3,1.1,0.3 c0.7,0,1.2-0.2,1.6-0.7c0.4-0.5,0.5-1.3,0.5-2.5c0-0.8-0.1-1.4-0.2-1.8s-0.4-0.7-0.7-0.9C57.6,10.4,57.2,10.3,56.7,10.3z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M63.2,16V5l2-0.1v10.8c0,0.3,0.1,0.5,0.2,0.6c0.1,0.1,0.3,0.2,0.6,0.2c0.3,0,0.6,0,0.9-0.1V18 c-0.4,0.1-1,0.2-1.6,0.2c-0.8,0-1.3-0.2-1.7-0.5S63.2,16.8,63.2,16z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M68.2,13.3c0-1.5,0.4-2.7,1.1-3.5c0.7-0.8,1.8-1.2,3.1-1.2c1.3,0,2.2,0.4,2.8,1.1c0.6,0.7,0.9,1.8,0.9,3.3 c0,0.4,0,0.8,0,1.1h-5.8c0,1.6,0.8,2.4,2.4,2.4c1,0,2-0.2,2.9-0.6l0.2,1.7c-0.4,0.2-0.9,0.4-1.4,0.5s-1.1,0.2-1.7,0.2 c-1.5,0-2.6-0.4-3.3-1.2C68.6,16.1,68.2,14.9,68.2,13.3z M72.4,10.1c-0.7,0-1.2,0.2-1.5,0.5c-0.4,0.4-0.6,0.9-0.6,1.7h4 c0-0.8-0.2-1.4-0.5-1.7S73,10.1,72.4,10.1z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M80.2,8.7l0.1,1.7h0c0.3-0.6,0.7-1.1,1.1-1.4c0.4-0.3,1-0.5,1.6-0.5c0.4,0,0.7,0,1,0.1l-0.1,2 c-0.3-0.1-0.7-0.2-1-0.2c-0.7,0-1.3,0.3-1.7,0.8c-0.4,0.5-0.7,1.2-0.7,2.1V18h-2V8.7H80.2z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M83.8,17c0-0.8,0.4-1.2,1.2-1.2c0.8,0,1.2,0.4,1.2,1.2c0,0.8-0.4,1.1-1.2,1.1C84.2,18.2,83.8,17.8,83.8,17z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M88.5,18.7c0-0.8,0.4-1.4,1.2-1.8c-0.6-0.3-0.9-0.8-0.9-1.5c0-0.7,0.4-1.2,1.1-1.6c-0.3-0.3-0.6-0.6-0.7-0.9 c-0.2-0.4-0.2-0.8-0.2-1.3c0-1,0.3-1.8,0.9-2.3c0.6-0.5,1.6-0.8,2.8-0.8c0.5,0,1,0,1.4,0.1c0.4,0.1,0.8,0.2,1.1,0.4l2.4-0.2v1.5 h-1.5c0.2,0.4,0.2,0.8,0.2,1.3c0,1-0.3,1.7-0.9,2.2s-1.5,0.8-2.7,0.8c-0.7,0-1.2-0.1-1.6-0.2c-0.1,0.1-0.2,0.2-0.3,0.3 c-0.1,0.1-0.1,0.2-0.1,0.4c0,0.2,0.1,0.3,0.2,0.4c0.1,0.1,0.3,0.2,0.6,0.2l2.7,0.2c1,0.1,1.7,0.3,2.2,0.6c0.5,0.3,0.8,0.9,0.8,1.7 c0,0.6-0.2,1.1-0.5,1.5c-0.4,0.4-0.9,0.8-1.5,1c-0.7,0.2-1.5,0.4-2.4,0.4c-1.3,0-2.3-0.2-3-0.6C88.8,20.1,88.5,19.5,88.5,18.7z M95.1,18.4c0-0.3-0.1-0.5-0.3-0.7s-0.6-0.2-1.1-0.3l-2.7-0.3c-0.2,0.1-0.4,0.3-0.5,0.5c-0.1,0.2-0.2,0.4-0.2,0.6 c0,0.4,0.2,0.8,0.5,1c0.4,0.2,1,0.3,1.8,0.3C94.2,19.5,95.1,19.2,95.1,18.4z M94.3,11.5c0-0.6-0.1-1-0.4-1.2 c-0.3-0.2-0.7-0.3-1.3-0.3c-0.7,0-1.1,0.1-1.4,0.3c-0.3,0.2-0.4,0.6-0.4,1.2s0.1,1,0.4,1.2c0.3,0.2,0.7,0.3,1.4,0.3 c0.6,0,1.1-0.1,1.3-0.4S94.3,12,94.3,11.5z" }),\n                      react.createElement("path", { fill:"#1FBAD6", d: "M99.4,16V5l2-0.1v10.8c0,0.3,0.1,0.5,0.2,0.6c0.1,0.1,0.3,0.2,0.6,0.2c0.3,0,0.6,0,0.9-0.1V18 c-0.4,0.1-1,0.2-1.6,0.2c-0.8,0-1.3-0.2-1.7-0.5S99.4,16.8,99.4,16z" })\n                    )\n                  )\n                );\n              };\n\n            return function App() {\n              var rootElm = react.useRef(null);\n              var _useState = react.useState({\n                width: window.innerWidth,\n                height: window.innerHeight\n              });\n              var windowDimension = _useState[0];\n              var setDimension = _useState[1];\n              react.useEffect(function sideEffect(){\n                function handleResize() {\n                  setDimension({width: window.innerWidth, height: window.innerHeight});\n                };\n                window.addEventListener(\'resize\', handleResize);\n                return function() {window.removeEventListener(\'resize\', handleResize);};\n              }, []);\n              return react.createElement(\n                \'div\',\n                {style: {position: \'absolute\', left: 0, width: \'100vw\', height: \'100vh\'}},\n                ').concat(e.mode===J.EXPORT_HTML_MAP_MODES.READ?"LogoSvg(),":"","\n                react.createElement(keplerGl.KeplerGl, {\n                  mapboxApiAccessToken: mapboxToken,\n                  id: \"map\",\n                  width: windowDimension.width,\n                  height: windowDimension.height\n                })\n              )\n            }\n          }(React, KeplerGl, MAPBOX_TOKEN));\n\n          const app = (function createReactReduxProvider(react, reactRedux, KeplerElement) {\n            return react.createElement(\n              reactRedux.Provider,\n              {store},\n              react.createElement(KeplerElement, null)\n            )\n          }(React, ReactRedux, KeplerElement));\n          /** END COMPONENTS **/\n\n          /** Render **/\n          (function render(react, reactDOM, app) {\n            reactDOM.render(app, document.getElementById('app'));\n          }(React, ReactDOM, app));\n        </script>\n        <!-- The next script will show how to interact directly with Kepler map store -->\n        <script>\n          /**\n           * Customize map.\n           * In the following section you can use the store object to dispatch Kepler.gl actions\n           * to add new data and customize behavior\n           */\n          (function customize(keplerGl, store) {\n            const datasets = ").concat(JSON.stringify(e.datasets),";\n            const config = ").concat(JSON.stringify(e.config),";\n\n            const loadedData = keplerGl.KeplerGlSchema.load(\n              datasets,\n              config\n            );\n\n            store.dispatch(keplerGl.addDataToMap({\n              datasets: loadedData.datasets,\n              config: loadedData.config,\n              options: {\n                centerMap: false\n              }\n            }));\n          }(KeplerGl, store))\n        </script>\n      </body>\n    </html>\n  ")},tz=r(34953),tH=r.n(tz);function tW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tW(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tK="kepler.gl.png",tX="kepler.gl.html",tJ="kepler.gl.json",tQ="kepler.gl",t$={hasData:!0},t0=J.OneXResolutionOption,t1=J.FourByThreeRatioOption;function t2(e){return Boolean(e.navigator&&e.navigator.msSaveOrOpenBlob)}function t3(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return[e,t,r,n].some(function(e){return e<=0})?1:(e/t>1?e:t)/(e/t>1?r:n)}function t4(e){var t=e.mapW,r=e.mapH,n=e.ratio,a=e.resolution;if(t<=0||r<=0)return null;var o=J.EXPORT_IMG_RATIO_OPTIONS.find(function(e){return e.id===n})||t1,i=J.EXPORT_IMG_RESOLUTION_OPTIONS.find(function(e){return e.id===a})||t0,l=i.getSize(t,r),u=l.width,c=l.height,s=o.getSize(u,c),d=s.width,f=s.height;return{scale:(o.id===J.EXPORT_IMG_RATIOS.CUSTOM?{scale:void 0}:i).scale,imageW:d,imageH:f}}function t5(e,t){return eI.toPng(e,t)}function t7(e){for(var t=(0,L.atob)(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new L.ArrayBuffer(t.length),a=new L.Uint8Array(n),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return new L.Blob([n],{type:r})}function t6(e,t){if(t2(window))window.navigator.msSaveOrOpenBlob(e,t);else{var r=L.URL.createObjectURL(e),n=L.document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),L.document.body.appendChild(n);var a=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});n.dispatchEvent(a),L.document.body.removeChild(n),L.URL.revokeObjectURL(r)}}function t8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tK,r=e.imageDataUri;r&&t6(t7(r),t)}function t9(e){try{return JSON.stringify(e)}catch(t){if(t instanceof TypeError)return t.message;return t.description}}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t$,r=t.hasData,n=e.visState.schema;if(!r)return n.getConfigToSave(e);var a=n.save(e),o=tH()(a,["info","title"]);return o&&o.length||(a=G(["info","title"],"keplergl_".concat(R(6)),a)),a}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=re(e,t);r.info.source="kepler.gl";var n=new L.Blob([t9(r)],{type:"application/json"});t6(n,e.appName?"".concat(e.appName,".json"):tJ)}function rr(e,t){var r=t.userMapboxToken,n=t.exportMapboxAccessToken,a=t.mode,o=tq(tq({},re(e)),{},{mapboxApiAccessToken:""!==(r||"")?r:n,mode:a}),i=new L.Blob([tY(o)],{type:"text/html"});t6(i,e.appName?"".concat(e.appName,".html"):tX)}function rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t$,r=e.uiState.exportImage.imageDataUri,n=r?t7(r):null;return{map:re(e,t),thumbnail:n}}var ra={exportImage:t8,exportJson:rt,exportHtml:rr},ro=r(12026),ri=r(49657);function rl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ru=function(e){return ri.default[e]};function rc(e,t){var r=J.LAYER_BLENDINGS[t],n=r.blendFunc,a=r.blendEquation;(0,ro.dR)(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}((0,c.Z)({},ri.default.BLEND,!0),n?{blendFunc:n.map(ru),blendEquation:Array.isArray(a)?a.map(ru):ru(a)}:{}))}function rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rf=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).reduce(function(n,a){var o=t[a],i=r?"".concat(r,".").concat(a):a;return"string"==typeof o?n[i]=o:Object.assign(n,e(o,i)),n},{})},rp=function(e,t){if(!N(t)||!N(t.en))return ei().error("message should be an object and contain at least the `en` translation. Read more at https://docs.kepler.gl/docs/api-reference/localization"),e;var r=rf(t.en);return Object.keys(e).reduce(function(n,a){return rd(rd({},n),{},(0,c.Z)({},a,"en"===a?rd(rd({},e.en),r):rd(rd(rd({},e[a]),r),rf(t[a]||{}))))},{})},rg=r(52122),ry=r.n(rg);r(67294);var rh=r(68196);function rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rm(){if(void 0===a){var e=new Map,t=new rh.Z(function(t,r){var n,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rv(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(t);try{for(a.s();!(n=a.n()).done;){var o,i=n.value;null===(o=e.get(i.target))||void 0===o||o(i,r)}}catch(l){a.e(l)}finally{a.f()}});a={subscribe:function(r,n){r instanceof Element&&(t.observe(r),e.set(r,n))},unsubscribe:function(r){r instanceof Element&&(t.unobserve(r),e.delete(r))}}}return a}function rb(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=rm(),a=r>0?ry()(t,r):t;n.subscribe(e,function(t){return a(function(e,t){if(t.contentRect){var r,n=t.contentRect;return{width:n.width,height:n.height}}if(e.getBoundingClientRect){var a,o=e.getBoundingClientRect();return{width:o.width,height:o.height}}return null}(e,t))})}function rO(e){rm().unsubscribe(e)}var rE=r(22659),rT=512;function rS(e){return Number.isFinite(e)&&e<=90&&e>=-90}function rA(e){return Number.isFinite(e)&&e<=180&&e>=-180}function rP(e){return Array.isArray(e)&&4===e.length&&[e[0],e[2]].every(rA)&&[e[1],e[3]].every(rS)?e:null}function rL(e,t){var r,n=t.width,a=t.height;if(!rP(e))return ei().warn("invalid map bounds provided"),null;return{zoom:rE.viewport(e,[n,a],void 0,void 0,rT).zoom,center:[(e[0]+e[2])/2,(e[1]+e[3])/2]}}function rC(e,t){var r,n=null===(r=e.target)||void 0===r?void 0:r.getBoundingClientRect();if(!n)return e;var a=e.clientX-n.left,o=e.clientY-n.top;if(!Number.isFinite(a)||!Number.isFinite(o))return e;e.point=[a,o];var i=t.unproject(e.point,{targetZ:0});return e.lngLat=[i[0],i[1]],e}var r_=function(e){return""!==(e||"")},rx=r(48752),rD=r.n(rx),rR=r(19487),rI=r.n(rR);function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rk(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rM=/^mapbox:\/\/styles\/[-a-z0-9]{2,256}\/[-a-z0-9]{2,256}/,rF=/^(?=(http:|https:))/;function rj(e){var t=e.layerGroups;return(void 0===t?[]:t).reduce(function(e,t){return rw(rw({},e),{},(0,c.Z)({},t.slug,t.defaultVisibility))},{})}var rZ=function(e){var t=e.id,r=(e.mapStyle,e.visibleLayerGroups),n=void 0===r?{}:r;return"".concat(t,":").concat(Object.keys(n).filter(function(e){return n[e]}).sort().join("-"))},rN=rD()(function(e){e.id;var t=e.mapStyle,r=e.visibleLayerGroups,n=(t.layerGroups||[]).filter(function(e){return r[e.slug]}).map(function(e){return e.filter}),a=t.style.layers.filter(function(e){return n.some(function(t){return t(e)})});return rw(rw({},t.style),{},{layers:a})},rZ),rU=rD()(function(e){var t=e.id,r=e.mapStyle,n=e.visibleLayerGroups;if(t===J.NO_MAP_ID)return J.EMPTY_MAPBOX_STYLE;var a=(r.layerGroups||[]).filter(function(e){return!n[e.slug]}).map(function(e){return e.filter}),o=r.style.layers.filter(function(e){return a.every(function(t){return!t(e)})});return rw(rw({},r.style),{},{layers:o})},rZ);function rV(e){return"string"==typeof e&&Boolean(e.match(rM)||e.match(rF))}function rG(e,t,r){if(e.startsWith("http"))return e;if(e.startsWith("mapbox://styles")){var n=e.replace("mapbox://styles/","");return"".concat(r||J.DEFAULT_MAPBOX_API_URL,"/styles/v1/").concat(n,"?pluginName=Keplergl&access_token=").concat(t)}return null}function rB(e){var t=e.styleUrl,r=e.mapboxApiAccessToken,n=e.mapboxApiUrl,a=void 0===n?J.DEFAULT_MAPBOX_API_URL:n,o=e.mapState,i=void 0===o?{longitude:-122.3391,latitude:37.7922,zoom:9}:o,l=e.mapW,u=e.mapH,c=t.replace("mapbox://styles/","");return"".concat(a,"/styles/v1/").concat(c,"/static/")+"".concat(i.longitude,",").concat(i.latitude,",").concat(i.zoom,",0,0/")+"".concat(void 0===l?400:l,"x").concat(void 0===u?300:u)+"?access_token=".concat(r,"&logo=false&attribution=false")}function rY(e,t){if(1!==t&&e){var r=J.DEFAULT_LAYER_GROUPS.find(function(e){return"label"===e.slug}).filter,n=Math.log2(t),a=rI()(e);return(a.layers||[]).forEach(function(e){e.maxzoom&&(e.maxzoom=Math.max(e.maxzoom+n,1)),e.minzoom&&(e.minzoom=Math.max(e.minzoom+n,1)),r(e)&&e.layout&&e.layout["text-size"]&&Array.isArray(e.layout["text-size"].stops)&&e.layout["text-size"].stops.forEach(function(e){e[0]=Math.max(e[0]+n,1),e[1]*=t})}),a}return e}function rz(e,t){return Object.keys(e).reduce(function(e,r){return rw(rw({},e),t.hasOwnProperty(r)?(0,c.Z)({},r,t[r]):{})},e)}function rH(e){return e.title.length&&e.title.length<=J.MAP_INFO_CHARACTER.title&&(!e.description.length||e.description.length<=J.MAP_INFO_CHARACTER.description)}function rW(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rq(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rX(e,t){var r=Array.isArray(t)?t:[t];return e.length&&r.length?e.map(function(e){return rK(rK({},e),{},{layers:rK(rK({},e.layers),r.reduce(function(t,r){return r.id in e.layers||!r.config.isVisible?t:rK(rK({},t),{},(0,c.Z)({},r.id,r.config.isVisible))},{}))})}):e}function rJ(e,t){return e.length?e.map(function(e){var r=e.layers,n=t.id,a=(r[n],(0,S.Z)(r,[n].map(rW)));return rK(rK({},e),{},{layers:a})}):e}function rQ(e){return e.filter(function(e){return e.config.isVisible}).reduce(function(e,t){return rK(rK({},e),{},(0,c.Z)({},t.id,t.config.isVisible))},{})}function r$(e,t){var r=rQ(e);return[{layers:r},{layers:(t||{}).duplicate?rI()(r):{}}]}var r0=r(25788),r1=r(65997),r2=r.n(r1);function r3(e){var t=e.visState,r=e.mapState;return t.effectOrder.map(function(e){var n=K(e)(t.effects);return null!=n&&n.isEnabled&&n.deckEffect?(function(e){var t=e.visState,r=e.mapState,n=e.effect;if(n.type===J.LIGHT_AND_SHADOW_EFFECT.type){var a,o,i,l,u,c,s,d=n.parameters,f=d.timestamp,p=d.timeMode,g=n.deckEffect.directionalLights[0];if(p===J.LIGHT_AND_SHADOW_EFFECT_TIME_MODES.current)f=Date.now(),g.timestamp=f;else if(p===J.LIGHT_AND_SHADOW_EFFECT_TIME_MODES.animation){if(!(f=null!==(y=t.animationConfig.currentTime)&&void 0!==y?y:0)){var y,h,v,m=t.filters.find(function(e){return e.type===J.FILTER_TYPES.timeRange&&(e.view===J.FILTER_VIEW_TYPES.enlarged||e.syncedWithLayerTimeline)});m&&(f=null!==(h=null===(v=m.value)||void 0===v?void 0:v[0])&&void 0!==h?h:0)}g.timestamp=f}(a=r.latitude,o=r.longitude,i=f,l=new Date(i),c=(u=r2().getTimes(l,a,o)).sunrise,s=u.sunset,l>=c&&l<=s)?(n.deckEffect.outputUniformShadow=!1,g.intensity=n.parameters.sunLightIntensity):(n.deckEffect.outputUniformShadow=!0,g.intensity=0)}}({visState:t,mapState:r,effect:n}),n.deckEffect):null}).filter(function(e){return e})}var r4=function(e,t){var r=e.find(function(e){return e.type===J.LIGHT_AND_SHADOW_EFFECT.type});if(r){var n=t.indexOf(r.id);n>0&&(t.splice(n,1),t.unshift(r.id))}return t};function r5(e,t,r){var n=e.indexOf(t),a=e.indexOf(r);return(0,r0.arrayMove)(e,n,a)}function r7(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=rI()(e);return t.forEach(function(e){var t=e.defaultValue,n=e.name,a=e.type,o=e.min,i=e.max;if(r.hasOwnProperty(n)){var l=r[n];if("color"===a||"array"===a){if(!Array.isArray(t))return;if(l.length!==(null==t?void 0:t.length)){r[n]=t;return}t.forEach(function(e,r){var n,a=l[r];void 0!==(a=Number.isFinite(a)?e0([o,i],a):null!==(n=t[r])&&void 0!==n?n:o)&&(l[r]=a)});return}var u=Number.isFinite(l)?e0([o,i],l):null!=t?t:o;void 0!==u&&(r[n]=u)}}),r}function r6(e){var t,r=(null===(t=e.stylesheet)||void 0===t?void 0:t.sources)||{};return Object.keys(r).some(function(e){var t=r[e]||{},n=t.url,a=t.tiles;return n?n.toLowerCase().startsWith("mapbox://"):!!a&&a.some(function(e){return e.toLowerCase().startsWith("mapbox://")})})}var r8=function(e){return{url:"api.mapbox.com"===e.slice(8,22)||"tiles.mapbox.com"===e.slice(10,26)?e.replace("?","?pluginName=Keplergl&"):e}},r9=r(98743),ne=["width","height"];function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nn=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e.width,i=e.height,l=(0,S.Z)(e,ne),u=nr(nr({},(void 0===o?0:o)>0&&(void 0===i?0:i)>0?e:l),{},{transitionDuration:n?J.TRANSITION_DURATION:0});r&&"function"==typeof r&&r(u),t(u,a)},na=function(e,t){var r;return null===(r=e[t||0])||void 0===r?void 0:r.layers},no=function(e){return new r9.Z(e)},ni=r(92777),nl=r(82262),nu=r(15435),nc=function(){function e(t,r){(0,ni.Z)(this,e),(0,c.Z)(this,"_dataContainer",void 0),(0,c.Z)(this,"_rowIndex",void 0),this._dataContainer=t,this._rowIndex=r}return(0,nl.Z)(e,[{key:"valueAt",value:function(e){var t;return null===(t=this._dataContainer)||void 0===t?void 0:t.valueAt(this._rowIndex,e)}},{key:"values",value:function(){return this._dataContainer?this._dataContainer.rowAsArray(this._rowIndex):[]}},{key:"setSource",value:function(e,t){this._dataContainer=e,this._rowIndex=t}},{key:"map",value:function(e){for(var t,r=(null===(t=this._dataContainer)||void 0===t?void 0:t.numColumns())||0,n=[],a=0;a<r;++a)n[a]=e(this.valueAt(a),a);return n}}],[{key:"createSharedRow",value:function(t){return!0===t?new e(null,0):t}}]),e}(),ns=tT().mark(nf),nd=tT().mark(np);function nf(e,t){var r,n;return tT().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=e.numRows(),n=0;case 2:if(!(n<r)){a.next=8;break}return a.next=5,e.row(n,t);case 5:++n,a.next=2;break;case 8:case"end":return a.stop()}},ns)}function np(e,t){var r,n;return tT().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=e.numRows(),n=0;case 2:if(!(n<r)){a.next=8;break}return a.next=5,e.valueAt(n,t);case 5:++n,a.next=2;break;case 8:case"end":return a.stop()}},nd)}var ng=function(){function e(t){if((0,ni.Z)(this,e),(0,c.Z)(this,"_cols",void 0),(0,c.Z)(this,"_numColumns",void 0),(0,c.Z)(this,"_numRows",void 0),(0,c.Z)(this,"_fields",void 0),(0,c.Z)(this,"_numChunks",void 0),!t.cols)throw Error("ArrowDataContainer: no columns provided");if(!Array.isArray(t.cols))throw Error("ArrowDataContainer: columns object isn't an array");this._cols=t.cols,this._numColumns=t.cols.length,this._numRows=t.cols[0].length,this._fields=t.fields||[],this._numChunks=t.cols[0].data.length}return(0,nl.Z)(e,[{key:"update",value:function(e){this._cols=e,this._numColumns=this._cols.length,this._numRows=this._cols[0].length,this._numChunks=this._cols[0].data.length}},{key:"numChunks",value:function(){return this._numChunks}},{key:"numRows",value:function(){return this._numRows}},{key:"numColumns",value:function(){return this._numColumns}},{key:"valueAt",value:function(e,t){return this._cols[t].get(e)}},{key:"row",value:function(e,t){var r=nc.createSharedRow(t);return r?(r.setSource(this,e),r):new nc(this,e)}},{key:"rowAsArray",value:function(e){return this._cols.map(function(t){return t.get(e)})}},{key:"rows",value:function(e){return nf(this,nc.createSharedRow(e))}},{key:"column",value:function(e){return np(this,e)}},{key:"getColumn",value:function(e){return this._cols[e]}},{key:"getField",value:function(e){return this._fields[e]}},{key:"flattenData",value:function(){for(var e=[],t=0;t<this._numRows;++t)e.push(this.rowAsArray(t));return e}},{key:"getPlainIndex",value:function(){return(0,P.Z)(Array(this._numRows).keys())}},{key:"map",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=nc.createSharedRow(t),a=r.start,o=void 0===a?0:a,i=r.end,l=void 0===i?this.numRows():i,u=Math.min(this.numRows(),l),c=[],s=o;s<u;++s){var d=this.row(s,n);c.push(e(d,s))}return c}},{key:"mapIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.start,n=void 0===r?0:r,a=t.end,o=void 0===a?this.numRows():a,i=Math.min(this.numRows(),o),l=[],u=n;u<i;++u)l.push(e({index:u},this));return l}},{key:"find",value:function(e,t){for(var r=nc.createSharedRow(t),n=0;n<this._numRows;++n){var a=this.row(n,r);if(e(a,n))return a}}},{key:"reduce",value:function(e,t,r){for(var n=nc.createSharedRow(r),a=0;a<this._numRows;++a)t=e(t,this.row(a,n),a);return t}}]),e}();function ny(e){if(nu.g.isDate(e))return J.ALL_FIELD_TYPES.date;if(nu.g.isTimestamp(e)||nu.g.isTime(e))return J.ALL_FIELD_TYPES.timestamp;if(nu.g.isFloat(e))return J.ALL_FIELD_TYPES.real;if(nu.g.isInt(e))return J.ALL_FIELD_TYPES.integer;if(nu.g.isBool(e))return J.ALL_FIELD_TYPES.boolean;else if(nu.g.isUtf8(e)||nu.g.isNull(e))return J.ALL_FIELD_TYPES.string;else if(nu.g.isBinary(e)||nu.g.isDictionary(e)||nu.g.isFixedSizeBinary(e)||nu.g.isFixedSizeList(e)||nu.g.isList(e)||nu.g.isMap(e)||nu.g.isStruct(e))return J.ALL_FIELD_TYPES.object;else return L.console.warn("Unsupported arrow type: ".concat(e)),J.ALL_FIELD_TYPES.string}function nh(e){if(nu.g.isDate(e))return tS.DATA_TYPES.DATE;if(nu.g.isTimestamp(e)||nu.g.isTime(e))return tS.DATA_TYPES.DATETIME;if(nu.g.isFloat(e))return tS.DATA_TYPES.FLOAT;if(nu.g.isInt(e))return tS.DATA_TYPES.INT;if(nu.g.isBool(e))return tS.DATA_TYPES.BOOLEAN;else if(nu.g.isUtf8(e)||nu.g.isNull(e))return tS.DATA_TYPES.STRING;else if(nu.g.isBinary(e)||nu.g.isDictionary(e)||nu.g.isFixedSizeBinary(e)||nu.g.isFixedSizeList(e)||nu.g.isList(e)||nu.g.isMap(e)||nu.g.isStruct(e))return tS.DATA_TYPES.OBJECT;else return L.console.warn("Unsupported arrow type: ".concat(e)),tS.DATA_TYPES.STRING}var nv=tT().mark(nb),nm=tT().mark(nO);function nb(e,t){var r,n;return tT().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=e.numRows(),n=0;case 2:if(!(n<r)){a.next=8;break}return a.next=5,e.row(n,t);case 5:++n,a.next=2;break;case 8:case"end":return a.stop()}},nv)}function nO(e,t){var r,n;return tT().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=e.numRows(),n=0;case 2:if(!(n<r)){a.next=8;break}return a.next=5,e.valueAt(n,t);case 5:++n,a.next=2;break;case 8:case"end":return a.stop()}},nm)}var nE=function(){function e(t){var r;if((0,ni.Z)(this,e),(0,c.Z)(this,"_rows",void 0),(0,c.Z)(this,"_numColumns",void 0),!t.rows)throw Error("RowDataContainer: no rows provided");if(!Array.isArray(t.rows))throw Error("RowDataContainer: rows object isn't an array");this._rows=t.rows,this._numColumns=(null===(r=t.rows[0])||void 0===r?void 0:r.length)||0}return(0,nl.Z)(e,[{key:"numRows",value:function(){return this._rows.length}},{key:"numColumns",value:function(){return this._numColumns}},{key:"valueAt",value:function(e,t){return null===this._rows[e]?null:this._rows[e][t]}},{key:"row",value:function(e,t){var r=nc.createSharedRow(t);return r?(r.setSource(this,e),r):new nc(this,e)}},{key:"rowAsArray",value:function(e){return this._rows[e]}},{key:"rows",value:function(e){return nb(this,nc.createSharedRow(e))}},{key:"column",value:function(e){return nO(this,e)}},{key:"flattenData",value:function(){return this._rows}},{key:"getPlainIndex",value:function(){return this._rows.map(function(e,t){return t})}},{key:"map",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=nc.createSharedRow(t),a=r.start,o=void 0===a?0:a,i=r.end,l=void 0===i?this.numRows():i,u=Math.min(this.numRows(),l),c=[],s=o;s<u;++s){var d=this.row(s,n);c.push(e(d,s))}return c}},{key:"mapIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.start,n=void 0===r?0:r,a=t.end,o=void 0===a?this.numRows():a,i=Math.min(this.numRows(),o),l=[],u=n;u<i;++u)l.push(e({index:u},this));return l}},{key:"find",value:function(e,t){for(var r=nc.createSharedRow(t),n=0;n<this._rows.length;++n){var a=this.row(n,r);if(e(a,n))return a}}},{key:"reduce",value:function(e,t,r){for(var n=nc.createSharedRow(r),a=0;a<this._rows.length;++a)t=e(t,this.row(a,n),a);return t}}]),e}(),nT=tT().mark(nA),nS=tT().mark(nP);function nA(e,t,r){var n,a,o;return tT().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=t.length,a=0;case 2:if(!(a<n)){i.next=9;break}return o=t[a],i.next=6,e.row(o,r);case 6:++a,i.next=2;break;case 9:case"end":return i.stop()}},nT)}function nP(e,t,r){var n,a,o;return tT().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:n=t.length,a=0;case 2:if(!(a<n)){i.next=9;break}return o=t[a],i.next=6,e.valueAt(o,r);case 6:++a,i.next=2;break;case 9:case"end":return i.stop()}},nS)}var nL=function(){function e(t,r){(0,ni.Z)(this,e),(0,c.Z)(this,"_parentDataContainer",void 0),(0,c.Z)(this,"_indices",void 0),this._parentDataContainer=t,this._indices=r}return(0,nl.Z)(e,[{key:"numRows",value:function(){return this._indices.length}},{key:"numColumns",value:function(){return this._parentDataContainer.numColumns()}},{key:"_mappedRowIndex",value:function(e){return this._indices[e]}},{key:"valueAt",value:function(e,t){return this._parentDataContainer.valueAt(this._mappedRowIndex(e),t)}},{key:"row",value:function(e,t){return this._parentDataContainer.row(this._mappedRowIndex(e),t)}},{key:"rowAsArray",value:function(e){return this._parentDataContainer.rowAsArray(this._mappedRowIndex(e))}},{key:"rows",value:function(e){return nA(this._parentDataContainer,this._indices,e)}},{key:"column",value:function(e){return nP(this._parentDataContainer,this._indices,e)}},{key:"getPlainIndex",value:function(){return this._indices.map(function(e,t){return t})}},{key:"flattenData",value:function(){var e=this,t=nc.createSharedRow(!0);return this._indices.map(function(r,n){return e.row(n,t).values()},this)}},{key:"map",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.start,a=void 0===n?0:n,o=r.end,i=void 0===o?this.numRows():o,l=Math.min(this.numRows(),i),u=nc.createSharedRow(t),c=[],s=a;s<l;++s){var d=this.row(s,u);c.push(e(d,s))}return c}},{key:"mapIndex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.start,n=void 0===r?0:r,a=t.end,o=void 0===a?this.numRows():a,i=Math.min(this.numRows(),o),l=[],u=n;u<i;++u)l.push(e({index:this._mappedRowIndex(u)},this._parentDataContainer));return l}},{key:"find",value:function(e,t){for(var r=nc.createSharedRow(t),n=0;n<this.numRows();++n){var a=this.row(n,r);if(e(a,n))return a}}},{key:"reduce",value:function(e,t,r){for(var n=nc.createSharedRow(r),a=0;a<this._indices.length;++a)t=e(t,this.row(a,n),a);return t}}]),e}();function nC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nC(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var nx={ROWS_ARRAY:"ROWS_ARRAY",COLS_ARRAY:"COLS_ARRAY"},nD={inputDataFormat:nx.ROWS_ARRAY};function nR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nD;if((t=n_(n_({},nD),t)).inputDataFormat===nx.ROWS_ARRAY)return new nE({rows:e,fields:t.fields});if(t.inputDataFormat===nx.COLS_ARRAY)return new ng({cols:e,fields:t.fields});throw Error("Failed to create a data container: not implemented format")}function nI(e,t){return new nL(e,t)}function nk(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=e.numRows(),n=Math.max(Math.floor(r/t),1),a=[],o=0;o<r;o+=n)a.push(o);return nI(e,a)}var nw=r(57590),nM=r(37997),nF=r(99131),nj=r(42738),nZ=r(51144),nN=r.n(nZ),nU=r(77181),nV=r.n(nU),nG=r(12345),nB=r(70543),nY=r(11456);function nz(e,t,r){return("function"==typeof t?e.map(t):e).filter(e3).sort(r)}function nH(e,t){return eQ(e.mapIndex(t)).filter(e3).sort()}function nW(e,t){return("function"==typeof t?(0,nj.Z)(e,t):(0,nj.Z)(e)).map(function(e,t){return void 0===e?t:e})}function nq(e,t){var r=nW(e,t),n=(0,s.Z)(r,2),a=n[0];return[0===a?1e-5:a,n[1]]}var nK=r(75055);function nX(e){var t=e.id;return(0,nK.VP)(t).reverse()}function nJ(e,t){if(!(null!=e&&e.id))return null;var r,n,a=(n=e.id,(0,nK.Lg)(n,!0));return{type:"Feature",geometry:{coordinates:null!=t&&t.isClosed?[a]:a,type:null!=t&&t.isClosed?"Polygon":"LineString"},properties:t}}var nQ=function(e,t,r){if(e.type!==J.ALL_FIELD_TYPES.string)return!1;var n=r.find(function(e){return e3(e.valueAt(t))},!0);return n&&(0,nK.rg)(n.valueAt(t))},n$=function(e,t){return e.filter(function(e,r){return nQ(e,r,t)})};function n0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function n1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n0(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var n2=1e3,n3=60*n2,n4=60*n3,n5=24*n4,n7=7*n5,n6=365*n5,n8=[{max:1,step:.05},{max:10,step:.1},{max:100,step:1},{max:500,step:5},{max:1e3,step:10},{max:5e3,step:50},{max:Number.POSITIVE_INFINITY,step:1e3}],n9=30,ae=100,at=nN()({dataId:null,name:null,layerId:null}),ar=nN()((0,c.Z)({},at.name,null)),an=(l={},(0,c.Z)(l,J.FILTER_TYPES.timeRange,(o={default:"histogram"},(0,c.Z)(o,J.ALL_FIELD_TYPES.integer,"lineChart"),(0,c.Z)(o,J.ALL_FIELD_TYPES.real,"lineChart"),o)),(0,c.Z)(l,J.FILTER_TYPES.range,(i={default:"histogram"},(0,c.Z)(i,J.ALL_FIELD_TYPES.integer,"lineChart"),(0,c.Z)(i,J.ALL_FIELD_TYPES.real,"lineChart"),i)),l),aa=(u={},(0,c.Z)(u,J.FILTER_TYPES.select,"SingleSelectFilter"),(0,c.Z)(u,J.FILTER_TYPES.multiSelect,"MultiSelectFilter"),(0,c.Z)(u,J.FILTER_TYPES.timeRange,"TimeRangeFilter"),(0,c.Z)(u,J.FILTER_TYPES.range,"RangeFilter"),(0,c.Z)(u,J.FILTER_TYPES.polygon,"PolygonFilter"),u),ao={dataId:[],freeze:!1,id:null,enabled:!0,fixedDomain:!1,view:J.FILTER_VIEW_TYPES.side,isAnimating:!1,animationWindow:J.ANIMATION_WINDOW.free,speed:1,name:[],type:null,fieldIdx:[],domain:null,value:null,plotType:J.PLOT_TYPES.histogram,yAxis:null,interval:null,gpu:!1},ai=4,al=[J.FILTER_TYPES.polygon];function au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataId,r=e.id;return n1(n1({},ao),{},{dataId:t?j(t):[],id:r||R(ai)})}function ac(e,t){return j(e.dataId).includes(t)&&null!==e.value}function as(e,t,r){var n={dataset:e,filter:null},a=t.value,o=t.layerId,i=t.type,l=t.dataId;return o&&aI(i,a)&&l.includes(e.id)?r.find(function(e){return o.includes(e.id)})?{filter:n1(n1({},t),{},{freeze:!0,fieldIdx:[]}),dataset:e}:n:n}var ad=(0,c.Z)({},J.FILTER_TYPES.polygon,as);function af(e,t){var r,n={dataset:e,filter:null},a=j(t.dataId),o=a.indexOf(e.id);if(o<0||!j(t.name)[o])return n;var i=n1(n1(n1({},au({dataId:t.dataId})),t),{},{dataId:a,name:j(t.name)}),l=i.name[o],u=aF(i,e,l,o,{mergeDomain:!0}),c=u.filter,s=u.dataset;return c?(c.value=aE(t.value,c),c.view=null!==(r=t.view)&&void 0!==r?r:c.view,null===c.value)?n:{filter:function(e,t){var r=t.fields,n=e.yAxis;if(n){var a=r.find(function(e){var t=e.name,r=e.type;return t===n.name&&r===n.type});e=a?n1(n1({},e),{},{yAxis:a},aB(n1(n1({},e),{},{yAxis:a}),t)):e}return e}(c,s),dataset:s}:n}function ap(e,t,r){return t.type&&ad.hasOwnProperty(t.type)?ad[t.type](e,t,r):af(e,t)}function ag(e,t){var r=n1(n1({},t),{},{fieldType:e.type,view:J.FILTER_VIEW_TYPES.side});switch(e.type){case J.ALL_FIELD_TYPES.real:case J.ALL_FIELD_TYPES.integer:return n1(n1({},r),{},{value:t.domain,type:J.FILTER_TYPES.range,typeOptions:[J.FILTER_TYPES.range],gpu:!0});case J.ALL_FIELD_TYPES.boolean:return n1(n1({},r),{},{type:J.FILTER_TYPES.select,value:!0,gpu:!1});case J.ALL_FIELD_TYPES.string:case J.ALL_FIELD_TYPES.date:return n1(n1({},r),{},{type:J.FILTER_TYPES.multiSelect,value:[],gpu:!1});case J.ALL_FIELD_TYPES.timestamp:return n1(n1({},r),{},{type:J.FILTER_TYPES.timeRange,view:J.FILTER_VIEW_TYPES.enlarged,fixedDomain:!0,value:r.domain,gpu:!0});default:return{}}}var ay=function(e,t,r){var n=e.getPositionAccessor(r);switch(e.type){case J.LAYER_TYPES.point:case J.LAYER_TYPES.icon:return function(e){var r=n(e);return r.every(Number.isFinite)&&ax(r,t.value)};case J.LAYER_TYPES.arc:case J.LAYER_TYPES.line:return function(e){var r=n(e);return r.every(Number.isFinite)&&[[r[0],r[1]],[r[3],r[4]]].every(function(e){return ax(e,t.value)})};case J.LAYER_TYPES.hexagonId:if(e.dataToFeature&&e.dataToFeature.centroids)return function(r){var n=e.dataToFeature.centroids[r.index];return n&&ax(n,t.value)};return function(e){var r=n(e);if(!(0,nK.rg)(r))return!1;var a=nX({id:r});return a.every(Number.isFinite)&&ax(a,t.value)};case J.LAYER_TYPES.geojson:return function(r){return e.isInPolygon(r,r.index,t.value)};default:return function(){return!0}}};function ah(e,t,r,n,a){var o=e?e.valueAccessor:function(e){return null},i=function(e){return!0};if(!1===r.enabled)return i;switch(r.type){case J.FILTER_TYPES.range:return function(e){return a_(o(e),r.value)};case J.FILTER_TYPES.multiSelect:return function(e){return r.value.includes(o(e))};case J.FILTER_TYPES.select:return function(e){return o(e)===r.value};case J.FILTER_TYPES.timeRange:if(!e)return i;var l=tH()(e,["filterProps","mappedValue"]),u=Array.isArray(l)?function(e){return l[e.index]}:function(t){return e2(o(t),e.format)};return function(e){return a_(u(e),r.value)};case J.FILTER_TYPES.polygon:if(!n||!n.length||!r.layerId)return i;var c=r.layerId.map(function(e){return n.find(function(t){return t.id===e})}).filter(function(e){return e&&e.config.dataId===t}).map(function(e){return ay(e,r,a)});return function(e){return c.every(function(t){return t(e)})};default:return i}}function av(e){return au({dataId:e})}function am(e,t){for(var r=e.dynamicDomainFilters,n=e.cpuFilters,a=e.filterFuncs,o=[],i=[],l={index:-1,dataContainer:t},u=function(e){return a[e.id](l)},c=t.numRows(),s=0;s<c;++s)l.index=s,r&&r.every(u)&&o.push(l.index),n&&n.every(u)&&i.push(l.index);return n1(n1({},r?{filteredIndexForDomain:o}:{}),n?{filteredIndex:i}:{})}function ab(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={dynamicDomain:[],fixedDomain:[],cpu:[],gpu:[]};return t.forEach(function(t){aI(t.type,t.value)&&j(t.dataId).includes(e)&&((t.fixedDomain||r.ignoreDomain?n.fixedDomain:n.dynamicDomain).push(t),(t.gpu&&!r.cpuOnly?n.gpu:n.cpu).push(t))}),n}function aO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return Object.entries(e).forEach(function(e){var n=(0,s.Z)(e,2),a=n[0],o=n[1];o.forEach(function(e){var n=(t[a]||[]).find(function(t){return t.id===e.id});n?["name","value","dataId"].forEach(function(t){e[t]!==n[t]&&(r=G([a,e.id],"".concat(t,"_changed"),r))}):r=G([a,e.id],"added",r)}),(t[a]||[]).forEach(function(e){o.find(function(t){return t.id===e.id})||(r=G([a,e.id],"deleted",r))})}),n1(n1({},{dynamicDomain:null,fixedDomain:null,cpu:null,gpu:null}),r)}function aE(e,t){var r=t.domain,n=t.type;if(!n||n!==J.FILTER_TYPES.polygon&&!r)return!1;switch(n){case J.FILTER_TYPES.range:case J.FILTER_TYPES.timeRange:if(!Array.isArray(e)||2!==e.length)return r.map(function(e){return e});return e.map(function(e,t){return e3(e)&&a_(e,r)?e:r[t]});case J.FILTER_TYPES.multiSelect:if(!Array.isArray(e))return[];var a=e.filter(function(e){return r.includes(e)});return a.length?a:[];case J.FILTER_TYPES.select:return!r.includes(e)||e;case J.FILTER_TYPES.polygon:return e;default:return null}}function aT(e,t){var r=[0,1],n=.1,a=e.mapIndex(t);if(e.numRows()>1){var o=(r=nW(a))[1]-r[0];o||(r[1]=r[0]+1),n=aS(o)||n,r[0]=aC(r[0],n,"floor"),r[1]=aC(r[1],n,"ceil")}var i,l=aL(r,a);return{domain:r,step:n,histogram:l.histogram,enlargedHistogram:l.enlargedHistogram}}function aS(e){if((e=Math.abs(e))>100)return 1;if(e>3)return .01;if(e>1)return .001;var t=parseFloat((e/1e3).toExponential().split("e")[1]);return new nY.Decimal(10).pow(t).toNumber()}function aA(e,t){var r=e.mapIndex(t),n=nW(r),a=aD(n),o=.01,i=n[1]-n[0];i||(n[1]=n[0]+1e3);var l=n8.find(function(e){return e.max>=i});l&&(o=l.step);var u,c=aL(n,r);return{domain:n,step:o,mappedValue:r,histogram:c.histogram,enlargedHistogram:c.enlargedHistogram,defaultTimeFormat:a}}function aP(e,t,r){return(0,nw.Z)().thresholds((0,nM.ZP)(e[0],e[1],r)).domain(e)(t).map(function(e){return{count:e.length,bin:e,x0:e.x0,x1:e.x1}})}function aL(e,t){var r=aP(e,t,n9),n=aP(e,t,ae);return{histogram:r,enlargedHistogram:n}}function aC(e,t,r){return"floor"===r?Math.floor(e*(1/t))/(1/t):Math.ceil(e*(1/t))/(1/t)}function a_(e,t){return!!Array.isArray(t)&&e>=t[0]&&e<=t[1]}function ax(e,t){return(0,nG.Z)((0,nB.xm)(e),t)}function aD(e){if(!az(e))return null;var t=e[1]-e[0];return t>n6?"L":t>n5?"L LT":"L LTS"}function aR(e){return(null==e?void 0:e.type)&&Array.isArray(null==e?void 0:e.name)&&((null==e?void 0:e.name.length)||(null==e?void 0:e.layerId.length))}function aI(e,t){if(!e)return!1;switch(e){case J.FILTER_TYPES.select:return!0===t||!1===t;case J.FILTER_TYPES.range:case J.FILTER_TYPES.timeRange:return Array.isArray(t)&&t.every(function(e){return null!==e&&!isNaN(e)});case J.FILTER_TYPES.multiSelect:return Array.isArray(t)&&Boolean(t.length);case J.FILTER_TYPES.input:return Boolean(t.length);case J.FILTER_TYPES.polygon:var r=tH()(t,["geometry","coordinates"]);return Boolean(t&&t.id&&r);default:return!0}}function ak(e,t){if(e.plotType===J.PLOT_TYPES.histogram||!e.yAxis)return{};var r=e.mappedValue,n=void 0===r?[]:r,a=e.yAxis,o=t.getColumnFieldIdx(a.name);if(o<0)return ei().warn("yAxis ".concat(a.name," does not exist in dataset")),{lineChart:{},yAxis:a};var i=t.dataContainer.map(function(e,t){return{x:n[t],y:e.valueAt(o)}},!0).filter(function(e){var t=e.x,r=e.y;return Number.isFinite(t)&&Number.isFinite(r)}).sort(function(e,t){return(0,nF.Z)(e.x,t.x)}),l=(0,nj.Z)(i,function(e){return e.y}),u=[i[0].x,i[i.length-1].x];return{lineChart:{series:i,yDomain:l,xDomain:u},yAxis:a}}function aw(e){var t=e.type&&an[e.type];return t?e.yAxis?t[e.yAxis.type]||null:t.default:null}function aM(e,t,r,n){return j(e).reduce(function(e,a){var o=(n||[]).filter(function(e){return e.config.dataId===a}),i=r.filter(function(e){return ac(e,a)}),l=t[a];return n1(n1({},e),{},(0,c.Z)({},a,l.filterTable(i,o,{})))},t)}function aF(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=!!(a&&a.hasOwnProperty("mergeDomain"))&&a.mergeDomain,i=t.getColumnFieldIdx(r);if(-1===i)return{filter:null,dataset:t};var l=t.getColumnFilterProps(r);return{filter:n1(n1({},o?aj(e,l):n1(n1({},e),l)),{},{name:Object.assign((0,P.Z)(j(e.name)),(0,c.Z)({},n,r)),fieldIdx:Object.assign((0,P.Z)(j(e.fieldIdx)),(0,c.Z)({},n,i)),freeze:!0}),dataset:t}}function aj(e,t){if(!e)return null;if(!t||e.fieldType&&e.fieldType!==t.fieldType||!t.domain)return e;var r=e.domain?[].concat((0,P.Z)(e.domain||[]),(0,P.Z)(t.domain||[])).sort(function(e,t){return e-t}):t.domain,n=n1(n1(n1({},e),t),{},{domain:[r[0],r[r.length-1]]});switch(t.fieldType){case J.ALL_FIELD_TYPES.string:case J.ALL_FIELD_TYPES.date:return n1(n1({},n),{},{domain:eQ(r).sort()});case J.ALL_FIELD_TYPES.timestamp:var a=e.step<t.step?e.step:t.step;return n1(n1({},n),{},{step:a});case J.ALL_FIELD_TYPES.real:case J.ALL_FIELD_TYPES.integer:default:return n}}var aZ=function(e,t,r){return n1(n1({},e),{},{id:e.id,properties:n1(n1(n1({},e.properties),r),{},{filterId:t})})},aN=function(e){return tH()(e,["properties","filterId"])};function aU(e,t){var r=e.map(function(e){return e.config.dataId}).filter(e3),n=e.map(function(e){return e.id}),a=e.map(function(e){return e.config.label}),o=au({dataId:r});return n1(n1({},o),{},{fixedDomain:!0,type:J.FILTER_TYPES.polygon,name:a,layerId:n,value:aZ(t,o.id,{isVisible:!0})})}function aV(e,t){var r=e.filters.filter(function(e){return e.dataId.includes(t)}),n=e.datasets[t];if(!n)return e;var a=n.filterTableCPU(r,e.layers);return G(["datasets",t],a,e)}function aG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],n=[],a=e.datasets,o=a;return t.forEach(function(t){var i=j(t.dataId);if(i.every(function(t){return a[t]&&!e.isMergingDatasets[t]})){var l=i.reduce(function(r,n){var a=o[n],i=e.layers.filter(function(e){return e.config.dataId===a.id}),l=ap(r.augmentedDatasets[n]||a,t,i),u=l.filter,s=l.dataset;return u?n1(n1({},r),{},{filter:r.filter?n1(n1({},r.filter),aj(r.filter,u)):u,applyToDatasets:[].concat((0,P.Z)(r.applyToDatasets),[n]),augmentedDatasets:n1(n1({},r.augmentedDatasets),{},(0,c.Z)({},n,s))}):r},{filter:null,applyToDatasets:[],augmentedDatasets:{}}),u=l.filter,s=l.applyToDatasets,d=l.augmentedDatasets;u&&nV()(i,s)?(r.push(u),o=n1(n1({},o),d)):n.push(t)}else n.push(t)}),{validated:r,failed:n,updatedDatasets:o}}function aB(e,t){if(e.plotType===J.PLOT_TYPES.histogram||!e.yAxis)return{};var r=e.mappedValue,n=void 0===r?[]:r,a=e.yAxis,o=t.getColumnFieldIdx(a.name);if(o<0)return ei().warn("yAxis ".concat(a.name," does not exist in dataset")),{lineChart:{},yAxis:a};var i=t.dataContainer.map(function(e,t){return{x:n[t],y:e.valueAt(o)}},!0).filter(function(e){var t=e.x,r=e.y;return Number.isFinite(t)&&Number.isFinite(r)}).sort(function(e,t){return(0,nF.Z)(e.x,t.x)}),l=(0,nj.Z)(i,function(e){return e.y}),u=[i[0].x,i[i.length-1].x];return{lineChart:{series:i,yDomain:l,xDomain:u},yAxis:a}}function aY(e){var t,r=e.bins,n=null===(t=e.plotType)||void 0===t?void 0:t.interval;if(!n||!r||0===Object.keys(r).length)return null;var a=Object.values(r);return a[0]?a[0][n]:null}function az(e){return Array.isArray(e)&&e.every(Number.isFinite)}function aH(e){if(az(e)){var t=e[1]-e[0];return t>n7?"L":t>n5?"L LT":t>n4?"LT":"LTS"}}function aW(e){return e.view===J.FILTER_VIEW_TYPES.side}},30817:function(e,t,r){"use strict";r.d(t,{iW:function(){return o},sv:function(){return a}});var n,a=((n={}).SET_FILE_DATA="SET_FILE_DATA",n.SET_RAW_FILE_DATA="SET_RAW_FILE_DATA",n.SET_DEFAULT_DATA="SET_DEFAULT_DATA",n.PROCESS_FILES="PROCESS_FILES",n.PROCESS_BATCHES="PROCESS_BATCHES",n),o=function(e){return{type:a.SET_RAW_FILE_DATA,payload:e}}},45244:function(e,t,r){"use strict";r.d(t,{sv:function(){return o.sv},p1:function(){return h},Xw:function(){return y},TF:function(){return c},AF:function(){return a.A},zN:function(){return m},Q_:function(){return v},Ln:function(){return p},ww:function(){return f},Jr:function(){return s},sF:function(){return u},KO:function(){return l},LR:function(){return i},iH:function(){return d},fK:function(){return g},Ue:function(){return b},o2:function(){return T},FS:function(){return E},Ju:function(){return O}});var n,a=r(41313),o=r(30817),i="SET_SELECTED_GRAPH_VARIABLES",l="SET_SELECTED_CHOROPLETH_VARIABLE",u="SET_PLOT_TYPE",c="SET_CHOROPLETH_METHOD",s="SET_NUMBER_OF_BREAKS",d="SET_SELECTED_LOCAL_MORAN_VARIABLE",f="SET_LOCAL_MORAN_WEIGHTS",p="SET_LOCAL_MORAN_SIGNIFICANCE",g="SET_UNIVARIATE_AUTOCORRELATION_TYPE",y="SET_CHOROPLETH_LAYER",h="SET_CHOROPLETH_DATA",v="SET_LOCAL_MORAN_LAYER",m="SET_LOCAL_MORAN_DATA",b=((n={}).SET_OPEN_FILE_MODAL="SET_OPEN_FILE_MODAL",n.SET_KEPLER_TABLE_MODAL="SET_KEPLER_TABLE_MODAL",n.SET_GRID_VIEW="SET_GRID_VIEW",n),O=function(e){return{type:b.SET_OPEN_FILE_MODAL,payload:e}},E=function(e){return{type:b.SET_KEPLER_TABLE_MODAL,payload:e}},T=function(e){return{type:b.SET_GRID_VIEW,payload:e}}},41313:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n="SET_LANGUAGE"},12050:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n,a=r(67294),o=r(9473),i=r(64720),l=JSON.parse('{"fileUpload.dropHere":"Drop the files here ...","fileUpload.dragDropClick":"Drag and drop csv, geojson, or json files here, or click to select files","chatGpt.initialMessage":"Hello, I\'m ChatGPT! Ask me anything!","chatGpt.isTyping":"ChatGPT is typing","chatGpt.inputPlaceholder":"Type the message here","toolbar.title":"Toolbar","toolbar.plotType":"Plot Type","toolbar.selectPlotType":"Select Plot Type","toolbar.barPlot":"Bar Plot","toolbar.scatterPlot":"Scatter Plot","toolbar.variable1":"Variable 1","toolbar.variable2":"Variable 2","toolbar.selectVariable":"Select Variable","table.noData":"No data available","toolbar.choroplethMethod":"Choropleth Method","toolbar.selectChoroplethMethod":"Select Choropleth Method","toolbar.naturalBreaks":"Natural Breaks","toolbar.quantileBreaks":"Quantile Breaks","toolbar.percentileBreaks":"Percentile Breaks","toolbar.hinge15Breaks":"Hinge at 1.5 Breaks","toolbar.hinge30Breaks":"Hinge at 3.0 Breaks","toolbar.standardDeviationBreaks":"Standard Deviation Breaks","toolbar.numberOfBreaks":"Number of Breaks","toolbar.choroplethVariable":"Variable","toolbar.selectChoroplethVariable":"Select Variable","toolbar.localMoranVariable":"Local Moran Variable","toolbar.selectLocalMoranVariable":"Select Local Moran Variable","toolbar.localMoranWeights":"Local Moran Weights","toolbar.selectLocalMoranWeights":"Select Local Moran Weights","toolbar.localMoranSignificance":"Local Moran Significance","toolbar.queenWeights":"Queen weights","toolbar.rookWeights":"Rook weights","toolbar.univariateAutocorrelationType":"Univariate Autocorrelation Type","toolbar.selectUnivariateAutocorrelationType":"Select Autocorrelation Type","toolbar.localMoran":"Local Moran","toolbar.localGeary":"Local Geary","toolbar.localG":"Local G","toolbar.localGStar":"Local G*","toolbar.localJoinCount":"Local Join Count","toolbar.quantileLisa":"Quantile LISA"}'),u=JSON.parse('{"fileUpload.dropHere":"Pudota tiedostot t\xe4h\xe4n ...","fileUpload.dragDropClick":"Ved\xe4 ja pudota csv-, geojson- tai json-tiedostoja t\xe4h\xe4n, tai napsauta valitaksesi tiedostoja","chatGpt.initialMessage":"Hei, olen ChatGPT! Kysy minulta mit\xe4 tahansa!","chatGpt.isTyping":"ChatGPT kirjoittaa","chatGpt.inputPlaceholder":"Kirjoita viesti t\xe4h\xe4n","toolbar.title":"Ty\xf6kalurivi","toolbar.plotType":"Kaavion tyyppi","toolbar.selectPlotType":"Valitse kaavion tyyppi","toolbar.barPlot":"Pylv\xe4skaavio","toolbar.scatterPlot":"Hajontakaavio","toolbar.variable1":"Muuttuja 1","toolbar.variable2":"Muuttuja 2","toolbar.selectVariable":"Valitse muuttuja","table.noData":"Tietoja ei ole saatavilla","toolbar.choroplethMethod":"Kloroplin menetelm\xe4","toolbar.selectChoroplethMethod":"Valitse kloroplin menetelm\xe4","toolbar.naturalBreaks":"Luonnolliset v\xe4lit","toolbar.quantileBreaks":"Kvantiiliv\xe4lit","toolbar.percentileBreaks":"Persentiiliv\xe4lit","toolbar.hinge15Breaks":"Saranav\xe4lit 1.5","toolbar.hinge30Breaks":"Saranav\xe4lit 3.0","toolbar.standardDeviationBreaks":"Keskihajonnan v\xe4lit","toolbar.numberOfBreaks":"V\xe4lien lukum\xe4\xe4r\xe4","toolbar.choroplethVariable":"Karttamuuttuja","toolbar.selectChoroplethVariable":"Valitse karttamuuttuja","toolbar.localMoranVariable":"Paikallinen Moran-muuttuja","toolbar.selectLocalMoranVariable":"Valitse paikallinen Moran-muuttuja","toolbar.localMoranWeights":"Paikalliset Moran-painot","toolbar.selectLocalMoranWeights":"Valitse paikalliset Moran-painot","toolbar.localMoranSignificance":"Paikallisen Moranin merkitys","toolbar.queenWeights":"Kuningattaren painot","toolbar.rookWeights":"Tornin painot","toolbar.univariateAutocorrelationType":"Yksimuuttuja-autokorrelaatio","toolbar.selectUnivariateAutocorrelationType":"Valitse Autokorrelaatiotyyppi","toolbar.localMoran":"Paikallinen Moran","toolbar.localGeary":"Paikallinen Geary","toolbar.localG":"Paikallinen G","toolbar.localGStar":"Paikallinen G*","toolbar.localJoinCount":"Paikallinen Liittymislaskenta","toolbar.quantileLisa":"Kvanttiili LISA"}'),c=JSON.parse('{"fileUpload.dropHere":"Solte os arquivos aqui ...","fileUpload.dragDropClick":"Arraste e solte arquivos csv, geojson ou json aqui, ou clique para selecionar arquivos","chatGpt.initialMessage":"Ol\xe1, sou o ChatGPT! Pergunte-me qualquer coisa!","chatGpt.isTyping":"ChatGPT est\xe1 digitando","chatGpt.inputPlaceholder":"Digite a mensagem aqui","toolbar.title":"Barra de Ferramentas","toolbar.plotType":"Tipo de Gr\xe1fico","toolbar.selectPlotType":"Selecione o Tipo de Gr\xe1fico","toolbar.barPlot":"Gr\xe1fico de Barras","toolbar.scatterPlot":"Gr\xe1fico de Dispers\xe3o","toolbar.variable1":"Vari\xe1vel 1","toolbar.variable2":"Vari\xe1vel 2","toolbar.selectVariable":"Selecione a Vari\xe1vel","table.noData":"Nenhum dado dispon\xedvel","toolbar.choroplethMethod":"M\xe9todo de Coropleta","toolbar.selectChoroplethMethod":"Selecionar M\xe9todo de Coropleta","toolbar.naturalBreaks":"Intervalos Naturais","toolbar.quantileBreaks":"Intervalos de Quantis","toolbar.percentileBreaks":"Intervalos de Percentis","toolbar.hinge15Breaks":"Intervalos de Dobradi\xe7a 1.5","toolbar.hinge30Breaks":"Intervalos de Dobradi\xe7a 3.0","toolbar.standardDeviationBreaks":"Intervalos de Desvio Padr\xe3o","toolbar.numberOfBreaks":"N\xfamero de Intervalos","toolbar.choroplethVariable":"Vari\xe1vel de Coropleta","toolbar.selectChoroplethVariable":"Selecione Vari\xe1vel de Coropleta","toolbar.localMoranVariable":"Vari\xe1vel Local Moran","toolbar.selectLocalMoranVariable":"Selecionar Vari\xe1vel Local Moran","toolbar.localMoranWeights":"Pesos Locais Moran","toolbar.selectLocalMoranWeights":"Selecionar Pesos Locais Moran","toolbar.localMoranSignificance":"Signific\xe2ncia Local Moran","toolbar.queenWeights":"Pesos da rainha","toolbar.rookWeights":"Pesos do rook","toolbar.univariateAutocorrelationType":"Tipo de autocorrela\xe7\xe3o univariada","toolbar.selectUnivariateAutocorrelationType":"Selecionar tipo de autocorrela\xe7\xe3o","toolbar.localMoran":"Moran Local","toolbar.localGeary":"Geary Local","toolbar.localG":"G Local","toolbar.localGStar":"G* Local","toolbar.localJoinCount":"Contagem de Join Local","toolbar.quantileLisa":"Quantil LISA"}'),s=JSON.parse('{"fileUpload.dropHere":"Suelta los archivos aqu\xed ...","fileUpload.dragDropClick":"Arrastra y suelta archivos csv, geojson o json aqu\xed, o haz clic para seleccionar archivos","chatGpt.initialMessage":"\xa1Hola, soy ChatGPT! \xa1Preg\xfantame cualquier cosa!","chatGpt.isTyping":"ChatGPT est\xe1 escribiendo","chatGpt.inputPlaceholder":"Escribe el mensaje aqu\xed","toolbar.title":"Barra de herramientas","toolbar.plotType":"Tipo de gr\xe1fico","toolbar.selectPlotType":"Seleccionar tipo de gr\xe1fico","toolbar.barPlot":"Gr\xe1fico de barras","toolbar.scatterPlot":"Gr\xe1fico de dispersi\xf3n","toolbar.variable1":"Variable 1","toolbar.variable2":"Variable 2","toolbar.selectVariable":"Seleccionar variable","table.noData":"No hay datos disponibles","toolbar.choroplethMethod":"M\xe9todo de Coropletas","toolbar.selectChoroplethMethod":"Seleccionar M\xe9todo de Coropletas","toolbar.naturalBreaks":"Rupturas Naturales","toolbar.quantileBreaks":"Rupturas de Cuantiles","toolbar.percentileBreaks":"Rupturas de Percentiles","toolbar.hinge15Breaks":"Rupturas de Bisagra 1.5","toolbar.hinge30Breaks":"Rupturas de Bisagra 3.0","toolbar.standardDeviationBreaks":"Rupturas de Desviaci\xf3n Est\xe1ndar","toolbar.numberOfBreaks":"N\xfamero de Rupturas","toolbar.choroplethVariable":"Variable de Coropleta","toolbar.selectChoroplethVariable":"Seleccione Variable de Coropleta","toolbar.localMoranVariable":"Variable Local Moran","toolbar.selectLocalMoranVariable":"Seleccionar Variable Local Moran","toolbar.localMoranWeights":"Pesos Locales Moran","toolbar.selectLocalMoranWeights":"Seleccionar Pesos Locales Moran","toolbar.localMoranSignificance":"Significancia Local Moran","toolbar.queenWeights":"Pesos de la reina","toolbar.rookWeights":"Pesos del rook","toolbar.univariateAutocorrelationType":"Tipo de autocorrelaci\xf3n univariante","toolbar.selectUnivariateAutocorrelationType":"Seleccionar tipo de autocorrelaci\xf3n","toolbar.localMoran":"Moran Local","toolbar.localGeary":"Geary Local","toolbar.localG":"G Local","toolbar.localGStar":"G* Local","toolbar.localJoinCount":"Cuenta de Join Local","toolbar.quantileLisa":"Cuantil LISA"}'),d=JSON.parse('{"fileUpload.dropHere":"Deixa anar els fitxers aqu\xed ...","fileUpload.dragDropClick":"Arrossega i deixa anar fitxers csv, geojson o json aqu\xed, o fes clic per seleccionar fitxers","chatGpt.initialMessage":"Hola, s\xf3c el ChatGPT! Pregunta\'m qualsevol cosa!","chatGpt.isTyping":"ChatGPT est\xe0 escrivint","chatGpt.inputPlaceholder":"Escriu el missatge aqu\xed","toolbar.title":"Barra d\'eines","toolbar.plotType":"Tipus de trama","toolbar.selectPlotType":"Seleccioneu el tipus de trama","toolbar.barPlot":"Diagrama de barres","toolbar.scatterPlot":"Diagrama de dispersi\xf3","toolbar.variable1":"Variable 1","toolbar.variable2":"Variable 2","toolbar.selectVariable":"Seleccioneu una variable","table.noData":"No hi ha dades disponibles","toolbar.choroplethMethod":"M\xe8tode de Coropleta","toolbar.selectChoroplethMethod":"Seleccionar M\xe8tode de Coropleta","toolbar.naturalBreaks":"Fractures Naturals","toolbar.quantileBreaks":"Fractures de Quantils","toolbar.percentileBreaks":"Fractures de Percentils","toolbar.hinge15Breaks":"Fractures de Frontissa 1.5","toolbar.hinge30Breaks":"Fractures de Frontissa 3.0","toolbar.standardDeviationBreaks":"Fractures de Desviaci\xf3 Est\xe0ndard","toolbar.numberOfBreaks":"N\xfamero de Fractures","toolbar.choroplethVariable":"Variable de Coroplet","toolbar.selectChoroplethVariable":"Seleccioneu Variable de Coroplet","toolbar.localMoranVariable":"Variable Local Moran","toolbar.selectLocalMoranVariable":"Seleccionar Variable Local Moran","toolbar.localMoranWeights":"Pesos Locals Moran","toolbar.selectLocalMoranWeights":"Seleccionar Pesos Locals Moran","toolbar.localMoranSignificance":"Signific\xe0ncia Local Moran","toolbar.queenWeights":"Pesos de la reina","toolbar.rookWeights":"Pesos del rook","toolbar.univariateAutocorrelationType":"Tipus d\'autocorrelaci\xf3 univariant","toolbar.selectUnivariateAutocorrelationType":"Seleccionar tipus d\'autocorrelaci\xf3","toolbar.localMoran":"Moran Local","toolbar.localGeary":"Geary Local","toolbar.localG":"G Local","toolbar.localGStar":"G* Local","toolbar.localJoinCount":"Compte d\'Uni\xf3 Local","toolbar.quantileLisa":"Quantil LISA"}'),f=JSON.parse('{"fileUpload.dropHere":"ファイルをここにドロップ ...","fileUpload.dragDropClick":"ここにcsv、geojson、またはjsonファイルをドラッグアンドドロップするか、クリックしてファイルを選択します","chatGpt.initialMessage":"こんにちは、ChatGPTです！何でも聞いてください！","chatGpt.isTyping":"ChatGPTが入力中","chatGpt.inputPlaceholder":"ここにメッセージを入力","toolbar.title":"ツールバー","toolbar.plotType":"プロットタイプ","toolbar.selectPlotType":"プロットタイプを選択","toolbar.barPlot":"バープロット","toolbar.scatterPlot":"スキャッタープロット","toolbar.variable1":"変数1","toolbar.variable2":"変数2","toolbar.selectVariable":"変数を選択","table.noData":"利用可能なデータがありません","toolbar.choroplethMethod":"コロプレス法","toolbar.selectChoroplethMethod":"コロプレス法を選択","toolbar.naturalBreaks":"自然ブレーク","toolbar.quantileBreaks":"四分位数ブレーク","toolbar.percentileBreaks":"パーセンタイルブレーク","toolbar.hinge15Breaks":"ヒンジ1.5ブレーク","toolbar.hinge30Breaks":"ヒンジ3.0ブレーク","toolbar.standardDeviationBreaks":"標準偏差ブレーク","toolbar.numberOfBreaks":"ブレーク数","toolbar.choroplethVariable":"コロプレス変数","toolbar.selectChoroplethVariable":"コロプレス変数を選択","toolbar.localMoranVariable":"ローカルモラン変数","toolbar.selectLocalMoranVariable":"ローカルモラン変数を選択","toolbar.localMoranWeights":"ローカルモランの重み","toolbar.selectLocalMoranWeights":"ローカルモランの重みを選択","toolbar.localMoranSignificance":"ローカルモランの重要性","toolbar.queenWeights":"クイーンの重み","toolbar.rookWeights":"ルークの重み","toolbar.univariateAutocorrelationType":"単変量自己相関の種類","toolbar.selectUnivariateAutocorrelationType":"自己相関の種類を選択","toolbar.localMoran":"ローカルモラン","toolbar.localGeary":"ローカルジェリー","toolbar.localG":"ローカルG","toolbar.localGStar":"ローカルG*","toolbar.localJoinCount":"ローカル結合数","toolbar.quantileLisa":"クァンタイルLISA"}'),p=JSON.parse('{"fileUpload.dropHere":"在此处放下文件...","fileUpload.dragDropClick":"在此处拖放csv、geojson或json文件，或点击选择文件","chatGpt.initialMessage":"你好，我是ChatGPT！向我提问！","chatGpt.isTyping":"ChatGPT正在输入","chatGpt.inputPlaceholder":"在此输入消息","toolbar.title":"工具栏","toolbar.plotType":"图表类型","toolbar.selectPlotType":"选择图表类型","toolbar.barPlot":"条形图","toolbar.scatterPlot":"散点图","toolbar.variable1":"变量1","toolbar.variable2":"变量2","toolbar.selectVariable":"选择变量","table.noData":"没有可用的数据","toolbar.choroplethMethod":"等值线图方法","toolbar.selectChoroplethMethod":"选择等值线图方法","toolbar.naturalBreaks":"自然断层","toolbar.quantileBreaks":"分位断层","toolbar.percentileBreaks":"百分位断层","toolbar.hinge15Breaks":"1.5铰链断层","toolbar.hinge30Breaks":"3.0铰链断层","toolbar.standardDeviationBreaks":"标准差分类","toolbar.numberOfBreaks":"分类数量","toolbar.choroplethVariable":"专题图变量","toolbar.selectChoroplethVariable":"选择专题图变量","toolbar.localMoranVariable":"本地莫兰变量","toolbar.selectLocalMoranVariable":"选择本地莫兰变量","toolbar.localMoranWeights":"本地莫兰权重","toolbar.selectLocalMoranWeights":"选择本地莫兰权重","toolbar.localMoranSignificance":"本地莫兰显著性","toolbar.queenWeights":"后相邻权重","toolbar.rookWeights":"车相邻权重","toolbar.univariateAutocorrelationType":"单变量自相关类型","toolbar.selectUnivariateAutocorrelationType":"选择自相关类型","toolbar.localMoran":"本地Moran","toolbar.localGeary":"本地Geary","toolbar.localG":"本地G","toolbar.localGStar":"本地G*","toolbar.localJoinCount":"本地JoinCount","toolbar.quantileLisa":"分位数LISA"}'),g={en:l,fi:u,pt:c,es:s,ca:d,ja:f,cn:p,ru:JSON.parse('{"fileUpload.dropHere":"Бросьте файлы сюда ...","fileUpload.dragDropClick":"Перетащите сюда csv, geojson или json файлы, или нажмите, чтобы выбрать файлы","chatGpt.initialMessage":"Привет, я ChatGPT! Спроси меня о чем угодно!","chatGpt.isTyping":"ChatGPT печатает","chatGpt.inputPlaceholder":"Введите сообщение здесь","toolbar.title":"Панель инструментов","toolbar.plotType":"Тип графика","toolbar.selectPlotType":"Выберите тип графика","toolbar.barPlot":"Гистограмма","toolbar.scatterPlot":"Диаграмма рассеяния","toolbar.variable1":"Переменная 1","toolbar.variable2":"Переменная 2","toolbar.selectVariable":"Выберите переменную","table.noData":"Данные недоступны","toolbar.choroplethMethod":"Метод хороплетов","toolbar.selectChoroplethMethod":"Выбрать метод хороплетов","toolbar.naturalBreaks":"Естественные разрывы","toolbar.quantileBreaks":"Квантильные разрывы","toolbar.percentileBreaks":"Процентильные разрывы","toolbar.hinge15Breaks":"Разрывы на шарнирах 1.5","toolbar.hinge30Breaks":"Разрывы на шарнирах 3.0","toolbar.standardDeviationBreaks":"Разрывы стандартного отклонения","toolbar.numberOfBreaks":"Количество разрывов","toolbar.choroplethVariable":"Хороплетная переменная","toolbar.selectChoroplethVariable":"Выберите Хороплетную переменную","toolbar.localMoranVariable":"Локальная переменная Морана","toolbar.selectLocalMoranVariable":"Выбрать локальную переменную Морана","toolbar.localMoranWeights":"Локальные веса Морана","toolbar.selectLocalMoranWeights":"Выбрать локальные веса Морана","toolbar.localMoranSignificance":"Локальная значимость Морана","toolbar.queenWeights":"Веса королевы","toolbar.rookWeights":"Веса ладьи","toolbar.univariateAutocorrelationType":"Тип унивариативной автокорреляции","toolbar.selectUnivariateAutocorrelationType":"Выберите тип автокорреляции","toolbar.localMoran":"Локальный Моран","toolbar.localGeary":"Локальный Геари","toolbar.localG":"Локальный G","toolbar.localGStar":"Локальный G*","toolbar.localJoinCount":"Локальный счетчик соединений","toolbar.quantileLisa":"Квантиль LISA"}')},y=a.createElement,h=function(e){var t=e.children,r=(0,o.v9)(function(e){return e.root.language});return y(i.Z,{messages:g[r],locale:r},t)}},43341:function(e,t,r){"use strict";r.d(t,{Z:function(){return U}});var n=r(90116),a=r(59499),o=r(45217),i=r(94500),l=r(57562),u=r(45244),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1?arguments[1]:void 0;return t.type===u.AF?t.payload:e};function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f={fileData:[],rawFileData:null},p=function(){var e,t,r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case u.sv.SET_DEFAULT_DATA:return d(d({},a),{},{fileData:o.payload.processedData,rawFileData:o.payload.rawData});case u.sv.SET_FILE_DATA:return r=o.payload,d(d({},a),{},{fileData:r});case u.sv.PROCESS_FILES:return void(console.log("processFilesUpdater",o.payload),o.payload.files.then(function(e){console.log("processFilesUpdater",e)}));case u.sv.SET_RAW_FILE_DATA:return d(d({},a),{},{rawFileData:o.payload});default:return a}};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h={showOpenFileModal:!1,showKeplerTableModal:!1,showGridView:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Ue.SET_OPEN_FILE_MODAL:return y(y({},e),{},{showOpenFileModal:t.payload});case u.Ue.SET_KEPLER_TABLE_MODAL:return y(y({},e),{},{showKeplerTableModal:t.payload});case u.Ue.SET_GRID_VIEW:return y(y({},e),{},{showGridView:t.payload});default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===u.LR?t.payload:e},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===u.KO?t.payload:e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===u.sF?t.payload:e},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===u.TF?t.payload:e},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1?arguments[1]:void 0;return t.type===u.Jr?t.payload:e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===u.iH?t.payload:e},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rook",t=arguments.length>1?arguments[1]:void 0;return t.type===u.ww?t.payload:e},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.05,t=arguments.length>1?arguments[1]:void 0;return t.type===u.Ln?t.payload:e},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===u.fK?t.payload:e},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===u.Q_?t.payload:e},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===u.Xw?t.payload:e},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===u.zN?t.payload:e},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===u.p1?t.payload:e},R=(0,o.UY)({language:c,file:p,selectedGraphVariables:m,selectedChoroplethVariable:b,plotType:O,choroplethMethod:E,numberOfBreaks:T,localMoranWeights:A,localMoranSignificance:P,selectedLocalMoranVariable:S,univariateAutocorrelationType:L,localMoranLayer:C,localMoranData:x,choroplethData:D,choroplethLayer:_,uiState:v}),I=r(12e3),k=r(41313),w=function(e){return function(t){return function(r){var n=t(r);if(r.type===k.A){var a=e.getState().root.language;e.dispatch({type:I.ActionTypes.SET_LOCALE,payload:{locale:a}})}return n}}};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var F=(0,i.createLogger)({predicate:function(e,t){return!["@@kepler.gl/LAYER_HOVER","@@kepler.gl/MOUSE_MOVE","@@kepler.gl/SET_FEATURES"].includes(t.type)}}),j=l.default.initialState({mapState:{latitude:41.96988329124103,longitude:-87.85179027000271},mapStyle:{styleType:"positron"},uiState:{readOnly:!0,currentModal:null}}).plugin({SET_FILTER_INDEXES:function(e,t){var r=t.payload,n=r.dataLabel,o=r.filteredIndex,i=e.visState,l=i.datasets,u=Object.keys(l).find(function(e){return l[e].label===n});if(!u)return e;var c=l[u];return c.filteredIndex=0===o.length?c.allIndexes:o,i.layers.filter(function(e){return e.config.dataId===u}).forEach(function(e){e.formatLayerData(l)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e)}}),Z=(0,o.UY)({keplerGl:j,root:R}),N=(0,l.enhanceReduxMiddleware)([w,F]),U=(0,o.jB)(Z,{},o.md.apply(void 0,(0,n.Z)(N)))},17394:function(){},50605:function(){},35508:function(){}}]);